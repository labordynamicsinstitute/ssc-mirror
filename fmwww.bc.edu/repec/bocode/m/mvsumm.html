<pre>
-------------------------------------------------------------------------------
help for <b>mvsumm</b>
-------------------------------------------------------------------------------
<p>
<b><u>Generate moving-window descriptive statistics in time series or panel</u></b>
<p>
        <b>mvsumm</b> <i>tsvar</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<i>weight</i>] <b>,</b> <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b>
                 <b><u>s</u></b><b>tat(</b><i>statistic</i><b>)</b> [ <b><u>w</u></b><b>indow(</b><i>#</i><b>)</b> <b>end</b> <b>force</b> ]
<p>
    <b>mvsumm</b> is for use with time-series data.  You must <b>tsset</b> your data before
    using <b>mvsumm</b>; see help tsset.
<p>
    <i>varname</i> may contain time-series operators; see help varlist.
<p>
<b><u>Description</u></b>
<p>
    <b>mvsumm</b> computes a moving-window descriptive statistic for <i>tsvar</i> which
    must be a time series variable under the aegis of <b>tsset</b>.  If a panel
    calendar is in effect, the statistic is calculated for each time series
    within the panel.  The moving-window statistic is placed in a new
    variable, specified with the <b>generate()</b> option.  The statistics available
    include minimum, maximum, other key percentiles, mean and standard
    deviation:  one of these and/or other statistics returned by <b>summarize</b>,
    or easily computable from what it returns, may be specified.  aweights or
    fweights may be specified.  Although <b>mvsumm</b> works with unbalanced panels
    (where the start and/or end points differ across units), <b>mvsumm</b> does not
    allow gaps within the observations of a time series; that is, the value
    of an observation for a given period may be missing, but the observation
    itself must be defined. Gaps in time series may be dealt with via the
    <b>tsfill</b> command.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>stat(</b><i>statistic</i><b>)</b> specifies the statistic desired, from the following list.
        This is a required option.
<p>
    one of           statistic
    ------           ---------          
    n N count        number of non-missing observations
    sum              sum 
    sum_w            sum of weight
    mean             mean
    sd SD            standard deviation
    Var var          variance
    se SE semean     standard error of the mean
    skew skewness    skewness
    kurt kurtosis    kurtosis
    min              minimum
    max              maximum
    p1               1st percentile 
    p5               5th percentile
    p10              10th percentile
    p25              25th percentile
    p50 med median   50th percentile (median)
    p75              75th percentile
    p90              90th percentile
    p95              95th percentile
    p99              99th percentile 
    iqr IQR          interquartile range (p75 - p25) 
    range            range (max - min) 
    
    <b>generate(</b><i>newvar</i><b>)</b> specifies the name of a new variable in which the
        results are to be placed.  This is a required option.
<p>
    <b>window(</b><i>#</i><b>)</b> specifies the width of the window for computation of the
        statistics, which should be an integer at least 2. By default,
        results for odd-length windows are placed in the middle of the window
        and results for even-length windows are placed at the end of the
        window. The defaults can be over-ridden by the <b>end</b> option.  The
        default is 3.
<p>
    <b>end</b> forces results to be placed at the end of the window in the case where
        the window width is an odd number.
<p>
    <b>force</b> forces results to be computed when some of a particular window's
        values are missing.
<p>
<p>
<b><u>Remarks</u></b> 
<p>
    Occasionally people want to use <b>if</b> and/or <b>in</b> when calculating moving
    summaries, but that raises a complication not usually encountered.  What
    would you expect from a moving summary calculated with either kind of
    restriction? Let us identify two possibilities:
<p>
        Weak interpretation: I don't want to see any results for the excluded
        observations.
<p>
        Strong interpretation: I don't even want you to use the values for
        the excluded observations.
<p>
    Here is a concrete example. Suppose as a consequence of some restriction,
    observations 1-42 are included, but not observations 43 on. But the
    moving summary for 42 will depend, among other things, on the value for
    observation 43 if the summary extends backwards and forwards and is of
    length at least 3, and it will similarly depend on some of the
    observations 44 onwards in some circumstances.
<p>
    Our guess is that most people would go for the weak interpretation, which
    is employed in <b>mvsumm</b>. If not, you should ignore what you don't want or
    even set unwanted values to missing afterwards by using <b>replace</b>.
<p>
<p>
<b><u>Examples</u></b>
<p>
    . webuse grunfeld
 
    . mvsumm invest, stat(mean) win(3) gen(inv3yavg) end
<p>
    . mvsumm invest, stat(sd) win(5) gen(inv5ysd) end
<p>
    . mvsumm D.mvalue, stat(median) win(5) gen(meddmval) end
<p>
<p>
<b><u>Authors</u></b>
<p>
    Christopher F. Baum, Boston College, USA
    baum@bc.edu
<p>
    Nicholas J. Cox, Durham University, U.K.
    n.j.cox@durham.ac.uk
<p>
<p>
<b><u>Acknowledgements</u></b>     
<p>
    This routine is based on Cox's <b>movsumm</b> and the authors' <b>statsmat</b>. Its
    development was inspired by a July 2002 discussion on Statalist.  Nick
    Winter and Vince Wiggins provided helpful comments. Ernest Berkhout
    helpfully identified some problems with the routine.
<p>
<p>
<b><u>Also see</u></b>
<p>
    On-line: summarize, tsset, tsfill
<p>
<p>
</pre>
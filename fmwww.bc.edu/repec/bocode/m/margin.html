<pre>
-------------------------------------------------------------------------------
help for <b>margin</b>                                 (This version: 05 October 2004)
-------------------------------------------------------------------------------
<p>
<b><u>Average marginal effects for categorical and limited dependent variable models</u></b>
<p>
        <b>margin</b> [<b>,</b> <b><u>c</u></b><b>ount</b> <b><u>d</u></b><b>ummies(</b><i>Varlist_1</i> [ \ <i>Varlist_2</i> \ ... \ <i>Varlist_N</i>]<b>)</b>
                 <b><u>e</u></b><b>form</b> <b><u>hascons</u></b> <b>mean</b> <b><u>m</u></b><b>odel(</b><i>stata_cmd</i><b>)</b> <b><u>p</u></b><b>ercent</b> <b><u>r</u></b><b>eplace</b> <b><u>t</u></b><b>able</b> ]
<p>
    where stata_cmd is one of
<p>
         [class 1:]     probit    logit    logistic  cloglog  xtprobit  xtlogit
         [class 2:]     oprobit   ologit   gologit   mlogit   biprobit
         [class 3:]     poisson   nbreg    zip       zinb
         [class 4:]     tobit     cnreg    intreg    heckman  heckprob
<p>
    and <i>Varlist_K</i> includes dummy variables where all of the dummies indicate
    different categories of the same underlying categorical variable.
<p>
<b><u>Description</u></b>
<p>
    <b>margin</b> calculates marginal effects, and standard errors for marginal
    effects using the delta method.  By default, <b>margin</b> calculates the
    average of partial and discrete changes over the observations. <b>margin</b> can
    also compute marginal effects at the sample means of the variables if the
    <b>mean</b> option is specified.  In either cases, calculations are restricted
    to the estimation sample.
<p>
    By default, the marginal effects calculated are as follows:
<p>
        [class 1:] changes in the probability of positive outcome
        [class 2:] changes in the probabilities of all possible outcomes
                   defined by the dependent variable(s)
        [class 3:] changes in the expected number of counts or in the
                   incidence rate (for <b>zip</b> and <b>zinb</b>, changes in <i>E(y|y&gt;0)</i>
                   and <i>Pr(y&gt;0)</i> also displayed)
        [class 4:] changes in the expected value of the dependent variable
                   <i>conditional</i> on the dependent variable being observed
                   (not censored)
<p>
    However, if the eform option is specified, <b>margin</b> calculates the changes
    in the value of <i>exp(xb)</i>, where <i>xb</i> is the linear prediction.
<p>
    <b>margin</b> can be also be used after commands that are not on the list above.
    For example, users may wish to obtain marginal effects after the survey
    version of <i>stata_cmd</i>, or after their own program. This is made possible
    by the <b>model()</b> option.
<p>
    <b>margin</b> can be used both as an estimation command and as a post-estimation
    command; see help est and postest. By default, <b>margin</b> behaves as a
    post-estimation command, i.e. it does not affect the estimation results.
    However, option <b>replace</b> forces <b>margin</b> to behave as an estimation command.
    This enables the use of post-estimation commands like <b>lincom</b> or <b>test</b>
    after <b>margin</b>.
<p>
    Typed without arguments, <b>margin</b> redisplays the marginal effects.
<p>
<b><u>Options</u></b>
<p>
    <b>count</b> modifies the calculation of marginal effects for count variables,
        i.e.  variables that take more than two values and all of the values
        are integers.  By default, <b>margin</b> treates count variables as
        continuous variables, thus marginal effects correspont to small
        changes in the independent variables.  If the count option is
        specified, the marginal effects are changes in probabilities when the
        count variables increases by unity.
<p>
    <b>dummies(</b><i>Varlist_1</i> [ \ <i>Varlist_2</i> \ ... \ <i>Varlist_N</i>]<b>)</b> modifies the
        calculation of marginal effects for dummy variables. Let <i>xvar</i> be a
        categorical variables with <i>K</i> (<i>K</i>&gt;2) categories. In this case, not
        xvar, but (<i>K</i>-1) dummies are included in the regression model. The
        estimated marginal effects for these <i>K</i>-1 dummies may be misleading
        (see the example below). The correct result is obtained if one
        specifies the dummy option by including the <i>K</i>-1 variables in
        <i>varlist_1</i>.
<p>
    <b>eform</b> forces <b>margin</b> to define marginal effects as changes in the value of
        <i>exp(xb)</i>, where <i>xb</i> is the linear prediction.
<p>
    <b>hascons</b> forces <b>margin</b> to display the expected value that corresponds to
        the constant term.  Note that this is not marginal effect (that is,
        change in expected value). For instance, after a <b>logit</b> model the
        <b>hascons</b> option adds a new line to the output showing the predicted
        probability of the event conditional on all explanatory variables are
        zero.
<p>
<p>
    <b>mean</b> forces <b>margin</b> to compute the marginal effects at the sample means of
        explanatory variables.
<p>
    <b>model(</b><i>stata_cmd</i><b>)</b> allows one to run <b>margin</b> after any command. <i>stata_cmd</i>
        must be one of the commands listed above. <b>margin</b> will produce correct
        results only if the estimation commannd issued before <b>margin</b> and
        <i>stata_cmd</i> have exactly the same link functions, i.e. the function
        which links the linear combination of variables and parameters to the
        outcome under study. It is the user's responsibility to ensure that
        this condition holds.
<p>
    <b>percent</b> causes <b>margin</b> to display the results in a percentage form.
<p>
    <b>replace</b> causes <b>margin</b> to overwrite the estimation results left behind.
<p>
    <b>table</b> causes <b>margin</b> to display a table containing the descriptive
        statistics of individual marginal effects.
<p>
<b><u>Remarks</u></b>
<p>
    <b>margin</b> is a work-in-progress; comments, suggestions, bug reports are
    welcome!  Please direct correspondence to the adress described at the end
    of the help file.
    To keep <b>margin</b> up-to-date, visit the website 
    http://www.bkae.hu/bartus/stata or type
        <b>net from http://www.bkae.hu/bartus/stata</b>
        <b>net install margin</b>
<p>
<p>
<b><u>Warning</u></b>
<p>
    Before using <b>margin</b>, make sure that you coded your dummy variables as 0/1
    variables.  Otherwise your dummies will be considered as being continuous
    variables, and you run the risk of obtaining misleading results.
<p>
<b><u>Examples</u></b>
<p>
    Illustrating the importance of the dummies( varlist_1 \ ... ) option
    Type the following commands:
<p>
        <b>. [save mydata, replace]</b>
        <b>.  tabi 60 30 10 \ 20 60 20 \ 10 10 80 , replace</b>
        <b>.  xi: mlogit col i.row [fw=pop]</b>
        <b>.  margin</b>
<p>
    You will see that the marginal effects do not correspond to changes in
    probabilities in the 3X3 table. Only the changes in the probabilities of
    the third outcome approximate the true changes, namely 0.1 and 0.7. The
    correct results are obtained after specifying the dummies(..) option:
<p>
        <b>.  margin , dummies(_I*)</b>
<p>
        
<b><u>Acknowledgements</u></b>
<p>
    Some parts of the code relies on margfx (version 30 Jul 1999 for Stata 5)
    written by Jonah B. Gelbach, Dept of Economics, Univ of MD at College
    Park.
<p>
<b><u>Also see</u></b>
<p>
    Online:  help for est, postest; mfx
<p>
<p>
<b><u>Author</u></b>
<p>
    Tamas Bartus
    Department of Sociology and Social Policy,
    Corvinus University Budapest (former University of Economics),
    Budapest, Hungary
    URL: http://www.uni-corvinus.hu/bartus
    Email: tamas.bartus@uni-corvinus.hu
<p>
<p>
<p>
<p>
<p>
<p>
<p>
</pre>
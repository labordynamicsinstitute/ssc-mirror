<pre>
-------------------------------------------------------------------------------
help for <b>mgen</b>
-------------------------------------------------------------------------------
<p>
<b><u>Apply generate to a matrix</u></b>
<p>
        <b>mgen</b> <i>exprlist</i> <b>,</b> <b><u>i</u></b><b>n(</b><i>matname</i><b>)</b> <b><u>o</u></b><b>ut(</b><i>matname</i><b>)</b> [ <b><u>c</u></b><b>ommon(</b><i>term</i><b>)</b> ]
<p>
    where <i>exprlist</i> is
<p>
        [[<b>`</b>]<b>"</b>]<i>expr1</i>[<b>"</b>[<b>'</b>]] [[<b>`</b>]<b>"</b>]<i>expr2</i>[<b>"</b>[<b>'</b>]] [[<b>`</b>]<b>"</b>]<i>expr3</i>[<b>"</b>[<b>'</b>]] ...
<p>
    and a single <i>expr</i> is
<p>
        [<i>new</i>|<i>old</i>]<i>colname</i>=<i>exp</i>
<p>
    (important notes: (1) <i>expr</i> must not contain spaces unless enclosed in
    quotes; (2) the <i>expr</i>s are processed one after another, i.e., <i>expr2</i> can
    refer to the column created by <i>expr1</i>, but not the other way round; (3) be
    careful with replacing columns and then referring to the replaced column
    in a later <i>expr</i>)
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mgen</b> interprets the columns of a matrix as variables, <b>generate</b>s new
    columns (or <b>replace</b>s old columns) according to a specified list of
    expressions, and then returns the generated (and the replaced) columns as
    a new matrix.
<p>
    Note: The column names of the input matrix and the specified new column
    names should conform to the naming conventions for variables.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>in(</b><i>matname</i><b>)</b> specifies the input matrix.
<p>
    <b>out(</b><i>matname</i><b>)</b> specifies the output matrix.
<p>
    <b>common(</b><i>term</i><b>)</b> specifies a common term which is added to the end of each of
        the expressions.
<p>
<p>
<b><u>Examples</u></b>
<p>
        . mat A=(1,2\3,4)
        . mat coln A=var1 var2
        . mat list A
        
        A[2,2]
            var1  var2
        r1     1     2
        r2     3     4
        
<p>
        . mgen var3=var1+var2 var4=var3^2, in(A) out(B)
        
        B[2,2]
            var3  var4
        r1     3     9
        r2     7    49
        
<p>
    Advanced application (note: tabstatmat is available from SSC):
<p>
        . tabstat e ft, by(year) s(mean) save not
        . tabstatmat A
        . mgen ne=(1-e) pt=e*(1-ft) ft=e*ft total=(ne+pt+ft)/100 , in(A)
            out(B) common(*100)
<p>
    Assume, "e" is labor force status (1 = in labor force, 0 = not in labor
    force) and "ft" is employment type (1 = fulltime, 0 = parttime, . =
    missing/not in labor force). The rows of matrix B will then contain the
    percentage distribution of nonemployed, partime employed and fulltime
    employed, e.g.:
<p>
        B[4,4]
                     ne         pt         ft      total
        1970  52.314139  5.8175698  41.868291        100
        1980  51.818218  6.9509233  41.230859        100
        1990  47.904043  9.7894623  42.306494        100
        2000  48.004791  13.477444  38.517765        100
        
<p>
<b><u>Author</u></b>
<p>
    Ben Jann, ETH Zurich, jann@soz.gess.ethz.ch
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[U] 14.3 Naming conventions</b>
<p>
</pre>
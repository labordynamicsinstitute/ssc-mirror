<pre>
-------------------------------------------------------------------------------
help for <b>nbstrat</b>                          (Joseph Hilbe; R. Martinez-Espineira)
-------------------------------------------------------------------------------
<p>
<b><u>Negative Binomial with Endogenous Stratification</u></b>
<p>
        <b>nbstrat</b>  <i>depvar</i> [<i>varlist</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [, <b><u>off</u></b><b>set(</b><i>varname</i><b>)</b>
             <b><u>exp</u></b><b>osure(</b><i>varname</i><b>)</b> <b><u>cl</u></b><b>uster(</b><i>varname</i><b>)</b> <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <b><u>from</u></b><b>(</b><i>asis</i><b>)</b> <b><u>ir</u></b><b>r</b>
             <b><u>rob</u></b><b>ust</b> <b>nolog</b> <i>maximize_options</i> <i>survey_options</i>]
<p>
<p>
    <b>aweight</b>s, <b>fweight</b>s, <b>iweight</b>s, and <b>pweight</b>s are allowed; see help weights.
<p>
    <b>nbstrat</b> provides access to all <i>maximize</i> options; see help maximize.
<p>
    <b>nbstrat</b> provides access to all <i>survey</i> options; see help svy.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>nbstrat</b> fits a maximum-likelihood negative binomial with endogenous
    stratification regression model of <i>depvar</i> on <i>indepvars</i>, where <i>depvar</i> is a
    non-negative count variable &gt; 0.
<p>
    <b>nbstrat</b> acccepts all of the <i>help maximize</i> options, the <i>constraint()</i>
    option, and all survey options and capabilities documented in <b>[SVY]</b>;
    including multi-level surveys; poststratification; and BRR, jackknife,
    and linearization VCE estimators.
<p>
    This program uses <b>ml lf</b> method.
<p>
<p>
<b><u>Options</u></b>
<p>
        +-------+
    ----+ Model +------------------------------------------------------------
<p>
    <b>offset(</b><i>varname</i><b>)</b> specifies a <i>varname</i> in model with coefficient constrained
        to 1.
<p>
    <b>exposure(</b><i>varname</i><b>)</b> specifies a <i>ln(varname)</i> in model with coefficient
        constrained to 1.
<p>
    <b>constraints(</b><i>constraints</i><b>)</b> apply specified linear constraints.
<p>
<p>
<p>
        +-----------+
    ----+ SE/Robust +--------------------------------------------------------
<p>
    <b>cluster(</b><i>varname</i><b>)</b>
<p>
    <b>robust</b> specifies that the Huber/White/sandwich estimator of variance is
        to be used in place of the traditional calculation.  <b>robust</b> combined
        with <b>cluster()</b> allows observations which are not independent within
        cluster (although they must be independent between clusters).  If you
        specify <b>pweight</b>s, <b>robust</b> is implied.
<p>
    <b>vce(</b><i>options</i><b>)</b> allowed. <b>vce()</b> supports <i>robust</i>, <i>opg</i>, and <i>native</i>.  <b>vce</b> does
        not support options <i>bootstrap</i> or <i>jacknife</i>, However, <b>nbstrat</b> does
        support the <b>bootstrap</b> and <b>jacknife</b> commands, so these modeling
        capabilities are allowed.
<p>
<p>
        +-----------+
    ----+ Reporting +--------------------------------------------------------
   
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for confidence
        intervals of the coefficients; see help level.
<p>
    <b>nolog</b> suppresses the iteration log.
<p>
<p>
        +-------------+
    ----+ max options +------------------------------------------------------
<p>
<p>
    <i>maximize_options</i>: technique(algorithm_spec), [no]log, trace, hessian,
        gradient, showstep, shownrtolerance, difficult, iterate(#),
        tolerance(#), ltolerance(#), gtolerance(#), nrtolerance(#),
        nonrtolerance, from(init_specs); see maximize.
<p>
<p>
        +-------------+
    ----+ svy options +------------------------------------------------------
<p>
    <i>survey_options</i> are all available. See help svy
<p>
<p>
<p>
<p>
<b><u>Co-Author and support</u></b>
<p>
    <b>Joseph Hilbe</b>,<b> Arizona State University</b>:<b>  jhilbe@aol.com</b>
<p>
<p>
<b><u>Remarks</u></b>
<p>
    <b>nbstrat</b> is a user authored program. Support is by author. <b>nbstrat</b> was
    developed by <b>Joseph Hilbe</b>. <b>Roberto Martinez-Espineira</b>, Dept. of
    Economics, St. Francis Xavier Univ, Antigonish, Nova Scotia, Canada,
    provided the likelihood for the model as well as the remarks found below.
    Both are working together on research involving this model.
<p>
<p>
    <b>nbstrat</b> simultaneously accommodates three features of on-site samples
    dealing with count data: overdispersion relative to the Poisson;
    truncation at zero, and endogenous stratification due to oversampling of
    frequent users of the site. Endogenous stratification occurs when the
    likelihood of sampling observations is dependent on a choice made by the
    subject of study which is in itself the dependent variable. For example,
    in recreational demand analysis, if an on-site survey is conducted, one
    is more likely to interview subjects who visit the site more times per
    week and ask how many times they visit, hence the endogeneity. Also
    patients who visit the doctor more frequently are also more likely to be
    sampled if the survey is conducted at the clinic, etc.  Note: if the data
    are equidispersed but still truncated and endogenously stratified this
    model is equivalent to running poisson depvar-1 [varlist].
<p>
<p>
    <b>nbstrat</b> requires a nonnegative count response, or any positive real
    number. If the response has a value of zero, the algorithm will display
    an error message.
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>. nbstrat los hmo white type2 type3, nolog irr</b>
<p>
    <b>. nbstrat los hmo white type2 type3, nolog exposure(pop) cluster(state)</b>
<p>
    <b>. bootstrap: nbstrat los hmo white type2 type3, nolog irr</b>
<p>
<p>
<b><u>Also see</u></b>
<p>
    Reference:<b>  Shaw, D. (1988), On-Site Samples' Regression, J Econometrics</b>
             <b>37, 211-223.</b>
<p>
    Reference:<b>  Englin, J. and J. Shonkwiler (1995a). Estimating social</b>
             <b>welfare using count data models: An application under conditions</b>
             <b>of endogenous stratification and truncation. Review of Economics</b>
             <b>and Statistics 77, 104-112.</b>
<p>
<p>
    Online:  <b>help</b> <b>nbreg</b>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>nnipolate</b>
-------------------------------------------------------------------------------
<p>
<b><u>Nearest neighbour interpolation</u></b>
<p>
        <b>nnipolate</b> <i>yvar</i> <i>xvar</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,</b> <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b>
                 [<b>ties(</b><i>ties_rule</i><b>)</b>]
<p>
    <b>by</b> <i>...</i> <b>:</b> may be used with <b>nnipolate</b>; see help by.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>nnipolate</b> creates <i>newvar</i> by averaging non-missing values of <i>yvar</i> and
    using nearest neighbour interpolation of missing values of <i>yvar</i>, given
    <i>xvar</i>. That is, provided that <i>xvar</i> is not missing,
<p>
    1. When <i>yvar</i> is not missing, <i>newvar</i> is the mean of <i>yvar</i> over observations
    with the same value of <i>xvar</i>. If a value of <i>xvar</i> is unique, then each mean
    is just the same as the value of <i>yvar</i> at that point.
<p>
    2. When <i>yvar</i> is missing, <i>newvar</i> is filled in using nearest neighbour
    interpolation. As interpolation is with respect to <i>xvar</i>, that means the
    value of the previous known value of <i>yvar</i> or the value of the next known
    value of <i>yvar</i>, depending on which is nearer in terms of <i>xvar</i>. Previous or
    next mean with lower or higher values of <i>xvar</i>.
<p>
    3. When previous and next values are equally distant from a known value,
    users have a choice of rules that they may wish applied. By default,
    <b>nnipolate</b> uses the mean of the two values. The <b>ties()</b> option provides
    alternative rules.
<p>
<p>
<b><u>Remarks</u></b> 
<p>
    This method is presumably most natural or appealing when the underlying
    pattern of change is step-functional, so that the series being
    interpolated is piecewise constant.
<p>
    This interpolation method also extrapolates, as unknown values before the
    first known value and unknown values after the last known value are
    replaced by those respective known values.
<p>
    The examples are based on the help for ipolate in Stata 10 up.  Any Stata
    8 or 9 users will need to substitute their own.
<p>
    'Neighbour' is the standard spelling in (British) English.  'Neighbor' is
    the standard spelling in American English.
<p>
    <b>nnipolate</b> does not support interpolation in two or more dimensions.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>generate()</b> is not optional; it specifies the name of the new variable to
        be created.
<p>
    <b>ties()</b> specifies an alternative to the default rule whereby previous and
        next values equally distant from a given point are averaged. The user
        may choose one of <b><u>n</u></b><b>ext</b> (next value is used), <b><u>p</u></b><b>revious</b> (previous value
        is used), <b><u>mi</u></b><b>nimum</b> (smaller value is used), or <b><u>ma</u></b><b>ximum</b> (larger value
        is used). As indicated, any unambiguous abbreviation is allowed.
<p>
<p>
<b><u>Examples</u></b>
<p>
    ---------------------------------------------------------------------------
    Setup
        <b>. webuse ipolxmpl1</b>
<p>
    List the data
        <b>. list, sep(0)</b>
<p>
    Create <b>y1</b> containing a nearest neighbour interpolation of <b>y</b> on <b>x</b> for
    missing values of <b>y</b>
        <b>. nnipolate y x, gen(y1)</b>
<p>
    Use alternative rules for handling ties:
        <b>. nnipolate y x, ties(next) gen(ynext)</b>
        <b>. nnipolate y x, ties(prev) gen(yprev)</b>
        <b>. nnipolate y x, ties(max) gen(ymax)</b>
        <b>. nnipolate y x, ties(min) gen(ymin)</b>
<p>
    List the results
        <b>. list, sep(0)</b>
<p>
    ---------------------------------------------------------------------------
    Setup
        <b>. webuse ipolxmpl2</b>
<p>
    Show years for which the circulation data are missing
        <b>. tabulate circ year if circ == ., missing</b>
<p>
    Create <b>csicirc</b> containing a nearest neighbour interpolation of <b>circ</b> on
    <b>year</b> for missing values of <b>circ</b> and perform this calculation separately
    for each <b>magazine</b>
        <b>. by magazine: nnipolate circ year, gen(csicirc)</b>
    ---------------------------------------------------------------------------
<p>
<p>
<b><u>Author</u></b>
<p>
    Nicholas J. Cox, Durham University, U.K.
    n.j.cox@durham.ac.uk
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[D] ipolate</b>
<p>
    On-line:  help for ipolate, help for cipolate (if installed), help for 
</pre>
<pre>
<p>
help for <b>margeff</b>                                Version 2.2.0  (20 August 2009)
-------------------------------------------------------------------------------
<p>
<b><u>Obtain partial effects after estimation</u></b>
<p>
    <b>margeff</b> [<b><u>c</u></b><b>ompute</b>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<b>,</b>
                <b>at(</b><i>atlist</i><b>)</b> <b><u>cons</u></b><b>tant</b> <b><u>d</u></b><b>ummies(</b><i>varlist_1</i> [<b>\</b> <i>varlist_2</i> ..]<b>)</b>
                <b><u>l</u></b><b>ink(</b><i>log</i>|<i>loglog</i>|<i>logc</i>|<i>nbinomial</i>|<i>power #</i>|<i>opower #</i><b>)</b>
                <b><u>m</u></b><b>odel(</b><i>stata_cmd</i><b>)</b> <b><u>nooff</u></b><b>set</b> <b><u>now</u></b><b>ght</b> <b><u>out</u></b><b>come(</b><i>#</i><b>)</b> <b><u>p</u></b><b>ercent</b> <b><u>r</u></b><b>eplace</b> ]
<p>
    <b>margeff</b> <b><u>r</u></b><b>eplay</b> [<b>,</b> <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> ]
<p>
    where <i>stata_cmd</i> is one of
<p>
        [group 1:] probit,  logit,  logistic, cloglog, heckprob 
        [group 2:] oprobit, ologit, mlogit,   biprobit 
        [group 3:] poisson, nbreg,  zip, zinb
        [group 4:] truncreg, cnreg,  tobit, heckman
<p>
    and <i>atlist</i> is
        { <b>mean</b> | <b>median</b> | <b>zero</b> [ <i>varname</i> <b>=</b> <i>#</i> [<b>,</b> <i>varname</i> <b>=</b> <i>#</i>] [<i>...</i>]] }
        { [<b>mean</b>] |[<b>median</b>] | [<b>zero</b>] <i>varname</i> <b>=</b> <i>#</i> [<b>,</b> <i>varname</i> <b>=</b> <i>#</i>] [<i>...</i>] }
<p>
    and <i>varlist_1</i> [<b>\</b> <i>varlist_2</i> ... ] are lists of dummy variables, where all
    dummies of a list indicate different categories of the same underlying
    categorical variable.
<p>
<b><u>Description</u></b>
<p>
    <b>margeff compute</b> analytically estimates partial effects after estimation.
    Standard errors of partial effects are also estimated using the delta
    method.  Partial effects can be obtained not only after the above listed
    models, but also after
<p>
        1. generalized linear models (see help for glm),
        2. the panel-data (<b>xt</b>) version of the supported models inlcuding
        <b>xtgee</b>,
        3. generalized ordered models (see help for gologit2 if installed).
<p>
    The default behavior of <b>margeff</b> and main alternatives to the defaults can
    be summarized as follows:
<p>
    <b>1.</b>  By default, <b>margeff</b> calculates average partial effects.  Estimation
        of partial effects evaluated at sample means or at any other
        evaluation points is also possible with the help of the <b>at(</b><i>atlist</i><b>)</b>
        option.  In either case, calculations are restricted to the
        estimation sample.
<p>
    <b>2.</b>  Partial effects are discrete partial changes in the quantities of
        interest as the variable under study increases by the unit of
        measurement.  For dummy variables (variables coded 0/1) and count
        variables, unit of measurement is 1.  For other variables, units of
        measurement are detected using an algorithm implemented in the
        official ado file <b>codebook</b>.  This partial change approach eases
        computations, and approximates very well the partial changes
        calculated using the classic marginal effects approach.
<p>
    <b>3.</b>  Quantities of interest are defined as follows:
<p>
        [group 1:] probability of positive outcome
        [group 2:] probabilities of all possible outcomes defined by the
                   dependent variable(s)
        [group 3:] expected number of counts or the incidence rate
        [group 4:] expected value of dependent variable conditional on the
                   dependent variable being observed
<p>
    <b>4.</b>  The calculations automatically adjust for <b>fweight</b>s, <b>iweight</b>s, or
        <b>pweight</b>s used during estimation.  If you wish to apply (different)
        weights, however, you can specify your own <b>fweight</b>s, <b>iweight</b>s, or
        <b>pweight</b>s; see help weights.
<p>
    <b>5.</b>  <b>margeff</b> behaves as a post-estimation command (see help postest).
        However, option <b>replace</b> forces <b>margeff</b> to behave as an estimation
        command (see help est).  This enables the use of post-estimation
        commands like <b>lincom</b> or <b>test</b> after <b>margeff</b>.
<p>
    Typed without arguments, <b>margeff</b> replays the results of the previous
    <b>margeff</b> computations, provided the last use of <b>margeff</b> was combined with
    the <b>replace</b> option.
<p>
    <b>margeff replay</b> replays the results of the previous <b>margeff</b> computation.
<p>
<b><u>Options</u></b>
<p>
    <b>at(</b><i>atlist</i><b>)</b> forces <b>margeff</b> to estimate partial effects at points specified
        in <i>atlist</i>, instead of estimating average partial effects.
<p>
        <b>at(</b> <b>mean</b> | <b>median</b> | <b>zero</b> [ <i>varname</i> <b>=</b> <i>#</i> [<b>,</b> <i>varname</i> <b>=</b> <i>#</i> [<i>...</i>]] <b>)</b>
        specifies that the partial effects be evaluated at means, at medians
        of the independent variables, or at zeros.  It also allows users to
        specify particular values for one or more independent variables,
        assuming that the rest are means, medians, or zeros.
<p>
        <b>at(</b> [<b>mean</b>] |[<b>median</b>] | [<b>zero</b>] <i>varname</i> <b>=</b> <i>#</i> [<b>,</b> <i>varname</i> <b>=</b> <i>#</i>] [<i>...</i>] <b>)</b>
        specifies that the partial effects be evaluated at particular values
        for one or more independent variables, assuming that the rest are
        means.
<p>
    <b>constant</b> has the effect that quantities of interests computed at zero
        values of the independent variables are also displayed.  Thus the
        constant term shows the baseline prediction.
<p>
    <b>dummies(</b><i>varlist_1</i> [<b>\</b> <i>varlist_2</i> ... ]<b>)</b> modifies the calculation of partial
        effects if sets of indicator or dummy variables were included in the
        model.  The modification is the following: if the dummy variable
        <i>Dvar1</i> appears only in <i>varlist_1</i> then all variables appearing in
        <i>varlist_1</i> are set to zero, but variables appearing in <i>varlist_2</i> [<b>\</b>
        <i>varlist_3</i> ... ] are not affected.  This option should be specified so
        that each <i>varlist_k</i> ({it:k) = 1,2,...) consists of indicator or dummy
        variables referring to different categories of a single underlying
        variable.
<p>
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level in percent for the confidence
        intervals of the coefficients; see help level.
<p>
    <b>link(</b><i>log</i>|<i>loglog</i>|<i>logc</i>|<i>nbinomial</i>|<i>power #</i>|<i>opower #</i><b>)</b> forces <b>margeff</b> to define
        the quantity of interest as <i>F(xb)</i>, where <i>xb</i> is the linear prediction
        and <i>F</i> is the inverse of the link function.  For example, the option
        <b>link(</b><i>log</i><b>)</b> defines the quantity of interest as <i>exp(xb)</i>.
<p>
    <b>model(</b><i>stata_cmd</i><b>)</b> forces <b>margeff</b> to estimate partial effects as if the
        preceeding estimation command were <i>stata_cmd</i>.  <i>stata_cmd</i> must be one
        of the supported commands that are listed above.  This option is
        likely to be helpful if you wish to obtain partial effects after an
        estimation command having the same link function as <i>stata_cmd</i>.  It is
        the user's responsibility to ensure that the link functions are the
        same.
<p>
    <b>nooffset</b> causes <b>margeff</b> to ignore the offset variable during the
        calculations.
<p>
    <b>nowght</b> causes <b>margeff</b> to ignore weights used during previous estimation.
<p>
    <b>outcome(</b><i>#</i><b>)</b> causes <b>margeff</b> to display only one outcome.  This option is
        useful after estimation commands listed as [group 2] models.  The
        number specified is interpreted as follows:
        <b>1.</b> After <b>biprobit</b>, numbers 1 2 3 and 4 refer to outcomes p00 p01 p10
            p11.
        <b>2.</b> After <b>ologit</b>, <b>oprobit</b>, <b>gologit2</b> and <b>mlogit</b>, number # refers to the
            #th category of the dependent variable.  Thus, number 1 always
            indicates the lowest category. And if the dependent variable has,
            say, 5 categories, then number 5 indicates the highest category.
<p>
    <b>percent</b> causes <b>margeff</b> to display the results in a percentage form.
<p>
    <b>replace</b> causes <b>margeff</b> to overwrite the estimation results left behind.
        This option is useful if
<p>
        <b>1.</b>  you wish to include partial effects in publication-quality tables
            using either the official estimates table command or the
            user-written commands outreg or estout; or
        <b>2.</b>  your model contains a variable (such as age-squared) which is a
            mathematical transformation of another independent variable, and
            you wish to obtain the total effect of that variable (age) using
            the lincom or the nlcom command.
<p>
<b><u>Remarks</u></b>
<p>
    <b>margeff</b> is a work-in-progress; comments, suggestions, bug reports are
    welcome!  Please direct correspondence to the adress described at the end
    of the help file.
    To keep <b>margeff</b> up-to-date, visit the website
        http://www.uni-corvinus.hu/bartus
    or type
        <b>net from "http://web.uni-corvinus.hu/bartus/stata"</b>
        <b>net install margeff , replace</b>
<p>
 
<b><u>Examples</u></b>
<p>
    <b>Illustrating the importance of the dummies( varlist_1 \ ... ) option</b>
<p>
    Type the following commands:
<p>
    <b>. [save mydata, replace]</b>
    <b>.  tabi 60 30 10 \ 20 60 20 \ 10 10 80 , replace</b>
    <b>.  xi: mlogit col i.row [fw=pop]</b>
    <b>.  margeff</b>
    <b>.  margeff , at(mean)</b>
    <b>.  margeff , at(mean) dummies(_I*)</b>
<p>
    You can see that the first and the last {margeff} commands produced the
    expected results.
 
    <b>Easy calculation of the total effect of age</b>
<p>
    Suppose you wish to model employment status as a function of the usual
    human capital variables: gender, years of education, experience, and the
    square of experience. Assume further that the sample average of
    experience is 20. The total effect of experience on employment
    probabilities can be estimated as follows:
<p>
    <b>. logit employed gender edu exp exp2</b>
    <b>.  margeff, at(mean) replace</b>
    <b>.  lincom exp+40*exp2</b>
<p>
<p>
<b><u>Acknowledgements</u></b>
<p>
    Some parts of the code are taken from the official ado-files codebook.
    Earlier versions of margeff relied on margfx (version 30 Jul 1999 for
    Stata 5) written by Jonah B. Gelbach, Dept of Economics, Univ of MD at
    College Park.  Helpful suggestions were received from Richard Gates at
    StataCorp.
<p>
<b><u>Also see</u></b>
<p>
    Online:  help for est, postest; mfx
<p>
<p>
<b><u>Author</u></b>
<p>
    Tamas Bartus
    Institute of Sociology and Social Policy,
    Corvinus University, Budapest, Hungary
    URL: http://www.uni-corvinus.hu/bartus
    Email: tamas.bartus@uni-corvinus.hu
<p>
<p>
<p>
<p>
<p>
<p>
<p>
</pre>
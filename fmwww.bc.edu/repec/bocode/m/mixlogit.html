<pre>
<b>help mixlogit</b>                                  (SJ7-4: st0133_1; SJ7-3: st0133)
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>mixlogit</b> -- Mixed logit model
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>mixlogit</b> <i>depvar</i> [<i>indepvars</i>] [<i>if</i>] [<i>in</i>] [<i>weight</i>] <b>,</b> <b><u>gr</u></b><b>oup(</b><i>varname</i><b>)</b> <b><u>rand</u></b><b>(</b>
               <i>varlist</i><b>)</b> [<b>id(</b><i>varname</i><b>)</b> <b>ln(</b><i>#</i><b>)</b> <b>corr</b> <b>nrep(</b><i>#</i><b>)</b> <b>burn(</b><i>#</i><b>)</b> <b><u>num</u></b><b>erical</b>
               <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <b><u>const</u></b><b>raints(</b><i>numlist</i><b>)</b> <i>maximize_options</i>]
<p>
<p>
        <b>mixlpred</b> <i>newvar</i> [<i>if</i>] [<i>in</i>] [<b>,</b> <b>nrep(</b><i>#</i><b>)</b> <b>burn(</b><i>#</i><b>)</b>]
<p>
<p>
        <b>mixlcov</b> [<b>,</b> <b>sd</b>]
<p>
<p>
        <b>mixlbeta</b> <i>varlist</i> [<i>if</i>] [<i>in</i>] <b>,</b> <b><u>sav</u></b><b>ing(</b><i>filename</i><b>)</b> [<b>replace</b> <b>nrep(</b><i>#</i><b>)</b>
               <b>burn(</b><i>#</i><b>)</b>]
<p>
<p>
    <b>fweight</b>s, <b>iweight</b>s, and <b>pweight</b>s are allowed (see weight), but they are
        interpreted to apply to decision-makers, not to individual
        observations.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mixlogit</b> fits mixed logit models by using maximum simulated likelihood
    (Train 2003). See Hole (2007) for a description of the module with
    examples.
<p>
    The following postestimation commands are available after <b>mixlogit</b>:
<p>
    <b>mixlpred</b> calculates predicted probabilities. The predictions are
    available both in and out of sample; type <b>mixlpred</b> ... <b>if e(sample)</b> ...
    if predictions are wanted for the estimation sample only.
<p>
    <b>mixlcov</b> calculates the elements in the coefficient covariance matrix
    along with their standard errors. This command is relevant only when the
    coefficients are specified to be correlated; see the <b>corr</b> option below.
    <b>mixlcov</b> is a wrapper for <b>nlcom</b> (see <b>[R] nlcom</b>).
<p>
    <b>mixlbeta</b> calculates individual-level parameters corresponding to the
    variables in the specified <i>varlist</i> using the method proposed by Revelt
    and Train (2000) (see also Train, 2003, ch. 11). The individual-level
    parameters are stored in a data file specified by the user. As with
    <b>mixlpred</b> the predictions are available both in and out of sample; type
    <b>mixlbeta</b> ... <b>if e(sample)</b> ... if predictions are wanted for the
    estimation sample only.
<p>
<p>
<b><u>Options for mixlogit</u></b>
<p>
    <b>group(</b><i>varname</i><b>)</b> is required and specifies a numeric identifier variable
        for the choice occasions.
<p>
    <b>rand(</b><i>varlist</i><b>)</b> is required and specifies the independent variables whose
        coefficients are random. The random coefficients can be specified to
        be normally or lognormally distributed (see the <b>ln()</b> option).  The
        variables immediately following the dependent variable in the syntax
        are specified to have fixed coefficients (see the examples below).
<p>
    <b>id(</b><i>varname</i><b>)</b> specifies a numeric identifier variable for the decision
        makers.  This option should be specified only when each individual
        performs several choices; i.e., the dataset is a panel.
<p>
    <b>ln(</b><i>#</i><b>)</b> specifies that the last <i>#</i> variables in <b>rand()</b> have lognormally
        rather than normally distributed coefficients.  The default is <b>ln(0)</b>.
<p>
    <b>corr</b> specifies that the random coefficients are correlated.  The default
        is that they are independent. When the <b>corr</b> option is specified, the
        estimated parameters are the means of the (fixed and random)
        coefficients plus the elements of the lower-triangular matrix L,
        where the covariance matrix for the random coefficients is given by V
        = LL'.  The estimated parameters are reported in the following order:
        the means of the fixed coefficients, the means of the random
        coefficients, and the elements of the L matrix.  The <b>mixlcov</b> command
        can be used postestimation to obtain the elements in the V matrix
        along with their standard errors.
<p>
        If the <b>corr</b> option is not specified, the estimated parameters are the
        means of the fixed coefficients and the means and standard deviations
        of the random coefficients, reported in that order. The sign of the
        estimated standard deviations is irrelevant.  Although in practice
        the estimates may be negative, interpret them as being positive.
<p>
        The sequence of the parameters is important to bear in mind when
        specifying starting values.
<p>
    <b>nrep(</b><i>#</i><b>)</b> specifies the number of Halton draws used for the simulation.
        The default is <b>nrep(50)</b>.
<p>
    <b>burn(</b><i>#</i><b>)</b> specifies the number of initial sequence elements to drop when
        creating the Halton sequences. The default is <b>burn(15)</b>. Specifying
        this option helps reduce the correlation between the sequences in
        each dimension.  Train (2003, 230) recommends that <i>#</i> should be at
        least as large as the prime number used to generate the sequences. If
        there are K random coefficients, <b>mixlogit</b> uses the first K primes to
        generate the Halton draws.
<p>
    <b>numerical</b> specifies that numerical gradients should be used instead of
        analytical gradients (the default).  This option is useful for
        replicating the results from earlier versions of <b>mixlogit</b> but should
        otherwise not be used.
<p>
    <b>level(</b><i>#</i><b>)</b>; see estimation options.
<p>
    <b>constraints(</b><i>numlist</i><b>)</b>; see estimation options.
<p>
    <b>robust</b>, <b>cluster(</b><i>varname</i><b>)</b>; see estimation options.  The cluster variable
        must be numeric.
<p>
<p>
    <i>maximize_options</i>:  <b><u>dif</u></b><b>ficult</b>, <b><u>tech</u></b><b>nique(</b><i>algorithm_spec</i><b>)</b>, <b><u>iter</u></b><b>ate(</b><i>#</i><b>)</b>,
        <b><u>tr</u></b><b>ace</b>, <b><u>grad</u></b><b>ient</b>, <b>showstep</b>, <b><u>hess</u></b><b>ian</b>, <b><u>tol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>ltol</u></b><b>erance(</b><i>#</i><b>)</b>
        <b><u>gtol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>nrtol</u></b><b>erance(</b><i>#</i><b>)</b>, <b>from(</b><i>init_specs</i><b>)</b>; see maximize.
        <b>technique(bhhh)</b> is not allowed.
<p>
<p>
<b><u>Options for mixlpred</u></b>
<p>
    <b>nrep(</b><i>#</i><b>)</b> specifies the number of Halton draws used for the simulation.
        The default is <b>nrep(50)</b>.
<p>
    <b>burn(</b><i>#</i><b>)</b> specifies the number of initial sequence elements to drop when
        creating the Halton sequences. The default is <b>burn(15)</b>.  Specifying
        this option helps reduce the correlation between the sequences in
        each dimension.  Train (2003, 230) recommends that <i>#</i> should be at
        least as large as the prime number used to generate the sequences. If
        there are K random coefficients, <b>mixlogit</b> uses the first K primes to
        generate the Halton draws.
<p>
<p>
<b><u>Option for mixlcov</u></b>
<p>
    <b>sd</b> reports the standard deviations of the correlated coefficients instead
        of the covariance matrix.
<p>
<p>
<b><u>Options for mixlbeta</u></b>
<p>
    <b><u>sav</u></b><b>ing(</b><i>filename</i><b>)</b> save individual-level parameters to <i>filename</i>.
<p>
    <b>replace</b> overwrite <i>filename</i>.
<p>
    <b>nrep(</b><i>#</i><b>)</b> specifies the number of Halton draws used for the simulation.
        The default is <b>nrep(50)</b>.
<p>
    <b>burn(</b><i>#</i><b>)</b> specifies the number of initial sequence elements to drop when
        creating the Halton sequences. The default is <b>burn(15)</b>.  Specifying
        this option helps reduce the correlation between the sequences in
        each dimension.  Train (2003, 230) recommends that <i>#</i> should be at
        least as large as the prime number used to generate the sequences. If
        there are K random coefficients, <b>mixlogit</b> uses the first K primes to
        generate the Halton draws.
<p>
<p>
<b><u>Examples</u></b>
<p>
    Consider the following example that contains the data for one individual
    who makes two choices.  On the first choice occasion, the individual has
    three alternatives and on the second, four.  <b>choice</b> is the dependent
    variable, and <b>speed</b> and <b>cost</b> are the independent variables or alternative
    attributes:
<p>
<p>
<b>        choice speed cost group  id </b>
<b>          0      5    3     1    1         </b>
<b>          1      8    4     1    1         </b>
<b>          0      6    3     1    1       </b>
<b>          0      3    2     2    1         </b>
<b>          0      2    2     2    1         </b>
<b>          1      5    4     2    1         </b>
<b>          0      6    4     2    1         </b>
          
    A mixed logit model where <b>speed</b> has a normally distributed coefficient
    and <b>cost</b> has a fixed coefficient can be specified as follows:
<p>
        <b>. mixlogit choice cost, group(group) id(id) rand(speed)</b>
<p>
    A model where <b>speed</b> has a normally distributed coefficient and <b>cost</b> has a
    lognormally distributed coefficient can be specified as follows (given
    that the coefficient for <b>cost</b> is expected to be negative we generate a
    variable <b>mcost = -cost</b> since the lognormal distribution implies that the
    coefficient is positive):
<p>
        <b>. gen mcost = -cost</b>
        <b>. mixlogit choice, group(group) id(id) rand(speed mcost) ln(1)</b>
<p>
    <b>mixlogit</b> automatically generates starting values unless they are
    specified using the <b>from()</b> option. The starting values for the means are
    the estimated coefficients from a model where all coefficients are fixed
    (i.e., <b>clogit</b>), and the starting values for the standard
    deviations/elements in the L matrix are set to 0.1.
<p>
<p>
<b><u>References</u></b>
<p>
    Hole AR. 2007. Fitting mixed logit models by using maximum simulated
        likelihood.  <i>The Stata Journal</i> 7: 388-401.
<p>
    Revelt D, Train K. 2000. Customer-specific taste parameters and mixed
        logit:  Households' choice of electricity supplier. Working Paper,
        Department of Economics, University of California, Berkeley.
<p>
    Train KE. 2003. <i>Discrete Choice Methods with Simulation</i>.  Cambridge:
        Cambridge University Press.
<p>
<p>
<b><u>Author</u></b>
<p>
    This command was written by Arne Risa Hole (a.r.hole@sheffield.ac.uk),
        Department of Economics, University of Sheffield. Comments and
        suggestions are welcome.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] clogit</b>
<p>
    Online:  <b>[R] clogit</b>
</pre>
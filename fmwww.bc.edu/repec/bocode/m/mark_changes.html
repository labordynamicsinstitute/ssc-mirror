<pre>
<p>
-------------------------------------------------------------------------------
help for <b>mark_changes</b>
-------------------------------------------------------------------------------
<p>
<b><u>Generate a variable indicating where one or more variables changes value.</u></b>
<p>
        <b>mark_changes</b> <i>varlist</i>, <b>gen(</b><i>newvar</i><b>)</b>
<p>
<b><u>Description</u></b>
<p>
    <b>mark_changes</b> generates a variable that indicates the occurrence of a
    change in value in any of the variables in <i>varlist</i>. A change is deemed to
    occur where there is a difference in value between one observation and
    the prior observation.  <i>newvar</i> will be 1 where a change occurs, and 0
    otherwise.  Additionally, <i>newvar</i> will be 1 for the first observation.
<p>
    <b>mark_changes</b> can be combined with <b>by</b>, in which case, <i>newvar</i> will be 1 for
    the first observation in each by-group. See by.
<p>
<b><u>Remarks</u></b>
<p>
    <b>mark_changes</b> is useful for detecting changes in values of <i>varlist</i>, which
    is equivalent to detecting the starts of spells of the same values of
    <i>varlist</i>. Typically one might subsequently keep only these starting
    observations, as the others (the non-changing) may be deemed as
    irrelevant.  Alternatively, one might summ up <i>newvar</i>, thus generating a
    spell identifier (though spell by Nicholas Cox and Richard Goldstein,
    available from ssc, is another way to achieve that result).
<p>
    The order of observations is critical. You should be sure that the
    observations are in an order that makes sense with respect to the changes
    you want to detect; typically, there is a time-based variable involved.
    See sort.
<p>
    When using this with <b>by</b>, you would typically use the two-varlist form of
    the <b>by</b> specification, as in
<p>
        <b>. by personid (date): mark_changes</b> ...
<p>
    The reason is that you want to be sensitive to the primary divisions,
    marking the first observation in each group (the first observation for
    each person, in this example), but you would also want a specific order
    within these groups (sorting by date, in this example).
<p>
    Furthermore, in such a situation, it is important that the <b>by</b> variables
    uniquely identify the observations. That is, you want to <b>sort</b> on these
    variables, and have the resulting order of observations be unique.  
    assertky from ssc can be helpful in assuring this condition. Thus the
    prior example would be preceded by
<p>
        <b>. assertky personid date</b>
<p>
<p>
<b><u>Examples</u></b>
<p>
        <b>. mark_changes weight, gen(weight_change)</b>
<p>
        <b>. by personid (date): mark_changes locationcode jobcode salary,</b>
        <b>gen(ch)</b>
<p>
    The previous example might be followed by
<p>
        <b>. keep if ch</b>
        <b>. keep personid date locationcode jobcode salary</b>
<p>
    the idea being that the data may have many more variables, with many
    observations that report changes in these variable, but you want to
    notice only changes in a few selected variables. After the<b> keep if ch</b> it
    is usually appropriate to keep only the variables mentioned in the
    <b>mark_changes</b> command, as other variables may have values that are
    unrelated to the change. Thus, you are reducing variables and potentially
    reducing observations.
<p>
<p>
<b><u>Author</u></b>
</pre>
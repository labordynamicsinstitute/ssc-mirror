<pre>
-------------------------------------------------------------------------------
help for <b>mrtab</b>
-------------------------------------------------------------------------------
<p>
<b><u>One- and two-way tables of multiple responses</u></b>
<p>
    One-way tables:
<p>
        <b>mrtab</b> <i>varlist</i> [<i>weight</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<b>,</b>
               { <b><u>r</u></b><b>esponse(</b><i>numlist</i><b>)</b> | <b><u>cond</u></b><b>ition(</b><i>exp</i><b>)</b> } <b><u>p</u></b><b>oly</b> <b><u>count</u></b><b>all</b> <b><u>in</u></b><b>clude</b>
               <b><u>includem</u></b><b>issing</b> <b><u>case</u></b><b>wise</b> <b><u>ti</u></b><b>tle(</b><i>string</i><b>)</b> <b><u>w</u></b><b>idth(</b><i>#</i><b>)</b> <b><u>ab</u></b><b>brev</b> <b><u>nol</u></b><b>abel</b>
               <b><u>non</u></b><b>ames</b> <b><u>f</u></b><b>ormat(</b><i>%fmt</i><b>)</b> <b><u>int</u></b><b>eger</b> <b>sort</b>[<b>(</b><i>#</i><b>)</b>] <b><u>des</u></b><b>cending</b>
               <b><u>g</u></b><b>enerate(</b><i>prefix</i><b>)</b> <b><u>nof</u></b><b>req</b> ]
<p>
    Two-way tables:
<p>
        <b>mrtab</b> <i>varlist</i> [<i>weight</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,</b> <b>by(</b><i>varname</i><b>)</b> [ <b><u>col</u></b><b>umn</b> <b>row</b>
               <b><u>ce</u></b><b>ll</b> <b><u>rcol</u></b><b>umn</b> <b><u>rce</u></b><b>ll</b> <b><u>ch</u></b><b>i2</b> <b><u>lr</u></b><b>chi2</b> <b><u>m</u></b><b>test</b>[<b>(</b><i>spec</i><b>)</b>] <b><u>mlr</u></b><b>chi2</b> <b><u>w</u></b><b>rap</b>
               <i>one-way_options</i> ]
<p>
<p>
    <b>by</b> <i>...</i> <b>:</b> may be used with <b>mrtab</b>; see help by.
<p>
    <b>fweight</b>s and <b>aweight</b>s are allowed with <b>mrtab</b>; see help weights.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mrtab</b> tabulates multiple responses which are stored as a set of
    variables. For example, a survey question might be: "Which of the
    following devices do you have in your home?" The respondent is then given
    a list like "1.  Television, 2. Dishwasher, 3. Computer, 4. Dry cleaner
    ..." and may mark any number of devices. Such information can be stored
    in several ways. Two of them can be handled by <b>mrtab</b>:
<p>
    Indicator mode: Each item in the list is represented by an integer
        indicator variable (e.g., 1 = item was marked by the respondent, 0 =
        item was not marked).
<p>
    Polytomous mode (option <b>poly</b>): Each response is represented by a
        polytomous variable (first response, second response, third response,
        ...; this is convenient if the list of possible response categories
        is open or half-open). With the polytomous approach, the response
        variables may take on either integer or string values.
<p>
    In either case, <b>mrtab</b> will compute a one-way or a two-way table of the
    frequency distribution of the responses. For two-way tables <b>mrtab</b> also
    offers significance tests.
<p>
    If the data are stored in numeric format according to the polytomous
    mode, the labels of the response categories are taken from the value
    labels of the <i>first</i> variable. It is therefore crucial that the first
    variable contain labels for all possible items.
<p>
    There are several ways to determine the number of valid observations. By
    default, all cases with at least one valid response (as specified by
    <b>response()</b> or <b>condition()</b>) are taken into account. All other observations
    are treated as missing. In some situations, however, it is appropriate to
    include cases with zero responses (see the <b>include</b> and the <b>includemissing</b>
    option). Furthermore, one might want to consider cases with complete
    information only and neglect all cases with one or more missing values
    (option <b>casewise</b>).
<p>
    Use mrgraph to produce plots of multiple response distributions.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>abbrev</b> specifies that long response labels be abbreviated rather than
        wrapped.
<p>
    <b>by(</b><i>varname</i><b>)</b> tabulates the distribution of responses against the
        categories of <i>varname</i> (two-way table). The by-variable may be string
        or numeric.
<p>
    <b>casewise</b> specifies that cases with missing values for at least one of the
        response variables should be excluded listwise.
<p>
    <b>cell</b> displays the relative frequency of each cell in a two-way table
        (base: total number of valid observations).
<p>
    <b>chi2</b> requests the calculation of an overall Pearson chi-square statistic
        for the hypothesis that the distribution of response patterns is
        independent from the values of the by-variable (not allowed if
        <b>aweight</b>s are specified). That is: A standard chi2 test is applied to
        an expanded two-way table, where the rows represent unique
        combinations of responses.
<p>
    <b>column</b> displays in each cell of a two-way table the relative frequency of
        that cell within its column (base: column total of observations).
<p>
    <b>condition(</b><i>exp</i><b>)</b> is an alternative to the <b>response()</b> option. It specifies a
        true or false condition for the response values. The condition must
        include a wildcard <b>@</b> for which is substituted in turn each variable
        name. If the data are stored according to the indicator mode,
        <b>condition()</b> specifies the scope of values that indicate a response to
        the item. <b>condition()</b> defaults to <b>@==1</b> in this case. If the data are
        stored according to the polytomous mode, <b>condition()</b> specifies the
        scope of responses that are to be tabulated. The default is to
        tabulate every value observed for the response variables (except for
        missing values). In the case of string variables, the <b>condition()</b>
        option is obsolete. <b>condition()</b> may not be combined with <b>response()</b>.
<p>
    <b>countall</b> requests that repeated identical responses be added up. By
        default, repeated identical responses will only be counted once per
        case. If the data are in indicator mode, <b>countall</b> specifies that the
        observed values be interpreted as response counts. Notes:
        Significance tests may not be requested if <b>countall</b> is specified. Be
        careful with interpreting results that are labeled "percentage of
        cases"; though they reflect the mean number of responses per case,
        they cannot be interpreted as proportions.
<p>
    <b>descending</b> specifies that the sort order be descending. The default is to
        sort in ascending order. This is only relevant if <b>sort</b> is specified.
<p>
    <b>format(</b><i>%fmt</i><b>)</b> specifies the display format for relative frequencies.
<p>
    <b>generate(</b><i>prefix</i><b>)</b> creates a set of indicator variables reflecting the
        observed responses. The variables will be labeled and named according
        to the <i>prefix</i> provided. If <b>name(</b><i>string</i><b>)</b> is specified, the first eight
        characters of <i>string</i> are inserted into the variable labels. If the
        <b>chi2</b> and/or <b>lrchi2</b> options are specified, <b>generate</b> will additionally
        return a composite string variable, <i>prefix</i>rp, which reflects response
        patterns (each unique combination of responses is represented by a
        string of zeros and ones).
<p>
    <b>include</b> specifies that observations composed of zero responses be treated
        as valid. Only cases with "real" missings (., .a, .b, .c, ...) for
        all response variables will be excluded. Note that <b>include</b> will
        affect only the number of valid cases, i.e. both the absolute
        distribution of responses and the distribution relative to the total
        of responses will remain unchanged. In the case of string response
        variables, <b>include</b> specifies that cases with only empty strings ("")
        be treated as valid.
<p>
    <b>includemissing</b> is an enhancement to <b>include</b> and specifies that cases be
        treated as valid even if all response variables are missing.
        <b>includemissing</b> implies <b>include</b>. Specifying <b>includemissing</b> in
        connection with <b>casewise</b> has the effect that cases with missing
        values for at least one of the response variables will be treated as
        valid cases composed of zero responses.
<p>
    <b>integer</b> specifies the display of frequencies as integers even if <b>aweight</b>s
        are applied.
<p>
    <b>lrchi2</b> requests the calculation of an overall likelihood-ratio chi-square
        statistic (as an alternative to <b>chi2</b>). Note that the <b>lrchi2</b> option is
        not allowed if <b>aweight</b>s are specified and that the statistic will not
        be calculated if there are empty cells.
<p>
    <b>mtest</b> requests the calculation of separate Pearson chi-square statistics
        for each response response category. That is, a test is carried out
        for each response category to establish whether the probability of
        observing the response depends on the values of the by-variable (this
        option is not allowed if <b>aweight</b>s are specified). Multiple-test
        adjustments may be requested by specifying the method in brackets
        (e.g. <b>mtest(bonferroni)</b>). See help _mtest.
<p>
    <b>mlrchi2</b> requests <b>mtest</b> to use the likelihood-ratio chi-square statistics
        instead of Pearson chi-square.
<p>
    <b>nofreq</b> suppresses printing the frequencies (i.e., the whole frequency
        table will be suppressed unless <b>cell</b>, <b>column</b>, <b>row</b>, <b>rcell</b> or <b>rcolumn</b>
        is specified for two-way tables).
<p>
    <b>nolabel</b> suppresses the printing of labels.
<p>
    <b>nonames</b> suppresses the printing of variable names or category values in
        the left stub of the table, i.e. only the labels will be printed.
        (This option has no effect if the response variables are string
        variables.) Not allowed if the response variables are unlabeled or
        the <b>nolabel</b> option is specified.
<p>
    <b>poly</b> specifies that the responses are stored according to the polytomous
        mode. If <b>poly</b> is not specified, <b>mrtab</b> assumes that the responses are
        stored according to the indicator mode. However, string response
        variables imply <b>poly</b>.
<p>
    <b>rcell</b> displays the relative frequency of each cell in a two-way table
        (base: total number of responses).
<p>
    <b>rcolumn</b> displays in each cell of a two-way table the relative frequency
        of that cell within its column (base: column total of responses).
<p>
    <b>response(</b><i>numlist</i><b>)</b> specifies the (range of) response values. If the data
        are stored according to the indicator mode, <b>response()</b> specifies the
        value which indicates a response to the item.  <b>response()</b> defaults to
        1 in this case. Note that the indicator variables do not necessarily
        have to be dichotomous since a list or range of values may be
        specified. If the data are stored according to the polytomous mode,
        <b>response()</b> specifies the list or range of responses that are to be
        tabulated. The default is to tabulate every value observed for the
        response variables (except for missing values). In the case of string
        variables, the <b>response()</b> option is obsolete. <b>response()</b> may not be
        combined with <b>condition()</b>.
<p>
    <b>row</b> displays in each cell of a two-way table the relative frequency of
        that cell within its row (base: row total of responses; this is equal
        to the row total of observations unless <b>countall</b> is specified).
<p>
    <b>title(</b><i>string</i><b>)</b> may be used to label the multiple response set. <i>string</i> will
        be printed at the head of the table.
<p>
    <b>sort</b> displays the table rows in ascending order of frequency.  In the
        case of a two-way table the sorting will correspond to the row totals
        unless a reference column is specified in parentheses. That is,
        <b>sort(1)</b> will sort in order of the frequencies in the first column
        (first by-group), <b>sort(2)</b> in order of the frequencies in the second
        column, and so on. Specify the <b>descending</b> option to sort in
        descending order.
<p>
    <b>width(</b><i>#</i><b>)</b> specifies the maximum width (number of chars) used to display
        the labels of the responses. Labels that are too wide are wrapped (or
        abbreviated if the <b>abbrev</b> option is specified). The default width is
        30. The minimum width is 11.
<p>
    <b>wrap</b> requests that Stata take no action on wide two-way tables to make
        them readable. Unless <b>wrap</b> is specified, wide tables are broken into
        pieces to enhance readability.
<p>
<p>
<b><u>Examples</u></b>
<p>
    Indicator mode:
<p>
        . use http://fmwww.bc.edu/RePEc/bocode/d/drugs.dta
        (1997 Survey Data on Swiss Drug Addicts)
<p>
        . mrtab inco1-inco7, include title(Sources of income) width(24)
<p>
                                       |                Pct. of     Pct. of
                     Sources of income |      Freq.   responses       cases
        -------------------------------+-----------------------------------
        inco1          private support |        226       12.83       23.25
                     (partner, family, |
                              friends) |
        inco2           public support |        607       34.47       62.45
              (unemployment insurance, |
                      social benefits) |
        inco3             drug dealing |        293       16.64       30.14
        inco4    housebreaking, theft, |         50        2.84        5.14
                               robbery |
        inco5             prostitution |         82        4.66        8.44
        inco6       "mischeln"/begging |        151        8.57       15.53
        inco7         legal occupation |        352       19.99       36.21
        -------------------------------+-----------------------------------
                                 Total |       1761      100.00      181.17
<p>
        Valid cases:        972
        Missing cases:        0
<p>
    Polytomous mode:
<p>
        . mrtab pinco1-pinco6, poly response(1/7) include
           title(Sources of income) width(27)
<p>
                                       |                Pct. of     Pct. of
                     Sources of income |      Freq.   responses       cases
        -------------------------------+-----------------------------------
         1   private support (partner, |        226       12.83       23.25
                      family, friends) |
         2              public support |        607       34.47       62.45
              (unemployment insurance, |
                      social benefits) |
         3                drug dealing |        293       16.64       30.14
         4       housebreaking, theft, |         50        2.84        5.14
                               robbery |
         5                prostitution |         82        4.66        8.44
         6          "mischeln"/begging |        151        8.57       15.53
         7            legal occupation |        352       19.99       36.21
        -------------------------------+-----------------------------------
                                 Total |       1761      100.00      181.17
<p>
        Valid cases:        972
        Missing cases:        0
<p>
<p>
    The <b>response()</b> option in indicator mode:
<p>
        . codebook crime1
<p>
        -----------------------------------------------------------------------
        crime1                                                      hit someone
        -----------------------------------------------------------------------
<p>
                  type:  numeric (byte)
                         label:  crime
<p>
                 range:  [0,3]                        units:  1
         unique values:  4                        missing .:  65/972
<p>
            tabulation:  Freq.   Numeric  Label
                           716         0  no
                            62         1  yes, as committer
                            97         2  yes, as victim
                            32         3  yes, both
                            65         .  
        
        . mrtab crime1-crime5, include response(2 3)
           title(Crime (as victim)) nonames
<p>
                                       |                Pct. of     Pct. of
                     Crime (as victim) |      Freq.   responses       cases
        -------------------------------+-----------------------------------
                           hit someone |        129       41.08       14.22
          use a weapon against someone |         27        8.60        2.98
               sexual harassment, rape |         31        9.87        3.42
        robbery (including drug theft) |         99       31.53       10.92
                             blackmail |         28        8.92        3.09
        -------------------------------+-----------------------------------
                                 Total |        314      100.00       34.62
<p>
        Valid cases:        907
        Missing cases:       65
<p>
    Two-way table incl. tests:
<p>
        . mrtab crime1-crime5, include response(2 3)
           title(Crime (as victim)) nonames width(18)
           by(sex) column mtest(bonferroni)
<p>
        +------------------------+
        | Key                    |
        |------------------------|
        | <i>frequency of responses</i> |
        | <i> column pct. of cases </i> |
        +------------------------+
<p>
                           |   Sex of respondent
         Crime (as victim) |     female        male |      Total   chi2/p*
        -------------------+------------------------+-----------
               hit someone |         35          94 |        129     0.014
                           |      14.46       14.16 |      14.24     1.000
        -------------------+------------------------+-----------
              use a weapon |          4          22 |         26     1.754
           against someone |       1.65        3.31 |       2.87     0.927
        -------------------+------------------------+-----------
        sexual harassment, |         31           0 |         31    88.071
                      rape |      12.81        0.00 |       3.42     0.000
        -------------------+------------------------+-----------
        robbery (including |         32          66 |         98     1.982
               drug theft) |      13.22        9.94 |      10.82     0.796
        -------------------+------------------------+-----------
                 blackmail |         14          14 |         28     8.005
                           |       5.79        2.11 |       3.09     0.023
        -------------------+------------------------+-----------
                     Total |        116         196 |        312
                           |      47.93       29.52 |      34.44
                     Cases |        242         664 |        906
<p>
        * <i>Pearson chi2(1) / Bonferroni adjusted p-values</i>
<p>
        Valid cases:        906
        Missing cases:       65
<p>
<p>
<b><u>Saved Results</u></b>
<p>
    Scalars:
<p>
    <b>r(N)</b>         number of valid cases
    <b>r(N_miss)</b>    number of missing cases
    <b>r(r)</b>         number of response categories
    <b>r(c)</b>         number of by-groups if <b>by()</b> is specified
    <b>r(chi2)</b>      overall Pearson chi-squared if <b>chi2</b> is specified
    <b>r(p)</b>         p-value of the overall Pearson chi-squared
    <b>r(chi2_lr)</b>   overall likelihood-ratio chi-squared if <b>lrchi2</b> is specified
    <b>r(p_lr)</b>      p-value of the overall likelihood-ratio chi-squared
    <b>r(df)</b>        degrees of freedom of the overall chi2 tests
<p>
    Macros:
<p>
    <b>r(list)</b>      list of the labels of the responses if available
    <b>r(mode)</b>      either "indicator" or "poly" depending on the mode of the
                 multiple response variables
    <b>r(type)</b>      either "numeric" or "string" depending on the storage type
                 of the multiple response variables
    <b>r(bylist)</b>    list of the labels of the by-groups if available
    <b>r(bytype)</b>    either "numeric" or "string" depending on the storage type
                 of the by-variable
<p>
    Matrices:
<p>
    <b>r(responses)</b> frequencies of responses
    <b>r(cases)</b>     cases in by-groups if <b>by()</b> is specified
    <b>r(mchi2)</b>     Pearson chi-squared and (adjusted) p-values of the separate
                 tests if <b>mtest</b> is specified
    <b>r(mchi2_lr)</b>  likelihood-ratio chi-squared and (adjusted) p-values of the
                 separate tests if <b>mtest</b> and <b>mlrchi2</b> are specified
<p>
<b><u>Authors</u></b>
<p>
    Ben Jann, ETH Zurich, jann@soz.gess.ethz.ch
<p>
    Hilde Schaeper, HIS, Hannover, schaeper@his.de
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] tabulate</b>
<p>
    Online:  help for mrgraph, _mrsvmat, tabulate, _mtest
<p>
</pre>
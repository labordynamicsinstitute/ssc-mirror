<pre>
<b>help mata mm_colvar()</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>mm_colvar() -- Variance, by column</b>
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <i>real rowvector</i> <b>mm_colvar(</b><i>X</i> [<b>,</b> <i>w</i>]<b>)</b>
<p>
        <i>real matrix</i>    <b>mm_meancolvar(</b><i>X</i> [<b>,</b> <i>w</i>]<b>)</b>
<p>
<p>
        <i>real matrix</i>    <b>mm_variance0(</b><i>X</i> [<b>,</b> <i>w</i>]<b>)</b>
<p>
        <i>real matrix</i>    <b>mm_meanvariance0(</b><i>X</i> [<b>,</b> <i>w</i>]<b>)</b>
<p>
<p>
        <i>real matrix</i>    <b>mm_mse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>
<p>
        <i>real rowvector</i> <b>mm_colmse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>
<p>
<p>
        <i>real matrix</i>    <b>mm_sse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>
<p>
        <i>real rowvector</i> <b>mm_colsse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>
<p>
<p>
    where
<p>
            <i>X</i>:  <i>real matrix X</i> (rows are observations, columns variables)
<p>
            <i>w</i>:  <i>real colvector w</i>
<p>
           <i>mu</i>:  <i>real rowvector mu</i>
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mm_colvar(</b><i>X</i><b>,</b> <i>w</i><b>)</b> returns the variance of each column of <i>X</i>. Essentially,
<p>
        <b>mm_colvar(</b><i>X</i><b>,</b> <i>w</i><b>)</b> = <b>diagonal(variance(</b><i>X</i><b>,</b> <i>w</i><b>))'</b>
<p>
    See help for <b>mean()</b>. However, <b>mm_colvar()</b> does not compute the
    covariances and is therefore much faster than <b>diagonal(variance())</b> if <i>X</i>
    contains more than one column. Furthermore, note that <b>mm_colvar()</b> omits
    missing values in <i>X</i> by column, whereas <b>variance()</b> omits missing values
    casewise.
<p>
    <b>mm_meancolvar(</b><i>X</i><b>,</b><i> w</i><b>)</b> returns a matrix containing the mean and the variance
    of each column of <i>X</i>. (Means in row one, variances in row two.)
<p>
    <b>mm_variance0(</b><i>X</i><b>,</b> <i>w</i><b>)</b> returns the population variance matrix of <i>X</i>.
    <b>mm_variance0()</b> differs from official Stata's <b>variance()</b> (see help for
    <b>mean()</b>) in that it divides the deviation cross products by N instead of
    N-1, where N is the number of observations. Essentially,
<p>
        <b>mm_variance0(</b><i>X</i><b>,</b> <i>w</i><b>)</b> = <b>variance(</b><i>X</i><b>,</b> <i>w</i><b>)</b> * (N-1)/N
<p>
    However, <b>mm_variance0()</b> also produces correct results if N==1.
<p>
    <b>mm_meanvariance0(</b><i>X</i><b>,</b><i> w</i><b>)</b> returns <b>mean(</b><i>X</i><b>,</b><i>w</i><b>)\mm_variance0(</b><i>X</i><b>,</b><i>w</i><b>)</b>.
<p>
    <b>mm_mse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b> computes the mean squared errors matrix, where errors
    are defined as <i>X</i>:-<i>mu</i>.
<p>
    <b>mm_colmse()</b> computes mean squared errors by column.
<p>
    <b>mm_sse()</b> and <b>mm_colsse()</b> compute the sum of squared errors.
<p>
    <i>w</i> specifies the weights.  Specify <i>w</i> as 1 to obtain unweighted results.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    Examples for <b>mm_colvar()</b>:
<p>
        : x = invnormal(uniform(10000,3))
        
        : mm_colvar(x, 1)
                         1             2             3
            +-------------------------------------------+
          1 |   1.00018384   1.002621747   1.003480729  |
            +-------------------------------------------+
<p>
        : mm_meancolvar(x, 1)
                          1              2              3
            +----------------------------------------------+
          1 |  -.0024994158   -.0091972878   -.0035865732  |
          2 |    1.00018384    1.002621747    1.003480729  |
            +----------------------------------------------+
<p>
    The formula implemented in <b>mm_mse()</b> and <b>mm_colmse()</b> computes the mean
    squared error as the sum of squared errors divided by N, where N is the
    number of observations (or sum of weights if <i>w</i>!=1).
<p>
<p>
<b><u>Conformability</u></b>
<p>
    <b>mm_colvar(</b><i>X</i><b>,</b> <i>w</i><b>)</b>:
                <i>X</i>:  <i>n x k</i>
                <i>w</i>:  <i>n x 1</i> or <i>1 x 1</i>
           <i>result</i>:  <i>1 x k</i>
<p>
    <b>mm_meancolvar(</b><i>X</i><b>,</b> <i>w</i><b>)</b>:
                <i>X</i>:  <i>n x k</i>
                <i>w</i>:  <i>n x</i> 1 or 1 <i>x</i> 1
           <i>result</i>:  2 <i>x</i> k
<p>
    <b>mm_variance0(</b><i>X</i><b>,</b> <i>w</i><b>)</b>:
                <i>X</i>:  <i>n x k</i>
                <i>w</i>:  <i>n x 1</i> or <i>1 x 1</i>
           <i>result</i>:  <i>k x k</i>
<p>
    <b>mm_meanvariance0(</b><i>X</i><b>,</b> <i>w</i><b>)</b>:
                <i>X</i>:  <i>n x k</i>
                <i>w</i>:  <i>n x</i> 1 or 1 <i>x</i> 1
           <i>result</i>:  (<i>k</i>+1) <i>x</i> k
<p>
    <b>mm_mse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>, <b>mm_sse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>:
                <i>X</i>:  <i>n x k</i>
                <i>w</i>:  <i>n x 1</i> or <i>1 x 1</i>
               <i>mu</i>:  1 <i>x k</i>
           <i>result</i>:  <i>k x k</i>
<p>
    <b>mm_colmse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>, <b>mm_colsse(</b><i>X</i><b>,</b> <i>w</i><b>,</b> <i>mu</i><b>)</b>:
                <i>X</i>:  <i>n x k</i>
                <i>w</i>:  <i>n x</i> 1 or 1 <i>x</i> 1
               <i>mu</i>:  1 <i>x k</i>
           <i>result</i>:  1 <i>x</i> k
<p>
<b><u>Diagnostics</u></b>
<p>
    <b>mm_variance0()</b>, <b>mm_meanvariance0()</b>, <b>mm_mse()</b>, and <b>mm_sse()</b> omit from
    calculation rows of <i>X</i> or <i>w</i> that contain missing values (casewise
    deletion). If all rows contain missing values, then the returned result
    contains all missing values.
<p>
    Contrarily, <b>mm_colvar()</b>, <b>mm_meancolvar()</b>, <b>mm_colmse()</b>, and <b>mm_colsse()</b>
    omit missing values by column (i.e. not casewise).
<p>
<p>
<b><u>Source code</u></b>
<p>
    mm_colvar.mata, mm_variance0.mata, mm_mse.mata
<p>
<b><u>Author</u></b>
<p>
    Ben Jann, ETH Zurich, jann@soz.gess.ethz.ch
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online:  help for <b>[M-5] mean()</b>, <b>moremata</b>
</pre>
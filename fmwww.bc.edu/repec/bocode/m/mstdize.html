<pre>
-------------------------------------------------------------------------------
help for <b>mstdize</b>
-------------------------------------------------------------------------------
<p>
<b><u>Marginal standardization of two-way tables</u></b>
<p>
        <b>mstdize</b> <i>varname</i> <i>rowtotvar</i> <i>coltotvar</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>, by(</b><i>rowvar</i>
                 <i>colvar</i><b>)</b> [ <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b> <b><u>tol</u></b><b>erance(</b><i>#</i><b>)</b> <i>tabdisp_options</i> ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mstdize</b> takes a table of <i>varname</i>, with rows indexed by <i>rowvar</i> and columns
    indexed by <i>colvar</i>, and produces a new table containing <i>varname</i> scaled
    such that the row totals are given by <i>rowtotvar</i> and the column totals
    given by <i>coltotvar</i>.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    The algorithm is
<p>
        0. Initialise
            guess = varname
<p>
        1. Loop until max (| guess - previous guess |) &lt;= tolerance
            previous guess = guess
            guess = guess * target row total / guess row total
            guess = guess * target col total / guess col total
<p>
    The total over rows of the column totals should equal the total over
    columns of the row totals. That is, the two should lead to the same grand
    total.
<p>
    This procedure is known by many different names in several different
    disciplines, including statistics, economics and engineering. Some are
<p>
        biproportional matrices
        iterative proportional fitting
        raking
        RAS technique
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>by()</b> indicates <i>rowvar</i> and <i>colvar</i> and is required.
<p>
    <b>generate()</b> generates a new variable containing scaled values.
<p>
    <b>tolerance()</b> is a technical option indicating the criterion for
        convergence. This is the largest acceptable absolute difference
        between each guess and the previous guess (and also between the two
        totals of totals). Default 0.001.
<p>
    <i>tabdisp_options</i> are options of tabdisp.  Default <b>center format(%9.2f)</b>.
<p>
<p>
<b><u>Examples</u></b>
<p>
    Data used by Smith (1976), quoted by Agresti (1990, p.197; 2002, p.345):
    <b>. input freq schooling attitude</b>
    <b>. 209 1 1</b>
    <b>. 101 1 2</b>
    <b>. 237 1 3</b>
    <b>. 151 2 1</b>
    <b>. 126 2 2</b>
    <b>. 426 2 3</b>
    <b>.  16 3 1</b>
    <b>.  21 3 2</b>
    <b>. 138 3 3</b>
    <b>. end</b>
    <b>. gen r = 100</b>
    <b>. gen c = 100</b>
    <b>. mstdize freq r c, by(schooling attitude)</b>
<p>
    Data used by Friedlander (1961), quoted by Bishop et al. (1975, p.98):
    <b>. input freq age status</b>
    <b>. 1306 1 1</b>
    <b>. 83 1 2</b>
    <b>. 0 1 3</b>
    <b>. 619 2 1</b>
    <b>. 765 2 2</b>
    <b>. 3 2 3</b>
    <b>. 263 3 1</b>
    <b>. 1194 3 2</b>
    <b>. 9 3 3</b>
    <b>. 173 4 1</b>
    <b>. 1372 4 2</b>
    <b>. 28 4 3</b>
    <b>. 171 5 1</b>
    <b>. 1393 5 2</b>
    <b>. 51 5 3</b>
    <b>. 159 6 1</b>
    <b>. 1372 6 2</b>
    <b>. 81 6 3</b>
    <b>. 208 7 1</b>
    <b>. 1350 7 2</b>
    <b>. 108 7 3</b>
    <b>. 1116 8 1</b>
    <b>. 4100 8 2</b>
    <b>. 2329 8 3</b>
    <b>. end</b>
    <b>. gen rt = .</b>
    <b>. tokenize 1412 1402 1450 1541 1681 1532 1662 7644</b>
    <b>. qui forval i = 1/8 {</b>
    <b>.         replace rt = ``i'' if age == `i'</b>
    <b>. }</b>
    <b>. gen ct = .</b>
    <b>. tokenize 3988 11702 2634</b>
    <b>. qui forval j = 1/3 {</b>
    <b>.         replace ct = ``j'' if status == `j'</b>
    <b>. }</b>
    <b>. mstdize freq rt ct , by(age status)</b>
<p>
<p>
<b><u>References</u></b>
<p>
    Agresti, A. 1990.  <i>Categorical data analysis.</i>  New York: John Wiley.
<p>
    Agresti, A. 2002.  <i>Categorical data analysis.</i>  Hoboken, NJ: John Wiley.
<p>
    Bishop, Y.M.M., Fienberg, S.E. and Holland, P.W. 1975.  <i>Discrete</i>
        <i>multivariate analysis.</i>  Cambridge, MA: MIT Press.
<p>
    Friedlander, D. 1961.  A technique for estimating a contingency table
        given the marginal totals and some supplementary data.  <i>Journal of</i>
        <i>the Royal Statistical Society Series A</i> 124: 412-420.
<p>
    Smith, K.W. 1976.  Table standardization and table shrinking: aids in the
        traditional analysis of contingency tables.  <i>Social Forces</i> 54:
        669-693.
<p>
<p>
<b><u>Author</u></b>
<p>
    Nicholas J. Cox, Durham University, U.K.
    n.j.cox@durham.ac.uk
<p>
<p>
</pre>
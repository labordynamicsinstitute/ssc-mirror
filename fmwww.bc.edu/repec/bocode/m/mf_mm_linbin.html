<pre>
<b>help mata mm_linbin()</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>mm_linbin() -- Linear binning</b>
<p>
<b><u>Syntax</u></b>
<p>
        <i>real colvector</i> <b>mm_linbin(</b><i>x</i><b>,</b> <i>w</i><b>,</b> <i>g</i><b>)</b>
<p>
        <i>real colvector</i> <b>mm_fastlinbin(</b><i>x</i><b>,</b> <i>w</i><b>,</b> <i>g</i><b>)</b>
<p>
        <i>real colvector</i> <b>mm_exactbin(</b><i>x</i><b>,</b> <i>w</i><b>,</b> <i>g</i> [<b>,</b> <i>dir</i><b>,</b> <i>include</i>]<b>)</b>
<p>
        <i>real colvector</i> <b>mm_makegrid(</b><i>x</i> [<b>,</b> <i>m</i><b>,</b> <i>e</i><b>,</b> <i>min</i><b>,</b> <i>max</i>]<b>)</b>
<p>
<p>
    where
<p>
            <i>x</i>:  <i>real colvector</i> containing data points
<p>
            <i>w</i>:  <i>real colvector</i> containing weights
<p>
            <i>g</i>:  <i>real colvector</i> containing grid points
<p>
          <i>dir</i>:  <i>real scalar</i> idicating the direction of the intervals
                (default: right open)
<p>
      <i>include</i>:  <i>real scalar</i> idicating that data outside the grid be included
                in the first and last bins
<p>
            <i>m</i>:  <i>real scalar</i> specifying the number of equally spaced grid
                points (default is 512)
<p>
            <i>e</i>:  <i>real scalar e</i> extending the grid range
<p>
          <i>min</i>:  <i>real scalar</i> specifying the minimum grid value (default:
                <b>min(x)</b> - <i>e</i>)
<p>
          <i>max</i>:  <i>real scalar</i> specifying the maximum grid value (default:
                <b>max(x)</b> + <i>e</i>)
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mm_linbin()</b> returns linearly binned counts of <i>x</i> at the grid points <i>g</i> (<i>g</i>
    must be sorted).
<p>
    <b>mm_fastlinbin()</b> also performs linear binning but assumes <i>g</i> to be a
    (sorted) regular grid containing equidistant grid points.
<p>
    <b>mm_exactbin()</b> returns counts of <i>x</i> within the intervals defined by the
    grid points <i>g</i> (<i>g</i> must be sorted). The default is to use right open
    intervals (with the last interval closed). However, <i>dir</i>!=0 specifies that
    left open intervals be used (with the first interval closed).
    <b>mm_exactbin()</b> does not allow <i>x</i> to contain data outside the grid range,
    unless <i>include</i>!=0 is specified, in which case such data is included in
    the first and last bin, respectively.
<p>
    <i>w</i> in <b>mm_linbin()</b>, <b>mm_fastlinbin()</b>, and <b>mm_exactbin()</b> specifies weights
    associated with the observations in <i>x</i>. Specify <i>w</i> as 1 to obtain
    unweighted results.  The sum of returned counts is equal to the sum of
    weights.
<p>
    <b>mm_makegrid()</b> returns a grid of <i>m</i> equally spaced points over <i>x</i>. The
    default range of the grid is [<b>min(</b><i>x</i><b>)</b>,<b>max(</b><i>x</i><b>)</b>].  If <i>e</i> is specified, the
    range is set to [<b>min(</b><i>x</i><b>)</b>-<i>e</i>,<b>max(</b><i>x</i><b>)</b>+<i>e</i>].  Alternatively, specify <i>min</i> and/or
    <i>max</i> to determine the limits of the grid range.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    Linear binning: Let g(j) and g(j+1) be the two nearest grid points below
    and above observation x.  Then w*(g(j+1)-x)/(g(j+1)-g(j)) is added to the
    count at g(j) and w*(x-g(j))/(g(j+1)-g(j)) is added to the count at
    g(j+1), where w is the weight associated with x. Data below (above) the
    grid range is added to the count of the first (last) grid point.
<p>
<p>
<b><u>Conformability</u></b>
<p>
    <b>mm_linbin(</b><i>x</i><b>,</b> <i>w</i><b>,</b> <i>g</i><b>)</b>
    <b>mm_fastlinbin(</b><i>x</i><b>,</b> <i>w</i><b>,</b> <i>g</i><b>)</b>
             <i>x</i>:  <i>n x</i> 1
             <i>w</i>:  <i>n x</i> 1 or 1 <i>x</i> 1
             <i>g</i>:  <i>m x</i> 1, <i>m</i>&gt;=1
        <i>result</i>:  <i>m x</i> 1.
<p>
    <b>mm_exactbin(</b><i>x</i><b>,</b> <i>w</i><b>,</b> <i>g</i><b>,</b> <i>dir</i><b>,</b> <i>include</i><b>)</b>
             <i>x</i>:  <i>n x</i> 1
             <i>w</i>:  <i>n x</i> 1 or 1 <i>x</i> 1
             <i>g</i>:  <i>m x</i> 1, <i>m</i>&gt;=2
           <i>dir</i>:  1 <i>x</i> 1
       <i>include</i>:  1 <i>x</i> 1
        <i>result</i>:  <i>m</i>-1 <i>x</i> 1.
<p>
    <b>mm_makegrid(</b><i>x</i><b>,</b> <i>m</i><b>,</b> <i>e</i><b>,</b> <i>min</i><b>,</b> <i>max</i><b>)</b>:
             <i>x</i>:  <i>n x</i> 1
             <i>m</i>:  1 <i>x</i> 1
             <i>e</i>:  1 <i>x</i> 1
           <i>min</i>:  1 <i>x</i> 1
           <i>max</i>:  1 <i>x</i> 1
        <i>result</i>:  <i>m x</i> 1.
<p>
<p>
<b><u>Diagnostics</u></b>
<p>
    <b>mm_exactbin()</b> aborts with error if <b>min(</b><i>x</i><b>)</b> &lt; <i>g</i><b>[1]</b> or <b>max(</b><i>x</i><b>)</b> &gt; <i>g</i><b>[rows(</b><i>g</i><b>)]</b>
    (unless <i>include</i>!=0 is specified).
<p>
    <b>mm_linbin()</b>, <b>mm_fastlinbin()</b>, and <b>mm_exactbin()</b> produce erroneous results
    if <i>g</i> is not sorted or if <i>x</i>, <i>w</i>, or <i>g</i> contain missing.
<p>
    <b>mm_fastlinbin()</b> produces erroneous results if the values in <i>g</i> are not
    equidistant.
<p>
<p>
<b><u>Source code</u></b>
<p>
    mm_linbin.mata, mm_fastlinbin.mata, mm_exactbin.mata, mm_makegrid.mata
<p>
<p>
<b><u>Author</u></b>
<p>
    Ben Jann, ETH Zurich, jann@soz.gess.ethz.ch
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online:  help for <b>[M-5] range()</b>, <b>[M-4] utility</b>, <b>moremata</b>
</pre>
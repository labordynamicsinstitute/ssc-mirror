<pre>
<b>help mergepoly</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>mergepoly</b> -- Merge adjacent polygons from a shape boundary file
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>mergepoly</b> <i>id_var lat lon</i> <b>,</b> [ <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b> ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mergepoly</b> is used to merge adjacent polygons from a shape boundary file.
    Shape boundary files are usually obtained from outside sources and
    converted to Stata datasets using -shp2dta- (SSC). The shape database
    contains one record per feature and the coordinate dataset describes the
    shape of each feature in terms of points. The points, in order, form
    polygons.
<p>
    <b>mergepoly</b> combines adjacent polygons by removing all adjacent line
    segments. <b>mergepoly</b> creates new polygons that follow the outer border of
    the initial adjacent polygons.
<p>
    <i>id_var</i> is a numeric variable that identifies the geographic feature. <i>lat</i>
    <i>lon</i> are numeric variables that provide the latitude and longitude
    coordinates of each point. Note that when using -shp2dta- (available from
    SSC), the <i>id_var</i> is named by default _ID; the latitude variable is named
    _Y and the longitude is named _X.
<p>
<p>
<b><u>Options</u></b> 
<p>
    <b>generate()</b> specifies the name of the new numeric variable that identifies
        the new features that are created from the merged polygons.
<p>
<p>
<b><u>Example</u></b>
<p>
    Download the Census 2000 County Areas for the State of Texas in ArcView
    Shapefile (.shp) format
<p>
        <b>.</b> copy "http://www.census.gov/geo/cob/bdy/co/co00shp/co48_d00_shp.zip" 
&gt; "co48_d00_shp.zip"
        <b>.</b> unzipfile "co48_d00_shp.zip"
        
    Use -shp2dta- to convert to Stata datasets
<p>
        <b>.</b> shp2dta using "co48_d00.shp", data("tx_counties.dta") coor("tx_coordi
&gt; nates.dta")
<p>
    Draw the initial shapes
<p>
        <b>.</b> use "tx_coordinates.dta", clear
        <b>.</b> line _Y _X, lwidth(vvthin) cmissing(n) aspectratio(.95) xscale(off) y
&gt; scale(off) ylabel(minmax, nogrid) xlabel(minmax)
<p>
    Merge adjacent counties
<p>
        <b>.</b> mergepoly _ID _Y _X, gen(newid)
<p>
    Draw the new shapes
<p>
        <b>.</b> line _Y _X, lwidth(vvthin) cmissing(n) aspectratio(.95) xscale(off) y
&gt; scale(off) ylabel(minmax, nogrid) xlabel(minmax)
<p>
    Show which counties have segments on the borders of the new polygons
<p>
        <b>.</b> tabulate _ID newid
<p>
<p>
<b><u>Author</u></b>
<p>
    Robert Picard
    picard@netbox.com
<p>
<p>
<b><u>Acknowledgments</u></b>
<p>
    A question on Statalist from Karsten Pfaff was the stimulus for writing
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>mvcorr</b>
-------------------------------------------------------------------------------
<p>
<b><u>Generate moving-window correlations in time series or panel</u></b>
<p>
        <b>mvcorr</b> <i>tsvar1 tsvar2</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,</b> <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b> <b><u>w</u></b><b>indow(</b><i>#</i><b>)</b>
                 [ <b>end</b> <b>force</b> ]
<p>
    <b>mvcorr</b> is for use with time-series data.  You must <b>tsset</b> your data before
    using <b>mvcorr</b>; see help tsset.
<p>
    <i>varname</i> may contain time-series operators; see help varlist.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>mvcorr</b> computes a moving-window correlation coefficient for <i>tsvar1</i> and
    <i>tsvar2</i> which must be time series variables under the aegis of <b>tsset</b>.  If
    a panel calendar is in effect, the coefficient is calculated for each
    time series within the panel.  The correlation coefficient is placed in a
    new variable, specified with the <b>generate()</b> option.  Although <b>mvcorr</b>
    works with unbalanced panels (where the start and/or end points differ
    across units), <b>mvcorr</b> does not allow gaps within the observations of a
    time series; that is, the value of an observation for a given period may
    be missing, but the observation itself must be defined. Gaps in time
    series may be dealt with via the <b>tsfill</b> command.
<p>
    By using time-series operators, <b>mvcorr</b> may also be used to generate
    moving autocorrelations.
<p>
<p>
<b><u>Options</u></b>
    
    <b>generate(</b><i>newvar</i><b>)</b> specifies the name of a new variable in which the
        results are to be placed.  This is a required option.
<p>
    <b>window(</b><i>#</i><b>)</b> specifies the width of the window for computation of the
        statistics, which must be an integer and at least 3. By default,
        results for odd-length windows are placed in the middle of the window
        and results for even-length windows are placed at the end of the
        window. The first default can be over-ridden by the <b>end</b> option. This
        is a required option.
<p>
    <b>end</b> forces results to be placed at the end of the window in the case
        where the window width is an odd number.
<p>
    <b>force</b> forces results to be computed when some of a particular window's
        values are missing.
<p>
<p>
<b><u>Remarks</u></b> 
<p>
    Occasionally people want to use <b>if</b> and/or <b>in</b> when calculating moving
    correlations, but that raises a complication not usually encountered.
    What would you expect from a moving correlation calculated with either
    kind of restriction? Let us identify two possibilities:
<p>
        Weak interpretation: I don't want to see any results for the excluded
        observations.
<p>
        Strong interpretation: I don't even want you to use the values for
        the excluded observations.
<p>
    Here is a concrete example. Suppose as a consequence of some restriction,
    observations 1-42 are included, but not observations 43 on. But the
    moving correlation for 42 will depend, among other things, on the value
    for observation 43 if the summary extends backwards and forwards and is
    of length at least 3, and it will similarly depend on some of the
    observations 44 onwards in some circumstances.
<p>
    Our guess is that most people would go for the weak interpretation, which
    is employed in <b>mvcorr</b>. If not, you should ignore what you don't want or
    even set unwanted values to missing afterwards by using <b>replace</b>.
<p>
<p>
<b><u>Examples</u></b>
<p>
    . webuse grunfeld
 
    . mvcorr invest mvalue, win(5) gen(rho)
<p>
    . mvcorr invest L.invest, win(5) gen(acf) end
<p>
<p>
<b><u>Authors</u></b>
<p>
    Christopher F Baum, Boston College, USA
    baum@bc.edu
<p>
    Nicholas J. Cox, Durham University, U.K.
    n.j.cox@durham.ac.uk
<p>
<p>
<b><u>Acknowledgements</u></b>     
<p>
    This routine is based on Cox's <b>movsumm</b> and the authors' <b>mvsumm</b> and
    <b>statsmat</b>. Its development was encouraged by a query from Nathalie
    Carcenac.
<p>
<p>
<b><u>Also see</u></b>
<p>
    On-line: correlate, tsset, tsfill
<p>
</pre>
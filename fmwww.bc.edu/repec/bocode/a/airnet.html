<pre>
<p>
-------------------------------------------------------------------------------
help for <b>airnet</b>
-------------------------------------------------------------------------------
<p>
<b><u>Airline Traffic Network Construction</u></b>
<p>
        <b>airnet</b> <b>,</b> [ <b>options</b> ]
<p>
<b><u>Description</u></b>
<p>
    <b>airnet</b> creates weighted and directed inter-airport or inter-city networks
    using data from the Bureau of Transportation Statistics' Origin and
    Destination Survey (DB1D).  (NOTE: This command does not affect the data
    in memory.)
<p>
<p>
<b><u>Options</u></b>
    <b>stub(</b><i>str</i><b>)</b> specifies the stub (if any) used to name input (ticket<i>stub</i>.csv
        and coupon<i>stub</i>.csv) and output (airnet<i>stub</i>.dta) files.
    <b>alpha(</b><i>real</i><b>)</b> sets the alpha-level used for identifying likely business and
        leisure passengers.  The default is 0.05.
    <b><u>max</u></b><b>fare(</b><i>real</i><b>)</b> and <b><u>min</u></b><b>fare(</b><i>real</i><b>)</b> sets the maximum and minimum credible
        fares; fares outside these limits are not used in calculations to
        identify business and leisure passengers.  The defaults are $5000 and
        $20.
    <b><u>leg</u></b><b>type</b> separately reports the number of passengers traveling on each
        type of leg in a route network (i.e. first, last, middle, and only).
    <b>matrix</b> saves the route, origin-destination, business, and leisure
        networks in matrix form as separate comma-delimited files.
    <b>metro(</b><i>new </i>|<i> old</i><b>)</b> aggregates airports into metropolitan areas (cannot be
        used with <b>intl</b>; see below for details).
    <b>intl(</b><i>1 </i>|<i> 2 </i>|<i> 3 </i>|<i> 4</i><b>)</b> constructs a partial, international route network for
        the given quarter (cannot be used with <b>metro</b>; see below for details).
    <b><u>desc</u></b><b>riptives</b> returns selected descriptives concerning the raw data in
        <b>r()</b>.
<p>
<p>
<b><u>Input</u></b>
    <b>airnet</b> requires two input files, which may be obtained from the BTS
    website.  Both files must be located in the working directory.
<p>
      ticket<i>stub</i>.csv - A comma-delimited file generated from the DB1BTicket
      database, containing only the following variables: ItinID, RoundTrip,
      Passengers, ItinFare.  available here
 
      coupon<i>stub</i>.csv - A comma-delimited file generated from the DB1BCoupon
      database, containing only the following variables: ItinID, MktID,
      Origin, Dest, SeqNum.  available here
<p>
<p>
<b><u>Output</u></b>
    <b>airnet</b> produces several types of airline traffic networks, each stored in
    edgelist-format as a separate variable in airnet<i>stub</i>.dta:
<p>
      <i>Route</i> - Edges indicates the number of passengers that flew from <i>orig</i> to
      <i>dest</i>.  Using the <b>legtype</b> option decomposes this total by the leg's
      position in the passenger's trip: first leg, last leg, a middle leg, or
      the only leg.
 
      <i>Origin-Destination</i> (origdest) - Edges indicate the number of passengers
      that flew from an initial origin in <i>orig</i> to a final destination in
      <i>dest</i>; any intermediate stops are ignored.
 
      <i>Single-Destination Round-Trip</i> (sdrt) - A subset of the
      origin-destination network that includes only passengers taking
      single-destination round-trip flights.
 
      <i>Business Passengers</i> (business) - A subset of the SDRT network that
      includes only passengers that flew alone and paid a significantly
      above-average fare for travel between the same origin and destination
      airports.
 
      <i>Leisure Passengers</i> (leisure) - A subset of the SDRT network that
      includes only passengers that flew with one or more companions and paid
      a significantly below-average fare for travel between the same origin
      and destination airports.
<p>
<p>
<b><u>The -metro- option</u></b>
    Using the <b>metro</b> option aggregates airports into metropolitan areas, and
    thus results in the construction of intercity, rather than interairport,
    networks.  The aggregation is performed only for the 139 airports
    identified by the Federal Aviation Administration as "Primary Hubs" in
    2010.  This option also creates a variable containing the great circle
    distance (in km) between metropolitan areas, which is stored in the
    "distance" variable in the airnet<i>stub</i>.dta and, if the <b>matrix</b> option is
    specified, is saved as a matrix.  The aggregation units are set by the
    suboption:
<p>
      <b>metro(</b><i>old</i><b>)</b> - Airports are aggregated into Consolidated Metropolitan
      Statistical Areas (CMSAs) and Metropolitan Statistical Areas (MSAs)
      using 1999 US Census definitions.
 
      <b>metro(</b><i>new</i><b>)</b> - Airports are aggregated into Consolidated Statistical
      Areas (CSAs) and Metropolitan Statistical Areas (MSAs) using 2009 US
      Census definitions.
<p>
<p>
<b><u>The -intl- option</u></b>
    The <b>intl</b> option constructs a partial, international route network in
    addition to the complete, domestic networks constructed by <b>airnet</b>.  This
    network contains all intra-US route edges and all route edges between US
    and international airports, but does not include route edges between
    international airports.  It is stored in the "routeintl" variable in the
    airnet<i>stub</i>.dta, and if <b>matrix</b> is specified, is also saved as a matrix.
    International origin-destination pairs are coded as missing.  This
    international route network is constructed from supplementary BTS T-100
    data, and requires an additional input file:
<p>
      intl<i>stub</i>.csv - A comma-delimited file generated from the T-100
      International Segment database, containing only the following
      variables: Passengers, Origin, Dest, Quarter.
<p>
    This file may be obtained from the BTS website (available here) and must
    be located in the working directory.  The downloaded data should cover
    all months in the desired year, and the quarter of the BTS DB1B data
    (i.e. the data in ticket<i>stub</i>.csv and coupon<i>stub</i>.csv) should be identified
    in the <b>intl</b> option.  For example, if ticket<i>stub</i>.csv and coupon<i>stub</i>.csv
    contain data on air traffic in the 2nd quarter (April-June) of 2010, the
    intl<i>stub</i>.csv file should contain data for all months in 2010 and the
    option should be specified as <b>intl(</b><i>2</i><b>)</b>.
<p>
<p>
<b><u>Saved Results</u></b>
    If the <b>descriptives</b> option is specified, <b>airnet</b> saves the following in
    <b>r()</b>:
<p>
      <b>r(movements)</b> - Number of intra-US passenger movements
      <b>r(airports)</b> - Number of US airports
      <b>r(all_pass)</b> - Number of intra-US passengers
      <b>r(sdrt_pass)</b> - Number of intra-US passengers taking single-destination
      round-trips
      <b>r(lowfare)</b> - Number of intra-US passengers paying less than the minimum
      credible fare
      <b>r(highfare)</b> - Number of intra-US passengers paying more that the
      maximum credible fare
      <b>r(time)</b> - Command running time, in seconds.
<p>
<p>
<b><u>References</u></b>
Neal, Z. P. 2010. Refining the air traffic approach: An analysis of the US city
     network, Urban Studies 47: 2195-2215. (CLICK FOR PDF)
<p>
<b><u>Author</u></b>
Zachary Neal
Department of Sociology
Michigan Sate University
zpneal@msu.edu
</pre>
<pre>
-------------------------------------------------------------------------------
<b>help for anketest</b> 
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
  <b>anketest</b> ---Performs diagnostic tests for spatial autocorrelation in the
        residuals from OLS, SAR, IV, and IV-SAR models
<p>
<a name="contents"></a>        +--------------------+
    ----+  Table of Contents +-----------------------------------------------
<p>
  Syntax
  General description
  Description of the options
  Important remarks
  Examples
  References
  Citation
  Author information
-------------------------------------------------------------------------------
<p>
<a name="syntax"></a><b><u>Syntax</u></b>
<p>
    <b>anketest,</b> <b><u>w</u></b><b>name(</b><i>wght_name</i><b>)</b> <b><u>wf</u></b><b>rom(</b><i>Stata</i>|<i>Mata</i><b>)</b> <b>model(</b><i>ols</i>|<i>sar</i>|<i>iv</i>|<i>iv-sar</i><b>)</b>
        [<b>favor(</b><i>speed</i>|<i>space</i><b>)</b>]
<p>
<p>
    <i>options</i>                            Description
    -------------------------------------------------------------------------
    Options
        
      <b><u>w</u></b><b>name(</b><i>wght_name</i><b>)</b>                 indicate the name of the spatial
                                         weights matrix to be used
<p>
      <b><u>wf</u></b><b>rom(</b><i>Stata</i>|<i>Mata</i><b>)</b>                indicate the source of the spatial
                                         weights matrix
<p>
      <b>model(</b><i>ols</i>|<i>sar</i>|<i>iv</i>|<i>iv-sar</i><b>)</b>         indicate the estimated model
<p>
      <b>favor(</b><i>speed</i>|<i>space</i><b>)</b>               favor speed or space
<p>
<p>
    -------------------------------------------------------------------------
<p>
<a name="description"></a>        +-------------+
    ----+ Description +------------------------------------------------------
<p>
    <b>anketest</b> carries out diagnostic tests for spatial autocorrelation in the
    residuals from Ordinary Least Squares (OLS), spatial autoregressive
    (SAR), and instrumental variable regressions with or without a spatially
    lagged dependent variable (IV-SAR or IV).  A spatial weights matrix,
    which may exist as a Stata matrix loaded in memory or as a Mata file
    located in the working directory, is required.
 
<p>
        <b>anketest</b> requires Stata 9.2 or higher.
<p>
<p>
<a name="options"></a>        +---------+
    ----+ Options +----------------------------------------------------------
<p>
    <b>wname(</b><i>wght_name</i><b>)</b> specifies the name of the spatial weights matrix to be
        used.
<p>
    <b>wfrom(</b>Stata | Mata<b>)</b> indicates whether the spatial weights matrix is a
        Stata matrix loaded in memory or a Mata file located in the working
        directory. If the spatial weights had been created using spwmatrix,
        it should exist as a Stata matrix or as a Mata file.
<p>
    <b>model(</b><i>ols</i>|<i>sar</i>|<i>iv</i>|<i>iv-sar</i><b>)</b> indicates the model for which the residuals need
        to be tested. Specifying <b>model(</b><i>ols</i><b>)</b> implies a model estimated using
        the regress command. <b>model(</b><i>sar</i><b>)</b> implies a model containing a
        spatially lagged dependent variable estimated by spatial two-stage
        least squares (2SLS) using the Stata's official command ivregress or
        the user-written command ivreg29.  The <i>SAR</i> model may have also been
        estimated by maximum likelihood using the user-written command 
        spmlreg. <b>model(</b><i>iv</i><b>)</b> suggests a model estimated with (non-spatial)
        endogenous regressors, but without a spatially lagged dependent
        variable. <b>model(</b><i>iv-sar</i><b>)</b> indicates a model containing both
        (non-spatial) endogenous variables and a spatially lagged dependent
        variable. The command ivregress, or ivreg29 must have been used to
        estimate the <i>iv</i> model by 2SLS and the <i>iv-sar</i> model by spatial 2SLS.
        For model estimation by spatial 2SLS in <b>Stata</b> see splagvar.
<p>
    <b>favor(</b><i>speed</i>|<i>space</i><b>)</b> instructs <b>anketest</b> to favor speed or space when
        calculating the test statistics.  <b>favor(</b><i>speed</i><b>)</b> is the default. This
        option provides a tradeoff between speed and memory use. See [M-3]
        mata set.
<p>
<a name="remark"></a>        +-------------------+
    ----+ Important remarks +------------------------------------------------
<p>
    When testing the residuals from a spatial lag model estimated by maximum
        likelihood (ML), two spatial weights, which may be the same or
        different, are required, one for each spatial dependence structure
        (lag and error). If the name of the spatial weights matrix supplied
        to spmlreg with <b>weights()</b> for the estimation of the spatial lag model
        is the same as that of the spatial weights matrix specified with
        <b>wname()</b>, then that spatial weights matrix will be used for both
        structures. Otherwise, <b>anketest</b> will use the spatial weights matrix
        supplied to spmlreg with <b>weights()</b> for the lag structure and the
        spatial weights matrix specified with <b>wname()</b> for the error
        structure.
<p>
<p>
<p>
<a name="examples"></a>        +----------+
    ----+ Examples +---------------------------------------------------------
<p>
    1) Test for spatial autocorrelation in the residuals from an OLS model
<p>
        <b>. anketest, wname(mywght) wfrom(Mata) model(ols)</b>
<p>
  -----------------------------------------------------------------------------
<p>
    2) Test for spatial autocorrelation in the residuals from an IV model
<p>
        <b>. anketest, wname(mywght) wfrom(Mata) model(iv)</b>
<p>
  -----------------------------------------------------------------------------
<p>
    3) Test for spatial autocorrelation in the residuals from a model
        containing non-spatial endogenous right-handside variables and a
        spatially lagged dependent variable
<p>
        <b>. anketest, wname(mywght) wfrom(Mata) model(iv-sar)</b>
<p>
<p>
<a name="refs"></a><b><u>References</u></b>
<p>
<b>Anselin, L</b>., 2007. "Spatial Econometrics." In T. C. Mills and K. Patterson (Eds
&gt; ). <i>Palgrave Handbook of Econometrics. Vol 1, Econometric Theory</i>. 
New York: Palgrave MacMillan, pp. 901-969.
<p>
<b>Anselin, L</b>., 2001. <i>Spatial Econometrics</i>. In Baltagi, B. (Ed). <i>A Companion to Th</i>
<i>&gt; eoretical Econometrics</i>. 
Basil Blackwell: Oxford, UK, 310-330.
<p>
<b>Anselin, L</b>., 1988. <i>Spatial Econometrics: Methods and Models</i>. Kluwer Academic Pu
&gt; blishers, Dordrecht, The Netherlands.
<p>
<b>Anselin, L., Kelejian, H. H</b>., 1997. Testing for Spatial Error Autocorrelation i
&gt; n the Presence of Endogenous Regressors. 
<i>International Regional Science Review</i> 20, 153-182.
<p>
<p>
<a name="cita"></a><b><u>Citation</u></b>
<p>
Users should please cite anktest as:
<p>
<b>Jeanty, P.W.</b>, 2010. anketest: Stata module to perform diagnostic tests for spat
&gt; ial autocorrelation in the residuals from OLS, SAR, IV, and IV-SAR models. 
Available from ideas.repec.org/c/boc/bocode/s457113.html. 
<p>
<p>
<a name="author"></a><b><u>Author</u></b>
<p>
    <b>P. Wilner Jeanty</b>, Dept. of Agricultural, Environmental, and Development
    Economics, The Ohio State University
<p>
    Email to jeanty.1@osu.edu for any comments or suggestions.
<p>
<p>
<b><u>Also see</u></b>
<p>
</pre>
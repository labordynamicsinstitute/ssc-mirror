<pre>
<b>help armadiag</b>                                see also:  corrgram ac pac wntestq
<p>
-------------------------------------------------------------------------------
<p>
<b><u>Post-estimation residual diagnostics for time series</u></b>
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>armadiag</b> [<i>varname</i>] [<i>if</i>] [<i>in</i>] [<b>,</b> <b><u>a</u></b><b>rch</b> <b><u>d</u></b><b>fc(</b><i>d</i><b>)</b> <b><u>h</u></b><b>etrobust</b> <b><u>lag</u></b><b>s(</b><i>p</i><b>)</b>
                         <b><u>lev</u></b><b>el(</b><i>alpha</i><b>)</b> <b>yw</b> <b><u>nog</u></b><b>raph</b> <b><u>t</u></b><b>able</b> <b><u>lin</u></b><b>scale</b> <b>force</b>]
<p>
<b><u>Description</u></b>
<p>
<b>armadiag</b> is a post-estimation diagnostic tool for use after <b>arch</b>, <b>arima</b> or
<b>regress</b>. The residuals (standardized residuals with <b>arch</b>) are plotted together
with autocorrelations, partial autocorrelations and p-values of the Ljung-Box
Q-statistic. The variable <i>varname</i> is used instead of residuals if <i>varname</i> is
specified.
<p>
Optionally the square of the variable/residuals/standardized residuals is used
to allow detection of (remaining) ARCH-effects.
<p>
The degrees of freedom of the Q-statistic are adjusted for the number of
estimated ARMA-parameters and/or lags of the dependent variable. When the
squared residuals are investigated the degrees of freedom are corrected for the
number of ARCH-parameters.
<p>
Residuals are calculated for the estimation sample unless <i>if</i> or <i>in</i> is
specified.
<p>
You must <b>tsset</b> your data before using <b>armadiag</b>, see <b>[TS] tsset</b>.
<p>
<i>varname</i> may contain time-series operators; see tsvarlist.
<p>
<b><u>Options</u></b>
<p>
    <i>option</i>           Description
    -------------------------------------------------------------------------
<p>
    <b><u>a</u></b><b>rch</b>             Diagnostics for ARCH, i.e. the square of the residuals,
                       standardized residuals or variabe is plotted with
                       autocorrelations, partial autocorrelations and Q-stat
                       p-values for the square. Degrees of freedom are
                       adjusted for the number or ARCH-parameters.
<p>
    <b><u>d</u></b><b>fc(</b><i>n</i><b>)</b>           Override default degrees of freedom correction. The
                       default is to subtract the number of lagged dependent
                       variables and ARMA terms for models estimated with
                       <b>arch</b>, <b>arima</b> and <b>regress</b>. If <b>arch</b> is specified the
                       number of ARCH-terms are subtracted for models
                       estimated with <b>arch</b>.
<p>
    <b><u>h</u></b><b>etrobust</b>        Calculate Q-statistics that are robust to
                       heteroskedasticity of the ARCH-variety. Milhøj has
                       shown that the variance of the estimated
                       autocorrelations is different from 1/T when there is
                       ARCH and <b>hetrobust</b> corrects for this by scaling with a
                       consistent estimate of the variance.
<p>
    <b><u>lag</u></b><b>s(</b><i>p</i><b>)</b>          The number of lags to calculate statistics for. Default
                       is min(int(T/2)-2,40)
<p>
    <b><u>lev</u></b><b>el(</b><i>alpha</i><b>)</b>     Level for "confidence bands" in autocorrelation and
                       partial autocorrelation plots. Specified this way for
                       consistency with <b>ac</b> and <b>pac</b> which has it wrong. These
                       are not confidence intervals, a confidence interval
                       would be be centered on the estimate. They are 1-<i>alpha</i>
                       critical values for testing the null that the
                       autocorrelation or partial autocorrelation is zero.
                       The default is <i>alpha</i>=95, i.e. 5% critical values.
<p>
    <b>yw</b>               Calculate partial autocorrelations by using Yule-Walker
                       equations
<p>
    <b><u>nog</u></b><b>raph</b>          Do not plot results.
<p>
    <b><u>t</u></b><b>able</b>            Print results in a table like <b>corrgram</b>
<p>
    <b><u>lin</u></b><b>scale</b>         Plot p-values for Q-statistics on a linear scale. By
                       default the p-values are plotted on what is almost a
                       log scale to make the more interesting, small,
                       p-values easier to distinguish.
<p>
    <b>force</b>            Calculates statistics for residuals from other commands
                       than <b>arch</b>, <b>arima</b> or <b>regress</b>.  <i>This may or may not make</i>
                       <i>sense. Use at your own risk</i>
<p>
<b><u>References</u></b>
<p>
    Milhøj, A., (1985), "The Moment Structure of ARCH Processes,"
    <i>Scandinavian Journal of Statistics</i>, 12, 281-292.
<p>
<b><u>Examples</u></b>
<p>
    Setup
        <b>. webuse air2</b>
        <b>. gen lnair = ln(air)</b>
<p>
    Plot data, autocorrelations and partial autocorrelations for model order
    identification
        <b>. armadiag lnair</b>
        <b>. armadiag d.lnair</b>
        <b>. armadiag s12.lnair</b>
        <b>. armadiag ds12.lnair</b>
<p>
    Fit "airline model" and plot residual diagnostics
        <b>. arima lnair, arima(0,1,1) sarima(0,1,1,12)</b>
        <b>. armadiag</b>
<p>
    Check for presence of ARCH in residuals
        <b>. armadiag, arch</b>
<p>
<b><u>Author</u></b>
<p>
    Sune Karlsson, Örebro University, Sweden
    sune.karlsson@oru.se
<p>
<b><u>Also see</u></b>
<p>
</pre>
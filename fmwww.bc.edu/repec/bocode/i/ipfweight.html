<pre>
-------------------------------------------------------------------------------
help for <b>ipfweight</b>
-------------------------------------------------------------------------------
<p>
<b><u>IPF-Algorithm to create adjustment survey weights</u></b>
<p>
    <b>ipfweight</b> <i>varlist</i> [<b>if</b> <i>exp</i>]<b>,</b> <b><u>gen</u></b><b>erate(</b><i>newvar</i><b>)</b> <b><u>val</u></b><b>ues(</b><i>numlist</i><b>)</b> <b><u>maxit</u></b><b>er(</b><i>#</i><b>)</b>
              [<b><u>st</u></b><b>artwgt(</b><i>varname</i><b>)</b> <b><u>tol</u></b><b>erance(</b><i>#</i><b>)</b> <b><u>up</u></b><b>threshold(</b><i>#</i><b>)</b> <b><u>lo</u></b><b>threshold(</b><i>#</i><b>)</b>
              <b><u>mis</u></b><b>rep</b>]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>ipfweight</b> is based on the iterative proportional fitting algorithm (also
        known as raking) first proposed by Deming and Stephan (1940). Like
        Nick Winter's survwgt rake it performs a stepwise adjustment of
        survey sampling weights to achieve known population margins (e.g.
        sex, education, age etc.) but offers some additional features. The
        adjustment process is repeated until the difference between the
        weighted margins of the variables listed in <i>varlist</i> and the known
        population margins specified in <b>values()</b> is smaller than a tolerance
        value specified in <b>tolerance()</b> or the maximum number of iterations
        specified in <b>maxiter()</b> is obtained.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b><u>gen</u></b><b>erate(</b><i>newvar</i><b>)</b> creates a new variable containing the final weighting
    factors. It is required.
<p>
    <b><u>val</u></b><b>ues(</b><i>numlist</i><b>)</b> contains the known population margins. The order of the
        specified population margins in <i>numlist</i> has to correspond to the
        values of each variable in <i>varlist</i>.
<p>
    <b><u>maxit</u></b><b>er(</b><i>#</i><b>)</b> defines the maximum number of iterations. # has to be larger
        than 1.
<p>
    <b><u>st</u></b><b>artwgt(</b><i>varname</i><b>)</b> uses the values of <i>varname</i> as starting weights. For
        example, a variable containing design weights that transform a sample
        of households into a sample of individuals can be used here. If
        <b>startwgt()</b> is not specified, each case gets a starting weight of 1.
<p>
    <b><u>tol</u></b><b>erance(</b><i>#</i><b>)</b> specifies the maximum deviation between the weighted margins
        of the variables listed in <i>varlist</i> and the known population margins
        specified in <b>values()</b> that is tolerated. If <b>tolerance()</b> is not
        specified, the iterative process is repeated # times as specified in
        <b>maxiter(</b><i>#</i><b>)</b>.
<p>
    <b><u>up</u></b><b>threshold(</b><i>#</i><b>)</b> specifies an upper threshold for the final weighting
        factors. If a weighting factor exceeds this threshold, it is trimmed
        to # before the iterative process is continued. An upper threshold of
        about 5 is suggested (DeBell et al. 2009: 31).
<p>
    <b><u>lo</u></b><b>threshold(</b><i>#</i><b>)</b> specifies a lower threshold for the final weighting
        factors. If a weighting factor falls below this threshold, it is
        trimmed to # before the iterative process is continued.
<p>
    <b><u>mis</u></b><b>rep</b> replaces missing values in <i>varlist</i> with a weighting factor of 1
        before the iteration process is continued. If <b>misrep</b> is not
        specified, weighting factors for all cases with at least one missing
        value in <i>varlist</i> cannot be computed. However, a more promising
        solution is to multiple impute missing values before using <b>ipfweight</b>.
<p>
<p>
<b><u>Examples</u></b>
<p>
    . ipfweight sex educ, gen(wgt) val(48.3 51.7 43.7 30.7 25.6) maxit(10)
<p>
    . ipfweight sex educ region, gen(wgt) val(48.3 51.7 43.7 30.7 25.6 78.0
        22.0) maxit(25) st(designwgt) tol(.1) up(5) lo(.2) mis
<p>
<p>
<b><u>References</u></b>
<p>
    DeBell, Matthew/Jon A. Krosnick/Arthur Lupia/Caroline Roberts. 2009.
        User’s Guide to the Advance Release of the 2008-2009 ANES Panel
        Study. Palo Alto, CA and Ann Arbor, MI: Stanford University and
        University of Michigan.
<p>
    Deming, W. Edwards/Frederick F. Stephan. 1940. On a Least Squares
        Adjustment of a Sampled Frequency Table When the Expected Marginal
        Totals Are Known, in: The Annals of Mathematical Statistics 11 (4):
        427-444.
<p>
<p>
<b><u>Author</u></b>
<p>
    Michael Bergmann, University of Mannheim,
        michael.bergmann@uni-mannheim.de
<p>
<p>
<b><u>Also see</u></b>
<p>
Manual:  <b>[R] weight</b>
<p>
On-line:  help for weight; survwgt
<p>
</pre>
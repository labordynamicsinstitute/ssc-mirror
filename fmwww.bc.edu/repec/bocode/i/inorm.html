<pre>
-------------------------------------------------------------------------------
help for <b> inorm</b>                                                  John C. Galati
-------------------------------------------------------------------------------
<p>
<b><u>Multiple-imputation via data-augmentation under a multivariate normal model</u></b>
<p>
        <b>inorm em</b> <i>varlist</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<b>,</b> <b><u>x</u></b><b>vars(</b><i>varlist</i><b>)</b> <b><u>max</u></b><b>its(</b><i>#</i><b>)</b>
                 <b><u>cri</u></b><b>terion(</b><i>#</i><b>)</b> <b><u>rid</u></b><b>ge(</b><i>#</i><b>)</b> <b>mu(</b><i>string</i><b>)</b> <b><u>sig</u></b><b>ma(</b><i>string</i><b>)</b> <b><u>e</u></b><b>cho</b> <b>mata</b> ]
<p>
        <b>inorm da</b> <i>varlist</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>using</b> <i>filename</i> [<b>,</b> <b><u>x</u></b><b>vars(</b><i>varlist</i><b>)</b>
                 <b>m(</b><i>#</i><b>)</b> <b><u>it</u></b><b>s(</b><i>#</i><b>)</b> <b><u>burn</u></b><b>in(</b><i>#</i><b>)</b> <b><u>rid</u></b><b>ge(</b><i>#</i><b>)</b> <b>mu(</b><i>string</i><b>)</b> <b><u>sig</u></b><b>ma(</b><i>string</i><b>)</b>
                 <b>seed1(</b><i>#</i><b>)</b> <b>seed2(</b><i>#</i><b>)</b> <b>replace</b> <b>mata</b> ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>inorm</b> is a command for creating multiple imputed copies of an incomplete
    dataset under a multivariate normal model. It consists of two
    subcommands, <b>em</b> and <b>da</b>, which provide initial likelihood estimation (em)
    and imputation via data-augmentation (da), respectively. The <b>em</b> command
    is used to produce initial estimates, returned in matrices <b>r(mu)</b> and
    <b>r(sigma)</b>, that give a starting point for the data-augmentation stage.
    After imputation with the <b>da</b> command, the imputed datasets are stored in
    a long format, suitable for analysis using the prefix command mim (if
    installed), in a single Stata dataset specified by <i>filename</i>.
<p>
    This command is a Stata implementation of the Windows freeware NORM,
    written by Joe Schafer (http://www.stat.psu.edu/~jls/misoftwa.html#mi),
    and is based on original Fortran code provided by him. For further
    details the user is referred to JL Schafer, Analysis of Incomplete
    Multivariate Data, Chapman &amp; Hall 1997.
<p>
    <b>inorm</b> is intended to run in either of two modes, one using a "plug-in"
    software component that requires a Windows environment, and the other
    using Mata code that should be platform-independent. The Mata version
    appears to be slow and it has not been extensively tested.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>burnin</b> specifies an initial number of iterations to perform before
        commencing draws of the imputed datasets. The default is zero. In
        general <b>burnin</b> + <b>its</b> iterations will be performed prior to drawing
        the set of imputations for the first dataset, and <b>its</b> iterations will
        be performed between each subsequent draw of a set of imputated
        values for the dataset.
<p>
    <b>criterion</b> specifies a convergence criterion for the em algorithm. The
        default is "0.000001", meaning the algorithm terminates when either
        the maxits number of iterations has been performed, or no entry in
        either the coefficient vector or covariance matrix estimate changes
        by more than 0.000001 times the previous value from one iteration to
        the next.
<p>
    <b>echo</b> specifies that an estimate of the loglikelihood at each em iteration
        should be echoed to the screen.
<p>
    <b>its</b> specifies the number of iterations between draws of imputed datasets.
        The default is 50.
<p>
    <b>m</b> specifies the number of imputed copies of the dataset to be created.
        The default is 2.
<p>
    <b>mata</b> specifies that the mata version of inorm should be used in
        preference to the plugin version (on Windows; on other operating
        systems the plugin version is not available).
<p>
    <b>maxits</b> specifies the maximum number of iterations of the em algorithm to
        be performed. The default is 1000 iterations.
<p>
    <b>mu</b> specifies the name of a Stata matrix containing an initial estimate
        for the mean of the multivariate normal model.
<p>
    <b>replace</b> specifies that <i>filename</i> may be overwritten if it exists.
<p>
    <b>ridge</b> specifies a ridge hyperparameter for data-dependant ridge prior as
        described in JL Schafer, Analysis of Incomplete Multivariate Data,
        Chapman &amp; Hall 1997.
<p>
    <b>seed1</b> specifies a first seed for the random number generator.
<p>
    <b>seed2</b> specifies a second seed for the random number generator.
<p>
    <b>sigma</b> specifies the name of Stata matrix containing an initial estimate
        of the covariance matrix for the multivariate normal model.
<p>
    <b>xvars</b> gives a list of covariates that are completely observed on the
        estimation subsample (defined by the optional if or in clauses). The
        variables in <i>varlist</i> are modelled using a multivariate normal
        distribution conditional on the values of the <b>xvars</b> variables.
<p>
<p>
<b><u>Examples</u></b>
<p>
    We provide an example analysis that reproduces results displayed by Paul
    Allison in his monograph "Missing Data" (Sage Publications, 2002). (The
    table references below correspond to tables in Chapters 4 and 5 of the
    book.) We are grateful to Rodrigo Alfaro of the Central Bank of Chile for
    suggesting the use of this example.
<p>
    <b>* Table 4.3</b>
    <b>use http://www.ats.ucla.edu/stat/examples/md/usnews.dta, clear</b>
    <b>inorm em _all</b>
    <b>mat std = diag(vecdiag(r(sigma)))</b>
    <b>mat std = vecdiag(cholesky(std))</b>
    <b>mat T4_3 = r(mu)', std'</b>
    <b>mat list T4_3</b>
<p>
    <b>* Table 4.4</b>
    <b>mat T4_4 =r(rho)</b>
    <b>mat list T4_4, f(%4.3f)</b>
<p>
    <b>* Tables 5.3, 5.4</b>
    <b>inorm da _all using tmp, m(5) seed1(20081003) replace</b>
<p>
    <b>use tmp, clear</b>
    <b>* first look at regression results in each imputed dataset</b>
    <b>forvalues k=1/5 {</b>
        <b>quietly reg gradrat csat lenroll private stufac rmbrd if _mj==`k'</b>
        <b>est store T`k'</b>
    }
    <b>est table T*, se b(%6.3f)</b>
<p>
    <b>* obtain combined MI estimates cf. Tables 5.3, 5.4</b>
    <b>mim: reg gradrat csat lenroll private stufac rmbrd</b>
    <b>mim, mcerror</b>
<p>
    <b>* compare with results using larger number of imputations to stabilise MC</b>
    <b>error</b>
    <b>use http://www.ats.ucla.edu/stat/examples/md/usnews.dta, clear</b>
    <b>inorm em _all</b>
    <b>inorm da _all using tmp, m(20) seed1(20081013) replace</b>
    <b>use tmp, clear</b>
    <b>mim: reg gradrat csat lenroll private stufac rmbrd</b>
    <b>mim, mcerror</b>
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online:  help for mim
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>ineqrbd</b>         Carlo V. Fiorio and Stephen P. Jenkins (December 2008)
-------------------------------------------------------------------------------
<p>
<b><u>Regression-based inequality decomposition, following Fields (2003)</u></b>
<p>
        <b>ineqrbd</b> <i>depvar</i> <i>rhsvars</i> [<i>weights</i>] [ <b>if</b> <i>exp</i>] [<b>in</b> <i>range</i> ] [, <b>i2</b> <b><u>s</u></b><b>tats</b>
                 <b><u>nocons</u></b><b>tant</b> <b><u>noreg</u></b><b>ression</b> <b><u>f</u></b><b>ields</b> ]
<p>
    <b>fweight</b>s and <b>aweights</b> are allowed; see help weights.
<p>
<b><u>Description</u></b>
<p>
    <b>ineqbrd</b> performs regression-based decomposition of the inequality in
    <i>depvar</i> into the contributions accounted for by each of the <i>rhsvars</i>.  The
    formulae used are those proposed by Fields (2003) which, in turn, are
    closely related to those proposed by Shorrocks (1982) for
    non-regression-based decomposition of inequality by income source.
<p>
    Consider the linear model for each observation
<p>
        (1)<i> yvar</i> = b0 + b1*X1 + b2*X2 + ... + bK*XK + residual
<p>
    where the Xf, for f = 1,...,K are the variables included in <i>rhsvars</i>, and
    the bf are the corresponding regression coefficients that are estimated
    by OLS.
<p>
    The linear model can be rewritten as
<p>
        (2)<i> yvar</i> = b0 + Z1 + Z2 + ... + ZK + residual
<p>
    where each Zf, for each f = 1,...,K is a `composite' variable, equal to
    the product of an estimated regression coefficient and a variable. For
    inequality decomposition calculations, the value of b0 is irrelevant as
    it is constant for every observation.
<p>
    Alternatively, one may look at <i>predicted yvar</i> (`yhat')
<p>
        (3)<i> yhat</i> = b0 + Z1 + Z2 + ... + ZK
<p>
    in which case there is no residual term.
<p>
    Neglecting the constant, equations (2) and (3) are of exactly the same
    form as the equation used by Shorrocks (1982) when deriving rules for
    inequality decomposition by factor components.  (E.g. total income is the
    sum of labour earnings, income from savings and other assets, private and
    public transfers. How much inequality in total income is attributable to
    each of these factors?) Shorrocks proved that a set of arguably
    persuasive axioms led to a unique additive and exact decomposition rule,
    with one term for each factor. The decomposition rule did <i>not</i> depend on
    the choice of measure summarizing inequality in total income.
<p>
    Fields (2003) exploited the parallel with the factor decomposition case,
    and applied the Shorrocks decomposition rule to relate inequality in
    <i>predicted yvar</i> to contributions from each of the composite variables.
    Alternatively, one may apply the decomposition rule to the inequality of
    <i>yvar</i> itself, in which case there is also a decomposition term
    corresponding to the residual.  See Cowell and Fiorio, 2006.
<p>
    <b>ineqrbd</b> provides a regression-based Shorrocks-type decomposition of a
    variable labelled "Total", where Total is defined as <i>yvar</i>, unless the
    <b>fields</b> option is used in which case Total refers to <i>predicted yvar</i>. In
    either case, the contribution to inequality in Total of each term is
    labelled "s_f" in the output.
<p>
<b><u>Options</u></b>
<p>
    <b>fields</b> implies decomposition of <i>predicted yvar</i> rather than of <i>yvar</i>.
<p>
    <b>noregression</b> suppresses reporting of the OLS regression equation used to
        derive the composite variables and residual.
<p>
    <b>noconstant</b> excludes the intercept term from the regression.
<p>
    <b>stats</b> provides the means, standard deviations, and correlations, of
        Total, the residual (unless the <b>fields</b> option is used), and the
        composite variables Zf, f = 1,...,K. Results for the composite
        variables are ordered in the same order as the underlying variables
        are ordered in <i>rhsvars</i>.
<p>
    <b>i2</b> summarises inequality using half the squared coefficient of variation
        (the Generalized Entropy measure I2), rather than the coefficient of
        variation (CV).  Observe that that inequality may be negative, e.g.
        because the mean of a composite variable may be negative.
<p>
<p>
<b><u>Saved results</u></b> 
<p>
    r(total)                            contains <i>predicted yvar</i> if <b>fields</b> optio
&gt; n
                                        used; else contains <i> yvar</i> 
<p>
    r(mean_tot), r(sd_tot), r(cv_tot)   mean, standard deviation, CV for Total
<p>
    r(sf_Z0), r(mean_Z0),               proportionate inequality contribution, 
&gt; mean, 
    r(sd_Z0), r(cv_Z0)                  standard deviation, CV for the residual
&gt; .
                                        r(sf_Z0) is not reported if <b>fields</b> opti
&gt; on used.
<p>
    r(sf_Zf), r(mean_Zf),               proportionate inequality contribution, 
&gt; mean, 
    r(sd_Zf), r(cv_Zf)                  standard deviation, CV for each of vari
&gt; ables
                                        in <i>rhsvars</i>, where "f" is an integer
                                        1,..., K, indicating the order in which
&gt;  entered in 
                                        <i>rhsvars</i>.
    r(varlist)                          contains <i>yvar</i> <i>rhsvars</i> 
    r(yvar)                             contains <i>yvar</i>   
    r(xvars)                            contains <i>rhsvars</i>        
        
<p>
<p>
<b><u>Example</u></b>
<p>
    <b>. sysuse auto</b>
<p>
    <b>. ineqrbd price trunk weight length foreign</b>
<p>
<p>
<b><u>Authors</u></b>
<p>
    Carlo Fiorio &lt;carlo.fiorio@unimi.it&gt;
    Department of Economics, Business and Statistics
    University of Milan, Via Conservatorio, 7
    20122 Milan, Italy
<p>
    Stephen P. Jenkins &lt;stephenj@essex.ac.uk&gt;
    Institute for Social and Economic Research
    University of Essex, Colchester CO4 3SQ, U.K.
<p>
<p>
<b><u>Acknowledgement</u></b> 
<p>
    <b>ineqrbd</b> uses code from <b>ineqfac</b> by S.P. Jenkins.  Thanks to Andreas Peichl
        and Nico Pestel who discovered bugs in earlier versions and provided
        code for squashing them.
<p>
<b><u>References</u></b> 
<p>
    Cowell, F.A. and Fiorio, C.V. 2006. Rethinking Inequality Decomposition:
        Comment.  Distributional Analysis Research Programme Working Paper
        82.  London: STICERD, London School of Economics.  
        http://sticerd.lse.ac.uk/dps/darp/DARP82.pdf
<p>
    Fields, G. 2003. Accounting for Income Inequality and Its Change:  A New
        Method, with Application to the Distribution of Earnings in the
        United States', <i>Research in Labor Economics</i>.
<p>
    Shorrocks, A.F. 1982. Inequality Decomposition by Factor Components.
        <i>Econometrica</i> 50: 193-212.
<p>
<p>
<b><u>Also see</u></b>
<p>
    ineqfac if installed
<p>
</pre>
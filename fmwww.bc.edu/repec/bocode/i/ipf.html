<pre>
<b>help ipf</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
     <b> Log-linear modelling using Iterative Proportional Fitting</b>
<p>
<b><u>Syntax</u></b>
<p>
        <b>ipf</b> [<i>varlist</i>] [<b>weight</b>] [<b>,</b> <i>options</i>]
<p>
    <i>options</i>               Description
    -------------------------------------------------------------------------
    Main
      <b>fit</b>(<i>string</i>)          specifies the log-linear model.
      <b>constr</b>(<i>string</i>)       specifies initial values for the expected
                            frequencies.
      <b>confile</b>(<i>filename</i>)    specifies a *.dta file that contains initial
                            values for the expected counts.
      <b>convars</b>(<i>varlist</i>)     specifies the variables specified in constraint
                            file.
      <b>save</b>(<i>filename</i>)       saves the expected frequencies and probabilities
                            per cell.
      <b>expect</b>               specifies that the expected frequencies are
                            displayed.
      <b>nolog</b>                specifies whether the log-likelihood is displayed
                            at each iteration.
    -------------------------------------------------------------------------
<p>
<b>fweights</b> are  allowed; see help weights.
<p>
<b><u>Description</u></b>
<p>
    The iterative proportional fitting (IPF) algorithm is a simple method to
    calculate the expected counts of a hierarchical loglinear model. The
    algorithm's rate of convergence is first order. The more commonly used
    Newton-Rahpson algorithm is second order, however, each iteration of the
    IPF algorithm is quicker because Newton-Rahpson inverts matrices. This
    makes the IPF algorithm much quicker for contingency tables with high
    dimensionality.
<p>
    The IPF algorithm has the following steps
<p>
    1) Initial estimates of the expected frequencies are given. The initial
    estimates should have associations and interactions that are less complex
    than the model being fitted. By default the initial frequencies are 1.
<p>
    2) Successively adjust the estimates of the expected frequencies by
    scaling factors so they match each marginal table.
<p>
    3) The scaling continues until the loglikelihood converges.
<p>
    The algorithm always converges to the correct expected frequencies even
    when the likelihood is poorly behaved, for example, when there are zero
    fitted counts.
<p>
    The varlist defines the dimension of the continguency table that the
    Poisson likelihood is calculated over. If the varlist is not specified
    the variables in the fit() option define the dimensions of the
    continguency table.
<p>
<b><u>Latest Version</u></b>
<p>
    The latest version is always kept on the SSC website. To install the
    latest version click on the following link
<p>
    ssc install ipf, replace.
<p>
<b><u>Options</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>fit(</b><i>string</i><b>)</b> specifies the loglinear model. It requires special syntax of
        the form <b>var1*var2+var3+var4</b> .The term <b>var1*var2</b> includes all the
        interactions between the two variables and also the main effects of
        <b>var1</b> and <b>var2</b>.  The main effects <b>var3</b> and <b>var4</b> are also included in
        the model but no interactions. This syntax is used in most books on
        Loglinear modelling.
<p>
    <b>constr(</b><i>string</i><b>)</b> specifies initial values for the expected frequencies. The
        syntax requires an if statement followed by a value for the expected
        frequency. Hence [sex=="male"]2 replaces all initial values for males
        to be 2.
<p>
    <b>confile(</b><i>filename</i><b>)</b>specifies a *.dta file that contains initial values for
        the expected counts, the variable containing the frequencies must be
        called Efreqold.  This option requires <b>convars</b> also to specified.
<p>
    <b>save(</b><i>filename</i><b>)</b> specifies the expected frequencies and probabilities for
        every cell to be saved in a *.dta file.
<p>
    <b>convars(</b><i>varlist</i><b>)</b> specifies the variables in the file specified in
        <b>confile()</b>, excluding Efreqold because this variable is always needed.
<p>
    <b>expect</b> specifies that the expected frequencies are displayed.
<p>
    <b>nolog</b> specifies whether the loglikelihood is displayed at each iteration.
<p>
<b><u> Examples</u></b>
<p>
    For a 3-way continguency table containing the factors sex, age and
    treatment the saturated model is given by
<p>
      .ipf, fit(sex*age*treatment)
<p>
    If the data was not individual records the command would require a
    variable containing the frequency counts, <b>freq</b> say.
<p>
      .ipf [fw=freq], fit(sex*age*treatment)
<p>
    Using a file for initial frequencies.
<p>
      .ipf [fw=freq], fit( sex+age) convars(sex age) confile(constrain) exp
<p>
<b><u>Author</u></b>
<p>
    Adrian Mander, MRC Biostatistics Unit, Cambridge, UK.
    Email adrian.mander@mrc-bsu.cam.ac.uk
<p>
<b><u>Also see</u></b>
<p>
    Related commands
<p>
    HELP FILES              SSC installation links    Description
<p>
    gipf (if installed)     (ssc install gipf)        Graphical
    representation of a log-linear model
    hapipf (if installed)   (ssc install hapipf)      Haplotype frequency
    estimation using log-linear models
<p>
<p>
<p>
</pre>
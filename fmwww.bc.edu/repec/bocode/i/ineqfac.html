<pre>
-------------------------------------------------------------------------------
help for <b>ineqfac</b>                                Stephen P. Jenkins (March 2009)
-------------------------------------------------------------------------------
<p>
<b><u>Inequality decomposition by factor components, following Shorrocks (1982a, b)</u></b>
<p>
        <b>ineqfac</b> <i>facvars</i> [<i>weights</i>] [ <b>if</b> <i>exp</i>] [<b>in</b> <i>range</i> ] [, <b>i2</b> <b><u>s</u></b><b>tats</b>
                 <b><u>tot</u></b><b>al(</b><i>newvarname</i><b>)</b> ]
<p>
    <b>fweight</b>s and <b>aweights</b> are allowed; see help weights.
<p>
<b><u>Description</u></b>
<p>
    <b>ineqfac</b> provides an exact decomposition of the inequality of total income
    into inequality contributions from each of the factor components of total
    income. More specifically, given the set of factors
<p>
        facvars = {factor_1  factor_2  ...  factor_F}, 
<p>
    define the variable totvar such that for each observation in the data
    set,
<p>
                              F
                    totvar = SUM (factor_f).
                             f=1
<p>
    Shorrocks (1982a) proved that there was a unique 'decomposition rule' for
    which inequality in totvar across observations could be expressed as the
    sum of inequality contributions from each of the factor components, and
    which also satisfied some other basic axioms.  The decomposition rule is
    the "proportionate contribution of factor f to total inequality", s_f:
<p>
        s_f = rho_f*sd(factor_f)/sd(totvar)
                   
    where rho_f is the correlation between factor_f and totvar, and sd(.) is
    the standard deviation. Equivalently, s_f is the slope coefficient from
    the regression of factor_f on totvar.  Observe that for each observation,
<p>
                          F
                         SUM (s_f) = 1.
                         f=1
<p>
    Factor components with a positive value for s_f make a disqualizing
    contribution to inequality in total income; factor components with
    negative s_f values make an equalizing contribution.
<p>
    Shorrocks shows that choice of the decomposition rule is an issue
    independent of that concerning which index is used to summarise
    inequality.  However there happens to be a nice link with the case in
    which inequality is measured using the coefficient of variation, for one
    can also re-write s_f as:
<p>
        s_f = rho_f*[m(factor_f)/m(totvar)]*[CV(factor_f)/CV(totvar)]
                
    where m(.) is the mean, and CV(.) is the coefficient of variation =
    sd(.)/m(.). If m(factor_f) &gt; 0 for every f, then also
<p>
        s_f = rho_f*[m(factor_f)/m(totvar)]*[I2(factor_f)/I2(totvar)]^(.5)
<p>
    where I2(.) = half the squared coefficient of variation (a member of the
    Generalised Entropy class of inequality measures).
<p>
    Thus total inequality can be written in terms of the factor correlations
    with total income, the factor shares in total income =
    m(factor_f)/m(totvar), and the factor inequalities (summarized using CV
    or I2).
<p>
    <b>ineqfac</b> reports the estimates for each factor component of:  s_f, S_f =
    s_f*CV(totvar), m(factor_f)/m(totvar), CV(factor_f), and
    CV(factor_f)/CV(totvar), plus, optionally, the correlations, means and
    standard deviations of the factor components and totvar. Optionally,
    inequality may be summarised using I2 rather than CV as long as
    m(factor_f) &gt; 0, for every f.
<p>
    <b>ineqfac</b> was designed as a tool for income distribution analysis in the
    case where the current sample contains observations on income components
    for each of a set of income receiving units (e.g. families, households,
    persons).  In this case, facvars might include labour income, income from
    investments and pensions, cash transfers, etc. See Shorrocks (1982b) and
    Jenkins (1995) for examples. <b>ineqfac</b> may also be used to summarise and
    compare the riskiness of portfolios of wealth holdings: s_f has the same
    form as the "beta coefficient" used in finance analysis.
<p>
<b><u>Options</u></b>
<p>
    <b>stats</b> provides the means, standard deviations, and correlations of the
        factor components and totvar.
<p>
    <b>total(</b><i>newvarname</i><b>)</b> creates a new variable equal to the sum of the factor
        components for each observation.
<p>
    <b>i2</b> summarises inequality using I2 rather than CV. The option is available
        only if every factor mean is positive.
<p>
<p>
<b><u>Saved results</u></b> 
<p>
        r(mean_total), r(sd_total),                     mean, standard deviatio
&gt; n, variance and CV for Total
        r(var_total), r(cv_total)  
<p>
        r(sf_f), r(mean_f),                             proportionate inequalit
&gt; y contribution, mean, 
        r(sd_f), r(var_f), r(cv_f)                      standard deviation, var
&gt; iance, CV, and
        r(share_f)                                      share of total (mean_f/
&gt; mean_total), for each factor, f.
                                                        "f" is replaced by the 
&gt; factor's varname.
<p>
        r(N)                                            Number of non-missing o
&gt; bservations used
<p>
        r(nfactor)                                      Number of factor variab
&gt; les
<p>
        r(varlist)                                      The names of the factor
&gt;  variables
<p>
<p>
<b><u>Example</u></b>
<p>
    <b>. ineqfac labour invest transfer, stats</b>
<p>
    <b>. ineqfac labour invest transfer, stats total(grossi)</b>
<p>
    <b>. generate negtax = -tax</b>
<p>
    <b>. ineqfac labour invest transfer negtax, stats total(disposablei)</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Stephen P. Jenkins &lt;stephenj@essex.ac.uk&gt;
    Institute for Social and Economic Research
    University of Essex, Colchester CO4 3SQ, U.K.
<p>
<p>
<b><u>Acknowledgement</u></b> 
<p>
    This is an update of <b>ineqfac</b>, first written for Stata version 5.  Andreas
        Peichl beta-tested the revised code.
<p>
<p>
<b><u>References</u></b> 
<p>
    Jenkins, S.P. 1995. Accounting for Inequality Trends: Decomposition
        Analyses for the U.K., 1971-1986.  <i>Economica</i> 62: 29-63.
<p>
    Shorrocks, A.F. 1982a. Inequality Decomposition by Factor Components.
        <i>Econometrica</i> 50: 193-212.
<p>
    Shorrocks, A.F. 1982b. The Impact of Income Components on the
        Distribution of Family Incomes.  <i>Quarterly Journal of Economics</i> 98:
        311-326.
<p>
<p>
<b><u>Also see</u></b>
<p>
</pre>
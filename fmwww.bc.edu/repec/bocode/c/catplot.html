<pre>
-------------------------------------------------------------------------------
help for <b>catplot</b>
-------------------------------------------------------------------------------
<p>
<b><u>Plots of frequencies, fractions or percents of categorical data</u></b> 
<p>
        <b>catplot</b><i> catvar1</i> [<i>catvar2</i> [<i>catvar3</i>]] [<i>weight</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [ <b>,</b>
                 {<b><u>fr</u></b><b>action</b>|<b><u>fr</u></b><b>action(</b><i>varlist</i><b>)</b>|<b><u>perc</u></b><b>ent</b>|<b><u>perc</u></b><b>ent(</b><i>varlist</i><b>)</b>}
                 <b>var1opts(</b><i>over_options</i><b>)</b> <b>var2opts(</b><i>over_options</i><b>)</b>
                 <b>var3opts(</b><i>over_options</i><b>)</b>
                 <b>recast(</b><i>plottype</i><b>)</b> <i>graph_options</i> ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>catplot</b> shows frequencies (or optionally fractions or percents) of the
    categories of one, two or three categorical variables. The first named
    variable is innermost on the display; that is, its categories vary
    fastest. Often, but not necessarily, it will be the response or outcome
    of interest. By default <b>catplot</b> is a wrapper for graph hbar. Optionally
    <b>catplot</b> may be recast as a wrapper for graph bar or graph dot.  The
    choice is a matter of personal taste, although in general horizontal
    displays make it easier to identify names or labels of categories.
<p>
    <b>fweight</b>s, <b>aweight</b>s and <b>iweight</b>s may be specified. This opens a door to
    use of <b>catplot</b> for plotting any set of values for each of several
    different categories.
<p>
<p>
<b><u>Remarks</u></b> 
<p>
    This version of <b>catplot</b> (2.0.0 or up) is not compatible with previous
    versions.
<p>
    The default display using <b>graph hbar</b> or <b>graph bar</b> is graphically
    conservative, reflecting the view that height or length of bars and text
    indicating categories are good ways of conveying information.  If you
    wish also to have bars in different colours, specify the option <b>asyvars</b>,
    which differentiates the categories of the <i>first</i> named variable <i>catvar1</i>.
    If you wish also to stack bars of different colours, specify the further
    option <b>stack</b>.
<p>
    The default display with <b>graph dot</b> is similarly conservative.  If you
    wish to have point symbols in different colours, specify the option
    <b>asyvars</b>, which differentiates the categories of the <i>first</i> named variable
    <i>catvar1</i>. If you wish also to use different point symbols, use the further
    option <b>marker()</b>.
<p>
    Note some simple principles in this territory:
<p>
        It is difficult to create a great graph, but easy to improve a bad
        one.
<p>
        Comparisons must be easy. That could mean in one dimension, across a
        row or down a column, or it could mean using a table structure.
<p>
        Ordering by magnitude may be even more useful than ordering by
        category.
<p>
        Bars are better than pie slices as length is easier to judge than
        angle. Dots on a scale are a good way to include magnitudes.
<p>
        Text is better read as horizontal than as vertical.
<p>
        Showing numbers as text as well by graphical elements can be helpful.
<p>
        Lose the legend if you can. A great advantage of <b>graph hbar </b>|<b> bar </b>|
        <b>dot</b> is strong support for category labels, which can be nested too.
<p>
        The sum of one value is just that value, so weights allow showing any
        values, not just frequencies or percents.
<p>
        <b>by()</b> allows table structures to be shown with <b>graph hbar </b>|<b> bar </b>|<b> dot</b>.
<p>
        <b>by()</b> can look like another <b>over()</b>.
<p>
<p>
<b><u>Options</u></b> 
<p>
    <b>fraction</b> indicates that all frequencies should be shown as fractions
        (with sum 1) of the total frequency of all values being represented
        in the graph.
<p>
    <b>fraction(</b><i>varlist</i><b>)</b> indicates that all frequencies should be shown as
        fractions (with sum 1) of the total frequency for each distinct
        category defined by the combinations of <i>varlist</i>. For example, given a
        variable <b>sex</b> with two categories male and female, the fractions shown
        for male would have sum 1 and those for female would have sum 1.
<p>
    <b>percent</b> indicates that all frequencies should be shown as percents (with
        sum 100) of the total frequency of all values being represented in
        the graph.
<p>
    <b>percent(</b><i>varlist</i><b>)</b> indicates that all frequencies should be shown as
        percents (with sum 100) of the total frequency for each distinct
        category defined by the combinations of <i>varlist</i>.  For example, given
        a variable <b>sex</b> with two categories male and female, the percents
        shown for male would have sum 100 and those for female would have sum
        100.
<p>
    Only one of these <b>fraction</b>[<b>()</b>] and <b>percent</b>[<b>()</b>] options may be specified.
<p>
    <b>recast()</b> recasts the graph to another <i>plottype</i>, one of <b>hbar</b>, <b>bar</b>, <b>dot</b>.
<p>
        Note for users of Stata 10 up: using the Graph Editor is another way
        to produce these and many other changes.
<p>
        Note for experienced users: although the name is suggested by another
        recast() option, this is not a back door to recasting to a <b>twoway</b>
        plot.
<p>
    <b>var1opts()</b>, <b>var2opts()</b> and <b>var3opts()</b> contain calls to an <b>over()</b> option
        of graph bar, graph hbar or graph dot as appropriate controlling the
        display of elements for <i>catvar1</i>, <i>catvar2</i> and <i>catvar3</i> respectively.
        For example, <b>var1opts(sort(1) descending)</b> specifies that values of
        <i>catvar1</i> should be sorted on frequency or percent and displayed
        increasing downwards or from left to right.
<p>
    <i>graph_options</i> refers to options of graph bar, graph hbar or graph dot as
        appropriate.  <b>by()</b> is one useful example. Note: any categorical axis
        title that appears by default is produced by <b>l1title()</b> with <b>hbar</b> or
        <b>dot</b> or by <b>b1title()</b> with <b>bar</b> or the (otherwise undocumented) <b>vertical</b>
        option.
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>. set scheme s1color</b>
<p>
    (Stata's auto data)
    <b>. sysuse auto, clear</b>
<p>
    <b>. catplot rep78</b>
    <b>. catplot rep78, blabel(bar, pos(base) size(4)) bar(1, bfcolor(none))</b>
        <b>ysc(off)</b>
    <b>. catplot rep78 foreign</b>
    <b>. catplot rep78 foreign, nofill</b>
    <b>. catplot rep78, by(foreign) percent(foreign)</b>
    <b>. catplot rep78, by(foreign) percent(foreign) recast(bar)</b>
    <b>. catplot rep78 foreign, percent(foreign) bar(1, bcolor(blue))</b>
        <b>blabel(bar, position(outside) format(%3.1f)) ylabel(none)</b>
        <b>yscale(r(0,60))</b>
<p>
    <b>. gen himpg = mpg &gt; 25</b>
    <b>. label def himpg 1 "mpg &gt; 25" 0 "mpg &lt;= 25"</b>
    <b>. label val himpg himpg</b>
    <b>. catplot himpg rep78 foreign</b>
    <b>. catplot rep78 foreign, by(himpg, col(1) note("")) subtitle(, pos(9)</b>
        <b>ring(1) bcolor(none) nobexpand place(e))</b>
    <b>. catplot rep78 foreign, recast(dot) by(himpg, col(1) note(""))</b>
        <b>subtitle(, pos(9) ring(1) bcolor(none) nobexpand place(e))</b>
    <b>. catplot rep78 foreign, recast(bar) by(himpg, row(1) note(""))</b>
        <b>subtitle(, pos(6) ring(1) bcolor(none) nobexpand)</b>
<p>
    <b>. catplot rep78, var1opts(sort(1))</b>
    <b>. catplot rep78, var1opts(sort(1) descending)</b>
<p>
    (Titanic data)
    <b>. use titanic, clear</b>
    <b>. collapse survived, by(age sex class)</b>
<p>
    <b>. catplot age sex [aw=100*survived], by(class, compact note("") col(1))</b>
        <b>bar(1, blcolor(gs8) bfcolor(gs14)) blabel(bar, format(%4.1f)</b>
        <b>pos(base)) subtitle(, pos(9) ring(1) bcolor(none) nobexpand place(e))</b>
        <b>ytitle(% survived from Titanic, place(e)) var1opts(gap(0))</b>
        <b>var2opts(gap(*.2)) outergap(*.2) ysize(5) yla(0(25)100, glcolor(gs14)</b>
        <b>glw(*.5))</b>
<p>
    <b>. catplot age sex [aw=100*survived], by(class, compact note("") col(1) )</b>
        <b>bar(1, blcolor(gs8) bfcolor(pink*.2)) blabel(bar, format(%4.1f)</b>
        <b>pos(base)) subtitle(, pos(9) ring(1) bcolor(none) nobexpand place(e))</b>
        <b>ytitle(% survived from Titanic) var1opts(gap(*0.1) axis(noline))</b>
        <b>var2opts(gap(*.2)) ysize(5) yla(none) ysc(noline)</b>
        <b>plotregion(lcolor(none))</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Nicholas J. Cox, Durham University
    n.j.cox@durham.ac.uk
<p>
         
<b><u>Acknowledgments</u></b> 
<p>
    The first version of <b>catplot</b> was written and revised in 2003 and 2004.
    At that time, Vince Wiggins provided very helpful comments, Fred Wolfe
    asked for sorting and David Schwappach provided feedback on limitations.
    During revision in 2010, Vince Wiggins and Ronán Conroy made encouraging
    noises.
<p>
<p>
<b><u>Also see</u></b>
<p>
    On-line:  help for graph hbar; graph bar; graph dot; histogram; tabplot
        (if installed)
<p>
</pre>
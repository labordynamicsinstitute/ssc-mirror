<pre>
-------------------------------------------------------------------------------
help for <b>charlson </b>                              (Adapted for Stata by V. Stagg,
                                     under the direction of Dr. Robert Hilsden,
                                    from SAS programs created by Dr. Hude Quan)
-------------------------------------------------------------------------------
<p>
<b><u>Charlson comorbidity index macro</u></b>
<p>
        <b>charlson</b> <i>varlist</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>, icd(</b><i>string</i><b>)</b> [<b>idvar(</b><i>varname</i><b>)</b>
                <b>cmbprfx(</b><i>string</i><b>)</b> <b>assign0 wtchrl cmorb noshow</b>]
<p>
        <b>by</b> may be used with <b>charlson</b>; see help by
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>charlson</b> calculates the Charlson Index from an input database of
    ICD-9-CM, ICD-10 or Enhanced ICD-9-CM comorbidity diagnoses codes. The
    ICD version must be specified (a required option).  The input data of
    diagnoses codes must be stored as strings, with numbers 1 to the maximum
    number of comorbidities recorded, forming the suffix. These comorbidity
    variables must all begin with the same root(the prefix) and either form
    the <i>varlist</i> or be defined by the root string given in the <b>cmbprfx(</b><i>string</i><b>)</b>
    option.  The user has the choice of units: hospital visits or patients.
    The former is the default, the latter will be implemented when a patient
    id variable is included in the options (see below).  If requested,
    <b>charlson</b> displays a frequency distribution of the Charlson Index score,
    as well as summaries of the sum of the weighted scores, from which the CI
    is derived.  The <b>charlson</b> command also allows for the choice of
    presenting the intermediate frequency summaries for each of the
    individual diagnostic comorbidity categories.  Weighting of the charlson
    scores in each category follows the optional hierarchy adjustments, which
    ensure that only the more severe comorbidity of a type is counted, if
    desired.
<p>
<p>
<b><u>Options</u></b>
<p>
        <b>icd(</b><i>string</i><b>)</b> is required to specify the version of comorbidity data
                      being input.  Type within the brackets after cmd:
<p>
        Version of CMD data    String value for icd option
        -------------------------------------------------------------
        ICD-9-CM                  9
        ICD-10                   10
        Enhanced ICD-9         9enh
<p>
    <b>idvar(</b><i>varname</i><b>)</b> is required when the input comorbidity data could possibly
        contain multiple patient records, that is, comorbidity information
        from more than one hospital visit per patient. The unit will then be
        patients rather than visits.
<p>
    <b>cmbprfx(</b><i>string</i><b>)</b> is required to provide the root of the comorbidity
        variable names when the comorbidity variables are not listed as the
        <i>varlist</i> immediately following the program name.
<p>
    <b>assign0</b> indicates that a hierarchy of comorbities be applied. This means
        that, should a more severe form of a comorbidity be also present in a
        patient, then the more mild form will be assigned to 0 and thus not
        be counted as well.  This ensures that a type of comorbidity is not
        counted more than once in each patient. The absence of this option
        implies that no hierarchy be applied.
<p>
    <b>wtchrl</b> causes the summary of the charlson index and the weighted charlson
        values be shown in the display window, after the macro has finished
        running. The absence of this option implies that these summaries be
        not shown.
<p>
    <b>cmorb</b> causes the frequency of each individual comorbidity to be shown on
        the display window, after the macro has finished running. The absence
        of this option implies that these frequncies be not shown.
<p>
    <b>noshow</b> requests that the summary of selected options be not displayed in
        the results window, at the start of the running of the program.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    If the patient id variable option is not specified then the data cannot
    be sorted by patient and multiple patient records cannot be taken into
    account. Instead, every observation will be considered independent from
    every other, with each observation representing a unique patient-visit,
    causing the unit to be visits.
<p>
<p>
<b><u>Examples</u></b>
<p>
        <b>. charlson, icd(10) idvar(ip_chart_no) cmbprfx(ip_diag) wtchrl cmorb</b>
<p>
        <b>. charlson DX1-DX16, icd(9) assign0 noshow</b>
<p>
        <b>. charlson DX? DX??, icd(9enh) idvar(acb_numb) assign0 wtchrl</b>
<p>
        <b>. charlson ip_diag*, icd(10) idvar(rec_id)</b>
<p>
        <b>. charlson, icd(10) idvar(rec_id) cmbprfx(dx_code_)</b>
<p>
<p>
<b><u>References</u></b>
<p>
    Quan H, Sundararajan V, Halfon P, et al. Coding algorithms for defining
        comorbidities in ICD-9-CM and ICD-10 administrative data. <i>Medical</i>
        <i>Care</i> 2005 Nov; 43(11):1073-1077.
<p>
    Quan H, Parsons GA, &amp; Ghali WA. Validity of Information on Comorbidity
        Derived from ICD-9-CM Administrative Data. <i>Medical Care</i> 2002 Aug;
        40(8):675-685.
<p>
    Charlson ME, Pompei P, Ales KL, McKenzie CR. A new method of classifying
        prognostic comorbidity in longitudinal studies: development and
        validation. <i>J Chron Dis</i> 1987 May; 40(5): 373-383.
<p>
<b><u>Authors</u></b>
<p>
                Vicki Stagg, University of Calgary, CANADA
<p>
<p>
</pre>
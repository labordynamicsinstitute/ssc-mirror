<pre>
-------------------------------------------------------------------------------
help for <b>vincenty</b>
-------------------------------------------------------------------------------
<p>
<b><u>Calculate distances on the Earth's surface</u></b>
<p>
        <b>vincenty</b> <i>lat1</i> <i>lon1</i> <i>lat2</i> <i>lon2</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>]
              [<b>,</b> <b><u>v</u></b><b>in</b>(<i>varname</i>) <b><u>h</u></b><b>av</b>(<i>varname</i>) <b><u>l</u></b><b>oc</b>(<i>varname</i>) <b>replace</b> <b><u>i</u></b><b>mmed</b> <b>inkm</b>]
<p>
<b><u>Description</u></b>
<p>
<b>vincenty</b> is used for calculating geodesic distances between a pair of points on
the surface of the Earth (specified in signed decimal degrees latitude and
longitude), using an accurate ellipsoidal model of the Earth.  see 
http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf.
<p>
<b><u>Acknowledgements</u></b>
<p>
The program is named for Thaddeus Vincenty who wrote "Direct and Inverse
Solutions of Geodesics on the Ellipsoid with application of nested equations"
but the code borrows extensively from Javascript code at 
http://www.movable-type.co.uk/scripts/LatLongVincenty.html.
<p>
<b><u>Limitations</u></b>
<p>
The calculations are accurate to insane precision assuming elevation above the
ellipsoid is zero, so the real 3D distance could differ substantially.  Note
that elevation, even if available, cannot be included in these calculations.
<p>
The Vincenty-style calculations may fail if distance is close to a quarter of
the Earth's circumference, or if it is close to zero, where the trig functions
tax the limits of machine precision. Haversine calculations and those based on
the Law of Cosines are more robust to these odd cases.
<p>
<b><u>Options</u></b>
<p>
<b>immed</b> calculates distances between two locations specified on the command line.
    If <b>immed</b> is not specified, one set of locations should contain variable
    names. If no new variable names are specified, the immediate option is
    implied.
<p>
<b>inkm</b> requests distances expressed in kilometers; the default is miles, each of
    which is 5280*12*2.54/1e5=1.609344 km.
<p>
<b>vin</b> stores the results of Vincenty-style calculations in the named variable.
<p>
<b>hav</b> stores the results of Haversine-based calculations in the named variable.
<p>
<b>loc</b> stores the results of Law-of-Cosines-based calculations in the named
    variable.
<p>
<b><u>Examples</u></b>
<p>
        . set obs 5000
<p>
        . g double lon1=360*uniform()-180
<p>
        . g double lon2=360*uniform()-180
<p>
        . g double lat1=360*uniform()-180
<p>
        . g double lat2=180*uniform()-90
<p>
        . drop if abs(lat1)&gt;90
<p>
        . vincenty lat1 lon1 lat2 lon2, v(v) hav(h) l(loc)
<p>
        . gen double diff=(v-h)/v
<p>
        . su v h diff
<p>
        . vincenty 38.9 -77.077 39 -77.077
<p>
        . ret li
<p>
        . vincenty 38.9 -77.077 39 -77.077, v(vb) h(hb)
<p>
        . vincenty lat1 lon1 39 -77, h(ddc)
<p>
        . su
<p>
{<b><u>Remarks</u></b>
<p>
Type <b>return list</b> to see saved results in <b>r()</b> in the immediate version of the
command.
<p>
<b><u>Author</u></b>
<p>
    Austin Nichols
    austinnichols@gmail.com
</pre>
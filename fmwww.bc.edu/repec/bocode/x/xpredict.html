<pre>
<b>help for xpredict</b>                                               Patrick Royston
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Extension to predict</u></b>
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>xpredict</b> <i>newvarname</i> [<i>if</i>] [<i>in</i>] <b>,</b> <b>with(</b><i>varlist</i><b>)</b> [<i>options</i>]
<p>
<p>
    <i>options</i>                       Description
    -------------------------------------------------------------------------
      <b>a(</b><i>numlist</i><b>)</b>                  defines constants for use in contrasts
      <b>at(</b><i>vn # </i>[<i>vn # </i>...]<b>)</b>         predict at values of specified covariates
      <b><u>cons</u></b><b>tant</b>                    includes the regression constant in
                                    predictions
      <b><u>dou</u></b><b>ble</b>                      makes <i>newvarname</i> double precision
      <b>eq(</b><i>eqname</i><b>)</b>                  defines the equation for <i>varlist</i>
      <b><u>mean</u></b><b>zero</b>                    centres the prediction on its mean
      <b><u>s</u></b><b>tdp</b>                        predicts the standard error of (partial) xb
    -------------------------------------------------------------------------
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>xpredict</b> gives predictions of the (partial) `index' xb from variables in
    the most recently fitted regression model.
<p>
    Note that none of the options of <b>predict</b> available with specific
    regression commands are available with <b>xpredict</b>. Only prediction of xb
    and its SE are supported. Multi-equation models are supported via the
    <b>eq()</b> option.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>a(</b><i>numlist</i><b>)</b> defines a set of constants by which the regression
        coefficients for members of varlist are multiplied before prediction.
        This can be used to estimate contrasts e.g. after <b>regress</b> or <b>anova</b>.
<p>
    <b>at(</b><i>varname # </i>[<i> varname # </i>...]<b>)</b> requests that the covariates specified by
        the listed <i>varname</i>(s) be set to the listed <i>#</i> values. For example,
        <b>at(x1 1 x3 50)</b> would evaluate predictions at <b>x1</b> = 1 and <b>x3</b> = 50. This
        is a useful way to obtain out of sample predictions.
<p>
    <b>constant</b> includes the regression constant (<b>_cons</b>) in the prediction. It
        is counted as the last predictor in <b>with()</b>.
<p>
    <b>double</b> specifies that newvarname be of type double (double precision).
        The default type is float.
<p>
    <b>eq(</b><i>eqname</i><b>)</b> defines the name of the equation for varlist in <b>with(</b><i>varlist</i><b>)</b>.
        Only when <i>eqname</i> is the name of a subsidiary equation (i.e. not the
        'main' equation or linear predictor) does it need to be specified at
        all. By default <b>xpredict</b> works out the name of the main equation
        itself, by inspecting <b>e(b)</b>.
<p>
    <b>meanzero</b> centres the predicted values on their mean. If the <b>stdp</b> option
        is used, the standard error is adjusted accordingly. Note that with
        the <b>meanzero</b> option, <b>xpredict</b> subtracts the mean xb computed in the
        subsample defined by the [<i>if</i>] [<i>in</i>] filter, if any.  The prediction of
        xb and its standard error (<b>stdp</b> option) are done out of sample. Cases
        with any missing values for any member of <b>with()</b> are excluded.
<p>
    <b>stdp</b> predicts the standard error of (partial) xb.
<p>
    <b>with(</b><i>varlist</i><b>)</b> is not optional and specifies the variables to be used.
        These must be among the variables fitted in the most recent model.
        Factor variables are allowed.
<p>
    <i>predict_options</i> are any of the options of <b>predict</b> (in general, these will
        be estimation-command specific, though some are always available; see
        <b>predict</b>).
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>. regress y x1 x2 x3</b>
    <b>. xpredict f, with(x1 x2) double</b>
    <b>. xpredict fs, with(x1 x2) stdp</b>
    <b>. xpredict f, with(x1 x2) constant</b>
    <b>. xpredict f2, with(x1 x2) meanzero</b>
    <b>. xpredict f2s, with(x1 x2) meanzero stdp</b>
<p>
    <b>. poisson y x1 x2, exposure(pyears)</b>
    <b>. xpredict f, with(x1) eq(y)</b>
<p>
    <b>. stcox rem##sex i.who</b>
    <b>. xpredict xb, with(1.sex 1.rem 1.sex#1.rem)</b>
    <b>. table rem sex, contents(mean xb) format(%6.3)</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Patrick Royston, MRC Clinical Trials Unit, London.
    pr@ctu.mrc.ac.uk
<p>
<p>
<b><u>Also see</u></b>
<p>
</pre>
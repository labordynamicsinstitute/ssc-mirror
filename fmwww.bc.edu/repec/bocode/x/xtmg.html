<pre>
<p>
<b>help xtmg</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>xtmg</b> -- Estimating panel time series models with heterogeneous slopes
<p>
<p>
<b><u>Syntax</u></b>
<p>
    <b>xtmg</b> <i>varlist</i> [<i>if</i>] [<i>in</i>] [<b>,</b> <b>trend</b> <b>robust</b> <b>cce</b> <b>aug</b> <b>imp</b> <b>full</b> <b>level(</b><i>num</i><b>)</b>
    <b>res(</b><i>string</i><b>)</b>]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>xtmg</b> implements a number of panel time series estimators which allow for
    heterogeneous slope coefficients across group members and are also
    concerned with correlation across panel members (cross-section
    dependence):  the Pesaran and Smith (1995) Mean Group estimator, the
    Pesaran (2006) Common Correlated Effects Mean Group estimator and the
    Augmented Mean Group estimator, introduced in Eberhardt and Teal (2010)
    and Bond and Eberhardt (2009).
<p>
    <b><u>(i) Background</u></b>
<p>
    These various estimators are designed for 'moderate-T, moderate-N' macro
    panels, where moderate typically means from around 15
    time-series/cross-section observations --- from a micro panel perspective
    this is 'large-T, small-N' and from a time-series perspective 'small-T'
    and the analysis of this type of data is frequently dominated by
    estimators developed for micro datasets (see for instance the discussion
    in Roodman, 2009). Examples for this type of data include the Penn World
    Table and macro panel data from organisations such as the World Bank,
    FAO, IMF, OECD, etc, all of which provide time-series of frequently up to
    60 years across a significant number of developing and developed
    economies. For links to these and other datasets refer to this website.
<p>
    The estimators implemented here form part of the panel time series (aka
    nonstationary panel) literature, which emphasises variable
    nonstationarity, cross-section dependence as well as parameter
    heterogeneity (in the slope parameters, not just time-invariant effects).
    For discussion and illustration of the application of panel time series
    methods see Eberhardt and Teal (2010, 2011) and Moscone and Tosetti
    (2010).
<p>
<p>
    <b><u>(ii) Empirical Model</u></b>
<p>
    Assume the following simple model: for i=1,...,N ('group', typically
    countries or regions) and t=1,...,T (time, typically years) let
<p>
        (1)    y_it = x_it'*b_i + u_it
<p>
        (2)    x_it = a2_i + lambda_i*f_t + gamma_i*g_t + eps_it
<p>
        (3)    u_it = a1_i + lambda_i*f_t + e_it
<p>
    where x_it and y_it are observables, b_i are country-specific slopes on
    the observable regressors and u_it contains the unobservables and the
    error terms e_it. The unobservables in equation (3) are made up of
    standard group fixed effects a1_i, which capture time-invariant
    heterogeneity across groups, as well as an unobserved common factor f_t
    with heterogeneous factor loadings lambda_i, which can capture
    time-variant heterogeneity and cross-section dependence. Note that the
    factors (f_t and similarly g_t) are not limited to linear evolution over
    time, but can be non-linear and also nonstationary, with obvious
    implications for cointegration.  For simplicity the model only includes
    one covariate and one unobserved common factor in the estimation equation
    of interest (1). Additional problems arise if the regressors are driven
    by some of the same common factors as the observables: note the presence
    of f_t in equations (2) and (3), see discussion in Coakley, Fuertes and
    Smith (2006). eps_it and e_it are assumed white noise.
<p>
<p>
    <b><u>(iii) Empirical Implementation</u></b>
<p>
    All Mean Group type estimators follow the same principle methodology:
<p>
        (a) estimate a group-specific regression,
        (b) average the estimated coefficients across groups.
<p>
    The following describes the estimators implemented in this routine in
    some more detail.
<p>
    The <b>Pesaran and Smith (1995) Mean Group estimator</b> (MG) does not concern
    itself with cross-section dependence and assumes away lambda_i*f_t or
    models these unobservables with a linear trend.  Thus equation (1) above
    is estimated for each panel member i, including an intercept to capture
    fixed effects and optionally a linear trend to capture time-variant
    unobservables. The coefficients b_i are subsequently averaged across
    panel members -- here weights can be applied but in the standard
    implementation this is just the unweighted average. Note that the
    Blackburne and Frank (xtpmg if installed) command as well as a recent
    version of Persyn's (xtwest if installed) command optionally provide MG
    estimates for dynamic specifications.
<p>
    The <b>Pesaran (2006) Common Correlated Effects Mean Group estimator</b> (CCEMG)
    allows for the empirical setup as laid out in equations (1) to (3), which
    induces cross-section dependence, time-variant unobservables with
    heterogeneous impact across panel members and problems of identification
    (b_i is unidentified if the regressor contains f_t). The latter issue is
    comparable to the transmission bias problem in micro production function
    models, whereby inputs x_it are correlated with (from the
    econometrician's perspective) unobserved productivity shocks f_t. The
    CCEMG solves this problem with a simple but powerful augmentation of the
    group-specific regression equation: apart from the regressors x_it and an
    intercept this equation now includes the cross-section/panel averages
    (for the entire panel i=1,...,N) of the dependent and independent
    variables: ybar_t and xbar_t. Together these can account for the
    unobserved common factor f_t and given the group-specific estimation the
    heterogeneous impact (lambda_i) is also given. The coefficients b_i are
    again averaged across panel members, where different weights may be
    applied.
<p>
    In empirical application the estimated coefficients on the cross-section
    averaged variables as well as their average estimates are not
    interpretable in a meaningful way: they are merely present to blend out
    the biasing impact of the unobservable common factor. The focus of the
    estimator is on obtaining consistent estimates of the parameters related
    to the observable variables. The CCEMG approach is robust to the presence
    of a limited number of 'strong' factors as well as an infinite number of
    'weak' factors -- the latter can be associated with local spillover
    effects, whereas the former represent global shocks (see Pesaran and
    Tosetti (2010) for further details). Furthermore, as shown by Kapetanios,
    Pesaran and Yamagata (2011), these factors may be nonstationary.
<p>
    The <b>Augmented Mean Group estimator</b> (AMG) was developed in Eberhardt and
    Teal (2010) as an alternative to the Pesaran (2006) CCEMG with production
    function estimation in mind. In the CCEMG the set of unobservable common
    factors is treated as a nuisance, something to be accounted for which is
    not of particular interest for the empirical analysis. In cross-country
    production functions, however, unobservables represent Total Factor
    Productivity (TFP). Note that standard panel approaches to cross-country
    empirics are commonly based on a production function of Cobb-Douglas
    form, see Eberhardt and Teal (2011) for a detailed discussion of the
    growth empirics literature.
<p>
    The AMG procedure, which is further discussed and tested using Monte
    Carlo simulations in Bond and Eberhardt (2009), is implemented in three
    steps: (i) A pooled regression model augmented with year dummies is
    estimated by first difference OLS and the coefficients on the
    (differenced) year dummies are collected. They represent an estimated
    cross-group average of the evolution of unobservable TFP over time. This
    is referred to as 'common dynamic process'.  (ii) The group-specific
    regression model is then augmented with this estimated TFP process:
    either (a) as an explicit variable, or (b) imposed on each group member
    with unit coefficient by subtracting the estimated process from the
    dependent variable. Like in the MG case the regression model includes an
    intercept, which captures time-invariant fixed effects (TFP level). (iii)
    Like in the MG and CCEMG the group-specific model parameters are averaged
    across the panel. In simulations the AMG performed similarly well as the
    CCEMG in terms of bias or RMSE in panels with nonstationary variables
    (cointegrated or not) and multifactor error terms (cross-section
    dependence).
<p>
    Note that the <b>standard errors</b> reported in the averaged regression results
    (i.e. the standard output) are constructed following Pesaran and Smith
    (1995), thus testing the significant difference of the average
    coefficient from zero.  In practice the group-specific coefficients are
    regressed on an intercept, either without any weighting or attaching less
    weight to 'outliers' (see rreg for more details on the latter.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>cce</b> implements the Pesaran (2006) CCE Mean Group estimator (default:
    Pesaran and Smith (1995) Mean Group estimator). The output includes the
    averaged coefficients on the cross-section averages of the dependent and
    independent variables. These are identified by the suffix _<i>varname</i>.
<p>
    <b>aug</b> implements the Augmented MG estimator.
<p>
    <b>imp</b> specifies that the Augmented MG estimator is implemented by imposing
    the 'common dynamic process' with unit coefficient (by subtracting it
    from the dependent variable). This option only works in combination with
    <b>aug</b>.
<p>
    <b>trend</b> specifies a group-specific linear trend to be included in the
    regression model.
<p>
    <b>robust</b> estimates the outlier-robust mean of parameter coefficients across
    groups. This is implemented via the Stata command <b>rreg</b> for robust
    regression. An example of this practice can be found in Bond,
    Leblebicioglu and Schiantarelli (2010).  This option is <i>not to be</i>
    <i>confused</i> with the standard option calling for White
    heteroskedasticity-robust standard errors in the <b>reg</b> and <b>xtreg</b> commands.
<p>
    <b>full</b> provides the underlying group-specific regression results. These can
    also be accessed using the matrices stored as part of the the xtmg
    command: the group-specific coefficients in e(betas), related
    t-statistics in e(tbetas).
<p>
    <b>level(</b><i>num</i><b>)</b> specifies the confidence level for confidence intervals,
    allowing for values between 10 and 99.99 inclusive.  If option trend is
    used the routine will compute the number and share of group-specific
    trends in the sample which are significant at the (100-<i>num</i>) significance
    level.
<p>
    <b>res(</b><i>string</i><b>)</b> provides residuals which are stored in <i>string</i>. These can then
    be subjected to diagnostic tests, including for cross-section dependence
    (see xtcd if installed). Note that these residual series are not based on
    the linear prediction of the <i>averaged MG estimates</i> but are derived from
    the group-specific regressions. This is similar to the post-estimation
    command <b>predict</b> with the option<b> group(</b><i>varname</i><b>)</b> in the Random Coefficient
    Model estimator xtrc, although in the latter this only allows for
    predicted values with residuals not directly obtainable.
<p>
<p>
<b><u>Return values</u></b>
<p>
   Scalars
       <b>e(N)</b>               Number of observations used in the estimation
       <b>e(N_g)</b>             Number of groups
       <b>e(g_min)</b>           Lowest number of observations in an included group
       <b>e(g_max)</b>           Highest number of observations in an included group
       <b>e(g_avg)</b>           Average number of observations per included group
       <b>e(df_m)</b>            Model degrees of freedom
       <b>e(chi2)</b>            Wald chi-squared statistic 
       <b>e(sig2)</b>            Estimated variance of the model residuals
       <b>e(trend_sig)</b>       Share of group-specific linear trends statistically s
&gt; ignificant
                             (significance level determined by choice of level(
&gt;  ))
<p>
   Macros
       <b>e(cmd)</b>             Name of Stata command: "xtmg"
       <b>e(ivar)</b>            Group (panel) variable
       <b>e(tvar)</b>            Time variable
       <b>e(title2)</b>          Estimator selected: MG, AMG or CCEMG
       <b>e(depvar)</b>          Dependent variable
<p>
<p>
   Matrices
       <b>e(b)</b>               Vector of averaged coefficients
       <b>e(V)</b>               Variance-covariance matrix
       <b>e(betas)</b>           Matrix of group-specific regression coefficients, pri
&gt; nted with 
                             the <i>full</i> option
       <b>e(varbetas)</b>        Matrix of variances associated with group-specific re
&gt; gression
                             coefficients
       <b>e(stebetas)</b>        Matrix of standard errors associated with group-speci
&gt; fic 
                             regression coefficients, printed with the <i>full</i> opt
&gt; ion
       <b>e(tbetas)</b>          Matrix of t-statistics associated with group-specific
&gt;  regression 
                             coefficients, printed with the <i>full</i> option
<p>
   Functions
       <b>e(sample)</b>          Marks estimation sample
<p>
<p>
<b><u>Example</u></b>
<p>
Download manufacturing data (zipped file) for 48 countries from 1970 to 2002
(unbalanced panel), see Eberhardt and Teal (2010) for more details on data
construction and deflation, and open the manu.dta file in Stata.
<p>
Variables used here: ly - log value-added per worker, lk - log capital stock
per worker (for the manufacturing sector respectively).  The following
examples estimate cross-country production functions of the Cobb-Douglas form
with CRS imposed. Results can be compared with those in the above mentioned
paper (except for the -robust- option).
<p>
Set panel dimensions: time variable - year, country identifier - list
    .tsset list year
<p>
Production function model estimated using the standard MG estimator
    .xtmg ly lk
<p>
Dto with country-specific linear trend
    .xtmg ly lk, trend
<p>
Dto but computing outlier-robust (instead of unweighted) means
    .xtmg ly lk, trend robust
<p>
Production function model estimated using the CCEMG estimator
    .xtmg ly lk, cce
<p>
Dto but also printing country-specific results
    .xtmg ly lk, cce full
<p>
Dto but storing country-specific regression residuals in variable <i>cce_res</i>
    .xtmg ly lk, cce res(cce_res)
<p>
Production function model estimated using the AMG estimator (group-specific
    trend-terms included)
    .xtmg ly lk, trend aug
<p>
Dto but imposed the 'common dynamic process' with unit coefficient
    .xtmg ly lk, trend aug imp
<p>
<p>
<b><u>References</u></b>
<p>
Bond, Steve, Asli Leblebicioglu and Fabio Schiantarelli (2010) 'Capital
    accumulation and growth:  a new look at the empirical evidence,' <i>Journal</i>
    <i>of Applied Econometrics</i>, Vol. 25(7), pp.1073-1099.
<p>
Bond, Steve and Markus Eberhardt (2009) 'Cross-section dependence in
    nonstationary panel models: a novel estimator', paper presented at the
    Nordic Econometrics Conference in Lund, available from here.
<p>
Coakley, Jerry, Ana-Maria Fuertes and Ron P. Smith (2006) 'Unobserved
    heterogeneity in panel time series models', <i>Computational Statistics &amp;</i>
    <i>Data Analysis</i>, Vol.50(9), pp.2361-2380.
<p>
Eberhardt, Markus and Francis Teal (2011) 'Econometrics for Grumblers: A New
    Look at the Literature on Cross-Country Growth Empirics', <i>Journal of</i>
    <i>Economic Surveys</i>, Vol.25(1), pp.109–155, available from here.
<p>
Eberhardt, Markus and Francis Teal (2010) 'Productivity Analysis in Global
    Manufacturing Production', Economics Series Working Papers 515,
    University of Oxford, Department of Economics, available from here.
<p>
Kapetanios, George, M. Hashem Pesaran and Takashi Yamagata (2011) Panels with
    non-stationary multifactor error structures, <i>Journal of Econometrics</i>,
    Vol.160(2), pp.326-348.
<p>
Moscone, Francesco and Elisa Tosetti (2009) 'Health Expenditure and Income in
    the United States', <i>Health Economics</i>, Vol.19(12), pp.1385-1403.
<p>
Pesaran, M. Hashem (2006) 'Estimation and inference in large heterogeneous
    panels with a multifactor error structure.' <i>Econometrica</i>, Vol. 74(4):
    pp.967-1012.
<p>
Pesaran, M Hashem, Yongcheol Shin and Ron Smith (1999) 'Pooled mean group
    estimation of dynamic heterogeneous panels', <i>Journal of the American</i>
    <i>Statistical Association</i>, Vol.94 pp.621-634.
<p>
Pesaran, M. Hashem and Ron P. Smith (1995). 'Estimating long-run
    relationships from dynamic heterogeneous panels.' <i>Journal of</i>
    <i>Econometrics</i>, Vol. 68(1): pp.79-113.
<p>
Pesaran, M. Hashem and Elisa Tosetti (2010) 'Large Panels with Common Factors
    and Spatial Correlations', Cambridge University, unpublished working
    paper, December 2010.
<p>
Roodman, David (2009) 'A Note on the Theme of Too Many Instruments', Oxford
    Bulletin of Economics and Statistics, Department of Economics, Vol.
    71(1), pp.135-158.
<p>
<p>
<b><u>Acknowledgements and Disclaimer</u></b>
<p>
This routine builds to a considerable extent on the existing code for the
Swamy RCM estimator (xtrc), the Pesaran, Shin and Smith (1999) Pooled Mean
Group estimator written by Edward F. Blackburne and Mark W. Frank (xtpmg if
installed) and the Westerlund (2007) error correction cointegration test (
xtwest if installed) written by Damiaan Persyn. Thanks to Kit Baum for help
and support. Any errors are of course my own.
<p>
<p>
<b><u>Author</u></b>
<p>
Markus Eberhardt
Centre for the Study of African Economies
Department of Economics
University of Oxford
Manor Road, Oxford OX1 3UQ
markus.eberhardt@economics.ox.ac.uk 
<p>
<p>
<b><u>Also see</u></b>
<p>
Online: help for xtrc, xtpmg (if installed), xtwest (if installed), xtcsd (if
        installed), xtcd (if installed).
<p>
</pre>
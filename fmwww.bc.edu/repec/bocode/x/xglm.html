<pre>
-------------------------------------------------------------------------------
help for <b>xglm</b>                                                    (Roger Newson)
-------------------------------------------------------------------------------
<p>
<b><u>Extended version of </u></b><b><u>glm</u></b>
<p>
        <b>xglm</b> [ <i>varlist</i> ] [<i>if</i>] [<i>in</i>] [<i>weight</i>] [, <i>glm_options</i> ]
<p>
    where <i>glm_options</i> is a list of options used by <b>glm</b>.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>xglm</b> is an extended version of <b>glm</b>, designed mostly for use with the 
    <b>parmby</b> module of the <b>parmest</b> package, downloadable from SSC.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    <b>xglm</b> currently saves only 2 extra results, <b>e(depvarsum)</b> and <b>e(msum)</b>,
    containing the sum of the dependent variable specified in <b>e(depvar)</b> and
    the sum of the binomial total specified in <b>e(m)</b>, respectively, limited to
    the estimation sample specified in <b>e(sample)</b>.  This allows users of the 
    <b>parmby</b> module of the <b>parmest</b> package to output these sums to the output
    dataset (or resultsset) as an additional variable.  This is especially
    useful for models with a binomial or Poisson variance function, because
    the user can then use these extra variables to produce diagnostic
    variables, such as the number of events or non-events per estimated
    parameter, which can then inform the user regarding whether the Central
    Limit Theorem is likely to work for a binomial or Poisson generalized
    linear model in an estimation sample of the size available.
<p>
<p>
<b><u>Examples</u></b>
<p>
    The following example illustrates the use of <b>e(depvarsum)</b> to store an
    event count in a <b>parmby</b> resultsset containing the parameters of 2
    logistic regression models of non-US origin with respect to repair
    record, one in even-numbered models, one in odd-numbered models.  In the
    resultsset, the diagnostic indicator variable <b>epparm</b> contains the number
    of events or nonevents (whichever is smaller) per estimated parameter.
    The values of this diagnostic variable are well below 5, indicate that
    the Central Limit Theorem will not work very well for the parameter
    estimates.  Note that the number of estimated parameters is stored in
    <b>e(df_m)</b>, because we are using the <b>noconst</b> option, and the variable
    <b>baseline</b>, to cause the baseline odds to be displayed by <b>glm</b> with the
    <b>eform</b> option.
<p>
    Set-up:
<p>
        <b>.sysuse auto, clear</b>
        <b>.gene byte odd=mod(_n,2)</b>
        <b>.lab var odd "Oddness of model sequence number"</b>
        <b>.lab def odd 0 "Even" 1 "Odd"</b>
        <b>.lab val odd odd</b>
        <b>.gene byte baseline=1</b>
        <b>.lab var baseline "Baseline"</b>
        <b>.describe</b>
<p>
    Estimation and diagnostics:
<p>
        <b>.parmby "xglm foreign baseline i.rep78, family(bin) link(logit) eform</b>
            <b>noconst robust", eform omit escal(df_m N depvarsum) rename(es_1</b>
            <b>Nparm es_2 N es_3 Nforeign) by(odd) norestore</b>
        <b>.gene enevents=min(Nforeign,N-Nforeign)</b>
        <b>.gene nepparm=enevents/Nparm</b>
        <b>.lab var enevents "Events or non-events"</b>
        <b>.lab var nepparm "Events or non-events per parameter"</b>
        <b>.describe</b>
        <b>.by odd: list parm N Nparm Nforeign enevents nepparm omit estimate</b>
            <b>min* max* p</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Roger Newson, National Heart and Lung Institute, Imperial College London,
    UK.
    Email: r.newson@imperial.ac.uk
<p>
<p>
<b><u>Saved results</u></b>
<p>
    <b>xglm</b> saves in <b>e()</b> all results saved by <b>glm</b>, and also the following:
<p>
    Scalars        
      <b>e(depvarsum)</b>        sum of dependent variable in estimation sample
      <b>e(msum)</b>             sum of binomial trials <b>e(m)</b> in estimation sample
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] glm</b>
<p>
      Help:  <b>[R] glm</b>
             <b>parmest</b>, <b>parmby</b> if installed
</pre>
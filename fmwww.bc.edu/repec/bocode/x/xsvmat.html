<pre>
-------------------------------------------------------------------------------
help for <b>xsvmat</b>                                                  (Roger Newson)
-------------------------------------------------------------------------------
<p>
<b><u>Convert a matrix to variables in an output dataset (or resultsset)</u></b>
<p>
        <b>xsvmat</b> [<i>type</i>] <i>A</i> [<b>,</b>
                 <b><u>li</u></b><b>st(</b> [<i>varlist</i>] [<i>if</i>] [<i>in</i>] [ , [<i>list_options</i>] ] <b>)</b>
                 <b><u>sa</u></b><b>ving(</b><i>filename</i>[<b>, replace</b>]<b>)</b> <b>no</b><b><u>re</u></b><b>store</b> <b>fast</b>
                 <b><u>fl</u></b><b>ist(</b><i>global_macro_name</i><b>)</b>
                 <b><u>n</u></b><b>ames(col</b>|<b>eqcol</b>|<b>matcol</b>|<i>string</i><b>)</b>
                 <b><u>idn</u></b><b>um(</b><i>#</i><b>)</b> <b><u>nidn</u></b><b>um(</b><i>newvarname</i><b>)</b> <b><u>ids</u></b><b>tr(</b><i>string</i><b>)</b> <b><u>nids</u></b><b>tr(</b><i>newvarname</i><b>)</b>
                 <b><u>rowe</u></b><b>q(</b><i>newvarname</i><b>)</b> <b><u>rown</u></b><b>ames(</b><i>newvarname</i><b>)</b>
                 <b><u>roweqn</u></b><b>ames(</b><i>newvarname</i><b>)</b> <b><u>rowl</u></b><b>abels(</b><i>newvarname</i><b>)</b>
                 <b><u>cole</u></b><b>q(</b><i>charname</i><b>)</b> <b><u>coln</u></b><b>ames(</b><i>charname</i><b>)</b> <b><u>coleqn</u></b><b>ames(</b><i>charname</i><b>)</b>
                 <b><u>coll</u></b><b>abels(</b><i>charname</i><b>)</b>
                 <b><u>ren</u></b><b>ame(</b><i>renaming_list</i><b>)</b> <b><u>fo</u></b><b>rmat(</b><i>varlist_1 format_1 ...</i>
                 <i>varlist_n format_n</i><b>)</b>
                 ]
<p>
    where <i>A</i> is the name of an existing matrix, and <i>type</i> is a storage type for
    new variables, and <i>renaming_list</i> is a list of variable names of form
<p>
    <i>oldvarname_1 newvarname_1 ... oldvarname_n newvarname_n</i>
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>xsvmat</b> is an extended version of <b>svmat</b>.  It creates an output dataset (or
    resultsset), with one observation per row of an existing matrix, and data
    on the values of the column entries in that row, and, optionally, extra
    variables specified by the user.  The output dataset created by <b>xsvmat</b>
    may be listed to the Stata log, or saved to a disk file, or written to
    the memory (overwriting any pre-existing dataset).
<p>
<p>
<b><u>Options for use with </u></b><b><u>xsvmat</u></b>
<p>
<b>xsvmat</b> has a large number of options, which are listed in 2 groups:
<p>
<b>1.</b> Output-destination options.  (These specify where the output dataset will be
    written.)
<p>
<b>2.</b> Output-variable options. (These specify the variables in the output
    dataset.)
<p>
<p>
<b><u>Output-destination options</u></b>
<p>
    <b>list(</b> [<i>varlist</i>] [<i>if</i>] [<i>in</i>] [, <i>list_options</i> ] <b>)</b> specifies a list of
        variables in the output dataset, which will be listed to the Stata
        log by <b>xsvmat</b>.  The <b>list()</b> option can be used with the <b>format()</b>
        option (see below) to produce a listing with user-specified numbers
        of decimal places or significant figures.  The user may optionally
        also specify <b>if</b> or <b>in</b> qualifiers to list subsets of combinations of
        variable values, or change the display style using a list of
        <i>list_options</i> allowed as options by the <b>list</b> command.
<p>
    <b>saving(</b><i>filename</i>[<b>, replace</b>]<b>)</b> saves the output dataset to a disk file.  If
        <b>replace</b> is specified, and a file of that name already exists, then
        the old file is overwritten.
<p>
    <b>norestore</b> specifies that the output dataset will be written to the
        memory, overwriting any pre-existing dataset.  This option is
        automatically set if <b>fast</b> is specified.  Otherwise, if <b>norestore</b> is
        not specified, then the pre-existing dataset is restored in the
        memory after the execution of <b>xsvmat</b>.
<p>
    <b>fast</b> is a stronger version of <b>norestore</b>, intended for use by programmers.
        It specifies that the pre-existing dataset in the memory will not be
        restored, even if the user presses <b>Break</b> during the execution of
        <b>xsvmat</b>.  If <b>norestore</b> is specified and <b>fast</b> is absent, then <b>xsvmat</b>
        will go to extra work so that it can restore the original data if the
        user presses <b>Break</b>.
<p>
    Note that the user must specify at least one of the four options <b>list()</b>,
        <b>saving()</b>, <b>norestore</b> and <b>fast</b>.  These four options specify whether the
        output dataset is listed to the Stata log, saved to a disk file, or
        written to the memory (overwriting any pre-existing dataset).  More
        than one of these options can be specified.
<p>
    <b>flist(</b><i>global_macro_name</i><b>)</b> specifies the name of a global macro, containing
        a filename list (possibly empty).  If <b>saving()</b> is also specified,
        then <b>xsvmat</b> will append the name of the dataset specified in the
        <b>saving()</b> option to the value of the global macro specified in
        <b>flist()</b>.  This enables the user to build a list of filenames in a
        global macro, containing the output of a sequence of output datasets.
        These files may later be concatenated using <b>append</b>, or using <b>dsconcat</b>
        (downloadable from SSC) if installed.
<p>
<p>
<b><u>Output-variable options</u></b>
<p>
    <b>names(col</b>|<b>eqcol</b>|<b>matcol</b>|<i>string</i><b>)</b> specifies how the new variables created
        from the matrix columns are to be named.
<p>
        <b>names(col)</b> uses the column names of the matrix to name the variables.
<p>
        <b>names(eqcol)</b> uses the equation names prefixed to the column names.
<p>
        <b>names(matcol)</b> uses the matrix name prefixed to the column names.
<p>
        <b>names(</b><i>string</i><b>)</b> names the variables <i>string</i><b>1</b>, <i>string</i><b>2</b>, ..., <i>string</i>n,
        where <i>string</i> is a user-specified <i>string</i> and n is the number of
        columns of the matrix.
<p>
        If <b>names()</b> is not specified, the variables are named <i>A</i><b>1</b>, <i>A</i><b>2</b>, ...,
        where <i>A</i> is the name of the matrix.
<p>
    <b>idnum(</b><i>#</i><b>)</b> specifies an ID number for the output dataset.  It is used to
        create a numeric variable, with default name <b>idnum</b>, in the output
        dataset, with that value for all observations.  This is useful if the
        output dataset is concatenated with other <b>xsvmat</b> output datasets
        using <b>append</b>, or using <b>dsconcat</b> if installed.
<p>
    <b>nidnum(</b><i>newvarname</i><b>)</b> specifies a name for the numeric ID variable evaluated
        by <b>idnum()</b>.  If <b>idnum()</b> is present and <b>nidnum()</b> is absent, then the
        name of the numeric ID variable is set to <b>idnum</b>.
<p>
    <b>idstr(</b><i>string</i><b>)</b> specifies an ID string for the output dataset.  It is used
        to create a string variable, with default name <b>idstr</b> in the output
        dataset, with that value for all observations.  This is useful if the
        output dataset is concatenated with other <b>xsvmat</b> output datasets
        using <b>append</b>, or using <b>dsconcat</b> if installed.
<p>
    <b>nidstr(</b><i>newvarname</i><b>)</b> specifies a name for the string ID variable evaluated
        by <b>idstr()</b>.  If <b>idstr()</b> is present and <b>nidstr()</b> is absent, then the
        name of the string ID variable is set to <b>idstr</b>.
<p>
    <b>roweq(</b><i>newvarname</i><b>)</b> specifies a name for a new variable to be created in
        the output dataset, containing the matrix row equation name.
<p>
    <b>rownames(</b><i>newvarname</i><b>)</b> specifies a name for a new variable to be created in
        the output dataset, containing the matrix row name.
<p>
    <b>roweqnames(</b><i>newvarname</i><b>)</b> specifies a name for a new variable to be created
        in the output dataset, containing the matrix row name, prefixed by
        the row equation name followed by a colon, if the row equation name
        is present.
<p>
    <b>rowlabels(</b><i>newvarname</i><b>)</b> specifies a name for a new variable to be created
        in the output dataset, containing, in the observation corresponding
        to each row, the variable label of the variable in the existing
        dataset whose name is the matrix row name (if such a variable
        exists), or "Constant" if the row name is <b>_cons</b>.
<p>
    <b>coleq(</b><i>charname</i><b>)</b> specifies a name for a variable characteristic to be set
        for each matrix column variable in the output dataset, containing the
        matrix column equation name.
<p>
    <b>colnames(</b><i>charname</i><b>)</b> specifies a name for a variable characteristic to be
        set for each matrix column variable in the output dataset, containing
        the matrix column name.
<p>
    <b>coleqnames(</b><i>charname</i><b>)</b> specifies a name for a variable characteristic to be
        set for each matrix column variable in the output dataset, containing
        the matrix column name, prefixed by the column equation name followed
        by a colon, if the column equation name is present.
<p>
    <b>collabels(</b><i>charname</i><b>)</b> specifies a name for a variable characteristic to be
        set for each matrix column variable in the output dataset, containing
        the variable label of the variable in the existing dataset whose name
        is the matrix column name (if such a variable exists), or "Constant"
        if the column name is <b>_cons</b>.
<p>
    <b>rename(</b><i>oldvarname_1 newvarname_1 ... oldvarname_n newvarname_n</i><b>)</b> specifies
        a list of pairs of variable names.  The first variable name of each
        pair specifies a variable in the <b>parmest</b> output dataset, which is
        renamed to the second variable name of the pair.
<p>
    <b>format(</b><i>varlist_1 format_1 ... varlist_n format_n</i><b>)</b> specifies a list of
        pairs of variable lists and display formats.  The formats will be
        allocated to the variables in the output dataset specified by the
        corresponding <i>varlist_i</i> lists.  If <b>rename()</b> is specified, then any
        variable names specified by the <b>format()</b> option must be the new
        names.
<p>
<p>
<b><u>Examples</u></b>
<p>
    Set-up commands:
<p>
    <b>. sysuse auto, clear</b>
    <b>. regress mpg weight length price foreign</b>
    <b>. matrix define covmat=e(V)</b>
    <b>. matrix list covmat</b>
<p>
    The following examples use the <b>list()</b> option to list the output dataset
    to the Stata log.  After these examples are executed, there is no new
    dataset either in the memory or on disk.
<p>
    <b>. xsvmat covmat, list(,)</b>
    <b>. xsvmat covmat, rowname(xvar) rowlab(label) list(, abbr(32))</b>
<p>
    The following example uses the <b>rowlabel()</b>, <b>collabel()</b> and <b>list()</b> options
    to list a matrix, with its rows and columns labelled with the
    corresponding variable labels in the existing dataset.
<p>
    <b>. xsvmat covmat, rowlabel(rowid) collabel(varname) list(, abbr(32)</b>
        <b>subvarname)</b>
<p>
    The following example uses the <b>norestore</b> option to create an output
    dataset in the memory, overwriting any pre-existing dataset.
<p>
    <b>. xsvmat double covmat, norestore rownames(param) rowlabels(varlab)</b>
    <b>. describe</b>
    <b>. list</b>
<p>
    The following example uses the <b>saving()</b> option to create an output
    dataset in a disk file.
<p>
    <b>. xsvmat covmat, rowname(parm) rowlab(parmlab) name(matcol)</b>
        <b>saving(mycovs1.dta, replace)</b>
    <b>. describe using mycovs1</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Roger Newson, National Heart and Lung Institute, Imperial College London,
    UK.  Email: r.newson@imperial.ac.uk
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[P] matrix mkmat</b>, <b>[D] append</b>, <b>[D] format</b>
<p>
    Online:  help for <b>svmat</b>, <b>mkmat</b>, <b>append</b>, <b>format</b>
             help for <b>dsconcat</b> if installed
</pre>
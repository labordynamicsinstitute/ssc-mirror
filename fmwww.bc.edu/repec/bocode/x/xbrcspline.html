<pre>
<b>help xbrcspline</b> 
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>xbrcspline</b> -   Differences in predicted responses after restricted cubic
                      spline models
<p>
<b><u>Syntax</u></b>
<p>
<p>
        <b>xbrcspline</b> <i>stubname</i> <b>,</b> <b><u>matk</u></b><b>nots(</b><i>matname</i><b>)</b> <b><u>v</u></b><b>alues(</b><i>numlist</i><b>)</b> <b><u>r</u></b><b>eference(</b><i>#</i><b>)</b>
                 [ <b><u>ls</u></b><b>plines</b> <b>level(</b><i>#</i><b>)</b> <b>eform</b> <b><u>f</u></b><b>ormat(%</b><i>fmt</i><b>)</b> ]
<p>
<b><u>Description</u></b>
<p>
    <b>xbrcspline</b> displays differences in the predicted responses (linear
    combinations of coefficients) after estimating a restricted cubic spline
    model.  The location and spacing of the knots is determined by the
    specification of the <b>matknots()</b> option.  The list of covariate values at
    which calculate differences is specified with the <b><u>v</u></b><b>alues(</b><i>numlist</i><b>)</b> option.
    The reference value is specified with the <b>reference(</b><i>#</i><b>)</b> option.
<p>
<b><u>Options</u></b>
<p>
        +---------+
    ----+ Options +----------------------------------------------------------
<p>
    <b><u>matk</u></b><b>nots(</b><i>matname</i><b>)</b> specifies the matrix of knots used to create the
        splines. This can be easily obtained from the saved results of the
        mkspline command.
<p>
    <b><u>v</u></b><b>alues(</b><i>numlist</i><b>)</b> specifies the values of the original covariate at which
        the <b>xbrcspline</b> calculates differences in predicted responses.
<p>
    <b><u>r</u></b><b>eference(</b><i>#</i><b>)</b> specifies the reference covariate value (not necessarily
        included in <b><u>v</u></b><b>alues(</b><i>numlist</i><b>)</b>).
<p>
    <b><u>ls</u></b><b>plines</b> displays the values of the restricted cubic splines
        corresponding to <b><u>v</u></b><b>alues(</b><i>numlist</i><b>)</b>.
<p>
    <b>eform</b> specifies that all report coefficient estimates as exp(b) rather
        than b.
<p>
    <b><u>f</u></b><b>ormat(%</b><i>fmt</i><b>)</b> specifies the display format for presenting numbers.
        <b>format(%3.2f)</b> is the default; see help format.
<p>
    <b>level(</b><i>#</i><b>)</b> specifies a confidence level to use for confidence intervals.
        The default is 95%. See help on level.
<p>
    <b><u>gen</u></b><b>erate(</b><i>newvar1 newvar2 newvar3 newvar4</i><b>)</b> specifies that the specified
        <b><u>v</u></b><b>alues(</b><i>numlist</i><b>)</b> of the continuous covariate , the differences in
        predicted responses, lower and upper confidence limits to be be saved
        in <i>newvar1</i>, <i>newvar2</i>, <i>newvar3</i>, and <i>newvar4</i> respectively.
<p>
<p>
<b><u>Example</u></b>
<p>
        use http://nicolaorsini.altervista.org/data/whitehall1, clear
<p>
        <b>// Step 1. Create the restricted cubic splines and save the knots.</b>
<p>
        mkspline sysbps = sysbp , nknots(4) cubic displayknots
        mat knots = r(knots)
<p>
        <b>// Step 2. Fit the model.</b>
<p>
        logit all10 sysbps* age
<p>
        <b>// Step 3. Display the results in a tabular or graphical form.</b>
<p>
        <b>* Display odds ratios and 95% CI for a set of exposure values of</b>
            <b>interest.</b>
<p>
        xbrcspline sysbps , values(89 98 107 116 126 135 148 167 188 211)
            ref(107) eform matknots(knots)
<p>
        <b>* Display and save as new variables odds ratios and 95% CI for each</b>
            <b>distinct observed value of the exposure.</b>
<p>
        levelsof sysbp
        xbrcspline sysbps , values(`r(levels)') ref(107) matknots(knots)
            eform gen(sbp or lb ub)
<p>
        <b>* Plot the results. Below is an example suitable for publication that</b>
            <b>you can copy and paste in the do-file editor:</b>
<p>
        twoway (line lb ub or sbp, lp(- - l) lc(black black black) ) ///
                if inrange(sbp,98,200)  , ///
                                scheme(s1mono) legend(off) ///
                                ylabel(0(.5)4, angle(horiz) format(%2.1fc) ) //
&gt; /
                                xlabel(100(10)200) ///
                                ytitle("Odds ratio of death within 10-years") /
&gt; //
                                xtitle("Systolic blood pressure, mm Hg")
<p>
<b><u>More examples and information</u></b>
<p>
    The command <b>xbrcspline</b> was introduced at the 2009 Nordic and Baltic Stata
    Users Group meeting.
    The slides of the talk are here 
    http://www.stata.com/meeting/sweden09/se09_orsini.pdf
<p>
<b><u>Author</u></b>
<p>
    nicola.orsini@ki.se, Karolinska Institutet
    http://nicolaorsini.altervista.org
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] mkspline</b>
<p>
      Help:  <b>[R] mkspline</b>
<p>
SSC Archive:  <b>postrcspline</b> (if installed)
 
</pre>
<pre>
<b><u>Title</u></b>
<p>
                  Potential outcome parameter estimation
<p>
<p>
<a name="syntax"></a><b><u>Syntax</u></b>
<p>
        <b>poparms</b> (<i>treatvar</i> <i>gpsvars</i>) (<i>depvar</i> <i>cvars</i>) [<i>if</i>] [<i>in</i>] [<b>,</b> <i>options</i>]
<p>
    <i>options</i>                       Description
    -------------------------------------------------------------------------
      <b><u>quant</u></b><b>iles</b>(<i>numlist</i>)          estimate specified quantiles
<p>
      <b>vce</b>(vcetype [, <i>vceoptions</i>]) <i>vcetype</i> may be <b>bootstrap</b>, <b>analytic</b>, or
                                    <b>none</b>.
                                  <b>analytic</b> is the default when <b>quantiles()</b> is
                                  not specified.  <b>bootstrap</b> is the default
                                  when <b>quantiles()</b> is specified.
                                  <i>vceoptions</i> vary over <i>vcetype</i> and are
                                  discussed below.
<p>
      <b>ipw</b>                         use inverse-probability-weighted (IPW)
                                    estimator instead of default
                                    efficient-influence-function (EIF)
                                    estimator
<p>
INCLUDE help shortdes-coeflegend
<p>
    -------------------------------------------------------------------------
    <i>gpsvars</i> and <i>cvars</i> may contain time-series operators; see fvvarlist.
<p>
<a name="description"></a><b><u>Description</u></b>
<p>
    <b>poparms</b> estimates parameters of the potential-outcome distributions in
    causal inference.
<p>
    The estimators implemented in <b>poparms</b> were derived in Cattaneo(2010).
    Cattaneo, Drukker, and Holland (2012) provides an introduction to this
    command.
<p>
<p>
<a name="options"></a><b><u>Options</u></b>
<p>
    <b>quantiles()</b> specifies the quantiles of the potential outcome
        distributions that are to be estimated jointly with the means.  By
        default, only the means are estimated.  By default, method
        <b>vce(bootstrap)</b> is used when <b>quantiles()</b> is specified.  We strongly
        recommend not using <b>vce(analytic)</b> when <b>quantiles()</b> is specified.
<p>
    <b>vce()</b> specifies the method used to estimate the variance-covariance of
        the estimator.
<p>
        <b>vce:(</b><i>vcetype</i> [, <i>vceoptions</i>])} specifies the <i>vcetype</i> and the type
          specific options.
<p>
          When specifying <b>vce(bootstrap)</b>, the <i>vceoption</i> is <i>reps(#)</i> which
            specifies the number of bootstrap repetitions which must be
            integer that is at least 50.
<p>
          With method <b>analytic</b>, the <i>vceoptions</i> are <b>bwscale(</b><i>#</i><b>))</b>,
            <b>bwidths(</b><i>matname</i><b>)</b>, and <b>densities(</b><i>matname</i><b>)</b>.  These suboptions are
            mutually exclusive.
<p>
          By default, <b>poparms</b> uses an analytic estimator when only means are
            estimated and it uses a bootstrap estimator when quantiles are
            estimated.  We recommend not using the analytic method when
            quantiles are specified because this method performed poorly in
            Monte Carlo simulations.
<p>
            With method <b>bootstrap</b>, you may change the number of repetitions
              from the default 2000 by specifying <b>vce(bootstrap , reps(</b><i>#</i><b>))</b>.
              The specified number of repetitions must an integer greater
              than 49.
<p>
            With method <b>analytic</b>, you may rescale the bandwidths used to
              estimate the densities by specifying <b>vce(analytic, bwscale(</b><i>#</i><b>))</b>.
              The specified number must be in the interval [.1, 10].
<p>
            With method <b>analytic</b>, you may specify the bandwidths used to
              estimate the densities by specifying <b>vce(analytic,</b>
              <b>bwidths(</b><i>matname</i><b>))</b>, where <i>matname</i> specifies a Stata row vector
              with the number of columns equal to the number of quantiles
              times the number of treatment levels.
<p>
            With method <b>analytic</b>, you may specify the densities used
              <b>vce(analytic, densities(</b><i>matname</i><b>))</b>, where <b>matname</b> specifies a
              Stata row vector with the number of columns equal to the number
              of quantiles times the number of treatment levels.
<p>
    <b>ipw</b> specifies that <b>poparms</b> use the IPW estimator instead of the default
        EIF estimator.  The methods and differences are described in
        Cattaneo, Drukker, and Holland (2012).
<p>
    <b>coeflegend</b>; see <b>[R] estimation options</b>.
<p>
<p>
<a name="examples"></a><b><u>Examples</u></b>
<p>
    ---------------------------------------------------------------------------
    Setup
        <b>. use spmdata</b>
<p>
    Mean estimation
        <b>. poparms (w pindex eindex) (spmeasure pindex eindex)</b>
<p>
    Mean estimation with polynomial for conditional mean
        <b>. poparms (w pindex eindex) (spmeasure c.(pindex eindex)#c.(pindex</b>
            <b>eindex))</b>
<p>
    Mean and quantile estimation with polynomial for conditional mean
        This example limits the number of of bootstrap repetitions to 50 so
        that the example runs relatively quickly.  We recommend using at
        least the default of 2000 repetitions in practice.
<p>
        <b>. poparms (w pindex eindex) (spmeasure c.(pindex eindex)#c.(pindex</b>
            <b>eindex)), quantiles(.25 .75) vce(bootstrap, reps(50))</b>
<p>
<a name="saved_results"></a><b><u>Saved results</u></b>
<p>
    <b>poparms</b> saves the following in <b>e()</b>:
<p>
    Scalars        
      <b>e(N)</b>                number of observations
      <b>e(k)</b>                number of variables in conditional mean
      <b>e(bwscale)</b>          scale for bandwidths, if specified
      <b>e(reps)</b>             number of requested bootstrap repetitions, if
                            specified}
      <b>e(bsreps)</b>           number of successful bootstrap repetitions, if
                            specified}
<p>
    Macros         
      <b>e(cmd)</b>              <b>poparms</b>
      <b>e(cmdline)</b>          command as typed
      <b>e(depvar)</b>           name of dependent variable
      <b>e(title)</b>            title in estimation output
      <b>e(title2)</b>           second title in estimation output
      <b>e(vce)</b>              <i>vcetype</i> specified in <b>vce()</b>
      <b>e(vcetype)</b>          title used to label Std. Err.
      <b>e(quantiles)</b>        specified quantiles
      <b>e(properties)</b>       <b>b V</b> or <b>b</b> if <b>vce(none)</b>
      <b>e(predict)</b>          program used to implement <b>predict</b>
<p>
    Matrices       
      <b>e(b)</b>                coefficient vector
      <b>e(V)</b>                variance-covariance matrix of the estimators
      <b>e(V1)</b>               outer product Psi functions used in variance
<p>
    Functions      
      <b>e(sample)</b>           marks estimation sample
<p>
<p>
<b><u>References</u></b>
<p>
    Cattaneo, M. D. 2010.  Efficient Semiparametric Estimation of
        Multi-valued Treatment Effects under Ignorability. Journal of
        Econometrics 155(2):  138-154.  
        http://www.sciencedirect.com/science/article/pii/S030440760900236X
<p>
    Cattaneo, M. D., D. M. Drukker, and A. Holland. 2012.  Estimation of
        multivalued treatment effects under conditional independence.
        Working paper, University of Michigan, Department of Economics, 
        http://www-personal.umich.edu/~cattaneo/papers/Cattaneo-Drukker-Holla
        &gt; nd_2012_STATA.pdf.
<p>
<p>
<b><u>Authors</u></b>
<p>
    Matias D. Cattaneo, University of Michigan, Ann Arbor, MI.
        cattaneo@umich.edu.
<p>
    David M. Drukker, StataCorp, College Station, TX.  ddrukker@stata.com.
<p>
</pre>
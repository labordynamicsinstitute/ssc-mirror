<pre>
-------------------------------------------------------------------------------
help for <b>paretofit</b>          Stephen P. Jenkins &amp; Philippe Van Kerm (April 2007)
-------------------------------------------------------------------------------
<p>
<b><u>Fitting a Pareto (Type I) distribution by ML to unit record data</u></b>
<p>
        <b>paretofit</b> <i>var</i> [<i>weight</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<b>,</b> <b><u>a</u></b><b>var(</b><i>varlist</i><b>)</b>
                 <b>cdf(</b><i>cdfname</i><b>)</b> <b>pdf(</b><i>pdfname</i><b>)</b> <b><u>r</u></b><b>obust</b> <b><u>cl</u></b><b>uster(</b><i>varname</i><b>)</b> <b><u>f</u></b><b>rom(</b><i>#</i><b>)</b>
                 <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <i>maximize_options</i> ]
<p>
    <b>by</b> and <b>svy</b> prefixes are allowed (but not jointly); see prefix.
<p>
    <b>fweight</b>s, <b>aweight</b>s, <b>pweight</b>s, and <b>iweight</b>s are allowed; see weight.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>paretofit</b> fits by ML a Pareto (Type I) distribution to sample
    observations on a random variable <i>var</i>. Unit record data are assumed
    (rather than grouped data).
<p>
    The Pareto distribution is named after the Italian economist Vilfredo
    Pareto (1848-1923). It is one of the most famous and widely studied
    statistical size distributions.  It is well-known for approximating
    wealth distributions, but has applications in many different fields (e.g.
    for size distibutions of human setllements, sand particles, word
    frequencies, or for assessing portfolio risk). See Kleiber and Kotz
    (2003) for a comprehensive review of the Pareto (and other)
    distributions.
<p>
    The likelihood function for a sample of observations on <i>var</i> is specified
    as the product of the densities for each observation (weighted where
    relevant), and is maximized using <b>ml model lf</b>. A closed-form expression
    for the ML estimator of the Pareto Type I shape parameter is readily
    available but estimation with <b>ml model</b> allows us to accommodate various
    sample design easily, as well as inclusion of covariates.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>x0(</b><i>scalar</i><b>)</b> specifies the scale parameter of the Pareto distribution (see
        formula below). The Pareto distribution is fitted only to sample
        observations where <i>var</i>&gt;=<i>x0</i>.  By default, <i>x0</i> is set to the minimum
        value of <i>var</i> (within the sub-sample identified by <b>if</b> and <b>in</b> clauses).
<p>
    <b>avar(</b><i>varlist</i><b>)</b> allows the user to specify the shape parameter of the
        distribution as a function of the covariates specified in <i>varlist</i>. A
        constant term is always included.
<p>
    <b>stats</b> displays selected distributional statistics implied by the Pareto
        parameter estimate:  quantiles, cumulative shares of total <i>var</i> at
        quantiles (i.e. the Lorenz curve ordinates), the mode, mean, standard
        deviation, variance, half the coefficient of variation squared, Gini
        coefficient, and quantile ratios p90/p10, p75/p25. This option is not
        available together with <b>avar(</b><i>varlist</i><b>)</b>.
<p>
    <b>poorfrac(</b><i>#</i><b>)</b> displays the estimated proportion with values of <i>var</i> less
        than the cut-off specified by <i>#</i>. This option may be specified when
        replaying results.
<p>
    <b>cdf(</b><i>cdfname</i><b>)</b> creates a new variable <i>cdfname</i> containing the estimated
        Pareto c.d.f. value F(x) for each x.
<p>
    <b>pdf(</b><i>pdfname</i><b>)</b> creates a new variable <i>pdfname</i> containing the estimated
        Pareto p.d.f. value f(x) for each x.
<p>
<p>
    <b>robust</b> specifies that the Huber/White/sandwich estimator of variance is
        to be used in place of the traditional calculation; see <b>[U] 23.14</b>
        <b>Obtaining robust variance estimates</b>.  <b>robust</b> combined with <b>cluster()</b>
        allows observations which are not independent within cluster
        (although they must be independent between clusters).  pweights imply
        <b>robust</b>.
<p>
    <b>cluster(</b><i>varname</i><b>)</b> specifies that the observations are independent across
        groups (clusters) but not necessarily within groups.  <i>varname</i>
        specifies to which group each observation belongs; e.g.,
        <b>cluster(personid)</b> in data with repeated observations on individuals.
        See <b>[U] 23.14 Obtaining robust variance estimates</b>. <b>cluster()</b> can be
        used with pweights to produce estimates for unstratified
        cluster-sampled data. Use the svy prefix for full complex survey
        design support. Specifying <b>cluster()</b> implies <b>robust</b>.
<p>
    <b>from(</b><i>#</i><b>)</b> specifies a starting value for the maximum likelhood estimation.
<p>
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for the confidence
        intervals of the coefficients; see help level.
<p>
    <b>nolog</b> suppresses the iteration log.
<p>
    <i>maximize_options</i> control the maximization process. The options available
        are those shown by maximize. If you are seeing many "(not concave)"
        messages in the iteration log, using the <b>difficult</b> or <b>technique</b>
        options may help convergence.
<p>
<p>
<b><u>Saved results</u></b>
<p>
    In addition to the usual results saved after <b>ml</b>, <b>paretofit</b> saves the
    following, if no covariates have been specified and the relevant options
    are used:
<p>
    <b>e(ba)</b> is the estimated Pareto Type I shape parameter.
<p>
    <b>e(cdfvar)</b> and <b>e(pdfvar)</b> are the variable names specified for the c.d.f.
    and the p.d.f.
<p>
    <b>e(mode)</b>, <b>e(mean)</b>, <b>e(var)</b>, <b>e(sd)</b>, <b>e(i2)</b>, and <b>e(gini)</b> are the estimated
    mode, mean, variance, standard deviation, half coefficient of variation
    squared, Gini coefficient. <b>e(pX)</b>, and <b>e(LpX)</b> are the quantiles, and
    Lorenz ordinates, where X = {1, 5, 10, 20, 25, 30, 40, 50, 60, 70, 75,
    80, 90, 95, 99}.
<p>
<p>
<b><u>Formulae</u></b>
<p>
    The Pareto (Type I) distribution has cumulative distribution function
    (c.d.f.)
<p>
        F(x) = 1 - { x0 / x }^a
<p>
    where a&gt;0 is a shape parameter (estimated by <b>paretofit</b>), x0 is a scale
    parameter, and x &gt;= x0 &gt; 0 is a random variable.  The right tail of a
    Pareto distribution is heavier as a is smaller.
<p>
    The probability density function (p.d.f.) is
<p>
        f(x) = a*(x0^a) / x^(a+1).
<p>
    The formulae used to derive the distributional summary statistics
    presented (optionally) are as follows. The r-th moment about the origin
    is given by
<p>
        a*(x0^r) / (a-r)
<p>
    which exists only if r&lt;a (Kleiber and Kotz, 2003, p. 70).  It follows
    that
<p>
        mean = a*x0 / (a-1)
<p>
        variance = a*(x0^2) / [ a*(a-2)*(a-1)^2 ]
<p>
    from which the standard deviation and half the squared coefficient of
    variation can be derived. These three statistics are defined only where
    a&gt;2. The density is decreasing, so the mode is simply
<p>
        mode = x0.
<p>
    The quantiles are derived by inverting the distribution function:
<p>
        x_s = x0*(1-s)^(-1/a), for each 0 &lt; s = F(x_s) &lt; 1.
<p>
    The median is therefore
<p>
        median = x0*(2^(1/a)).
<p>
    The Gini coefficient of inequality is given by
<p>
        Gini = 1 / (2a - 1).
<p>
    The Lorenz curve ordinates at each s = F(x_s) are given by
<p>
        L(s) = 1 - (1 - s)^{1 - 1/a).
<p>
        
<b><u>Examples</u></b>
<p>
    . paretofit x
<p>
    . paretofit x [fw=wgt]
<p>
    . paretofit
<p>
    . paretofit x [aw=wgt] , x0(20)
<p>
    . paretofit, stats poorfrac(100) x0(50)
<p>
    . paretofit x, avar(age sex) x0(50)
<p>
<p>
<b><u>Authors</u></b>
<p>
    Stephen P. Jenkins &lt;stephenj@essex.ac.uk&gt;, Institute for Social and
    Economic Research, University of Essex, Colchester CO4 3SQ, U.K.
<p>
    Philippe Van Kerm &lt;philippe.vankerm@ceps.lu&gt;, CEPS/INSTEAD, Differdange,
    Luxembourg.
<p>
<p>
<b><u>Reference</u></b>
<p>
    Kleiber, C. and Kotz, S. (2003).  <i>Statistical Size Distributions in</i>
        <i>Economics and Actuarial Sciences</i>.  Hoboken, NJ: John Wiley.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online: help for smfit, dagumfit, gb2fit, lognfit, hillp if installed.
<p>
</pre>
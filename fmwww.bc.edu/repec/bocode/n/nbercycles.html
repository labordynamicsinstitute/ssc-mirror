<pre>
-------------------------------------------------------------------------------
help for <b>nbercycles</b>                         SSC distribution 26 July 2006
-------------------------------------------------------------------------------
<p>
<b><u>Generate graph command (and optionally graph) timeseries vs. NBER recession dat</u></b>
<b><u>&gt; ing</u></b>
<p>
        <b>nbercycles</b> [<i>varname</i>] [<b>if</b> <i>exp</i>] <b>,</b> <b>file(</b><i>string</i><b>)</b> [ <b>replace</b> <b>from(</b><i>string</i><b>)</b>
                 <b>to(</b><i>string</i><b>)</b> <b><u>min</u></b><b>val(</b><i>#</i><b>)</b> <b><u>max</u></b><b>val(</b><i>#</i><b>)</b> ]
<p>
<p>
    You must <b>tsset</b> your data before using <b>nbercycles</b>; see help <b>tsset</b>.  This
    command requires that you are using a monthly or quarterly time-series
    calendar, and that the variable defining the calendar have a time-series
    format.
<p>
<p>
<p>
    <b>nbercycles</b> accesses a copy of the National Bureau of Economic Research
    (NBER) record of economic cycles (see
    http://www.nber.org/cycles/cyclesmain.html), the official dating of U.S.
    business cycle phases: contractions (recessions) and expansions, defined by
    their peaks and troughs, from 1854-September 2010. The ancillary Stata
    database distributed in the <b>nbercycles</b> package reproduces the data on the
    NBER web page, and adds quarterly dating information.
<p>
    <b>nbercycles</b> can operate in two modes. The simpler "automatic" mode involves
    providing a variable name and, optionally, an [<b>if</b> <i>exp</i>] (usually employing
    the <b>tin()</b> function). You need use no other options beyond the mandatory
    <b>file</b> option (and perhaps the <b>replace</b> option for convenience). The program
    writes an entire graph command to the specified file, but it also produces
    the graph. You may save the graph as displayed. If you wish to further
    customize the graph, you may edit the file (e.g. using the Do-File Editor).
<p>
    In the "manual" mode, if the <b>nbercycles</b> command is given without a variable
    name but with the (then-required) <b>from(</b><i>string</i><b>)</b> and <b>to(</b><i>string</i><b>)</b> options, the
    program generates the <b>graph twoway</b> commands required to overlay a
    time-series plot with shaded recession bands. Those commands are written to
    the filename specified. They do not include the specification of the
    variable that you want to graph, nor any graph options. You should also use
    the <b><u>min</u></b><b>val(</b><i>#</i><b>)</b> and <b><u>max</u></b><b>val(</b><i>#</i><b>)</b> options to specify the lower and upper bounds
    of the variable that you would like to graph, rounded outward: e.g. if the
    variable has a range of 2.5-9.3, use minimum and maximum values of 2 and
    10. This mode of the program might be particularly useful if you want to
    graph more than one time-series, or want to use different scaled y-axes for
    multiple series.
 
<p>
<p>
<b><u>Options</u></b>
 
    [<i>varname</i>] may be given to specify the name of a variable to be graphed,
        superimposed on the recession dating. You may use [<b>if</b> <i>exp</i>] to restrict
        the range of dates plotted.
<p>
    <b>file(</b><i>string</i><b>)</b> is a required option: the name of a file to be created in the
        current working directory. If the file already exists, the <b>replace</b>
        option must also be given.
<p>
    <b>from(</b><i>string</i><b>)</b> and <b>to(</b><i>string</i><b>)</b> are specified in terms of calendar dates: e.g.
        <b>from(1977m1) to(1999m8)</b>. They are only used in the second (manual) form
        of the command, in which they are required options.
<p>
    <b><u>min</u></b><b>val(</b><i>#</i><b>)</b> and <b><u>max</u></b><b>val(</b><i>#</i><b>)</b> are used to specify the range of the Y-axis on the
        graph. They are only used in the second (manual) form of the command.
<p>
<b><u>Examples</u></b>
<p>
Note: the examples below with <b>freduse</b> require that the command be installed:
<p>
    . ssc install freduse, replace
<p>
    . freduse MPRIME, clear
    . gen ym = mofd(daten)
    . tsset ym, monthly
    . nbercycles MPRIME if tin(1970m1,1990m1), file(nber2.do) replace
    . type nber2.do
<p>
    . freduse GPDIC96, clear
    . gen yq = qofd(daten)
    . tsset yq,quarterly
    . nbercycles GPDIC96 if tin(1970m1,1984m1), file(nber3.do) replace
    . type nber3.do
<p>
    . nbercycles, file(nber1.do) replace from(1979m9) to(1999m12) min(2)
        max(21)
    . type nber1.do
<p>
    . use http://fmwww.bc.edu/ec-p/data/FFRperUSD, clear
    . nbercycles FFRperUSD, file(nber4.do) replace
    . type nber4.do
<p>
<b><u>Author</u></b>
<p>
    Christopher F. Baum, Boston College, USA
    baum@bc.edu
<p>
<p>
<p>
<b><u>Acknowledgements</u></b> 
<p>
    This program was inspired by David Drukker's presentation at the NASUG'2006
    meetings in Boston, July 2006. I thank David for his suggestions about the
    routine.
<p>
<p>
<b><u>Also see</u></b>
<p>
    On-line: freduse (if installed), tsset
<p>
<p>
</pre>
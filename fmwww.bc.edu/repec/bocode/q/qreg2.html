<pre>
<b>help qreg2</b>                                       also see:  qreg postestimation
<p>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
       <b>qreg2</b> -- Quantile regression with robust standard errors
<p>
<p>
<b><u>Syntax</u></b>
<p>
<p>
        <b>qreg2</b> <i>depvar</i> [<i>indepvars</i>] [<i>if</i>] [<i>in</i>] [<i>weight</i>] [<b>,</b> <i>qreg2_options</i>]
<p>
<p>
<a name="options"></a>    <i>options</i>                    Description
    -------------------------------------------------------------------------
<p>
      <b><u>q</u></b><b>uantile(</b><i>#</i><b>)</b>              estimate <i>#</i> quantile; default is <b>quantile(.5)</b>
<p>
      <b><u>nor</u></b><b>obust</b>                 displays results based on the non-robust
                                 covariance matrix estimator
<p>
      <b>mss(</b><i>varlist</i><b>)</b>             use <i>varlist</i> in the MSS heteroskedasticity test
<p>
      <b>nomss</b>                    suppresses the computation of the MSS test
<p>
      <b><u>wls</u></b><b>iter(</b><i>#</i><b>)</b>               attempt <i>#</i> weighted least-squares iterations
                                 before doing linear programming iterations
<p>
    -------------------------------------------------------------------------
<p>
<p>
    <b>qreg2</b> allows <b>fweight</b>s; see weight.
    See <b>[R] qreg postestimation</b> for features available after estimation.
<p>
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>qreg2</b> is a wrapper for <b>[R] qreg</b> which estimates quantile regression and
    reports standard errors and t-statistics that are asymptotically valid
    under heteroskedasticity and misspecification. The robust covariance
    matrix is computed following Chamberlain (1994), Angrist et al. (2006),
    and Powell (1984).  The non-robust results can also displayed with the
    option <b>norobust</b>. Additionally, <b>qreg2</b> reports the value of the objective
    function, defined as the average of the check function; the R-squared,
    defined as the square of the correlation between the fitted values and
    the dependent variable (note however that in quantile regressions the
    R-squared is even less meaningful than usual); and the result of the
    Machado-Santos Silva (2000) test for heteroskedasticity. This test is
    valid after quantile regression estimation and by default the test
    variables are the fitted values of the dependent variable and its squares
    as in the "Special case of the White test"; see Wooldridge (2009, p.
    276). Alternative sets of test variables can be specified with
    <b>mss(</b><i>varlist</i><b>)</b> and the computation of the statistic can be suppressed with
    the option <b>nomss</b>.
<p>
<p>
<a name="options"></a><p>
<b><u>Options</u></b>
<p>
    <b>quantile(</b><i>#</i><b>)</b> specifies the quantile to be estimated and should be a number
        between 0 and 1, exclusive.  Numbers larger than 1 are interpreted as
        percentages.  The default value of 0.5 corresponds to the median.
<p>
    <b>norobust</b> display results based on the non-robust covariance matrix
        estimator.
<p>
    <b>mss(</b><i>varlist</i><b>)</b> specifies the list of variables to be used in the
        Machado-Santos Silva (2000) heteroskedasticity test.  By default, the
        test is performed using the fitted values of the dependent variable
        and its squares.
<p>
    <b>nomss</b> suppresses the computation of the MSS test.
<p>
<p>
    <b>wlsiter(</b><i>#</i><b>)</b> specifies the number of weighted least-squares iterations that
        will be attempted before the linear programming iterations are
        started.  The default value is 1.  If there are convergence problems,
        increasing this number should help.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    <b>qreg2</b> was written by J.A.F. Machado and J.M.C. Santos Silva and it is not
    an official Stata command.  For further help and support, please contact
    jmcss@essex.ac.uk. Please notice that this software is provided as is,
    without warranty of any kind, express or implied, including but not
    limited to the warranties of merchantability, fitness for a particular
    purpose and noninfringement. In no event shall the authors be liable for
    any claim, damages or other liability, whether in an action of contract,
    tort or otherwise, arising from, out of or in connection with the
    software or the use or other dealings in the software.
<p>
<p>
<p>
<b><u>Examples</u></b>
<p>
    ---------------------------------------------------------------------------
    Setup
        <b>. sysuse auto</b>
<p>
    Median regression
        <b>. qreg2 price weight length foreign</b>
<p>
    Median regression with non-robust output
        <b>. qreg2 price weight length foreign,nor</b>
<p>
    Estimate .25 quantile
        <b>. qreg2 price weight length foreign, quantile(.25)</b>
<p>
    Median regression computing the MSS test using the regressors as test
    variables
        <b>. qreg2 price weight length foreign, mss(weight length foreign)</b>
<p>
    Median regression suppressing the MSS test
        <b>. qreg2 price weight length foreign, nomss</b>
<p>
<p>
    ---------------------------------------------------------------------------
<p>
<p>
<b><u>Saved results</u></b>
<p>
    <b>qreg2</b> saves the following in <b>e()</b>:
<p>
    Scalars   
      <b>e(N)</b>           number of observations
      <b>e(df_m)</b>        model degrees of freedom
      <b>e(df_r)</b>        residual degrees of freedom
      <b>e(q)</b>           quantile requested
      <b>e(q_v)</b>         value of the quantile
      <b>e(sum_adev)</b>    sum of absolute deviations
      <b>e(sum_rdev)</b>    sum of raw deviations
      <b>e(obj_func)</b>    mean of the check function
      <b>e(f_r)</b>         residual density estimate
      <b>e(rank)</b>        rank of the non-robust covariance matrix
      <b>e(convcode)</b>    <b>0</b> if converged; otherwise, return code for why
                       nonconvergence
      <b>e(r2)</b>          R-squared defined as the square of the correlation
                       between the fitted values and the dependent variable
      <b>e(mss_chi2)</b>    MSS test statistic (if computed)
      <b>e(mss_df)</b>      degrees of freedom of the MSS test (if computed)
      <b>e(mss_p)</b>       p-value of the MSS test (if computed)
<p>
    Macros    
      <b>e(cmd)</b>         <b>qreg2</b>
      <b>e(cmdline)</b>     command as used in the estimation
      <b>e(depvar)</b>      name of dependent variable
      <b>e(properties)</b>  <b>b V</b>
      <b>e(predict)</b>     program used to implement <b>predict</b>
      <b>e(marginsnotok)</b>
                       predictions disallowed by <b>margins</b>
<p>
    Matrices  
      <b>e(b)</b>           coefficient vector
      <b>e(V)</b>           variance-covariance matrix
<p>
    Functions 
      <b>e(sample)</b>      marks estimation sample
<p>
<p>
<b><u>References</u></b>
<p>
    Angrist, J.; Chernozhukov, V. and Fernández-Val, I. (2006), Quantile
        Regression under Misspecification, with an Application to the U.S.
        Wage Structure, <i>Econometrica</i>, 74, 539-563.
 
    Chamberlain, G. (1994), Quantile Regression, Censoring and the Structure
        of Wages, in <i>Advances in Econometrics</i>, ed. C. A. Sims, Cambridge
        University Press, 171-209.
 
    Machado, J.A.F. and Santos Silva, J.M.C. (2000), Glejser's Test
        Revisited, <i>Journal of Econometrics</i>, 97(1), 189-202.
 
    Powell, J. L. (1984), Least Absolute Deviation Estimation for the
        Censored Regression Model, <i>Journal of Econometrics</i>, 25, 303-325.
 
    Wooldridge, J.M. (2009), <i>Introductory Econometrics</i>, 4th edition, Mason
        (OH): South Western.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] qreg</b>
<p>
      Help:  <b>[R] qreg postestimation</b>;
<p>
</pre>
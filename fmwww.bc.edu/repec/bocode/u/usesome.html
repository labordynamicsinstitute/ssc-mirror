<pre>
<b>help usesome</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
     <b>usesome</b> -- Use subset of Stata dataset
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>usesome</b> [<i>varspec</i>] <b>using</b> <i>filename</i> [<b>,</b> <b>clear</b> <b>not</b> <i>s-options</i> <i>options</i>]
<p>
<p>
     where <i>varspec</i> is
<p>
        [<i>varlist</i>] [<b>(</b><i>numlist</i><b>)</b> [<b>(</b><i>numlist</i><b>)</b> <i>...</i>]]
<p>
     The general rules apply to <i>varlist</i>, with the exception that variable names
     may not be abbreviated. In <i>numlist</i> integers in the range 0 &lt; # &lt;= <i>k</i> and <b>k</b>
     are allowed, where <i>k</i> is the number of variables in the dataset to be used
     and <b>k</b> will be replaced with <i>k</i>. Note that each <i>numlist</i> is limited to 1600
     elements. Parentheses around <i>numlist</i> are required.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>usesome</b> loads a subset of a Stata dataset into memory. The program is
    similar to official Stata's use but enhances its functionality in three
    ways:
<p>
        1. the user may specify variables that are <b>not</b> to be used
<p>
        2. the user may specify variable characteristics instead of variable
            names
<p>
        3. the user may specify variable indices instead of variable names
<p>
    These enhancements are intended for use with flavors of Stata, where the
    maximum number of variables allowed in a dataset is rather small (2,047
    for Stata IC, 99 for Small Stata).
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>clear</b> allows the data in memory to be replaced.
<p>
    <b>not</b> loads variables not specified in <i>varspec</i> from <i>filename</i>.
<p>
<a name="sopt"></a>    <i>s-options</i> select variables by characteristics. These are the <i>Advanced</i> ds
        options <b>has(</b><i>spec</i><b>)</b> or <b>not(</b><i>spec</i><b>)</b>, and <b><u>inse</u></b><b>nsitive</b>. All variables ds
        returns in <b>r(varlist)</b> are added to the variables specified in
        <i>varspec</i>.  All ds options (except <b>not</b>) are allowed. However, since
        <b>usesome</b> does not show any ds output, specifying <i>Main</i> options will
        merely slow down execution time.
<p>
    <b>in(</b><i>range</i><b>)</b> specifies observations to be used from <i>filename</i>. Note that it
        is not possible to indicate observations not to be used.
<p>
    <b><u>nol</u></b><b>abel</b> is the same as <b>nolabel</b> used with use.
<p>
    <b>findname</b>[<b>not</b>] uses user-written findname (Cox 2010, 2012) instead of ds
        to select variables by characteristics. <b>findnamenot</b> finds, and adds
        to <i>varspec</i>, variables that do not have the specified properties. As
        with ds, all findname options (except <b>not</b>) are allowed, but not all
        of them are useful. It is not allowed to mix ds and findname options.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    <b>usesome</b> is not to be understood as an alternative to use, as its
    enhancements may come with severe speed penalties (see Technical
    remarks). Whenever use can be used, doing so is probably faster than
    using <b>usesome</b>, although slightly more typing might be involved. I will
    consider three situations where <b>usesome</b> comes handy, before discussing
    circumstances under which use might be preferred.
<p>
    Suppose we want to load a subset of a Stata dataset, but we do not know
    the names of all the variables we want to use. Alternatively, suppose we
    know the names, but there are a couple of hundred variable names and,
    unfortunately, the variable order in the respective dataset does not
    permit us to specify only a few variable lists with the dash (<b>-</b>)
    character to represent these variables. Also the names differ
    considerably, so representing them using wildcards (<b>*</b> and/or <b>?</b>) would
    still be rather burdensome.
<p>
    <u>Using </u><b><u>usesome</u></b>
<p>
    Suppose, in a first situation, we know that all variable names we do not
    want to use end with <b>_xyz</b>, but none of the variables we want to use does.
    We can load the subset of the dataset typing
<p>
        <b>usesome *_xyz using </b><i>filename</i><b> ,not</b>
<p>
    In a similar situation, suppose we know that all variables we want to use
    have variable labels containing <b>xyz</b>, while none of the variables we do
    not want to use has. We load the subset of the dataset typing
<p>
        <b>usesome using </b><i>filename</i><b> ,has(varlabel *xyz*)</b>
<p>
    In a third situation, suppose we do not know the names of the variables
    we want to use. We do however know the variables' position in the
    dataset. Suppose we want to load variables 1-50, 100-200, 500, 510 and
    520. We do so typing
<p>
        <b>usesome (1/50 100/200 500(10)520) using </b><i>filename</i>
<p>
    <u>Using </u><b><u>use</u></b>
<p>
    If the number of variables in <i>filename</i>, in the situations described
    above, does not exceed the limits of our Stata version (see maxvar), we
    can use official Stata's use to load the entire dataset into memory and
    select the subset afterwards. Doing so, in the first situation we type
    the two lines
<p>
        <b>use </b><i>filename</i>
        <b>drop *_xyz</b>
<p>
    In the second situation we type three lines of code.
<p>
        <b>use </b><i>filename</i>
        <b>ds ,has(varlabel *xyz*)</b>
        <b>keep `r(varlist)'</b>
<p>
    The third situation requires two lines, including one line of Mata code.
    The code is
<p>
        <b>use </b><i>filename</i>
        <b>mata : st_keepvar((1..50, 100..200, 500, 510, 520))</b>
<p>
    If, however, the number of variables in <i>filename</i> exceeds the limit of our
    Stata version, use can only be directly applied if we know (and are
    willing to specify) the names of all variables we wish to load. Whenever
    this "keep-logic" is convenient, use is convenient.
<p>
<a name="tech"></a>    <u>Technical remarks</u>
<p>
    As stated, <b>usesome</b> might be pretty slow, and will be if <i>s-options</i> are
    specified. Loading a subset of <i>filename</i>, <b>usesome</b> calls describe to obtain
    a list of all variables in <i>filename</i>. If no <i>s-options</i> are specified,
    variables indicated by <i>varspec</i> are selected from this list and used.  If
    <i>s-options</i> are specified, the variable list is split into parts, small
    enough not to hit the limits imposed by maxvar. <b>usesome</b> loads each part
    of <i>filename</i> into memory, selects the variables indicated by <i>s-options</i> and
    then loads the specified subset of <i>filename</i>.
<p>
<p>
<b><u>Examples</u></b>
<p>
        <b>. usesome foreign using</b> <b>http://www.stata-press.com/data/r11/auto ,not</b>
<p>
        <b>. usesome (1/3 k-2/k) using</b> <b>http://www.stata-press.com/data/r11/auto</b>
            <b>,clear</b>
<p>
        <b>. usesome using</b> <b>http://www.stata-press.com/data/r11/auto</b>
            <b>,has(vallabel) clear</b>
<p>
<p>
<b><u>References</u></b>
<p>
    Cox, N. J. 2012. Update: Finding variable names. <i>Stata Journal</i> volume 12,
        number 1.  (dm0048_2)
<p>
    Cox, N. J. 2010. Update: Finding variable names. <i>Stata Journal</i> volume 10,
        number 4.  (dm0048_1)
<p>
    Cox, N. J. 2010. Speaking Stata: Finding variables. <i>Stata Journal</i> volume
        10, number 2.  (dm0048)
<p>
<p>
<b><u>Author</u></b>
<p>
    Daniel Klein, University of Bamberg, klein.daniel.81@gmail.com
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online: use, describe, ds, drop, nlist
<p>
    if installed: findname, chunky, savesome
</pre>
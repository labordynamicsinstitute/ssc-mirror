<pre>
<b>help fastgini</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
       <b>fastgini</b> -- Fast algorithm for calculation of Gini coefficient and
                     it's jackknife standard errors
 
<p>
<b><u>Syntax</u></b>
<p>
        <b>fastgini</b> <i>varname</i> [<i>if</i>] [<i>in</i>] [<i>weight</i>] [<b>,</b> <b>bin(</b><i>#</i><b>)</b> <b>jk</b> <b><u>L</u></b><b>evel(</b><i>#</i><b>)</b> <b><u>noch</u></b><b>eck</b>]
<p>
<p>
    <b>pweight</b>s and <b>fweight</b>s are allowed; see weight.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>fastgini</b> calculates the Gini coefficient for either unit-level or
    aggregated level data. Optionally it returns the jackknife estimates of
    the standard error. <b>fastgini</b> uses a fast optimized algorithm that could
    be especially useful when calculating the Gini coefficient and it's
    standard errors for the large samples.  The command implements algorithms
    for both exact and approximate calculation of the Gini coefficient.
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>bin(</b><i>#</i><b>)</b> set number of bins. Specifying this option can dramatically reduce
        the computation time when working with large datasets (1M+ obs). When
        <b>bin(</b><i>#</i><b>)</b> is specified <b>fastgini</b> uses approximation algorithm for Gini
        calculation. Specifying the sufficient number bins allows obtaining
        the approximation for the Gini at any desired level of precision. For
        example, on the dataset of 1,000,000 observations <b>bin(</b><i>100</i><b>,</b><i>000</i><b>)</b> will
        in most cases estimate computer-exact value of Gini. This calculation
        required significantly less computer time compared to the exact
        estimation of the Ginin on whole sample.
<p>
    <b>jk</b> estimate jackknife (leave-one-out) standard error of the Gini
        coefficient. An efficient method of calculating jackknife estimates
        involves only two (one to get the Gini coefficient itself and another
        for standard errors) runs through the data.
<p>
    <b>level(</b><i>#</i><b>)</b> set confidence level for the reported jackknife confidence
        intervals; default is <b>level(</b><i>95</i><b>)</b>.
<p>
    <b>nocheck</b> by default, non-positive values of <i>varname</i> are excluded from Gini
        calculations. Specifying {opt nocheck} skips the value check as well
        as ignores [<i>if</i>] [<i>in</i>] conditions. The option can be useful to speed-up
        the execution if <b>fastgini</b> is used within loops.
<p>
<p>
<b><u>Saved Results</u></b>
<p>
    <b>fastgini</b> saves in <b>r()</b>:
<p>
        <b>r(gini)</b> calculated Gini coefficient;
<p>
    if <b>jk</b> option specified:
<p>
        <b>r(se)</b> jackknife estimate for the standard error of the Gini;
<p>
        <b>r(mse)</b> jackknife estimate for the mean standard error of the Gini;
<p>
        <b>r(gini_jk)</b> jackknife estimate for the Gini.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    <b>fastgini</b> uses formula:
<p>
                      i=N      j=i
                      SUM W_i*(SUM W_j*X_j - W_i*X_i/2)
                      i=1      j=1
          G = 1 - 2* ----------------------------------
                           i=N             i=N
                           SUM W_i*X_i  *  SUM W_i
                           i=1             i=1
<p>
        where observations are sorted in ascending order of X.
<p>
<p>
    if <b>bin(</b><i>M</i><b>)</b> is specified, the data are aggregated into <i>M</i> equal-size bins,
        i.e.
<p>
        ~
        X_i = (X_min + i * binsize)        binsize = (X_max - X_min)/M
<p>
        ~                 ~            ~
        W_i = SUM W_j (if X_(i-1)&lt;=X_j&lt;X_i)              i=1..M
               j
<p>
    and then Gini coefficient is calculated using aggregated data.
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>.fastgini pc_exp</b>
<p>
    <b>.fastgini income [w=weight], jk</b>
<p>
    <b>.fastgini income [w=weight], bin(10000)</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Zurab Sajaia, DECRG-PO SDG, The World Bank, zsajaia@worldbank.org
<p>
<p>
<b><u>References</u></b>
<p>
    Karagiannis E. and M. Kovacevic' (2000), "A Method to Calculate Jakknife
        Variance Estimator For the Gini Coefficient", Oxford Bulletin of
        Economics and Statistics, Vol. 62 Issue 1 119-122.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online:  jackknife
<p>
    Links to user-written programs:  inequal7, egen_inequal, mm_gini(),
             ineqerr, ineqdeco, ineqdec0
<p>
</pre>
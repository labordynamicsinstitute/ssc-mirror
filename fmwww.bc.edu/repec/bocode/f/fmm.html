<pre>
<b>help fmm</b>                                          also see:  <b>fmm postestimation</b>
<p>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
<b>fmm</b> -- Finite mixture models
<p>
<p>
<b><u>Syntax</u></b>
<p>
    Finite mixture models
<p>
        <b>fmm</b> <i>depvar</i> [<i>indepvars</i>] [<i>if</i>] [<i>in</i>] [<i>weight</i>]<b>,</b> <b><u>comp</u></b><b>onents(</b><i>#</i><b>)</b>
              <b><u>mix</u></b><b>tureof(</b><i>density</i><b>)</b> [<i>fmm_options</i>]
<p>
<a name="fmm_options"></a>    <i>fmm_options</i>                   Description
    -------------------------------------------------------------------------
    Model
      <b><u>comp</u></b><b>onents(</b><i>#</i><b>)</b>               specifies the number of mixture components.
                                    It is required.
      <b><u>mix</u></b><b>tureof(</b><i>density</i><b>)</b>          specifies the component density.  It is
                                    required.
<p>
    Model 2
      <b><u>prob</u></b><b>ability(</b><i>varlist</i><b>)</b>        specifies the variables used to model the
                                    component probabilities.
      <b>df(</b><i>#</i><b>)</b>                       specifies the degrees of freedom of the
                                    Student-t density.  The default is 5.
      <b><u>nocons</u></b><b>tant</b>                  suppress constant term
      <b><u>exp</u></b><b>osure(</b><i>varname</i><b>)</b>           include ln(<i>varname</i>) in model with
                                    coefficient constrained to 1.
      <b><u>off</u></b><b>set(</b><i>varname</i><b>)</b>             include <i>varname</i> in model with coefficient
                                    constrained to 1.
      <b><u>cons</u></b><b>traint(</b><i>constraint</i><b>)</b>      apply specified linear constraints.
<p>
    SE/Robust
      <b>vce(</b><i>vcetype</i><b>)</b>                <i>vcetype</i> may be <b>oim</b>, <b><u>r</u></b><b>obust</b>, <b>opg</b>, <b><u>boot</u></b><b>strap</b>,
                                    or <b><u>jack</u></b><b>knife</b>
      <b><u>r</u></b><b>obust</b>                      synonym for <b>vce(robust)</b>
      <b><u>cl</u></b><b>uster(</b><i>varname</i><b>)</b>            adjust standard errors for intragroup
                                    correlation
<p>
    Max options
      <i>maximize_options</i>            control the maximization process; some
                                    options may be useful
    -------------------------------------------------------------------------
    <i>depvar</i>, <i>indepvars</i>, <i>varname_e</i>, and <i>varname_o</i> may contain time-series
      operators; see tsvarlist.
<p>
    <b>fweight</b>s, <b>pweight</b>s, <b>iweight</b>s, and <b>aweight</b>s are allowed; see weight.
    See postestimation commands for features available after estimation.
<p>
<a name="density"></a>    <i>density</i>                  Description
    -------------------------------------------------------------------------
    <b>gamma</b>                    Gamma
    <b>lognormal</b>                Lognormal
    <b>negbin1</b>                  Negative Binomial-1 (constant dispersion)
    <b>negbin2</b>                  Negative Binomial-2 (mean dispersion)
    <b>normal</b>                   Normal or Gaussian
    <b>poisson</b>                  Poisson
    <b>studentt</b>                 Student-t with <b>df</b> degrees of freedom
    -------------------------------------------------------------------------
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>fmm</b> fits a finite mixture regression model of <i>depvar</i> on <i>indepvars</i> using
    maximum likelihood estimation.  The model is a <i>J</i>-component finite mixture
    of densities, with the density within a component (j) allowed to vary in
    location and scale.  Optionally, the mixing probabilities may be
    specified with covariates.
<p>
<p>
<b><u>Options for fmm</u></b>
<p>
        +-------+
    ----+ Model +------------------------------------------------------------
<p>
    <b><u>comp</u></b><b>onents(</b><i>#</i><b>)</b> specifies the number of mixing components.  It is an
        integral part of specifying the finite mixture model and is not
        optional.  <i>#</i> should be an integer between 2 and 9.
<p>
    <b><u>mix</u></b><b>tureof(</b><i>density</i><b>)</b> specifies the component density in the mixture model.
        It is not optional.  For more on the available choices of component
        densities and associated specifications of conditional means, see
        <b>Remarks</b> below.
<p>
        +---------+
    ----+ Model 2 +----------------------------------------------------------
<p>
    <b><u>prob</u></b><b>ability(</b><i>varlist</i><b>)</b> specifies the variables used to model the component
        probabilities.  The probabilities are specified using a multinomial
        logit parameterization.
<p>
    <b>df(</b><i>#</i><b>)</b> specifies the degrees of freedom if a Student-t component density
        is specified.  The default value is 5.
<p>
    <b><u>nocons</u></b><b>tant</b>, <b><u>exp</u></b><b>osure(</b><i>varname</i><b>)</b>, <b><u>off</u></b><b>set(</b><i>varname</i><b>)</b>, <b><u>cons</u></b><b>traints(</b><i>constraints</i><b>)</b>;
        see estimation options.
<p>
        +-----------+
    ----+ SE/Robust +--------------------------------------------------------
<p>
    <b>vce(</b><i>vcetype</i><b>)</b>; see <i>vce_option</i>.
<p>
    <b><u>r</u></b><b>obust</b>, <b><u>cl</u></b><b>uster(</b><i>varname</i><b>)</b>; see estimation options.  <b><u>cl</u></b><b>uster()</b> can be used
        with pweights to produce estimates for unstratified cluster-sampled
        data.
<p>
        +-----------+
    ----+ Reporting +--------------------------------------------------------
<p>
    <b>level(</b><i>#</i><b>)</b>; see estimation options.
<p>
<a name="fmm_maximize"></a>        +-------------+
    ----+ Max options +------------------------------------------------------
<p>
    <i>maximize_options</i>: <b><u>dif</u></b><b>ficult</b>, <b><u>tech</u></b><b>nique(</b><i>algorithm_spec</i><b>)</b>, <b><u>iter</u></b><b>ate(</b><i>#</i><b>)</b>,
        [<b><u>no</u></b>]<b><u>lo</u></b><b>g</b>, <b><u>tr</u></b><b>ace</b>, <b><u>grad</u></b><b>ient</b>, <b>showstep</b>, <b><u>hess</u></b><b>ian</b>, <b><u>shownr</u></b><b>tolerance</b>,
        <b><u>tol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>ltol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>gtol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>nrtol</u></b><b>erance(</b><i>#</i><b>)</b>,
        <b><u>nonrtol</u></b><b>erance</b>, <b><u>fr</u></b><b>om(</b><i>init_specs</i><b>)</b>; see maximize are standard ml
        options.
<p>
<p>
    <b><u>sh</u></b><b>ift(</b><i>#</i><b>)</b> generates alternative starting values by systematically shifting
        some values from the default algorithm by the proportion <b>#</b>.
<p>
<p>
    <b><u>se</u></b><b>arch(</b><i>spec</i><b>)</b> <i>spec</i> may be <b>on</b> or <b>off</b> and specifies whether ml's initial
        search algorithm is used.  The default is <b>off</b>.
<p>
    Because finite mixture models have complicated likelihood functions,
        <b>shift(</b><i>#</i><b>)</b>, <b>search(</b><i>spec</i><b>)</b>, <b><u>dif</u></b><b>ficult</b> and <b>from(</b><i>init_specs</i><b>)</b> may be useful
        choices if the default setup fails. The other options are seldom
        used.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    If <b>components(</b><i>2</i><b>)</b> is specified, default starting values are specified
    using the parameters from the associate degenerate mixture model.  In
    order to take advantage of the built-in algorithms for specifying
    starting values for models with {it #} components, ({it #}&gt;2), the user
    must estimate models sequentially {it #}=2.  This is the preferred
    estimation approach.  But <b>fmm</b> will not check for reasonableness of the
    prior <b>fmm</b> estimates, so proceed carefully.  Otherwise, <b>fmm</b> expects the
    user to specify starting values using the <b>from(</b><i>init_specs</i><b>)</b> option.
<p>
    The available component densities and the associated conditional means
    are
<p>
        Density               <b>fmm</b> option          cond. mean
        ----------------------------------------------------------------------
        Gamma                 <b>density(gamma)</b>      alpha_j exp(xb_j)
        Lognormal             <b>density(lognormal)</b>  exp(xb_j + 0.5 sigma_j^2)
        Negative Binomial-1   <b>density(negbin1)</b>    exp(xb_j)
        Negative Binomial-2   <b>density(negbin2)</b>    exp(xb_j)
        Normal(Gaussian)      <b>density(normal)</b>     xb_j
        Poisson               <b>density(poisson)</b>    exp(xb_j)
        Student-t             <b>density(studentt)</b>   xb_j
<p>
    Note that <b>fmm</b> has not been updated to accommodate factor variables.
<p>
<p>
<b><u>Saved results</u></b>
<p>
    In addition to standard results saved by maximum likelihood procedures in
    <b>e()</b>, <b>fmm</b> saves the following scalars:
<p>
        <b>e(</b><i>parname_est</i><b>)</b> parameter estimate
        <b>e(</b><i>parname_se</i><b>)</b> standard error of estimate
<p>
    where <i>parname</i> denotes either a scale parameter or a mixing probability
    parameter.
<p>
<p>
<b><u>Examples</u></b>
<p>
    Mixture of normals
<p>
    . webuse womenwk, clear
<p>
    . fmm wagefull educ age married, mix(normal) comp(2)
<p>
<p>
    Mixture of Negative Binomials (Type 2)
<p>
    . webuse medpar, clear
<p>
    . gen los0 = los - 1
<p>
    . fmm exlos died hmo type2-type3, mix(negbin2) comp(2) comp(2)
<p>
<p>
<b><u>References</u></b>
<p>
    Conway, K. and P. Deb, (2005), Is Prenatal Care Really Ineffective?  Or,
        is the 'Devil' in the Distribution?, <i>Journal of Health Economics</i>, 24,
        489-513.
<p>
    Deb, P. and P. K. Trivedi (1997), Demand for Medical Care by the Elderly:
        A Finite Mixture Approach, <i>Journal of Applied Econometrics</i>, 12,
        313-326.
<p>
    McLachlan, G.J., and D. Peel (2000), <i>Finite Mixture Models</i>, New York:
        John Wiley.
<p>
    Titterington, D.M., A.F.M. Smith and U.E. Makow (1985), <i>Statistical</i>
        <i>Analysis of Finite Mixture Distributions</i>, New York: John Wiley, 1985.
<p>
<p>
<b><u>Author</u></b>
<p>
    Partha Deb, Hunter College and the Graduate Center, City University of
        New York, USA
    partha.deb@hunter.cuny.edu
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online:  fmm postestimation
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>est2tex</b>, <b>est2vec</b>, <b>est2one</b> and <b>est2rowlbl</b>       (<b>contact </b>Marc Muendler)
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Create LaTeX tables from estimation results</u></b>
<p>
        <b>est2vec</b> <i>table</i> [<b>,</b> <b>replace</b> <b><u>v</u></b><b>ars(</b><i>list_of_regressors</i><b>)</b> <b><u>shv</u></b><b>ars(</b><i>varlist</i><b>)</b>
               <b>e(</b><i>list_of_macro_names</i><b>)</b> <b>r(</b><i>list_of_macro_names</i><b>)</b> <b><u>add</u></b><b>to(</b><i>oldtable</i><b>)</b>
               <b><u>radd</u></b><b>to(</b><i>oldtable</i><b>)</b> <b><u>na</u></b><b>me(</b><i>estimation_name</i><b>)</b> <b>force</b> <b>nokeep</b> ]
<p>
        <b>est2tex</b> <i>table</i> [<b>,</b> <b>replace</b> <b>dropall</b> <b><u>pres</u></b><b>erve</b> <b><u>p</u></b><b>ath(</b><i>pathname</i><b>)</b>
               <b>multse(</b><i>list_of_integers</i><b>)</b> <b><u>m</u></b><b>ark(</b><i>marking_option</i><b>)</b>
               <b><u>lev</u></b><b>els(</b><i>three_levels</i><b>)</b> <b>marktbl</b> <b><u>pre</u></b><b>cision(</b><i>real_number</i><b>)</b>
               <b><u>dig</u></b><b>its(</b><i>integer_number</i><b>)</b> <b><u>fle</u></b><b>xible(</b><i>integer_number</i><b>)</b> <b><u>fan</u></b><b>cy</b> <b><u>hori</u></b><b>zontal</b>
               <b>cut</b> <b><u>lab</u></b><b>el</b> <b><u>collab</u></b><b>els(</b><i>list_of_column_names</i><b>)</b>
               <b><u>ex</u></b><b>tracols(</b><i>list_of_column_numbers</i><b>)</b> <b><u>dot</u></b><b>s</b> <b>suppress</b>
               <b>plain(</b><i>separator_type</i><b>)</b> <b>ready</b> <b>leadzero</b> <b>thousep</b> ]
<p>
        <b>est2rowlbl</b> <i>varlist</i> [<b>,</b> <b>replace</b> <b>dropall</b> <b><u>s</u></b><b>aving</b> <b><u>add</u></b><b>to(</b><i>table</i><b>)</b>
               <b><u>p</u></b><b>ath(</b><i>pathname</i><b>)</b> ]
<p>
        <b>est2one</b> <i>table</i> [<b>,</b> <b>multse(</b><i>list_of_integers</i><b>)</b> <b><u>hori</u></b><b>zontal</b> <b>cut</b> ]
<p>
<p>
<b><u>Description</u></b>
<p>
The package <b>est2tex</b> creates a LaTeX table from estimation results in two
stages. The package allows editing within Stata and creates an output file
<i>table.tex</i> that can be read into any LaTeX document with \input{table.tex}.
<p>
First, the command <b>est2vec</b> collects estimation results.  For this purpose,
est2vec uses auxiliary matrices: <i>table_b</i>, <i>table_se</i> and <i>table_e</i> (and possibly
<i>table_r</i>).  Applying est2vec after each estimation command, estimation results
can be added to the table in a step-by-step manner.
<p>
Second, the command <b>est2tex</b> transforms the so-created matrices into a LaTeX
table and saves the result to disk. The output file <i>table.tex</i> can be read
directly into a LaTeX document with the TeX command \input{table.tex}. Under
the option plain(), est2tex saves the same information in a plain ascii file
that can be included in any type-setting software.
<p>
The command <b>est2rowlbl</b> can be used prior to <b>est2tex</b> to save a file
<i>table_rowlbl.dta</i> with variable labels. Then <b>est2tex</b> reports the variable labels
in the rows of the LaTeX table, rather than variable names.
<p>
The command <b>est2one</b> creates a master matrix <i>table_tbl</i> from the auxiliary
matrices <i>table_b</i>, <i>table_se</i> and <i>table_e</i> (and possibly <i>table_r</i>).
<p>
A simple example below explains the main steps.
<p>
The package matsave must be installed for <b>est2tex</b> to work.
<p>
<p>
<b><u>Options for </u></b><b><u>est2vec</u></b>
<p>
<b>replace</b> permits est2vec to overwrite the matrices <i>table_b</i>, <i>table_se</i>, <i>table_e</i>
    and <i>table_r</i> in memory. replace may not be abbreviated.
<p>
<b>vars(</b><i>list_of_regressors</i><b>)</b> Option <b>vars(</b><i>list_of_regressors</i><b>)</b> specifies that
    <i>list_of_regressors</i> be included in the auxiliary matrices <i>table_b</i>
    (coefficients) and <i>table_se</i> (according standard errors). If
    <i>list_of_regressors</i> contains variables that have not been regressors in the
    estimation, the according entries are set to -999 (missing for Stata
    versions prior to 8) in <i>table_b</i> and <i>table_se</i>. They will result in blanks
    (or dots under the option dots) in the final LaTeX table. If _cons is not
    in <i>list_of_regressors</i>, <i>table_b</i> and <i>table_se</i> will not include an estimate
    for the constant. In multiple equation regressions (commands such as reg3
    or mlogit), option <b>vars(</b><i>list_of_regressors</i><b>)</b> recognizes regressors with
    colons (<i>equation_name:variable</i>). If <b>vars(</b><i>list_of_regressors</i><b>)</b> is not
    specified, est2vec includes all regressors from the most recent estimation
    in <i>table_b</i> and <i>table_se</i>.
<p>
<b>shvars(</b><i>varlist</i><b>)</b> can be a short-hand alternative to option <b>vars()</b>.
    <b>shvars(</b><i>varlist</i><b>)</b> specifies that <i>varlist</i> be included in <i>table_b</i> and <i>table_se</i>.
    Wildcards and dashes may be used in <i>varlist</i>.  However, variables that are
    not in the current data will be ignored.  Moreover, <b>shvars(</b><i>varlist</i><b>)</b> <i>does</i>
    <i>not</i> allow for regressors in multiple equation regressions (commands such as
    reg3 or mlogit); for those cases option <b>vars()</b> must be used. The estimate
    for the constant is always reported (_cons cannot be in <i>varlist</i>). If
    <i>varlist</i> contains variables that have not been regressors in the estimation,
    the according entries are set to -999 (missing for Stata versions prior to
    8) in <i>table_b</i> and <i>table_se</i>. They will result in blanks (or dots under the
    option dots) in the final LaTeX table. Option <b>vars()</b> overrides
    <b>shvars(</b><i>varlist</i><b>)</b>.
<p>
<b>e(</b><i>list_of_macro_names</i><b>)</b> specifies which e() macros beyond e(N) are included in
    <i>table_e</i>. If <i>list_of_macro_names</i> contains macros that have not been assigned
    during the estimation or if it refers to non-scalars, the according entries
    are set to -999 (missing for Stata versions prior to 8) in <i>table_e</i>. They
    will result in blanks (or dots under the option dots) in the final LaTeX
    table. Information in <i>table_e</i> will be reported below the coefficient
    estimates in the final LaTeX table.
<p>
<b>r(</b><i>list_of_macro_names</i><b>)</b> If this option is specified, est2vec exclusively
    assembles r() macros related to the estimation, such as test results. For
    this purpose, est2vec creates the auxiliary matrix <i>table_r</i>. If
    <i>list_of_macro_names</i> contains names that have not been assigned to r()
    macros, the according entries are set to -999 (missing for Stata versions
    prior to 8) in <i>table_r</i>. They will result in blanks (or dots under the
    option dots) in the final LaTeX table. Information in <i>table_r</i> will be
    reported below the e() entries in the final LaTeX table.
<p>
<b>addto(</b><i>oldtable</i><b>)</b> augments the matrices <i>oldtable_b</i>, <i>oldtable_se</i> and <i>oldtable_e</i> by
    a column that contains the results of the latest estimation. The matrices
    <i>oldtable_b</i>, <i>oldtable_se</i> and <i>oldtable_e</i> must have been created previously
    with est2vec. If the latest estimation contains coefficients that are not
    part of <i>oldtable</i>, those estimates will not be included. See option <b>vars()</b>.
<p>
<b>raddto(</b><i>oldtable</i><b>)</b> augments the matrix <i>oldtable_r</i> by a column that contains the
    current values of the according r() macros. The matrix <i>oldtable_r</i> must have
    been created previously with est2vec. The procedure only applies to r()
    macros that are also part of <i>oldtable_r</i>.
<p>
<b>name(</b><i>estimation_name</i><b>)</b> names the newly added column in <i>table</i> with
    <i>estimation_name</i>. By default, the column name of a newly added column is the
    dependent variable in the latest estimation. However, for the command
    <b>est2tex</b> to work, column names must be unique. The option
    <b>name(</b><i>estimation_name</i><b>)</b> helps avoid duplicate column names. When invoking the
    command <b>est2tex</b> later, the option collabels() will allow to change the
    column names for the final table.
<p>
<b>force</b> can only be specified together with <b>addto()</b> or <b>raddto()</b>. Under the
    options <b>addto(</b><i>oldtable</i><b>)</b> or <b>raddto(</b><i>oldtable</i><b>)</b>, est2vec adds estimates to
    <i>oldtable</i> only for those coefficients that are part of <i>oldtable</i>. Estimates
    for additional coefficients (macros) are ignored. The option <b>force</b> forces
    est2vec to add coefficient estimates (macros) to <i>oldtable</i> row by row,
    irrespective of whether they match or not. The added column must be
    conformable to the existing matrices <i>oldtable_b</i>, <i>oldtable_se</i> and <i>oldtable_e</i>
    (or <i>oldtable_r</i> if specified).
<p>
<b>nokeep</b> can only be specified together with <b>addto(</b><i>oldtable</i><b>)</b> or <b>raddto(</b><i>oldtable</i><b>)</b>.
    The newly created vectors <i>table_b</i>, <i>table_se</i> and <i>table_e</i> (or <i>table_r</i> if
    specified) are dropped once the columns have been added to <i>oldtable</i>.
<p>
<p>
<b><u>Options for </u></b><b><u>est2tex</u></b>
<p>
<b>replace</b> permits est2tex to overwrite the output files <i>table.tex</i> and
    <i>table_tbl.dta</i> if they exist. Unless the option ready is specified, replace
    also overwrites an existing matrix <i>table_tbl</i> in memory. replace may not be
    abbreviated.
<p>
<b>dropall</b> drops all variables from memory to execute <b>est2tex</b>. If there are data
    in memory and neither dropall nor preserve is specified, est2tex will
    result in the error "no; data in memory would be lost".
<p>
<b>preserve</b> preserves the current dataset in memory before dropping all variables
    from memory. If there are data in memory and neither dropall nor preserve
    is specified, est2tex will result in the error "no; data in memory would be
    lost".
<p>
<b>path(</b><i>pathname</i><b>)</b> supplies the path where est2tex saves <i>table.tex</i> and
    <i>table_tbl.dta</i>. <i>pathname</i> needs to be a valid string. If <b>path()</b> is not
    specified, then est2tex saves in the current Stata working directory.
<p>
<b>multse(</b><i>list_of_integers</i><b>)</b> includes a number of different standard errors below
    every coefficient estimate in the LaTeX table. For this purpose, according
    auxiliary matrices must be created first and named <i>table_se1</i>, <i>table_se2</i>,
    ... .  The option <b>multse(</b>1 3 2<b>)</b>, for instance, inserts standard errors from
    matrices <i>table_se1</i>, <i>table_se3</i> and <i>table_se2</i> in that order in the LaTeX
    table. When multse() is specified, then the option mark() must be followed
    by the number of the standard error table on which the marking should be
    based.  Example: mark(it 2). <b>multse()</b> expects matrices between se1 and se9.
<p>
<b>mark(</b><i>marking_option</i><b>)</b> marks estimates according to their significance. When
    <b>mark(</b>stars<b>)</b> is specified, est2tex adds stars to the standard errors. Up to
    three levels of stars can be assigned with the levels() option (see below).
    When <b>mark(</b>starb<b>)</b> is specified, est2tex adds stars to the coefficient
    estimates. When <b>mark(</b>it<b>)</b> is specified, then est2tex sets a coefficient
    estimate in italics if it fails to be significant at the standard
    significance level (global macro S_level, see levels() option below).
    Estimators are assumed to be normally distributed.
<p>
<b>levels(</b><i>three_levels</i><b>)</b> changes significance levels for the mark() option. Default
    levels are based on the global Stata macro S_level. With S_level taking the
    standard value of 95, the default <i>three_levels</i> are "95 99 99.9" (for
    S_level 90, they are "90 95 99"; for 99 they are "99 99.9 99.99"). The
    default setting "95 99 99.9" has the following consequences. When <b>mark(</b>it<b>)</b>
    is specified, estimates are set in italics below the 95% significance
    level. When <b>mark(</b>stars<b>)</b> or <b>mark(</b>starb<b>)</b> is specified, estimates receive one
    star if they are significant at the 95% significance level, two stars at
    the 99% significance level and three stars at the 99.9% level. With
    levels(95 99 99) specified, no estimate would receive three stars. With
    levels(95 95 95), estimates would only receive one or no star. With
    levels(90 95 95), the <b>mark(</b>it<b>)</b> option results in italics below the 90%
    level and the <b>mark(</b>stars<b>)</b> or <b>mark(</b>starb<b>)</b> option in one star at the 90%
    level or above and in two stars at the 95% level or above. In general, the
    <b>mark(</b>it<b>)</b> option obeys the lowest of the <i>three_levels</i>. The <b>mark(</b>stars<b>)</b> or
    <b>mark(</b>starb<b>)</b> option obeys all <i>three_levels</i> as long as a level strictly
    exceeds the preceding level. Estimators are assumed to be normally
    distributed.
<p>
<b>marktbl</b> keeps an auxiliary matrix <i>t_stars</i> in memory. This matrix contains the
    information on significant and insignificant estimates.
<p>
<b>precision(</b><i>real_number</i><b>)</b>. est2tex rounds figures in the LaTeX table so that they
    resemble the real number specified in <b>precision(</b><i>real_number</i><b>)</b>. The option
    <b>precision(</b>.001<b>)</b>, for instance, rounds all figures to three digits.
    <b>precision()</b> cannot be specified if <b>digits()</b> is used. <b>precision(</b>.001<b>)</b> and
    <b>digits(</b>3<b>)</b> are equivalent. The default for <b>precision()</b> is .001.
<p>
<b>digits(</b><i>integer_number</i><b>)</b>. est2tex rounds figures in the LaTeX table to the number
    of digits specified in <b>digits()</b>. <b>digits()</b> cannot be specified if
    <b>precision()</b> is used. <b>digits(</b>3<b>)</b> and <b>precision(</b>.001<b>)</b> are equivalent. The
    default for <b>digits()</b> is 3.
<p>
<b>flexible(</b><i>integer_number</i><b>)</b> permits that figures exceed the number of specified
    digits. It only applies to figures that would otherwise be reported as
    zero. Under the option <b>flexible(</b>2<b>)</b>, for instance, the figure .00005 is
    reported as such even though rounding under the default option <b>digits(</b>3<b>)</b>
    would create a zero. The default for <b>flexible()</b> is 2.
<p>
<b>fancy</b> results in a LaTeX table with additional features such as horizontal
    lines like in journal publications and additional intercolumn spacing to
    fill a predefined table width.  This option is recommended if the table is
    to be embedded in a \begin{table} \end{table} environment in LaTeX.
    Otherwise, overfull or underfull boxes may result in LaTeX.
<p>
<b>horizontal</b> transposes the final table. The estimation results are reported in
    rows and the coefficient estimates are listed in columns. The option <b>cut</b> is
    automatically activated when horizontal is chosen.
<p>
<b>cut</b> suppresses both the e() and r() macro output in the final table.
<p>
<b>label</b> writes variable labels instead of variable names into the final table
    <i>table.tex</i>. If a variable is no longer in memory or if no label is set, the
    simple name is used.  label is ignored under the options horizontal and
    ready. If the option <b>fancy</b> is simultaneously specified, common estimation
    or result macros such as e(N) or r(F) are reported with their according
    long names. If a row label file with the name <i>table_rowlbl.dta</i> exists in
    <b>path(</b><i>pathname</i><b>)</b>, then the saved labels override the <b>label</b> option. See the
    command <b>est2rowlbl</b> below.
<p>
<b>collabels(</b><i>list_of_column_names</i><b>)</b> allows to rename the column names in the final
    table <i>table.tex</i>. Blanks must separate the column names in
    <i>list_of_column_names</i> from each other. The LaTeX symbol ~ can be used to
    obtain spacing within an individual column name. collabels() is ignored
    under the options horizontal and plain.
<p>
<b>extracols(</b><i>list_of_column_numbers</i><b>)</b> adds empty columns to a LaTeX table. The
    option <b>extracols(</b>1 3 5<b>)</b>, for instance, adds empty columns to the LaTeX
    table behind columns 1, 3 and 5.
<p>
<b>dots</b> reports a dot instead of a blank for missing values.
<p>
<b>suppress</b> removes the standard errors from the LaTeX table. suppress may not be
    abbreviated.
<p>
<b>plain(</b><i>separator_type</i><b>)</b> produces an ascii file instead of a LaTeX table.
    plain(tab) saves a tabulator separated file <i>table.txt</i>, and plain(csv) a
    comma separated file <i>table.csv</i>. Some options producing specific LaTeX code
    are not active when plain is chosen.
<p>
<b>ready</b> produces a LaTeX table from an existing matrix <i>table_tbl</i> in Stata memory.
    The matrix <i>table_tbl</i> can be created using <b>est2one</b>. When applying <b>ready</b>, the
    option <b>horizontal</b> should be used only once, either with <b>est2one</b> or with
    est2tex. ready may not be abbreviated. When the mark() option is specified
    together with ready, est2tex expects coefficient estimates and standard
    errors to alternate row by row in the ready matrix <i>table_tbl</i>.
<p>
<b>leadzero</b> adds leading zeros to coefficient estimates, standard errors, and e()
    and r() numbers in the LaTeX table. The option leadzero requires the option
    fancy.
<p>
<b>thousep</b> inserts commas for thousands into coefficient estimates and standard
    errors in the LaTeX table. The option thousep requires the option fancy.
<p>
<p>
<b><u>Options for </u></b><b><u>est2rowlbl</u></b>
<p>
<b>replace</b> permits est2rowlbl to overwrite an existing row label file
    <i>table</i>_rowlbl.dta in <b>path(</b><i>pathname</i><b>)</b>.  replace may not be abbreviated.
<p>
<b>dropall</b> permits est2rowlbl to drop all variables from memory to save the file
    <i>table</i>_rowlbl.dta. If neither dropall nor saving is specified, est2rowlbl
    will result in the error "no; data in memory would be lost".
<p>
<b>saving</b> forces est2rowlbl to save the data that are presently in memory and to
    restore the data upon completion.  Setting saving does not affect a
    preceding <b>preserve</b> command.  If neither dropall nor saving is specified,
    est2rowlbl will result in the error "no; data in memory would be lost".
<p>
<b>addto(</b><i>oldtable</i><b>)</b> specifies the table for which row labels are to be saved. The
    row label file receives the name <i>table</i>_rowlbl.dta in <b>path(</b><i>pathname</i><b>)</b>.
<p>
<b>path(</b><i>pathname</i><b>)</b> supplies the path where est2rowlbl saves <i>table</i>_rowlbl.dta.
    <i>pathname</i> needs to be a valid string. <i>pathname</i> needs to be a valid string.
    If <b>path()</b> is not specified, then est2rowlbl saves in the current Stata
    working directory.
<p>
<p>
<b><u>Options for </u></b><b><u>est2one</u></b>
<p>
<b>multse(</b><i>list_of_integers</i><b>)</b> includes a number of different standard errors below
    every coefficient estimate in the final matrix <i>table_tbl</i>. For this purpose,
    according auxiliary matrices must be created first and named <i>table_se1</i>,
    <i>table_se2</i>, ... . The option <b>multse(</b>1 3 2<b>)</b>, for instance, inserts standard
    errors from matrices <i>table_se1</i>, <i>table_se3</i> and <i>table_se2</i> in that order in
    the LaTeX table.  <b>multse()</b> expects matrices between se1 and se9.
<p>
<b>horizontal</b> transposes the final table <i>table_tbl</i>.  The estimation results are
    reported in rows and the coefficient estimates are listed in columns. The
    option <b>cut</b> is automatically activated when horizontal is chosen. If
    horizontal is specified with est2one, it should not be specified with
    est2tex under the option ready.
<p>
<b>cut</b> suppresses both the e() and r() macro output in the final table <i>table_tbl</i>.
<p>
<p>
<b><u>Example</u></b>
<p>
We want to create a LaTeX table with regression results from ordinary least
squares as in the Stata handbook (see <b>regress</b>).  We have data on the mileage
rating and weight of 74 automobiles. We wish to estimate mileage as a linear
function of weight, squared weight and an indicator variable for foreign
brands.
<p>
        . generate weightsq = weight^2
        . regress mpg weight weightsq foreign
<p>
              Source |       SS       df       MS              Number of obs = 
&gt;      74
        -------------+------------------------------           F(  3,    70) = 
&gt;   52.25
               Model |  1689.15372     3   563.05124           Prob &gt; F      = 
&gt;  0.0000
            Residual |   754.30574    70  10.7757963           R-squared     = 
&gt;  0.6913
        -------------+------------------------------           Adj R-squared = 
&gt;  0.6781
               Total |  2443.45946    73  33.4720474           Root MSE      = 
&gt;  3.2827
        
        -----------------------------------------------------------------------
&gt; -------
                 mpg |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. In
&gt; terval]
        -------------+---------------------------------------------------------
&gt; -------
              weight |  -.0165729   .0039692    -4.18   0.000    -.0244892   -.
&gt; 0086567
            weightsq |   1.59e-06   6.25e-07     2.55   0.013     3.45e-07    2
&gt; .84e-06
             foreign |    -2.2035   1.059246    -2.08   0.041      -4.3161   -.
&gt; 0909002
               _cons |   56.53884   6.197383     9.12   0.000     44.17855    6
&gt; 8.89913
        -----------------------------------------------------------------------
&gt; -------
<p>
We can collect information from this first regression with
<p>
        . est2vec table, e(r2 F) vars(weight weightsq length domestic foreign
            _cons)
<p>
This command creates three auxiliary matrices <i>table_b</i>, <i>table_se</i> and <i>table_e</i>.
<p>
        . matrix dir
              table_e[3,1]
             table_se[6,1]
              table_b[6,1]
<p>
Take a look at <i>table_b</i>, for instance.
<p>
        . matrix list table_b
<p>
        table_b[6,1]
                         mpg
          weight  -.01657294
        weightsq   1.591e-06
          length        -999
        domestic        -999
         foreign  -2.2035002
           _cons   56.538839
<p>
The auxiliary matrix <i>table_e</i> stores additional regression information from
saved result macros:
<p>
        . matrix list table_e
<p>
        table_e[3,1]
                     mpg
         e(N)         74
        e(r2)  .69129599
         e(F)  52.251474
<p>
The command est2vec always stores the number of observations N in <i>table_e</i>. It
takes this information from the saved result macro e(N). The option <b>e(</b>r2 F<b>)</b>
adds <i>R</i>-squared and the <i>F</i> statistic from the macros e(r2) and e(F).
<p>
Since the variables length and domestic were not included in the regression,
their coefficient estimates are reported as missing in <i>table_b</i> with the entry
-999. The option <b>vars(</b>weight weightsq length domestic foreign _cons<b>)</b> makes sure
that est2vec includes the variables length and domestic, beyond those in the
regression. (The option vars() can also be used to exclude variables that are
not to be reported.) If <b>vars()</b> is not specified, est2vec chooses all variables
from the most recent regression.
<p>
No wildcards or dashes may be used in option <b>vars()</b>. In certain cases, the
option <b>shvars()</b> can be a short-hand alternative to <b>vars()</b>. Here, we could have
specified <b>vars(</b>weight* length foreign<b>)</b>. The constant _cons would be included
automatically. However, <b>shvars()</b> only works for existing variables. So,
<b>vars(</b>weight weightsq length domestic foreign<b>)</b> would result in an error message
until we generate the variable domestic.
<p>
An additional regression (also in the Stata handbook) includes the variables
length and domestic.
<p>
        . gen byte domestic=~foreign
        . reg weight length domestic, hascons
        (<i>output suppressed</i>)
<p>
We can collect information from this regression with
<p>
        . est2vec table, addto(table)
<p>
Under the option addto(), est2vec adds results from the present regression to
the previously collected matrices. Check:
<p>
        . matrix list table_b
<p>
        table_b[6,2]
                         mpg      weight
          weight  -.01657294        -999
        weightsq   1.591e-06        -999
          length        -999   31.444552
        domestic        -999    133.6775
         foreign  -2.2035002        -999
           _cons   56.538839  -2983.9272
<p>
Stata sets missing values to zero in its result macros. Therefore, the estimate
on _cons is zero under the hascons option and so is the standard error. Later,
est2tex will produce a LaTeX table that sets both coefficients with -999
estimates and coefficients with zero standard errors to missing.
<p>
To create a LaTeX table from the assembled matrices, the command <b>est2tex</b>
produces an auxiliary dataset in memory and then outputs the information to the
file <i>table.tex</i>. So, the command <b>est2tex</b> needs an empty memory. If the present
data are not removed from memory before, est2tex results in the error message
"no; data in memory would be lost." Before applying <b>est2tex</b>, we could manually
remove the current data from memory with the command drop _all. Alternatively,
we can specify the option <b>dropall</b> to drop all variables from memory when
<b>est2tex</b> is invoked.
<p>
We can also use the option <b>preserve</b> to preserve the present dataset in memory
(Mark Holmes contributed the code for this option). <b>est2tex</b> still drops all
variables. However, the data are automatically restored once <b>est2tex</b> has done
its job (or after it encounters an error).
<p>
The command
<p>
        . est2tex table, preserve path(../texdocs) mark(stars) fancy
<p>
creates a LaTeX table. It saves the files <i>table.tex</i> and <i>table_tbl.dta</i> in the
directory "../texdocs/". If the Stata working directory is "c:\data\", for
instance, the files will be saved in "c:\texdocs\". Upon completion, the data
in memory is restored.
<p>
The option mark(stars) adds one star (two stars, three stars) to the standard
error when a coefficient estimate is significant at the 95% (99%, 99.9%) level.
The option fancy creates separating lines and adds spaces between columns to
fit the predetermined table width in LaTeX.
<p>
Suppose we did not specify the option preserve with <b>est2tex</b>.  Then a glance at
the resulting dataset in memory shows what information goes into the LaTeX
table.
<p>
        . preserve
        . est2tex table, replace dropall path(../texdocs) mark(stars) fancy
        . list
<p>
              _rowname        mpg     weight
          1.    weight  -.0165729       -999
          2.       _se   .0039692       -999
          3.  weightsq   1.59e-06       -999
          4.       _se   6.25e-07       -999
          5.    length       -999   31.44455
          6.       _se       -999   1.601234
          7.  domestic       -999   133.6775
          8.       _se       -999   77.47614
          9.   foreign    -2.2035       -999
         10.       _se   1.059246       -999
         11.     _cons   56.53884  -2983.927
         12.       _se   6.197383   275.1041
         13.      e(N)         74         74
         14.     e(r2)    .691296   .8991605
         15.      e(F)   52.25147   316.5447
<p>
        . restore
<p>
The resulting LaTeX code in the final file <i>table.tex</i> is somewhat less
transparent.
<p>
         \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}lcc}     
             &amp; \multicolumn{1}{c}{mpg} &amp; \multicolumn{1}{c}[<i>weight</i>] \\
         \cline{2-3}     
             &amp; \multicolumn{1}{c}{(1)} &amp; \multicolumn{1}{c}{(2)} \\
         \hline      
         weight &amp;    -.016 &amp; \\
         &amp;   \raisebox{.7ex}[0pt]{\scriptsize (.004)$^{***}$} &amp;  \\
         weightsq &amp;  1.59e-06 &amp;  \\
         &amp;   \raisebox{.7ex}[0pt]{\scriptsize (6.25e-07)$^$} &amp;    \\
         length &amp;    &amp;   31.445 \\
         &amp;   &amp;   \raisebox{.7ex}[0pt]{\scriptsize (1.601)$^{***}$} \\
         domestic &amp;  &amp;   133.678 \\
         &amp;   &amp;   \raisebox{.7ex}[0pt]{\scriptsize (77.476)} \\
         foreign &amp;   -2.203 &amp;    \\
         &amp;   \raisebox{.7ex}[0pt]{\scriptsize (1.059)$^$} &amp;   \\
         cons &amp;  56.539 &amp;    -2983.926 \\
         &amp;   \raisebox{.7ex}[0pt]{\scriptsize (6.197)$^{***}$} &amp; 
             \raisebox{.7ex}[0pt]{\scriptsize (275.104)$^{***}$} \\
         e(N) &amp;  74 &amp;    74 \\
         e(r2) &amp; .691 &amp;  .899 \\
         e(F) &amp;  52.251 &amp;    316.545 \\
         \hline\hline        
         \end{tabular*}%     
<p>
The resulting LaTeX document, however, should be quite agreeable.  The file
<i>table.tex</i> can be inserted into any LaTeX document with the command sequence
\begin{table} \input{table.tex} \end{table}.
<p>
The following LaTeX code produces a sample document.
<p>
         \documentclass[12pt]{article}
         \begin{document}
         \title{Stata: \emph{est2tex}}%
         \author{\Large Help File Example}%
         \maketitle
         \thispagestyle{empty}
         \bigskip
         \noindent This is the resulting table.
         
         \begin{table}[h]
         \input{table.tex}
         \end{table}
         
         \end{document}
<p>
If we wanted to include Stata's variable labels rather than the variable names
in the LaTeX table, we could specify the option <b>label</b> (Mark Holmes contributed
code for this option). Similarly, if we wanted <b>est2tex</b> to override the column
names from <b>est2vec</b>, we could specify replacements using the option <b>collabels()</b>.
Both <b>label</b> and <b>collabels()</b> permit the inclusion of LaTeX code in the file
<i>table.tex</i>. The option collabels() expects blanks to separate the individual
column names from each other. So, for collabels() to assign labels properly,
the LaTeX code must be written without any blanks (using the symbol ~ for
spacing).
<p>
        . label var weight "Weight ({\it lbs.})"
        . label var weightsq "Squared weight ({\it lbs.}$^2$)"
        . label var length "Length ({\it in.})"
        . est2tex table, replace preserve path(../texdocs) mark(stars)
            levels(95 99 99) fancy lab
            collab("Mileage~$\left(\frac{miles}{gallon}\right)$
            Weight~(\emph{lbs.})")
<p>
The option levels(95 99 99) in the last command makes sure that only two levels
of significance are used to mark the estimates with (zero, one or two) stars
(but not with three stars).
<p>
<b><u>General Remarks</u></b>
<p>
When invoked after any estimation command, <b>est2vec</b> creates three auxiliary
vectors in memory: <i>table_b</i>, <i>table_se</i> and <i>table_e</i>. The vector <i>table_b</i> contains
all coefficient estimates from the most recent estimation. The vector <i>table_se</i>
lists the according standard errors. The vector <i>table_e</i> contains additional
information about the estimation.
<p>
By default, <i>table_e</i> has one row named <i>e(N)</i> and lists the number of
observations. Additional results saved as e() scalars can be included in
<i>table_e</i> by specifying the according <b>e(</b><i>list_of_macro_names</i><b>)</b> option. est2vec can
store results from r() macros in a fourth vector <i>table_r</i> with option
<b>r(</b><i>list_of_macro_names</i><b>)</b>. This can be useful for reporting test results. Under
the r() option, est2vec only forms the vector<i>table_r</i>.
<p>
Generally, tables contain results from more than one estimation. The command
<b>est2vec</b> allows to build up tables gradually. After executing any additional
estimation, <b>est2vec</b> adds the latest estimates to the existing <i>table</i> with the
option <b>addto(</b><i>table</i><b>)</b>. Repeating this procedure, the vectors <i>table_b</i>, <i>table_se</i>
and <i>table_e</i> (and <i>table_r</i> if specified) become matrices and the desired final
LaTeX table can be assembled step by step. The column name in <i>table_b</i>, <i>table_se</i>
and <i>table_e</i> (and <i>table_r</i> if specified) is the name of the dependent variable in
the most recent estimation unless option <b>name()</b> specifies otherwise.
<p>
The command <b>est2tex</b> combines the information in the matrices <i>table_b</i>, <i>table_se</i>
and <i>table_e</i> (and <i>table_r</i> if it exists) to one LaTeX table and saves the results
in a file <i>table.tex</i>. Any LaTeX document can include that file directly with the
TeX command \input{table.tex}. Various options control the style of the LaTeX
table in <i>table.tex</i>. Apart from the file <i>table.tex</i>, est2tex creates an according
table <i>table_tbl</i> as Stata matrix in memory and saves it to disk in
<i>table_tbl.dta</i>. This table can be loaded later with the command matload (see
package matsave).
<p>
Instead of creating LaTeX output immediately, the command <b>est2one</b> combines the
information from matrices <i>table_b</i>, <i>table_se</i> and <i>table_e</i> (and <i>table_r</i> if it
exists) to one large Stata matrix <i>table_tbl</i>. This matrix <i>table_tbl</i> can be
edited (convenient commands for that purpose may be found in packages dm69 and
dm79; also see matrix). Then, the edited matrix can be saved as a LaTeX table
with the command <b>est2tex</b> under the option <b>ready</b>.
<p>
The name of <i>table</i> is not allowed to coincide with a variable name in memory.
Missing estimates are reported as -999 in the Stata matrices and with blanks or
dots (option dots) in the LaTeX tables.
<p>
<p>
<b><u>Remarks on </u></b><b><u>est2vec</u></b>
<p>
The command "est2vec <i>table</i>, addto(<i>oldtable</i>)" creates the auxiliary vectors
<i>table_b</i>, <i>table_se</i> and <i>table_e</i>.  It also adds these vectors to the matrices
<i>oldtable_b</i>, <i>oldtable_se</i> and <i>oldtable_e</i>. Under the option <b>nokeep</b>, the auxiliary
vectors <i>table_b</i>, <i>table_se</i> and <i>table_e</i> are dropped from memory. In the example
above, a slight abuse of syntax did the same: "est2vec <i>oldtable</i>,
addto(<i>oldtable</i>)" is equivalent to "est2vec <i>table</i>, addto(<i>oldtable</i>) nokeep".
<p>
When assembling estimates from multiple equation regressions (reg3 or mlogit,
for instance), est2vec only adds equations that have been specified initially.
Consider the following regression from the same automobile dataset as before.
The variable rep78 can take five values (1 through 5) that represent the repair
record.  The command
<p>
        . mlogit rep78 price mpg foreign, base(1)
        (<i>output suppressed</i>)
<p>
estimates the probability of categories 2 through 5, relative to category 1, as
a function of price, mpg and foreign. We can store the results with
<p>
        . est2vec table2
<p>
All estimates are identified with their according "equation name".  These
equation names are the categories of rep78 in the case of mlogit:
<p>
        . matrix list table2_b
<p>
        table2_b[16,1]
                        rep78
          2:price   .00040825
            2:mpg  -.02318283
        2:foreign   -18.15009
          2:_cons  -.20046453
          3:price    .0004733
            3:mpg  -.00072598
        3:foreign   19.271375
          3:_cons   .18466295
          4:price   .00044831
            4:mpg   .03087516
        4:foreign   21.364028
          4:_cons  -1.3762754
          5:price   .00064603
            5:mpg   .21926142
        5:foreign   22.223713
          5:_cons  -8.2147995
<p>
If we chose category 5 as base category instead of 1, we would run
<p>
        . mlogit rep78 price mpg foreign, base(5)
        (<i>output suppressed</i>)
<p>
Adding these estimates to the preceding <i>table2</i> with
<p>
        . est2vec table2, addto(table2) name(rep78_alt)
<p>
yields
<p>
        . matrix list table2_b
<p>
        table2_b[16,2]
                        rep78   rep78_alt
          2:price   .00040825  -.00023778
            2:mpg  -.02318283  -.24244424
        2:foreign   -18.15009  -37.373803
          2:_cons  -.20046453    8.014335
          3:price    .0004733  -.00017272
            3:mpg  -.00072598  -.21998739
        3:foreign   19.271375  -2.9523383
          3:_cons   .18466295   8.3994624
          4:price   .00044831  -.00019772
            4:mpg   .03087516  -.18838626
        4:foreign   21.364028  -.85968569
          4:_cons  -1.3762754   6.8385241
          5:price   .00064603           0
            5:mpg   .21926142           0
        5:foreign   22.223713           0
          5:_cons  -8.2147995           0
<p>
<p>
Since equation "5" is not independently identified in the last regression, the
according estimates are set to missing in the Stata output (check <i>table_se</i>). On
the other hand, equation "1" is left out since it was not identified before.
<p>
In some final tables, we may want to show the according estimates. <b>est2vec</b>
provides two ways to do so.
<p>
First, we can specify the according option <b>vars()</b> initially. (The option
<b>shvars()</b> is inappropriate for multiple equation regressions.)
<p>
        . mlogit rep78 price mpg foreign, base(1)
        (<i>output suppressed</i>)
        . est2vec table3, vars(1:price 1:mpg 1:foreign 1:_cons 2:price 2:mpg
            2:foreign 2:_cons 3:price 3:mpg 3:foreign 3:_cons 4:price 4:mpg
            4:foreign 4:_cons 5:price 5:mpg 5:foreign 5:_cons)
        . mlogit rep78 price mpg foreign, base(5)
        (<i>output suppressed</i>)
        . est2vec table3, addto(table3) name(rep78_alt)
        . matrix list table3_b
<p>
yields
<p>
        table3_b[20,2]
                        rep78   rep78_alt
          1:price           0  -.00064603
            1:mpg           0  -.21926142
        1:foreign           0  -37.223714
          1:_cons           0   8.2147995
          2:price   .00040825  -.00023778
            2:mpg  -.02318283  -.24244424
        2:foreign   -18.15009  -37.373803
          2:_cons  -.20046453    8.014335
          3:price    .0004733  -.00017272
            3:mpg  -.00072598  -.21998739
        3:foreign   19.271375  -2.9523383
          3:_cons   .18466295   8.3994624
          4:price   .00044831  -.00019772
            4:mpg   .03087516  -.18838626
        4:foreign   21.364028  -.85968569
          4:_cons  -1.3762754   6.8385241
          5:price   .00064603           0
            5:mpg   .21926142           0
        5:foreign   22.223713           0
          5:_cons  -8.2147995           0
<p>
<p>
Alternatively, we can specify the option <b>force</b> after the second regression.
This forces the estimates from the second regression into the table
irrespective of the equations and variables from the first step. We need to
make sure that the newly added vectors conform to the previous table. This is
satisfied here.
<p>
        . mlogit rep78 price mpg foreign, base(1)
        (<i>output suppressed</i>)
        . est2vec table4
        . mlogit rep78 price mpg foreign, base(5)
        (<i>output suppressed</i>)
        . est2vec table4, addto(table4) name(rep78_alt) force
        . matrix list table4_b
<p>
        table4_b[16,2]
                        rep78   rep78_alt
          2:price   .00040825  -.00064603
            2:mpg  -.02318283  -.21926142
        2:foreign   -18.15009  -37.223714
          2:_cons  -.20046453   8.2147995
          3:price    .0004733  -.00023778
            3:mpg  -.00072598  -.24244424
        3:foreign   19.271375  -37.373803
          3:_cons   .18466295    8.014335
          4:price   .00044831  -.00017272
            4:mpg   .03087516  -.21998739
        4:foreign   21.364028  -2.9523383
          4:_cons  -1.3762754   8.3994624
          5:price   .00064603  -.00019772
            5:mpg   .21926142  -.18838626
        5:foreign   22.223713  -.85968569
          5:_cons  -8.2147995   6.8385241
<p>
Much care is warranted with the force option. Most importantly, the row names
in the table only apply to the first but by no means to the second estimation.
In fact, the equation numbers underlying the second column are exactly the
equation numbers of the first column less one.
<p>
<p>
<b><u>Output to type-setting software other than LaTeX</u></b>
<p>
The command outreg produces output files for text editors in general. It offers
a different and rich set of options. Sometimes, the combination of two steps
(est2vec and est2one) in est2tex may help create tables that are hard to obtain
with outreg. For such cases, est2tex offers the option <b>plain()</b> and allows to
produce output files similar to those of outreg.
<p>
Table3 above, for instance, can be saved in a plain text file with
<p>
        . est2tex table3, path(../texdocs) dropall plain(tab)
<p>
<p>
<b><u>Author</u></b>
<p>
Marc-Andreas Muendler, Assistant Professor, Department of Economics, University
of California, San Diego.
URL: http://econ.ucsd.edu/~muendler/, Email: muendler@econ.ucsd.edu.
(Code for options label and preserve courtesy of Mark Holmes.)
<p>
<b><u>Also see</u></b>
<p>
 Manual:  <b>[P] matrix utility</b>
  Stata:  help for matrix, mkmat, matrname
<p>
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>effcon</b>
-------------------------------------------------------------------------------
<p>
<b><u>Confidence limits for effect size estimated from one or two samples from normal</u></b>
<b><u>&gt;  distribution </u></b>
<p>
        <b>effcon</b> [<i>depvars</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,[</b> <b>group(</b><i>string</i><b>)</b> <b><u>conf</u></b><b>dir(</b><i>string</i><b>)</b>
                 <b><u>lev</u></b><b>el(</b><i>real</i><b>)</b> {<b>xb1(</b><i>real</i><b>)</b> <b>s(</b><i>real</i><b>)</b> <b>n1(</b><i>real</i><b>)</b>]} {[<b>xb2(</b><i>real</i><b>)</b>
                 {<b>n2(</b><i>real</i><b>)</b>]}
<p>
<b><u>Description</u></b>
<p>
    <b>effcon</b> estimates lower and upper condifence limits for the effect size
    estimated with a) one sample from a normal distribution or b) two
    independent samples from normal distributions with the same variance.
<p>
    In Case a), the data is assumed to come from a <i>N</i>(<i>mu</i>,<i>sigma^2</i>) distribution
    Here, the effect size is defined as <i>mu</i>/<i>sigma</i>.
<p>
    In Case b), there are two sets of data coming from <i>N</i>(<i>mu1</i>,<i>sigma^2</i>) and
    <i>N</i>(<i>mu2</i>,<i>sigma2</i>) distributions.  Here, the effect size is defined as (<i>mu1</i> -
    <i>mu1</i>)/<i>sigma</i>
<p>
<b><u>Usage</u></b>
    This program calculates 1-sided confidence limits at level 1-alpha, where
    typically alpha is a small number, say alpha = 0.05. The user may either
    specify a variable from which to estimate the effect size ("standard"
    mode), or may interactively provide estimated values of the mean(s) and
    (common) standard deviation along with sample sizes(s) ("interactive"
    mode).
<p>
    A typical application of <b>effcon</b> is to faciliate conservative power
    calculations for 1 and 2-sample t-tests. For these tests, the power is a
    function of the test level, effect size E and a proposed sample size.
    Rather than use a point estimate of E, perhaps obtained from a small
    amount of pilot data, it is prudent to calculate power using a lower
    confidence limit for E instead.
<p>
<b><u>Options</u></b>
<p>
    <b>group()</b> A string containing the name of a two-category variable defining
        the groups for the 2-sample case in standard mode. Omit this option
        in the 1-sample case. In the interactive mode, this option is
        ignored.
<p>
    <b>confdir()</b> allows the user to specify whether the confidence limit is a
        lower or an upper one. Any string beginning with the letter "U"
        (regardless of case) will be interpreted as a request for an upper
        limit; any string beginning with the letter "L" (regardless of case)
        will be interpreted as a request for a lower limit. Default option is
        "lower".
<p>
    <b>level()</b> the 1-sided confidence level (<i>e.g.</i> 0.95). Default level is 0.95.
        The level may either be expressed as a decimal fraction (eg. 0.90) or
        as a percent (e.g. 90).  If the input value is greater than or equal
        to 1.0, it will be assumed that the percent mode is intended. If the
        input value is less than 1, it will be assumed that the decimal
        fracion mode is intended.
<p>
  The following are required in interactive mode:
<p>
    Case a) - one sample:
<p>
      <b>xb1()</b> estimated mean
<p>
      <b>n1()</b> sample size
<p>
      <b>s()</b> estimated standard deviation
<p>
    Case a) - two samples:
<p>
      <b>xb1()</b> and <b>n1()</b> as above for the first sample
<p>
      <b>xb2()</b> estimated mean for second sample
<p>
      <b>n2()</b> size of second sample
<p>
      <b>s()</b> pooled estimate of common standard deviation
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>. effcon x</b>
<p>
    <b>. effcon x,confdir(upper) level(.90)</b>
<p>
    <b>. effcon x,confdir(upper) level(.90) group(gender)</b>
<p>
    <b>. effcon ,xb1(2.345) n1(15) s(0.874)</b>
<p>
    <b>. effcon ,confdir(U) level(90) xb1(2.345) n1(15) xb2(1.123) n2(20)</b>
        <b>s(1.022)</b>
<p>
<b><u>Saved results</u></b>
<p>
    The following quantities (if appropriate) are saved:
<p>
        <b>scalars:</b>  <b>r(n1)</b> = n1
<p>
                  <b>r(n2)</b> = n2
<p>
                  <b>r(xb1)</b> = xb1
<p>
                  <b>r(xb2)</b> = xb2
<p>
                  <b>r(s)</b> = s
<p>
                  <b>r(R)</b> = 1/(1/n1 + 1/n2)
<p>
                  <b>r(Z0)</b> = point estimate of effect size
<p>
                  <b>r(Zp)</b> = lower (upper) confidence limit for effect size
<p>
                  <b>r(level)</b> = confidence level
<p>
<b><u>Method</u></b>
    <u>1-sample case.</u>  Let xb and s be estimates of mu and sigma from n
        observations from a N(mu, sig^2) distribution. Then it can be shown
        that xb/s is distributed as sqrt(n) times a non-central t
        distribution with n-1 d.f. and non-centrality parameter la =
        mu*sqrt(n)/sig. In other words
<p>
              P{xb/s <u>&lt;</u> (1/sqrt(n))*t'(1-alpha,n-1,la) } = 1-alpha              
&gt;  (1)
<p>
    where t'(p,df,la) denotes the 100*p-th percentage point of the
    non-central t-distribution with df degrees of freedom and non-centrality
    parameter la.
<p>
    It also can be shown that as a function of la, G(la) <u>=</u> t'(1-alpha,n-1,la)
    is strictly increasing over the whole real line, so that its inverse
    G-1(t) always exists. multiplying by sqrt(n) and taking G-1 of both sides
    in (1), gives
<p>
                     P{G-1(xb*sqrt(n)/s) <u>&lt;</u> la } = 1-alpha               
<p>
              =&gt; P{G-1(xb*sqrt(n)/s) <u>&lt;</u> mu*sqrt(n)/sig } = 1-alpha              
&gt;  
<p>
            =&gt; P{mu/sig <u>&gt;</u> (1/sqrt(n))*G-1(xb*sqrt(n)/s) } = 1-alpha            
&gt;  
<p>
    In other words, (1/sqt(n))*G-1(xb*sqrt(n)/s) is a 100(1-alpha)% lower
    confidence limit for mu/sig.
<p>
    To obtain the upper limit, start with a lower confidence limit of level
    alpha (not 1 - alpha). Then
<p>
             =&gt; P{mu/sig <u>&gt;</u> (1/sqt(n))*H-1(xb*sqrt(n)/s)  } = alpha             
&gt;  (2)
<p>
    where H(la) <u>=</u> t'(alpha,n-1,la). Then taking the complentary event in (2),
    one obtains
<p>
            =&gt; P{mu/sig &lt; (1/sqt(n))*H-1(xb*sqrt(n)/s) } = 1-alpha             
&gt;  
<p>
    In other words, (1/sqt(n))*H-1(xb*sqrt(n)/s) is a 100(1-alpha)% upper
    confidence limit for mu/sig.
<p>
    <u>2-sample case.</u>  Let xb1, xb2 be estimates of mu1, mu2 and let s be the
        pooled estimate of a common standard deviation sigma from respective
        samples of n1 and n2 observations of N(mu1,sigma^2) and
        N(mu2,sigma^2).  Then in a similar fashion to the single-sample case,
        it can be shown that (xb1-xb2)/s is distributed as sqrt(ñ) times a
        non-central t distribution with n1 + n2 - 2 d.f. and non-centrality
        parameter la = (mu1-mu2)*sqrt(ñ)/sig, where
<p>
                              ñ = 1/(1/n1 + 1/n2)
<p>
    Using the same logic as for the 1-sample case, it then follows that a
    100(1-alpha)% lower confidence limit for (mu1 - mu2)/sig is
<p>
                      (1/sqt(ñ))*G-1((xb1-xb2)*sqrt(ñ)/s),
<p>
    and that the corresponding upper confidence limit is
<p>
                      (1/sqt(ñ))*H-1((xb1-xb2)*sqrt(ñ)/s).
<p>
    This program uses <b>nctncp</b> and <b>ridder</b> to calculate G-1 and H-1. <b>nctncp</b> is
    one of the programs in the non-central t utility package, written by Tom
    Steichen (ssc describe nct). <b>ridder</b> is a function solver utility, written
    by Tim McGuire, that may be obtained from STB-24 (findit ridder).
<p>
<b><u>Limitations</u></b> Numerical problems may arise if xb*sqrt(n)/s or (xb1-xb2)*sqrt(ñ)/s
    is too large in absolute value, depending upon alpha and the degrees of
        freedom.
<p>
<p>
<b><u>Author</u></b>
<p>
    Alan H. Feiveson, NASA Johnson Space Center alan.h.feiveson@nasa.gov
<p>
<b><u>References</u></b>
<p>
    Owen, D. B. (1968), "A Survey of Properties and Applications of the
    Non-central t-Distribution," {it;Technometrics},10, 445-478.
<p>
    Lawless, J. F. (2002) <i>Statistical Methods and Methods for Lifetime Data</i>
    (2nd ed.).  New York:John Wiley.
<p>
    Chakraborti,S. and Li, J. (2007). "Confidence Interval Estimation of a
    Normal Percentile", <i>American Statistician</i> vol. 61, No. 4, pp. 331-336.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online: help for nct (if installed), help for ridder (if installed)
<p>
</pre>
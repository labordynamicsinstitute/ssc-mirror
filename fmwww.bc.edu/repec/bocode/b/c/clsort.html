<pre>
-------------------------------------------------------------------------------
help for <b>clsort</b>                                                  (Ph. Van Kerm)
-------------------------------------------------------------------------------
<p>
<b><u>Single variable sorting</u></b>
<p>
<p>
<u>Syntax 1</u>
<p>
        <b>egen</b> <i>newvarname</i> <b>=</b> <b>clsort(</b><i>varname1</i><b>)</b> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [, <b>inplace</b> ]
<p>
<u>Syntax 2</u>
<p>
        <b>egen</b> <i>newvarname</i> <b>=</b> <b>clsort(</b><i>varname1</i> <i>varname2</i><b>)</b> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [,
               <b>inplace</b> <b><u>pos</u></b><b>var(</b><i>varname</i>){cmd:)]
<p>
<b><u>Description</u></b>
<p>
<b>clsort</b> is an extension to generate (i.e. <b>egen</b>) function to create a variable
sorted in increasing order (syntax 1), or in increasing order of a key variable
(syntax 2). Unlike <b>sort</b> and <b>gsort</b> that affect all variables in a dataset,
<b>clsort</b> produces a single sorted variable and leaves the order of the rest of
the data unaffected.
<p>
In the simplest case, i.e. syntax 1 without <b>if</b> and/or <b>in</b> clauses,
<p>
       <b>egen</b> <i>newvarname</i> <b>=</b> <b>clsort(</b><i>varname1</i><b>)</b>
<p>
  the created variable <i>newvarname</i> has exactly the same values as the argument
variable <i>varname1</i> sorted in increasing order.
<p>
<p>
If <b>if</b> and/or <b>in</b> clauses are specified in syntax 1,
<p>
       <b>egen</b> <i>newvarname</i> <b>=</b> <b>clsort(</b><i>varname1</i><b>)</b> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [, <b>inplace</b>]
<p>
  the created variable contains only the values of <i>varname1</i> taken on by the
observations selected by the <b>if</b> and/or <b>in</b> clauses. By default all these values
are ordered and fill the first rows of the data. This default behaviour can be
overridden by the option <b>inplace</b>. When <b>inplace</b> is specified, the sorted values
only fill the rows of the selected observations. To illustrate the difference
let
<p>
       <b>egen newvarname_default = clsort(varname1) if select</b>
   and <b>egen newvarname_inplace = clsort(varname1) if select , inplace</b>
<p>
  be issued with the data below. <b>newvarname_default</b> only fills the top rows
whereas <b>newvarname_inplace</b> fills the rows of the selected observations only.
<p>
varname1   select  newvarname_default   newvarname_inplace 
  20         0           10                   .
  40         1           15                  10
  15         1           40                  15 
  10         1           60                  40
  55         0            .                   .  
  60         1            .                  60 
<p>
<p>
In syntax 1, the variable created is sorted in increasing order.  However a key
can be specified with the optional argument <i>varname2</i> (syntax 2). If <i>varname2</i> is
specified, then the created variable is sorted in increasing order of <i>varname2</i>.
<p>
<p>
<b><u>Options</u></b>
<p>
<b>inplace</b> requires that the selected observations only are filled with the new
    variable. <b>inplace</b> is irrelevant without <b>if</b> and/or <b>in</b> clauses.
<p>
<b><u>pos</u></b><b>var(</b><i>varname</i>){cmd:) completely changes the behaviour of <b>clsort</b> in syntax 2
    and should be used with care. It requires that the order of the generated
    variable match the order of the second variable passed as argument
    <i>varname2</i>):  the smallest obs. of <i>varname1</i> will be placed in the same line
    as the smallest obs. of <i>varname2</i>, etc.
<p>
<p>
<b><u>Author</u></b>
<p>
     Philippe VAN KERM &lt;philippe.vankerm@ceps.lu&gt;
     CEPS/INSTEAD
     B.P. 48
     L-4501 Differdange, G.-D. Luxembourg.
<p>
<p>
<b><u>Also see</u></b>
<p>
 Manual:  <b>[R] egen</b>
On-line:  help for egen
</pre>
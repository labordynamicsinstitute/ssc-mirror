<pre>
-------------------------------------------------------------------------------
help for <b>csipolate</b>
-------------------------------------------------------------------------------
<p>
<b><u>Cubic spline interpolation</u></b>
<p>
        <b>csipolate</b> <i>yvar</i> <i>xvar</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,</b> <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b>
<p>
    <b>by</b> <i>...</i> <b>:</b> may be used with <b>csipolate</b>; see help by.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>csipolate</b> creates <i>newvar</i> by averaging non-missing values of <i>yvar</i> and
    using natural cubic spline interpolation of missing values of <i>yvar</i>, given
    <i>xvar</i>. That is, provided that <i>xvar</i> is not missing,
<p>
    1. When <i>yvar</i> is not missing, <i>newvar</i> is the mean of <i>yvar</i> over observations
    with the same value of <i>xvar</i>. If a value of <i>xvar</i> is unique, then each mean
    is just the same as the value of <i>yvar</i> at that point.
<p>
    2. When <i>yvar</i> is missing, <i>newvar</i> is filled in using natural cubic spline
    interpolation.
<p>
<p>
<b><u>Remarks</u></b> 
<p>
    Extrapolation is not provided. Some users may wish to extrapolate any
    remaining missing values linearly using ipolate.
<p>
    <b>csipolate</b> is a wrapper using Mata functions <b>spline3()</b> and <b>spline3eval()</b>.
    If desired see help and in turn Mata source code here. That code is a
    translation of code originally given by Herriot and Reinsch (1973).
<p>
    The examples are based on the help for ipolate in Stata 10.  Stata 9
    users will need to substitute their own.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>generate()</b> is not optional; it specifies the name of the new variable to
        be created.
<p>
<p>
<b><u>Examples</u></b>
<p>
    ---------------------------------------------------------------------------
    Setup
        <b>. webuse ipolxmpl1</b>
<p>
    List the data
        <b>. list, sep(0)</b>
<p>
    Create <b>y1</b> containing a natural cubic spline interpolation of <b>y</b> on <b>x</b> for
    missing values of <b>y</b>
        <b>. csipolate y x, gen(y1)</b>
<p>
    List the result
        <b>. list, sep(0)</b>
<p>
    ---------------------------------------------------------------------------
    Setup
        <b>. webuse ipolxmpl2</b>
<p>
    Show years for which the circulation data are missing
        <b>. tabulate circ year if circ == ., missing</b>
<p>
    Create <b>csicirc</b> containing a natural cubic spline interpolation of <b>circ</b> on
    <b>year</b> for missing values of <b>circ</b> and perform this calculation separately
    for each <b>magazine</b>
        <b>. by magazine: csipolate circ year, gen(csicirc)</b>
    ---------------------------------------------------------------------------
<p>
<p>
<b><u>Author</u></b>
<p>
    Nicholas J. Cox, Durham University, U.K.
    n.j.cox@durham.ac.uk
<p>
<p>
<b><u>Acknowledgments</u></b>
<p>
    Ben Ammar reported an example which underlined that there is point in
    asking for interpolation of singleton values. If that value is known,
    there is nothing to interpolate. If that value is unknown, there is
    nothing to do it with.
<p>
<p>
<b><u>References</u></b>
<p>
    Hamming, R.W. 1973.  <i>Numerical methods for scientists and engineers.</i>  New
        York: McGraw-Hill. See pp.349-356.
<p>
    Herriot, J.G. and C.H. Reinsch. 1973.  Algorithm 472: procedures for
        natural spline interpolation.  <i>Communications of the Association for</i>
        <i>Computing Machinery</i> 16: 763-768.
<p>
    Lancaster, P. and K. Salkauskas. 1986.  <i>Curve and surface fitting: an</i>
        <i>introduction.</i>  London: Academic Press. [capital S of Salkauskas
        should bear caron or wedge diacritic]
<p>
    Press, W.H., S.A. Teukolsky, W.T. Vetterling, B.P. Flannery. 2007.
        <i>Numerical recipes: the art of scientific computing.</i>  Cambridge:
        Cambridge University Press. See pp.120-124.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[D] ipolate</b>
<p>
</pre>
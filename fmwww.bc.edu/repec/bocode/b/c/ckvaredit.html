<pre>
<b>help ckvaredit</b>                                     dialogs: ckvaredit          
                                                            ckvaredit, stepthru
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>ckvaredit</b> - Editing attached validation rules
<p>
<b><u>Syntax</u></b>
<p>
        <b>ckvaredit</b> [<i>varlist</i>] [, <b><u>step</u></b><b>thru</b>]
<p>
<b><u>Description</u></b>
<p>
    <b>ckvaredit</b> brings up a dialog box which can be used to set validation (or
    scoring) rules which are then used by ckvar for data validation.  This
    help file will describe the use of the dialog box.
<p>
<b><u>Options</u></b>
<p>
<a name="stepthru"></a>    <b>stepthru</b> allows stepping through the variables one at a time. If
        specified, the first variable in the <i>varlist</i> is automatically chosen
        at the start, and clicking the save button advances the variable to
        the next variable in the variable list when clicked. This can be
        useful for working with large datasets.
<p>
<b><u>Using the </u></b><b><u>ckvaredit</u></b><b><u> Dialog Box</u></b>
<p>
<b><u>Overview</u></b>
<p>
    The steps are simple:
    1. Choose a variable.
    2. Choose a purpose.
        This is typically done just once for the first variable, and
            typically is the default choice of Validation.
    3. Edit the rule.
    4. Decide if missing values are errors.
    5. Include names of other variables needed for validation/scoring.
    6. Pick which of the buttons at the bottom to push.
        6.1. Click <b>Save</b> to Save your changes and keep working, or
        6.2. Click <b>Reset</b> to Discard your changes and keep working, or
        6.3. Click <b>Done</b> to Save your changes and stop, or
        6.4. Click <b>Cancel</b> to Quit without saving any changes for this
            variable
    7. Repeat as needed. If you get frustrated, see the notes below.
<p>
<b><u>Details</u></b>
<p>
<a name="chooseVar"></a><b><u>Choosing a Variable</u></b>
<p>
    Choose a variable from the dropdown box under <b>Variable to Check</b>.  If you
    specified the <b>stepthru</b> option, this will already have a variable name in
    it, but you can select another variable if you like.  The box will be
    grayed out if you have made changes in the right column which have not
    yet been saved.  If you made the changes to the wrong variable, click the
    wide Reset button extending across the dialog box near the bottom.
<p>
<a name="chooseChar"></a><b><u>Choosing a Purpose</u></b>
<p>
    The two main choices are either <b>Validation (valid)</b> or <b>Scoring (score)</b>.
<p>
    The default choice of <b>Validation</b> will be the correct choice for
    validating the data, and hence will be correct most of the time.
<p>
    If you will use <b>ckvar</b> to score an instrument or test, select the <b>Scoring</b>
    choice.
<p>
    You should rarely, if ever, need to select the <b>Other</b> button and then
    specify your own stub.  The only time this could be useful would be if
    there were multiple scoring algorithms for the same data, and you would
    like to include all of them in the same dataset.  If you do choose this
    option, you need to read and understand how ckvar uses characteristics.
    (You can read about it here.)
<p>
<a name="editRule"></a><b><u>Editing the Rule</u></b>
<p>
    There are two types of rules: <b>simple</b> and <b>complex</b>.  (Valid validation
    rules are described below.) Most validation rules will be simple.
<p>
        If you have a simple validation rule, enter it in the field provided.
<p>
        If you have a complex validation rule, click the <b>Edit Complex Rule</b>
        button, and edit the rule in the window that opens up. Do <b>not</b> edit
        the complex rule directly in the dialog box field, because it will
        <b>not</b> get saved properly. Some other oddities occur when editing
        complex validation rules, because of switching to a Do-file editor
        window to do the editing:
<p>
            A more condition will appear in the results window. Do <b>not</b> clear
            it. If you do, the changes you make in the do editor window will
            be lost.
<p>
            When you are satisfied with the mini-do-file you have written,
            close the window, saving the changes when prompted.
<p>
            Click the <b>Done Editing Complex Rule</b> button. This will clear the 
            more condition, save the changes, and put a message in the
            results window.
<p>
            Click the <b>Refresh Complex Rule</b> button to update the rule in the
            dialog box.
<p>
    If you would like more information about editing complex rules without
    using the do editor, take a look here.
<p>
<a name="markReq"></a><b><u>Missing Values</u></b>
<p>
    By default ckvar considers missing values to be valid values.  Click the
    <b>Required to be non-missing</b> checkbox if missing values are considered
    errors for the variable you are working on.
<p>
    If you check the <b>Required to be non-missing</b> checkbox, you can also enter
    a value which will be used in the error-marking variable for missing
    values.  By default, ckvar uses -1 as the value for missing values when
    validating data and +1 as the value for other errors to distinguish
    between errors of omission and errors of commission. If you do not want
    to make this distinction, change the <b>Value Used to Mark Missing Values</b> to
    1.
<p>
    If you are scoring an instrument or test rather than doing data
    validation, the default score for missing values is 0.
<p>
<a name="otherVars"></a><b><u>Noting Other Variables</u></b>
<p>
    If you specified a complex rule which uses other variables to validate
    the current variable, be sure to enter the names of those variables in
    the <b>Other Variables Needed for Checking</b> box. Filling this in allows 
    ckdrop, ckkeep, and ckrename to work properly in keeping the data
    verification from failing at a future time. It also helps ckvar prevent
    odd error messages from cropping up.  You do not need to enter any
    variables if you use a <b>like</b> syntax, because the helper commands for <b>ckvar</b>
    will track them down.
<p>
<a name="buttons"></a><b><u>Buttons to Push!</u></b>
<p>
<a name="save"></a><b><u>Save button</u></b>
<p>
    To save the changes and continue working, click the <b>Save</b> button. You do
    not need to separately save complex rules, as they are saved at the time
    you click the <b>Done Editing Complex Rule</b> button.  Note that saved changes
    are saved changes. You cannot revert to old rules after committing the
    changes.
<p>
    If you specified the <b>stepthru</b> option, clicking the <b>Save</b> button will
    automatically choose the next variable for editing.  In this case, the
    <b>Save</b> button can be used as a <b>Next Variable</b> button---there is no danger of
    destroying anything by clicking it when no changes have been made.
<p>
<a name="reset"></a><b><u>Reset button</u></b>
<p>
    The <b>Reset</b> button repopulates the dialog box with the current state of the
    saved rules for the given variable. It thus can be used to either get rid
    of unwanted and unsaved changes or to refresh the dialog box with
    current, saved rules. There is no way to revert anything which has
    already been saved.
<p>
<a name="cancel"></a><b><u>Cancel button</u></b>
<p>
    The <b>Cancel</b> button acts as one would expect: it closes the dialog box
    without saving any changes for the currently selected variable. Hitting
    the escape key has the same effect.
<p>
<a name="done"></a><b><u>Done button</u></b>
<p>
    The <b>Done</b> button saves the current changes, if any, and closes the dialog
    box. Unlike standard Stata dialog boxes, it does not result in executing
    a Stata command.
<p>
<a name="notes"></a><b><u>Notes</u></b>
<p>
    This dialog box is <b>not</b> a standard Stata dialog box, because its purpose
    is to edit information in the dataset rather than construct a single
    Stata command. It does its best to prevent careless errors by disabling
    items which it thinks should not be edited. If you really are stuck, hit
    the Reset button. You will lose minor changes that you might have made,
    but you will also be given access to all the items in the dialog box
    again. If you run into problems, please let me know about them.
<p>
    The validation rules you specify using the <b>ckvaredit</b> dialog box are
    attached to the variables using characteristics.  Since this is meant to
    be as transparent as possible, you do not need to understand
    characteristics either to use the dialog box or ckvar itself.
<p>
INCLUDE help ckvar_rule_syntax
<p>
<b><u>Also see</u></b>
<p>
    Online: ckvar, ckchar
<p>
<a name="me"></a><b><u>Author</u></b>
<p>
    Bill Rising, StataCorp
    email: brising@stata.com
    web: http://homepage.mac.com/brising
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>betafit</b>
-------------------------------------------------------------------------------
<p>
<b><u>Fitting a two-parameter beta distribution by maximum likelihood</u></b>
<p>
        <b>betafit</b> <i>depvar</i> [<i>weight</i>] [<i>if</i>] [<i>in</i>] [<b>,</b> { <b><u>alpha</u></b><b>var(</b><i>varlist_a</i><b>)</b>
                 <b><u>beta</u></b><b>var(</b><i>varlist_b</i><b>)</b> } | { <b><u>mu</u></b><b>var(</b><i>varlist_m</i> [<b>,</b> <b><u>nocons</u></b><b>tant</b> ]<b>)</b>
                 <b><u>phi</u></b><b>var(</b><i>varlist_p</i> [<b>,</b> <b><u>nocons</u></b><b>tant</b> <b>eform</b> ]<b>)</b> <b><u>alt</u></b><b>ernative</b> } <b>rpr</b>
                 <b><u>r</u></b><b>obust</b> <b><u>cl</u></b><b>uster(</b><i>clustervar</i><b>)</b> <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <i>maximize_options</i> ]
<p>
    <b>by</b> <i>...</i> <b>:</b> may be used with <b>betafit</b>; see help by.
<p>
    <b>fweight</b>s and <b>aweight</b>s are allowed; see help weights.
<p>
    When using Stata version 11 or higher, <b>alphavar</b>, <b>betavar</b>, <b>muvar</b>, and
    <b>phivar</b> may contain factor variables; see fvvarlist.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>betafit</b> fits by maximum likelihood a two-parameter beta distribution to a
    distribution of a variable <i>depvar</i>. <i>depvar</i> ranges between 0 and 1: for
    example, it may be a proportion.
<p>
    Note that cases will be ignored if the dependent variable has a value
    less than or equal to zero or more than or equal to one.  <b>betafit</b> can
    still be used to fit a variable with a range beyond (0, 1) by rescaling
    this variable. Several examples are shown in Smithson and Verkuilen
    (2006).
<p>
    <b>betafit</b> uses one of two parameterizations:
<p>
        A conventional parameterization with shape parameters <i>alpha</i> &gt; 0 and
        <i>beta</i> &gt; 0 (e.g. Forbes et al. 2011 or Johnson et al. 1995) will be
        used if only <i>depvar</i> is specified or if one or both of <b>alphavar()</b> and
        <b>betavar()</b> is specified. The conventional parameterization is
        especially useful when no covariates are present.
<p>
        An alternative parameterization with location parameter <i>mu</i> and scale
        parameter <i>phi</i> (e.g. Ferrari and Cribari-Neto 2004, Paolino 2001, or
        Smithson and Verkuilen 2006) will be used if one or both <b>muvar()</b> and
        <b>phivar()</b> is specified or if the <b>alternative</b> option is specified.  The
        alternative parameterization is especially useful when covariates are
        present. <i>mu</i> is reported on the logit scale so that it stays between 0
        and 1, i.e. logit <i>mu</i> = <i>muvar</i> * e(b_mu).  In order to help
        interpretation, various types of marginal effects can be calculated
        with dbetafit. <i>phi</i> is reported on the logarithmic scale to ensure
        that it remains positive, i.e.  ln <i>phi</i> = <i>phivar</i> * e(b_phi).
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>alphavar()</b> and <b>betavar()</b> allow the user to specify each parameter in the
        conventional parameterization as a function of the covariates
        specified in the respective variable list. A constant term is always
        included in each equation.
<p>
    <b>muvar()</b> and <b>phivar()</b> allow the user to specify each parameter in the
        alternative parameterization as a function of the covariates
        specified in the respective variable list. A constant term can be
        suppressed in each equation by specifying the <b>noconstant</b> suboption.
        To display exponentiated coefficients for the <b>phi</b> equation, specify
        the <b>eform</b> suboption.
<p>
    As implied above, just one parameterization should be chosen.
<p>
    <b>alternative</b> ensures that the alternative parameterization is used instead
        of the conventional parameterization if only <i>depvar</i> is specified.
        This option cannot be used with <b>alphavar()</b> or <b>betavar()</b>.
<p>
    <b>rpr</b> reports the estimated coefficients transformed to relative proportion
        ratios, i.e., exp(b) rather than b.  Standard errors and confidence
        intervals are similarly transformed.  This option affects how results
        are displayed, not how they are estimated.  The interpretation of
        these relative proportion ratios is discussed in detail in the
        examples below.
<p>
        Relative proportion ratios can be useful when the model contains
        interaction terms, as in that case marginal effects as computed by
        <b>dbetafit</b> will no longer be appropriate. Relative proportion ratios
        for the interaction terms can still be interpreted as the factor by
        which the relative proportion ratio changes, as is discussed in Buis
        (2010).
<p>
    <b>robust</b> specifies that the Huber/White/sandwich estimator of variance is
        to be used in place of the traditional calculation; see <b>[U] 23.14</b>
        <b>Obtaining robust variance estimates</b>.  <b>robust</b> combined with <b>cluster()</b>
        allows observations which are not independent within cluster
        (although they must be independent between clusters).
<p>
    <b>cluster(</b><i>clustervar</i><b>)</b> specifies that the observations are independent
        across groups (clusters) but not necessarily within groups.
        <i>clustervar</i> specifies to which group each observation belongs, for
        example, <b>cluster(personid)</b> in data with repeated observations on
        individuals.  See <b>[U] 23.14 Obtaining robust variance estimates</b>.
        Specifying <b>cluster()</b> implies <b>robust</b>.
<p>
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for the confidence
        intervals of the coefficients; see help level.
<p>
    <b>nolog</b> suppresses the iteration log.
<p>
    <i>maximize_options</i> control the maximization process; see help maximize. If
        you are seeing many "(not concave)" messages in the log, using the
        <b>difficult</b> option may help convergence.
<p>
<p>
<b><u>Saved results</u></b>
<p>
    In addition to the usual results saved after <b>ml</b>, <b>betafit</b> also saves the
    following as appropriate if no covariates have been specified:
<p>
        <b>e(alpha)</b> and <b>e(beta)</b> are the estimated parameters in the conventional
        parameterization.
<p>
        <b>e(mu)</b> and <b>e(phi)</b> are the estimated parameters in the alternative
        parameterization.
<p>
    The following results are saved regardless of whether covariates have
    been specified, as appropriate:
<p>
        <b>e(b_alpha)</b> and <b>e(b_beta)</b> are row vectors containing the parameter
        estimates from each equation in the conventional parameterization.
<p>
        <b>e(b_mu)</b> and <b>e(b_phi)</b> are row vectors containing the parameter
        estimates from each equation in the alternative parameterization.
<p>
        <b>e(length_b_alpha)</b> and <b>e(length_b_beta)</b> or <b>e(length_b_mu)</b> and
        <b>e(length_b_phi)</b> contain the lengths of these vectors. If no
        covariates are specified in an equation, the corresponding vector has
        length equal to 1 (the constant term); otherwise, the length is one
        plus the number of covariates.
<p>
        
<b><u>Examples and interpretation of results</u></b>
<p>
    <i>Marginal effects</i>
<p>
    To help with the interpretation of the results, use dbetafit to compute a
    set of marginal effects. Alternatively. it is also possible to use mfx or
    margins (for Stata versions 11 and higher).
<p>
    These marginal effects depend on the values of the
    explanatory/independent/x variables. So each observation will have its
    own marginal effects. Those displayed by <b>dbetafit</b> are for a (fictional)
    observation whose explanatory variables are fixed at the mean or at
    values specified in the <b>at()</b> option. So in the example below the marginal
    effects refer to a city governed by a leftwing government (the left is
    not a minority and not absent from the city government, so it must be the
    majority) and the house value and population density are average.
<p>
    For this fictional city the proportion spent on governing is 9.5%
    [E(governing|x)].  If that city is governed by a minority left
    government, that proportion will decrease 0.8 percentage points; and if
    it is governed by only parties on the right of the political spectrum,
    the proportion will increase by 0.9 percentage points (First table,
    column Min --&gt; Max).
<p>
    A 100,000 euro increase in average house value will lead to 2.5
    percentage points increase in the proportion and an extra 1000 persons
    per square kilometre will lead to an 1.1 percentage points decrease in
    the proportion (Second table, column MFX at x).
<p>
<p>
<b>    use http://fmwww.bc.edu/repec/bocode/c/citybudget.dta, clear</b>
<p>
<b>    betafit governing, mu(minorityleft noleft houseval popdens)</b>
<p>
<b>    dbetafit, at(minorityleft 0 noleft 0)</b>
<p>
    (click to run)
<p>
<p>
    <i>Relative proportion ratios</i>
<p>
    Alternatively, <b>betafit</b> also allows the display of relative proportion
    ratios. This can be useful when the dependent variable is a proportion.
    Consider the example below. This models the proportion of a city-budget
    spent on each city's own organization.  In that case the relative
    proportion is the proportion spent on governing divided by 1 - the
    proportion spent on governing. That is, in other words, the proportion
    spent on governing divided by the proportion spent on useful stuff.  As
    the total budget size drops out of this ratio, we can also say that this
    is the number of euros spent on governing per euro spent on productive
    stuff.
<p>
    It is useful to see the baseline relative proportion, that is, the
    relative proportion when all covariates are equal to zero. This is the
    exponentiated constant. Since Stata by default supresses the display of
    the exponentiated constant, we need to use a trick. We first create a
    variable baseline that contains all 1s, and add that to our list of
    variables in the <b>muvar()</b> option, and at the same time add the <b>noconstant</b>
    sub-option. The coefficient of baseline is now the baseline relative
    proportion.
<p>
    In the example below, a city with a city government consisting of
    majority left-leaning members, an average population and house value can
    expect to spent 10 cents on governing per euro spent on productive stuff.
    This ratio decreases by 10% (i.e. [1-.90]*100% = -10%) if it is governed
    by a minority left government, and it increases by 11% when no left
    parties are represented in the city government. A 100,000 euro increase
    in average house value will lead to an 35% increase in the relative
    proportion and an extra 1000 persons per square kilometre will lead to an
    11% decrease in the relative proportion.
<p>
<p>
<b>    use http://fmwww.bc.edu/repec/bocode/c/citybudget.dta, clear</b>
<b>    gen byte baseline = 1</b>
<b>        </b>
<b>    sum popdens if !missing(minorityleft, noleft, houseval, popdens), meanonly</b>
<b>    gen cpopdens = popdens - r(mean)</b>
<b>    </b>
<b>    sum houseval if !missing(minorityleft, noleft, houseval, popdens), meanonly</b>
<b>    gen chouseval = houseval - r(mean)</b>
<b>    </b>
<b>    betafit governing, ///</b>
<b>        mu(minorityleft noleft chouseval cpopdens baseline, nocons) rpr</b>
<p>
    (click to run)
        
<p>
<p>
    <i>Note</i>
<p>
    Notice the difference between percentage point changes (in the section on
    marginal effects) and percentage changes (in the section on relative
    proportion ratios). If we start with a baseline value of 1% and change by
    1 percentage point, then the result will be 1 + 1 = 2%.  If we change the
    baseline value by 1%, the result will be 1 * 1.01 = 1.01%.
<p>
        
<b><u>Authors</u></b>
<p>
    Maarten L. Buis, Universitaet Tuebingen
    maarten.buis@uni-tuebingen.de
<p>
    Nicholas J. Cox, Durham University
    n.j.cox@durham.ac.uk
<p>
    Stephen P. Jenkins, The London School of Economics and Political Science
    S.Jenkins@lse.ac.uk
<p>
<p>
<b><u>References</u></b>
<p>
    Buis, M.L. 2010.  Stata tip 87: Interpretation of interactions in
    non-linear models.  <i>The Stata Journal</i> 10(2): 305-308.
<p>
    Forbes, C., Evans, M., Hastings, N. and Peacock, B. 2011. <i>Statistical</i>
    <i>distributions.</i>  Hoboken, NJ: John Wiley.
<p>
    Ferrari, S.L.P. and Cribari-Neto, F. 2004.  Beta regression for modelling
    rates and proportions.  <i>Journal of Applied Statistics</i> 31(7): 799-815.
<p>
    Johnson, N.L., Kotz, S. and Balakrishnan, N. 1995.  <i>Continuous univariate</i>
    <i>distributions: Volume 2.</i> New York: John Wiley.
<p>
    MacKay, D.J.C. 2003.  <i>Information theory, inference, and learning</i>
    <i>algorithms.</i>  Cambridge: Cambridge University Press (see p.316).
    http://www.inference.phy.cam.ac.uk/itprnn/book.pdf
<p>
    Paolino, P. 2001.  Maximum likelihood estimation of models with
    beta-distributed dependent variables. <i>Political Analysis</i> 9(4): 325-346.
    http://polmeth.wustl.edu/polanalysis/vol/9/WV008-Paolino.pdf
<p>
    Smithson, M. and Verkuilen, J. 2006.  A better lemon squeezer? Maximum
    likelihood regression with beta-distributed dependent variables.
    <i>Psychological Methods</i> 11(1): 54-71.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online: help for betafit postestimation,
<p>
</pre>
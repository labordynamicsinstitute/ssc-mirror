<pre>
-------------------------------------------------------------------------------
Help file for <b>runmplus</b>
-------------------------------------------------------------------------------
<p>
    Build a Mplus data file, command file, execute the command file and
    display Mplus log file in Stata results window. Parameter estimates,
    standard errors, and model and fit statistics are stored as saved
    results. <b>runmplus</b> is a modification and extension of Michael Mitchell's 
    stata2mplus module (see http://www.ats.ucla.edu/stat/Stata/). The Mplus
    demo version and new version 6 Bayesian estimator options are supported.
<p>
-------------------------------------------------------------------------------
<p>
        <b>runmplus</b> varlist [if] [in] , [ <b>SAVEINPutfile(</b><i>string</i><b>)</b>
                 <b>SAVELOGfile(</b><i>string</i><b>)</b> <b>saveinputdatafile(</b><i>string</i><b>)</b> <b>log(</b><i>string</i><b>)</b>
                 <b>TItle(</b><i>string</i><b>)</b> <b>DATa(</b><i>string</i><b>)</b> <b>VARiable(</b><i>string</i><b>)</b> <b>DEFine(</b><i>string</i><b>)</b>
                 <b>ANalysis(</b><i>string</i><b>)</b> <b>MOdel(</b><i>string</i><b>)</b> <b>OUTput(</b><i>string</i><b>)</b>
                 <b>savedata(</b><i>string</i><b>)</b> <b>PLOT(</b><i>string</i><b>)</b> <b>mc(</b><i>string</i><b>)</b> <b>montecarlo(</b><i>string</i><b>)</b>
                 <b>population(</b><i>string</i><b>)</b> <b>TItle(</b><i>string</i><b>)</b> <b>demo6</b>
                 <i>Mplus_command_option_shortcuts</i>
                 <i>Special_postestimation_commands_options</i> ]
<p>
               <i>Mplus command option shortcuts:</i>
<p>
                 <b>missing(</b><i>#</i><b>)</b> <b>IDvariable(</b><i>string</i><b>)</b> <b>NGroups(</b><i>string</i><b>)</b>
                 <b>CATegorical(</b><i>string</i><b>)</b> <b>GROUPing(</b><i>string</i><b>)</b> <b>weight(</b><i>string</i><b>)</b>
                 <b>CLUSter(</b><i>string</i><b>)</b> <b>within(</b><i>string</i><b>)</b> <b>between(</b><i>string</i><b>)</b>
                 <b>tscores(</b><i>string</i><b>)</b> <b>centering(</b><i>string</i><b>)</b> <b>ttype(</b><i>string</i><b>)</b>
<p>
                 <b>type(</b><i>string</i><b>)</b> <b>ESTimator(</b><i>string</i><b>)</b> <b>MATrix(</b><i>string</i><b>)</b>
                 <b>PARAMeterization(</b><i>string</i><b>)</b> <b>VARiance(</b><i>string</i><b>)</b> <b>ITERations(</b><i>string</i><b>)</b>
                 <b>SDITERations(</b><i>string</i><b>)</b> <b>H1ITERations(</b><i>string</i><b>)</b>
                 <b>MITERations(</b><i>string</i><b>)</b> <b>MCITERations(</b><i>string</i><b>)</b>
                 <b>MUITERations(</b><i>string</i><b>)</b> <b>CONvergence(</b><i>string</i><b>)</b>
                 <b>H1CONvergence(</b><i>string</i><b>)</b> <b>COVERage(</b><i>string</i><b>)</b> <b>logcriterion(</b><i>string</i><b>)</b>
                 <b>MCONVergence(</b><i>string</i><b>)</b> <b>MCCONVergence(</b><i>string</i><b>)</b>
                 <b>MUCONVergence(</b><i>string</i><b>)</b> <b>mixc(</b><i>string</i><b>)</b> <b>mixu(</b><i>string</i><b>)</b>
                 <b>LOGHigh(</b><i>string</i><b>)</b> <b>LOGLow(</b><i>string</i><b>)</b> <b>UCELLsize(</b><i>string</i><b>)</b>
                 <b>ALGOrithm(</b><i>string</i><b>)</b>
<p>
                 <b>SAMPStat</b> <b>MODindices(</b><i>string</i><b>)</b> <b>STANDardized</b> <b>RESidual</b> <b>CINTerval</b>
                 <b>NOCHIsquare</b> <b>h1se</b> <b>H1TEch3</b> <b>PATterns</b> <b>FSCOEFficeint</b>
                 <b>FSDETerminacy</b> <b>tech(</b><i>string</i><b>)</b> <b>population(</b><i>string</i><b>)</b> <b>loadresults</b>
                 <b>varnocheck</b>
<p>
<p>
<p>
<p>
<b><u>Required commands</u></b>
<p>
<b>varlist</b> - Variables to be used in the Mplus model. This command is not
        actually required. If it's left blank runmplus will assume you want
        all of the variables, unless there is text in the <b>MC</b> or <b>montecarlo</b>
        commands. NOTE: This varlist can be a STATA abbreviated varlist. Keep
        in mind that Mplus and STATA expand varlists differently, and what
        works in STATA may not work in Mplus. For example, the abbreviated
        list y1-x3 will identify all variables falling between and including
        y1 and x3, and will work as a varlist in this command. However, you
        couldn't use the option<b> categorical y1-x3</b> because Mplus can't expand
        such a varlist.
<p>
<p>
<b><u>Options</u></b>
<p>
<b>demo6</b> - If you have both the demo version 6 and another version of Mplus,
        <b>demo6</b> will force a call to the Mplus demo version 6. If you only have
        the demo version, you do NOT need to specify this option. <b>runplus</b>
        will find the right executable so long as they are in the default
        install locations. Specify "demo6" if running the demo version 6 of
        Mplus.  No other demo versions are supported but you could edit the
        ado to achieve that (c. line 600).
<p>
<b>missing</b> - Specify number for missing values, default -9999
<p>
<b>SAVEINPutfile(</b><i>string</i><b>)</b> ,
<p>
<b>SAVELOGfile(</b><i>string</i><b>)</b> and
<p>
<b>saveinputdatafile(</b><i>string</i><b>)</b> - <b>runplus</b> uses temporary file names to store the
        Mplus command file and data file. By default, these are not saved. If
        the user wishes to have these files to review after execution of
        <b>runplus</b>, file names can be specified using the three save options.
        DOS shell copy commands are used and replacement of existing files
        will occur. NOTE: don't include the suffexes (inp, out, dat).
<p>
<b>log(string)</b> - if "off" is specified, runmplus supresses the dump of the Mplus
        output file to the STATA results window. Any other entry will have no
        influence on runmplus processing.  Can be used at the same time as
        <b>savelogfile</b>.
<p>
<i>Mplus_command_file_options</i> - See below and the Mplus Users Guide. The Mplus
        command file options are captured as strings and placed into a ascii
        file that is sent to the <i>Mplus</i> program. You can put anything you want
        in any of these options, but only options that make sense to<i> Mplus</i>
        will be useful. Modifications or special circumstances are addressed
        in the next section.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>runmplus</b> brings the powerful latent variable analysis capabilities of
    <i>Mplus</i> (see www.statmodel.com) into the Stata enviroment. While <b>runmplus</b>
    does little more than data reformat and ascii file creation, it removes a
    lot of the hassle of estimating categorical and continuous latent
    variable models using Mplus. <b>runmplus</b> is a modification and extension of
    Michael Mitchell's <b>stata2mplus</b> module (see
    http://www.ats.ucla.edu/stat/Stata/). The <b>runmplus</b> module does a number
    of tasks:
<p>
    (1) creates an ascii data file suitable for use with Mplus using code
        from stata2mplus, and also
<p>
    (2) creates a mplus command file using options specified,
<p>
    (3) executes the mplus command file using the dos shell command feature,
        and
<p>
    (4) dumps the Mplus model results to the screen/log (unless directed not
        to by the user using <b>log(off)</b>).
<p>
    <i>Mplus</i> is required to use this STATA module. If you don't have Mplus,
    visit www.statmodel.com.  Moreover, <b>runmplus</b> assumes mplus.exe is located
    in the windows path (or that mpdemo6.exe is in c:\program files\mplus
    demo\).<b>  runmplus</b> will not check code for errors. <b>runmplus</b> can't be used
    efficiently without an understanding of the Mplus command syntax.
<p>
<p>
<b><u>Known Bugs and Limitations</u></b>
<p>
    Long variable names: Mplus does not support long variable names, so
    neither does <b>runmplus</b>.  Your runmplus/Mplus file will run with a long
    file name so long as the first eight characters are unique. It'd be
    better to make them short in STATA first.
<p>
    <b>runmplus</b> will not allow you to use the PLOT option in Mplus.
<p>
    <b>runmplus</b> may have trouble reading parameter estimates when more than one
    latent class variable is used. Use the<b> saveinp</b> and<b> saveinputdatafile</b>
    options and run the model from Mplus.
<p>
<p>
<b><u>Examples</u></b>
-------------------------------------------------------------------------------
<p>
Simple linear regression for a continuous dependent variable
<p>
        . <b>runmplus y1 x1 x3, model(y1 on x1 x3;)</b>
<p>
<p>
Logistic regression 
<p>
        . <b>runmplus y1 x1 x3, categorical(y1) type(logistic) model(y1 on x1</b>
        <b>x3;)</b>
<p>
<p>
Path analysis with continuous dependent variables
<p>
        . <b>runmplus y1-y3 x1-x3, model(y1 y2 on x1 x2 x3; y3 on y1 y2 x2;)</b>
<p>
<p>
Path analysis with categorical dependent variables
<p>
        . <b>runmplus y1-y3 x1-x3, categorical(y1 y2 y3) model(y1 y2 on x1 x2</b>
        <b>x3; y3 on y1 y2 x2;)</b>
<p>
<p>
Path analysis with a combination of continuous and categorical dependent variab
&gt; les
<p>
        . <b>runmplus y1-y3 x1-x3, categorical(y3) model(y1 y2 on x1 x2 x3; y3</b>
        <b>on y1 y2 x2;)</b>
<p>
<p>
Exploratory factor analysis with continuous indicators
<p>
        .<b>  runmplus y1-y12, type(efa 1 4)</b>
<p>
<p>
Exploratory factor analysis with categorical indicators
<p>
        .<b>  runmplus y1-y12, type(efa 1 4) categorical(all)</b>
<p>
<p>
Exploratory factor analysis with a mixture of categorical and continuous indica
&gt; tors
<p>
        .<b>  runmplus y1-y12, type(efa 1 4) categorical(y1 y3 y5 y7 y9 y11)</b>
<p>
<p>
Confirmatory factor analysis with continuous indicators
<p>
        .<b>  runmplus y1-y6, model(f1 by y1-y3; f2 by y4-y6;)</b>
<p>
Confirmatory factor analysis with continuous indicators and equality constraint
&gt; s, 
using <b>savedata</b> and <b>savelogfile</b> options, and 
following up with <b> runmplus_load_savedata</b> bringing the factor estimates
back into the current data set
<p>
        .<b>  runmplus y1-y6 id , idvariable(id) ///</b>
<p>
           <b>model(f by y1-y6 *1 (1); f@1; [y1-y6 *0] ; y1-y6 *1 (2) ;) ///</b>
<p>
           <b>savedata(save=fscores; file=c:\trash\trash.dat) ///</b>
<p>
           <b>savelogfile(c:\trash\trash)</b> // note no suffix on trash.out
<p>
        .<b>  preserve</b>
<p>
        .<b>  runmplus_load_savedata , out(c:/trash/trash.out) clear</b> // note
        with suffix on trash.out
<p>
        .<b>  id f</b>
<p>
        .<b>  sort id</b>
<p>
        .<b>  tempfile f1</b>
<p>
        .<b>  save `f1'</b>
<p>
        .<b>  restore</b>
<p>
        .<b>  merge id using `f1' , sort</b>
<p>
        .<b>  table _merge</b>
<p>
        .<b>  drop _merge</b>
<p>
<p>
<b><u>Mplus Program Options</u></b>
-------------------------------------------------------------------------------
<i>Data Options not usually needed</i> - The user should not generally need to
        specify Mplus DATA "file", "format", "type", "nobservations" options.
        <b>runmplus</b> takes care of all of this for you.
<p>
<b>NGroups </b>- number of groups
<p>
<i>Variable Options not needed</i> - Generally, the Mplus "names",
        "useobservations", "usevariables" will not be needed. Use the <b>if</b> and
        <b>in</b> statements to accomplish the same thing as "Useobservations", and
        you must specify a variable list so "Usevariables" is assumed to be
        all of the variables.
<p>
<b>categorical </b>- names of categorical dependent variables. Use a string Mplus
        will understand.
<p>
<b>Grouping </b>- name and label values of grouping variable.  Put text here just
        like you would after the GROUPING option in Mplus. For example
        <i>grouping(gender(1=male 2=female))</i>.  In the model statement, refer to
        these groups as you would in Mplus (eg., model(f by y1 y2; f on x;
        model male:; f on x; model female:; f on x;)).
<p>
        Note the semi-colon after model &lt;group&gt;: This helps runmplus parse
        the command line.
<p>
        It is possible you'll get an error message or the grouping statement
        won't be parsed correctly, particularly if you have a long grouping
        statement. If this happens, try shortening the grouping statement by
        using shorter group lablels.
<p>
<b>DEFINE</b>- The whole point of this program is to allow you to do this kind of
        stuff in Stata. But, if you want it, you can specify a Mplus option
        string within the <b>DEFINE</b> option and have Mplus make new variables.
        This might be useful if you wanted a new variable in the Mplus
        analysis but not as a part of the master data set.
<p>
<b>type </b>- refers to "type" option in Mplus ANALYSIS command. The default is
        general. Other options include meanstructure, missing, H1, Mcohort,
        Mixture, Complex, Twolevel, EFA # #, Logistic.
<p>
<b>estimator </b>- Mplus will recognize and implement ML, MLM, MLMV, GLS, WLS, WLSM,
        WLSMV, MLR, MLF, MLM, MLMV, ULS estimators if the model type can
        support it. If nothing is specified, the Mplus default estimators are
        used.
<p>
<b>matrix </b>- matrix to be evaluated. You can put anything you want but Mplus will
        only allow "covariance" or "correlation"
<p>
<b>tech(</b><i>number list</i><b>)</b> - list in <i>number list</i> the technical output to be displayed
        (just list the numbers)
<p>
  <b>1 </b>- parameter specifications and starting values for all free parameters.
<p>
  <b>2 </b>- parameter derivatives.
<p>
  <b>3 </b>- estimated covariance and correlation matrices for the parameter
        estimates.
<p>
  <b>4 </b>- means and covariace and correlation matrices for the latent variables
        in the model.
<p>
  <b>5 </b>- optimization history.
<p>
  <b>6 </b>- optimization in estimating the sample statistics.
<p>
  <b>7 </b>- sample statistics for each class (when <b>type(</b><i>mixture</i><b>)</b> is used) using raw
        data weighted by the estimated class probabilities.
<p>
  <b>8 </b>- optimization history when <b>type(</b><i>mixture</i><b>)</b> is used).
<p>
  <b>9 </b>- available when MONTECARLO command is used when <b>type(</b><i>mixture</i><b>)</b> is also
        used, and produces error messages regarding convergence for each
        replication of the Monte Carlo study.
<p>
  <b>10 </b>- used in conjunction with TYPE=MIXTURE to request univariate and
        bivariate model fit information for the categorical dependent
        variables in the model.
<p>
  <b>11 </b>- used in conjunction with TYPE=MIXTURE request the Lo-Mendell-Rubin
        likelihood ratio test of model fit.
<p>
  <b>12 </b>- used in conjunction with TYPE=MIXTURE to request residuals for
        observed versus model estimated means, variances, covariances,
        univariate skewness, and univariate kurtosis.
<p>
  <b>13 </b>- used in conjunction with TYPE=MIXTURE to request two-sided tests of
        model fit for univariate, bivariate, and multivariate skew and
        kurtosis (Mardia’s measure of multivariate kurtosis).
<p>
  <b>14 </b>- used in conjunction with TYPE=MIXTURE to request a parametric
        bootstrapped likelihood ratio test.
<p>
<p>
<b><u>Author</u></b>
        Richard N Jones, ScD
        Institute for Aging Research
        Hebrew SeniorLife, Boston, MA
        jones@mail.hrca.harvard.edu
<p>
updates and other STATA+Mplus tools at http://sites.google.com/site/lvmworkshop
&gt; /home/runmplus-stuff
<p>
<p>
<b><u>Also see</u></b>
<p>
On-line: help for stata2mplus runmplus runmplus_fits 
                   read_parameterestimates_general read_parameterestimates 
                   read_convergence lli
</pre>
<pre>
.-
help for ^rc_spline^,
.-
<p>
Restricted Cubic Splines
------------------------
<p>
    ^rc_spline^ xvar [fw] [^if^ exp] [^in^ range][,^nk^nots^(^#^)^ ^kn^ots^(^nu
&gt; mlist^)^] 
<p>
 
Description
-----------
<p>
^rc_spline^ creates variables that can be used for regression models
in which the linear predictor f(xvar) is assumed to equal a restricted cubic 
spline function of an independent variable xvar.  In these regressions, the 
user explicitly or implicitly specifies k knots located at xvar = t1, t2, ..., 
&gt; tk.
f(xvar) is defined to be a continuous smooth function that is linear before t1,
is a piecewise cubic polynomial between adjacent knots, and is linear after
tk.  See Harrell (2001) for additional details.
<p>
^rc_spline^ creates variables called _Sxvar1, _Sxvar2, ..., _Sxvar(k-1), where 
"xvar" is the input variable name.  There are always one fewer variables create
&gt; d
than there are knots. If the model has k parameters beta0, beta1, ... , beta(k-
&gt; 1)
then
<p>
f(xvar) = beta0 + beta1*_Sxvar1 + beta2*_Sxvar2 + ... + beta(k-1)*_Sxvar(k-1).
<p>
An important aspect of restricted cubic splines is that the variables _Sxvar1,
... , _Sxvar(k-1) are functions of xvar and the knots only and are not affected
&gt;  by
the response variable.  This means that we can use ^rc_spline^ to define the 
_Sxvar* variables before specifying the response variable or the type of regres
&gt; sion
model.  
<p>
Restricted cubic splines are also called natural splines.
<p>
Options
-------
<p>
^nknots^ specifies the number of  knots.
<p>
^knots^ specifies the exact location of the  knots.  The values of these knots 
&gt; must 
        be given in increasing order.
<p>
<p>
If both of these options are given they must both specify the same number on kn
&gt; ots.
When ^knots^ is omitted the default knot values are chosen according to Table 2
&gt; .3 of 
Harrell (2001) with the additional restriction that the smallest knot may not b
&gt; e 
less than the 5th smallest value of xvar and the largest knot may not be greate
&gt; r than 
the 5th largest value of xvar.  The values of the all knots are displayed.  Whe
&gt; n
^knots^ is omitted the number of knots specified by ^nknots^ must be between 3 
&gt; and 7.
The default number of knots when neither ^nknots^ nor ^knots^ is given is 5.
<p>
Frequency weights are allowed.
<p>
Examples
--------
<p>
    *
    * Perform a linear regression of y against a restricted cubic spline (RCS) 
&gt;  
    * function of x with 5 knots.
    *
    . rc_spline x
    . regress y _Sx1 _Sx2 _Sx3 _Sx4
    *
    * Perform a logistic regression of fate against the RCS function of x defin
&gt; ed above.
    *
    . logistic fate _S*
    
    *
    * Perform a linear regression of y against a RCS of x with 3 knots chosen
    * at their default values according to Harrell (2001).  Graph the observed
    * and expected values of y against x
    *
    . drop _S*
    . rc_spline x, nknots(3)
    . regress y _S*
    . predict yhat
    . scatter y x || line yhat x
    
    *
    * Perform a proportional hazard regression analysis of fate against a RCS 
    * function of x with four knots specified at x =  2, 4, 6 and 8.
    *
    . drop _S*
    . stset time, failure(fate)
    . rc_spline x, knots(2 (2) 8)
    . stcox _S*
    
Remarks
-------
<p>
Restricted cubic splines provide a fairly general and robust approach for adapt
&gt; ing linear
methods to model non-linear relationships between a response variable and one o
&gt; r more
continuous covariates.  They can often be used effectively as an alternative to
&gt;  converting
continuous to categorical variables, which results in the discarding of informa
&gt; tion.
See Harrell (2001) for arguments in favor of this approach and guidance on how 
&gt; to build
models with RCSs.
<p>
This program is similar to ^spline^ (Sasieni 1994).  It differs in the choice o
&gt; f default
knots and in its output.  ^spline^ requires the user to specify a response and 
&gt; independent
variable.  It then allows the user to specify a number of different regression 
&gt; models and
version 7 graphs.  In contrast, ^rc_spline^ only calculates the RCS covariates.
&gt;   However,
this allows the use of the full range and power of Stata's regression, post-
estimation and v.8 graph commands.  In particular, more sophisticated
residual analyses and graphs can be generated as well as multiple regression mo
&gt; dels 
involving more than one independent variable.
<p>
See also ^mkspline^ for fitting models involving linear splines.
<p>
Authors
-------
<p>
William D. Dupont 
W. Dale Plummer, Jr.
Department of Biostatistics
Vanderbilt University School of Medicine
Nashville, TN 37232-2158
<p>
e-mail:  william.dupont@vanderbilt.edu
         dale.plummer@vanderbilt.edu
<p>
References
----------
<p>
Harrell, F.E: Regression Modeling Strategies with Applications to Linear Models
&gt; , Logistic
Regression and Survival Analysis. New York: Springer-Verlag 2001.
<p>
Sasieni, P: Natural cubic splines STB reprints. 1994; 4: 19-22.  See also STB r
&gt; eprints 
1995; 4:174, and  package snp7_1 from http://www.stata.com/stb/stb24.
<p>
<p>
<p>
    
    
</pre>
<pre>
<b>help rcd</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b> recursively traverse directories and execute</b>
    <b> any command in or for each one of them</b>
<p>
<b><u>Syntax</u></b>
<p>
        <b>rcd</b> [<i>directory_name</i>], [<b><u>v</u></b><b>erbose</b>] [<b>depth(</b><i>integer &gt;= 1</i><b>)</b>]
                 [<b><u>dir</u></b><b>filter</b>(<i>regular expression</i>)] [: <i>command</i>]
<p>
<b><u>Description</u></b>
<p>
    <b>rcd</b> expects a directory name otherwise the current working directory is
    used.  <b>rcd</b> proceeds to recursively visit all subdirectories starting
    there.  <b>rcd</b> will display what directories it goes to in verbose mode,
    obey a maximum depth if one is specified and it will optionally run a
    command in each directory if desired.  Which directories the submitted
    command are run in can be selected by using the <b>dirfilter()</b> option.
<p>
    <b>rcd</b> may be thought of as a recursor.  A typical example of what you can
    do using it is:
 
    <b>. rcd . : dir "data"</b>
<p>
    which would result in visiting every subdirectory starting where you are
    wanting to see the Stata datafiles in each one of them.
<p>
    Another way to achieve the same thing would be to use the returned macros
    that <b>rcd</b> generates:
 
    <b>. rcd .</b>
    <b>. forvalues i = 1(1)`r(tdirs)'{</b>
    <b>. dir "`r(ndir`i')'`c(dirsep)'*dta"</b>
    <b>. }</b>
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>verbose</b> specifies to print the directories that <b>rcd</b> visits.  By default,
    if <b>rcd</b> is invoked with no directory specified or options specified, then
    <b>rcd</b> runs in verbose mode.
<p>
    <b>depth</b> specifies an integer value greater than or equal to 1 (one) to
    limit how far down the directory tree <b>rcd</b> will go. <b>depth(1)</b> specifies not
    to look in subdirectories.
<p>
    <b>dirfilter</b> specifies regular expression to limit what directories the
    specified command will be run in.  If you want to see what directories
    your command will be run in, use <b>rcd</b> and specify to run pwd like so:
 
    <b>. rcd , dirfilter(data) : pwd</b>
<p>
<b><u>Remarks</u></b>
    Since <b>rcd</b> runs whatever Stata command and changes directories in the
    process, if there is a lot printed to the results window and you get
    tired of clicking more to continue and quit, then your current directory
    may not be where you started.  To quickly get back to the directory you
    were in when you invoked <b>rcd</b> just use the returned local macro <b>r(sdir)</b>
    like so:
 
    <b>. cd "`r(sdir)'"</b>
<p>
<b><u>Examples</u></b>
<p>
    Only look in directories whose names contain the word "data":
 
    <b>. rcd . , dirfilter(data)</b>
<p>
    An example from the realm of managing your files and your data can be
    constructed by using the grep command:
 
    <b>. rcd .</b>
    <b>. return list</b>
    <b>. forvalues i = 1(1)`r(tdirs)'{</b>
    <b>. grep Family Children, path("`r(ndir`i')'`c(dirsep)'data")</b>
    <b>. }</b>
<p>
    The code above locates and lists Stata datafiles to either use or
    describe all or part of each dataset found in the current directory or
    any of its subdirectories whose variable names or labels contain either
    of the words "Family" or "Children".
 
    Another way to do the same thing by listing as you go would be:
 
    <b>. rcd . : grep Family Children</b>
<p>
<b><u>Saved results</u></b>
<p>
    <b>rcd</b> saves the following in <b>r()</b>:
 
<p>
    Macros         
      <b>r(sdir)</b>             directory <b>rcd</b> was invoked in
      <b>r(tdirs)</b>            total number of directories searched
      <b>r(ndir1)</b>            name of the first directory searched
      <b>r(ndir2)</b>            name of the second directory searched
<p>
<b><u> Author</u></b>
    Nikos Askitas
    IDSC of IZA
    IZA, Bonn Germany
    nikos@iza.org
<p>
    Dan Blanchette
    Center of Entrepreneurship and Innovation
    Duke University's Fuqua School of Business
    Dan.Blanchette@Duke.edu
<p>
<b><u>Also see</u></b>
<p>
    Online:  help for cd, dir
<p>
</pre>
<pre>
<b>help stpm2cif</b> 
                                       also see:  <b>stpm2  stpm2_postestimation  </b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>stpm2cif</b> --  Competing risks post-estimation tool to estimate cumulative
                   incidence function after stpm2
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>stpm2cif</b> <i>newvarlist</i> [<b>,</b> <i>options</i>]
<p>
<p>
    <i>options</i>                             Description
    -------------------------------------------------------------------------
    <b>cause1</b><i>...</i><b>cause10</b>                    
    <b>obs</b>                                  specifies the number of observations
                                          (of time) to predict for
    <b>ci</b>                                   calculates confidence intervals for
                                          cumulative incidence function
    <b>mint</b>                                 the minimum value of follow up time
    <b>maxt</b>                                 the maximum value of follow up time
    <b><u>time</u></b><b>name</b>                             name of time variable derived by
                                          code
    <b><u>haz</u></b><b>ard</b>                               predicts cause-specific hazard
                                          function for each cause
    <b>contmort</b>                             predicts the contribution to total
                                          mortality
    <b>conthaz</b>                              predicts the contribution to hazard
    -------------------------------------------------------------------------
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>stpm2cif</b> can be used after <b>stpm2</b> to obtain cumulative incidence functions
    for up to 10 causes of death.
<p>
<p>
<b><u>Options</u></b>
<p>
    Note: in the table below, <i>vn</i> is an abbreviation for <i>varname</i>.
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>cause1(</b><i>vn # </i>[<i>vn # </i>..]<b>)</b><i>..</i><b>cause10(</b><i>vn # </i>[<i>vn # </i>..]<b>)</b> requests that the
        covariates specified by the listed <i>varname(s)</i> be set to # when
        predicting the cumulative incidence functions for each cause.  It is
        complusory to specify cause1 and cause2.
<p>
    <b>obs(</b><i>integer</i><b>)</b> specifies the number of observations (of time) to predict
        for (default 1000). Observations are evenly spread between the
        minimum and maximum value of follow-up time.
<p>
    <b>ci</b> calculates a 95% confidence interval for the cumulative incidence
        function and stores the confidence limits in <b>CIF_</b><i>newvar</i><b>_lci</b> and
        <b>CIF_</b><i>newvar</i><b>_uci</b>.
<p>
    <b>mint(</b><i>#</i><b>)</b> the minimum value of follow up time. The default is set as the
        minimum event time from <b>stset</b>.
<p>
    <b>maxt(</b><i>#</i><b>)</b> the maximum value of follow up time. The default is set as the
        maximum event time from <b>stset</b>.
<p>
    <b>timename(</b><i>newvarname</i><b>)</b> this is the time variable generated during
        predictions for the cumulative incidence function (default <b>_newt</b>).
        Note that this is the variable for time that needs to be used when
        plotting curves for the cumulative incidence function and the
        cause-specific hazard function.
<p>
    <b>hazard</b> predicts cause-specific hazard function for each cause.
<p>
    <b>contmort</b> predicts the contribution to total mortality.
<p>
    <b>conthaz</b> predicts the contribution to hazard.
<p>
<p>
<b><u>Examples</u></b>
<p>
<p>
This example is taken from a paper by Putter et al. (2007) where data were anal
&gt; yzed on 324 homosexual men from the 
Amsterdam Cohort Studies on HIV infection and AIDS. For a more detailed descrip
&gt; tion of the web based data see 
Example 4 in the following document http://www.stata.com/features/competing-ris
&gt; ks/stcrreg.pdf.
<p>
<p>
Expand the data set so that each patient has a row of data for each of the two 
&gt; competing events - time to SI 
phenotype appearance and diagnosis of AIDS. 
<p>
        webuse hiv_si
        gen id=_n
        expand 2
<p>
<p>
Create a cause variable variable for each of the two competing events. Generate
&gt;  an event indicator by setting 
the cause variable equal to the status variable. The status variable indicates 
&gt; whether the patient has experienced
either of the two events. Once this has been generated use it to <b>stset</b> the data
&gt; .
<p>
<p>
        bysort id: gen cause= _n
        gen si=cause==1
        gen aids=cause==2
        gen event=(cause==status)
        stset time, failure(event)
 
<p>
<p>
Run <b>stpm2</b> including each of the two competing events in the model.
<p>
<p>
        stpm2 si aids, scale(hazard) tvc(si aids) nocons rcsbaseoff dftvc(3)
<p>
<p>
<p>
Run<b> stpm2cif</b> to obtain the cumulative incidence function for each cause. Note t
&gt; hat the names in the newvarlist 
are in capital letters so as not to overwrite the original variables with those
&gt;  names.
<p>
<p>
        stpm2cif SI AIDS, cause1(si 1) cause2(aids 1)
<p>
<p>
A plot of the two cumulative incidence functions for SI appearance and diagnosi
&gt; s of AIDS can be obtained as follows:
<p>
<p>
        twoway (line CIF_SI _newt)(line CIF_AIDS _newt), xtitle(Years from
            HIV infection) ytitle(Cumulative Incidence Function) ylabel(,
            angle(0))
<p>
The variables <b>CIF_SI</b> and <b>CIF_AIDS</b> are the cumulative incidence functions genera
&gt; ted by the<b> stpm2cif</b> command.
Note that the curve is plotted against <b>_newt</b> which is the new time variable gen
&gt; erate by<b> stpm2cif</b> during the predictions.
<p>
<p>
In order to plot a stacked graph of the cumulative incidence functions you need
&gt;  to sum up the two functions.
<p>
<p>
        gen tot1=CIF_SI
        gen tot2=CIF_SI+CIF_AIDS
<p>
<p>
Now the stacked cumulative incidence graph can be plotted as follows:
<p>
<p>
        twoway (area tot2 _newt)(area tot1 _newt), xtitle(Years from HIV
            infection) ytitle(Cumulative Incidence Function) ylabel(,
            angle(0))
<p>
<p>
Note that the legend shows <b>tot1</b> which represents <b>CIF_SI</b> and <b>tot2</b> which represen
&gt; ts <b>CIF_AIDS</b>.
<p>
<b><u>Also see</u></b>
<p>
    Online:  <b>[ST] stpm2</b> <b>[ST] stpm2_postestimation</b>;
<p>
<p>
<p>
</pre>
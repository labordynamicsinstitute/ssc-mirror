<pre>
-------------------------------------------------------------------------------
help for <b>seqlogit</b>
-------------------------------------------------------------------------------
<p>
<b><u>Sequential logit model</u></b>
<p>
        <b>seqlogit</b> <i>depvar</i> [<i>indepvars</i>] [<i>if</i>] [<i>in</i>] [<i>weight</i>] <b>,</b> <b>tree(</b><i>tree</i><b>)</b> [
                 <b><u>ofint</u></b><b>erest(</b><i>varname</i><b>)</b> <b>over(</b><i>varlist</i><b>)</b> <b>sd(</b><i>numlist</i><b>)</b>
                 <b>deltasd(</b><i>varname numlist</i><b>)</b> <b>rho(</b><i>#</i><b>)</b> <b>{</b> <b>pr(</b><i>numlist</i><b>)</b> | <b>mn(</b><i># # </i><b>,</b><i> # #</i>
                 [<b>,</b><i> # #</i><b>,</b><i> etc</i>.]<b>)</b> | <b>uniform</b> <b>}</b> <b>draws(</b><i>#</i><b>)</b> <b>drawstart(</b><i>#</i><b>)</b> <b>or</b>
                 <b><u>c</u></b><b>onstraints(</b><i>numlist</i><b>)</b> <b><u>r</u></b><b>obust</b> <b><u>cl</u></b><b>uster(</b><i>clustervar</i><b>)</b> <b>nolog</b>
                 <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <i>maximize_options</i> ]
<p>
    <b>by</b> <i>...</i> <b>:</b> may be used with <b>seqlogit</b>; see help by.
<p>
    <b>pweight</b>s, <b>fweight</b>s and <b>iweight</b>s are allowed; see help weights.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>seqlogit</b> fits a sequential logit model. This model is know under a
    variety of other names: sequential response model (maddala 1983),
    continuation ratio logit (Agresti 2002), model for nested dichotomies
    (fox 1997), and the Mare model (shavit and blossfeld93) (after (Mare
    1981)).
<p>
    A sequential logit model can be estimated quite simply by estimating a
    number of logit models. The <b>seqlogit</b> package serves three additional
    purposes: First, it makes it easier to test hypotheses across transitions
    since the entire model is estimated simultaneously. Second, it implements
    the decomposition proposed by Buis (2010a) of the effect of an
    explanatory variable on the outcome of the process described by the
    sequential logit into the contributions of each of the transitions. The
    implementation is discussed in seqlogit postestimation. Third, it
    implements and extends the strategy proposed by Buis (2011) of doing a
    sensitivity analysis to investigate the potential influence of unobserved
    variables.
<p>
    For this last purpose, the <b>seqlogit</b> package allows own to estimate a
    sequential logit given a scenario concerning the unobserved variables.
    These effects will only be estimated when the <b>sd()</b> option is specified. A
    regular sequential logit model, which assumes that there is no unobserved
    heterogeneity, is estimated if the <b>sd()</b> option is not specified. The
    scenarios assume that these unobserved variables either add up to a
    standardized normally (Gaussian) distributed variable (the default), or
    to a standardized discrete variable (when the <b>pr()</b> option is specified),
    or a mixture of normal distributions (when the <b>mn()</b> option is specified),
    or a uniform distribution (when the <b>uniform</b> distribution is specified.
    The effects of this agregate unobserved variable during each transition
    are specified in the <b>sd()</b> option. One can allow the effect of the
    unobserved variable to change over another variable using the <b>deltasd()</b>
    option. The correlation during the first transition between this
    unobserved variable and the variable specified in the <b>ofinterest()</b> option
    is specified in the <b>rho()</b> option. The scenarios are estimated using
    maximum simulated likelihood, while the regular sequential logit model is
    estimated using regular maximum likelihood. Advise on how to use these
    different scenarios in a sensitivity analysis is given here: 
    seqlogit_sensitivity.
<p>
<p>
<b><u>Options</u></b>
<p>
        +-------+
    ----+ Model +------------------------------------------------------------
<p>
    <b>tree(</b><i>tree</i><b>)</b> specifies the sequence of transitions that make up the model.
        The transitions are seperated with commas and the choices within
        transitions are seperated with colons. The levels are represented by
        the levels of the <i>depvar</i>. It is thus convenient to code <i>depvar</i> as a
        series of integers. For example, say there are three levels, 1, 2,
        and 3, and the first transition consist of a choice between value 1
        versus values 2 or 3, and the second transition consists (for those
        who didn't choose value 1) of a choice between values 2 and 3. The
        tree option should than be: tree(1 : 2 3 , 2 : 3).
<p>
        All values of <i>depvar</i> must be specified in the tree and all values in
        the tree must occur in <i>depvar</i>. Furthermore, all levels must be
        reachable through one and only one path through the tree.
<p>
    <b><u>ofint</u></b><b>erest(</b><i>varname</i><b>)</b> specifies the variable whose effect will be
        decomposed when using the <b>seqlogitdecomp</b> command.  The variable
        specified is added to the list of explanatory variables.
<p>
    <b>over(</b><i>varlist</i><b>)</b> specifies the variable(s) over which the effect of the
        variable specified in the <b>ofinterest()</b> option is allowed to change.
        This/these variable(s) and the interaction effect between the
        variable(s) spefied in <b>over()</b> and <b>ofinterest()</b> are added to the list
        of explanatory variables. <b>ofinterest()</b> needs to be specified when
        specifying <b>over()</b>.
<p>
    <b><u>c</u></b><b>onstraints(</b><i>numlist</i><b>)</b> specifies linear constraints to be applied during
        estimation, see <b>constraint</b>.
<p>
<p>
        +-----------+
    ----+ Scenarios +--------------------------------------------------------
<p>
    <b>sd(</b><i>numlist</i><b>)</b> specifies for each transition the effect of the standardized
        unobserved variable. If only one number is specified, this effect
        will be assumed constant over transitions, otherwise the first number
        will refer to the first transition, the second number to the second
        transition, etc. The default is 0.
<p>
    <b>deltasd(</b><i>varname numlist</i><b>)</b> specifies how the effect of the unobserved
        variable changes over <i>varname</i>. If only one number is specified, this
        change will be assumed constant over transitions, otherwise the first
        number will refer to the first transition, the second number to the
        second transition, etc. The default is that the effect of the
        unobserved variable is constant over all variables.
<p>
    <b>rho(</b><i>#</i><b>)</b> specifies the correlation of the unobserved variable and the
        variable specified in <b>ofinterest()</b>. The default is 0.
<p>
    The <b>pr()</b>, <b>mn()</b>, and <b>uniform</b> options govern the distribution of the
        unobserved variable. They are mutually exclusive. If the <b>pr()</b>, <b>mn()</b>,
        and <b>uniform</b> are not specified but the <b>sd()</b> option is specified, than
        the unobserved variable will be represented by a standard normal
        distribution.
<p>
    <b>pr(</b><i>numlist</i><b>)</b> specifies that the unobserved variable is to be represented
        by a discrete distribution. The numbers in <b>pr()</b> represent the
        proportion of observations that belong to each category. Since the
        numbers are propotions, they all need to be larger than 0 and they
        need to add up to 1.  The location of these categories will be chosen
        such that the mean is 0, the standard deviation is 1, and all
        categories are separated by the same distance.  The <b>pr()</b> option may
        not be specified without specifying the <b>sd()</b> option.
<p>
    <b>mn(</b><i># # </i><b>,</b><i> # # </i>[<b>,</b><i> # #</i><b>,</b><i> etc</i>.]<b>)</b> specified that the unobserved variable is to
        be represented as a mixture of normal distributions. This option
        should consist of multiple elements separated by commas, whereby each
        element consists of two numbers, the first is the proprotion the
        latter a mean of one of the components of the mixture distribution.
        The proportions should add up to 1. The means of the components will
        be transformed such that the mean of the of the distribution equals
        0. The variances of the components are assumed to be equal and are
        choses such that the overall variance equals 1. This means that not
        all proportion-mean combination will lead to valid mixture
        distributions, in which case <b>seqlogit</b> will report an error and stop.
<p>
    <b>uniform</b> specifies that the unobserved variable is to be represented by a
        uniform distribution with mean 0 and standard deviation 1. This could
        make sense when we think that it is the rank order on the unobserved
        variables that influences the outcome rather than some metric value,
        as the distribution of rank scores is a uniform distribution.  This
        assumption could be justified when we assume that the unobserved
        variables are also be hard to observe for the actors themselves, and
        that the rank score is easier to observe (Jill is smarter than Jack,
        we just don't know how much smarter.).
<p>
    <b>draws(</b><i>#</i><b>)</b> specifies the number of pseudo random draws per observation used
        when calculating the simulated likelihood. The default is 100.
        Because maximum simulated likelihood is only used when the <b>sd()</b>
        option is specified, the <b>draws()</b> option can only be specified when
        the <b>sd()</b> option is specified.
<p>
    <b>drawstart(</b><i>#</i><b>)</b> specifies the index at which the Halton sequence starts. The
        default is 15.
<p>
<p>
        +-----------+
    ----+ Reporting +--------------------------------------------------------
<p>
    <b>or</b> report odds ratios
<p>
    <b><u>r</u></b><b>obust</b> specifies that the Huber/White/sandwich estimator of variance is
        to be used in place of the traditional calculation; see <b>[U] 23.14</b>
        <b>Obtaining robust variance estimates</b>.  <b>robust</b> combined with <b>cluster()</b>
        allows observations which are not independent within cluster
        (although they must be independent between clusters).
<p>
    <b><u>c</u></b><b>luster(</b><i>clustervar</i><b>)</b> specifies that the observations are independent
        across groups (clusters) but not necessarily within groups.
        <i>clustervar</i> specifies to which group each observation belongs; e.g.,
        <b>cluster(personid)</b> in data with repeated observations on individuals.
        See <b>[U] 23.14 Obtaining robust variance estimates</b>.  Specifying
        <b>cluster()</b> implies <b>robust</b>.
<p>
    <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for the confidence
        intervals of the coefficients; see help level.
<p>
    <b>nolog</b> suppresses an iteration log of the log likelihood
<p>
<a name="maximize_options"></a>    <b>maximize_options</b>:  <b><u>diff</u></b><b>icult</b>, <b><u>tech</u></b><b>nique(</b><i>algorithm_spec</i><b>)</b>, <b><u>iter</u></b><b>ate(</b><i>#</i><b>)</b>,
        <b><u>tr</u></b><b>ace</b>, <b><u>grad</u></b><b>ient</b>, <b>showstep</b>, <b><u>hess</u></b><b>ian</b>, <b><u>shownr</u></b><b>tolerance</b>, <b><u>tol</u></b><b>erance(</b><i>#</i><b>)</b>,
        <b><u>ltol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>gtol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>nrtol</u></b><b>erance(</b><i>#</i><b>)</b>, <b><u>nonrtol</u></b><b>erance(</b><i>#</i><b>)</b>; see 
        maximize.  These options are seldom used.
<p>
<p>
<b><u>Example</u></b>
<p>
<p>
<b>    sysuse nlsw88, clear</b>
<b>    gen ed = cond(grade&lt; 12, 1, ///</b>
<b>             cond(grade==12, 2, ///</b>
<b>             cond(grade&lt;16,3,4))) if grade &lt; .</b>
<b>    gen byr = (1988-age-1950)/10</b>
<b>    gen white = race == 1 if race &lt; .</b>
<p>
<b>    seqlogit ed byr south,                   ///   </b>
<b>             ofinterest(white) over(byr)     ///</b>
<b>             tree(1 : 2 3 4, 2 : 3 4, 3 : 4) ///</b>
<b>             levels(1=6, 2=12, 3=14, 4= 16)  ///</b>
<b>             or</b>
<p>
<b>    seqlogitdecomp,                                     ///</b>
<b>             overat(byr -.5, byr 0, byr .4)             ///</b>
<b>             subtitle("1945" "1950" "1954")             ///</b>
<b>             eqlabel(`""finish" "high school""'         ///</b>
<b>                     `""high school v" "some college""' ///</b>
<b>                     `""some college v" "college""')    ///</b>
<b>             xline(0) yline(0)  </b>
<p>
<b>    seqlogit ed byr south,                   ///   </b>
<b>             ofinterest(white) over(byr)     ///</b>
<b>             tree(1 : 2 3 4, 2 : 3 4, 3 : 4) ///</b>
<b>             or sd(1)</b>
<b>    </b>
<b>    uhdesc</b>
<p>
<p>
<p>
<b><u>Author</u></b>
<p>
    Maarten L. Buis, Universitaet Tuebingen
    maarten.buis@uni-tuebingen.de
<p>
<p>
<b><u>Suggested citation if using seqlogit in published work</u></b>
<p>
    <b>seqlogit</b> is not an official Stata command. It is a free contribution to
    the research community, like a paper. Please cite it as such.
<p>
    Buis, Maarten L.  2007. "SEQLOGIT: Stata module to fit a sequential logit
    model" http://ideas.repec.org/c/boc/bocode/s456843.html
<p>
    or:
<p>
    Buis, Maarten L. 2010 ``Chapter 6, Not all transitions are equal: The
    relationship between inequality of educational opportunities and
    inequality of educational outcomes'', In:  Buis, Maarten L. ``Inequality
    of Educational Outcome and Inequality of Educational Opportunity in the
    Netherlands during the 20th Century''.  PhD thesis.  
    http://www.maartenbuis.nl/dissertation/chap_6.pdf
<p>
    Buis, maarten L. 2011 ``The Consequences of Unobserved Heterogeneity in a
    Sequential Logit Model'', Research in Social Stratification and Mobility,
    29(3), pp. 247-262.
<p>
<p>
<b><u>Acknowledgements</u></b>
    I appreciate the useful comments I received at the 2009 Summer meeting of
    the RC28, and a bug report by Dominik Becker.
<p>
<p>
<b><u>References</u></b>
<p>
    Agresti, Alan 2002 .  <i>Categorical Data Analysis, 2nd edition.</i>  Hoboken,
    NJ: Wiley-Interscience.
<p>
    Buis, Maarten L. 2010a ``Chapter 6, Not all transitions are equal: The
    relationship between inequality of educational opportunities and
    inequality of educational outcomes'', In:  Buis, Maarten L. ``Inequality
    of Educational Outcome and Inequality of Educational Opportunity in the
    Netherlands during the 20th Century''.  PhD thesis.  
    http://www.maartenbuis.nl/dissertation/chap_6.pdf
<p>
    Buis, maarten L. 2011 ``The Consequences of Unobserved Heterogeneity in a
    Sequential Logit Model'', Research in Social Stratification and Mobility,
    29(3), pp. 247-262.  http://dx.doi.org/10.1016/j.rssm.2010.12.006
<p>
    Fox, John 1997 <i>Applied Regression Analysis, Linear Models, and Related</i>
    <i>Methods.</i>  Thousand Oaks: Sage.
<p>
    Maddala, G.S. 1983 <i>Limited Dependent and Qualitative Variables in</i>
    <i>Econometrics</i> Cambridge: Cambridge University Press.
<p>
    Mare, Robert D. 1981 ``Change and Stability in educational
    Stratification'' <i>American Sociological Review</i>, 46(1), p.p. 72-87.
<p>
    Shavit, Yossi and Hans-Peter Blossfeld 1993 <i>Persistent Inequality:</i>
    <i>Changing Educational Attainment in Thirteen Countries</i> Boulder: Westview
    Press.
<p>
<b><u>Also see</u></b>
<p>
    Online: help for seqlogit postestimation, seqlogit_sensitivity help for 
             logit, mlogit
<p>
</pre>
<pre>
<p>
-------------------------------------------------------------------------------
help for <b>stackids</b>
-------------------------------------------------------------------------------
<p>
<b><u>Stack the id variables produced by </u></b><b><u>mahapick</u></b>
<p>
        <b>stackids</b> <i>varlist</i> , <b>idvar(</b><i>id_varname</i><b>)</b> <b>idprimevar(</b><i>prime_id_varname</i><b>)</b>
                 <b>matchnumvar(</b><i>matchnum_varname</i><b>)</b> <b>clear</b> [<b>keepwideids</b>]
<p>
<b><u>Description</u></b>
<p>
    <b>stackids</b> takes the (possibly multiple) matched id variables as produced
    by mahapick using the <b>pickids()</b> option, along with the id of the treated
    cases, and stacks them into a long-shaped dataset.  (See reshape for a
    discussion of wide- versus long-shaped data.)
<p>
    <i>varlist</i> contains two parts: The first variable holds the id of the
    treated cases - the "prime id".  The remaining variables constitute the
    id's of the matched control cases; they should be the same as those
    specified in the <b>pickids()</b> option of <b>mahapick</b> (or a subset thereof).
    Note that <i>all</i> of the variables in <i>varlist</i> get stacked into one variable:
    <i>id_varname</i>.  That is, the treated and control cases get stacked together.
    So even if there is only one variable for control case id's, there will
    be some stacking of variables.
<p>
    The resulting dataset will have...
<p>
        a variable holding all the stacked id's;
<p>
        a variable holding the id's of the corresponding treated cases;
<p>
        a "matchnum" variable (as will be explained below).
<p>
<p>
<b><u>Required Options</u></b>
<p>
    <b>idvar(</b><i>id_varname</i><b>)</b> specifies the name for the (new) variable into which
    <i>varlist</i> is to be stacked.
<p>
    <b>idprimevar(</b><i>prime_id_varname</i><b>)</b> specifies the name of the (new) "prime id"
    variable.  This will hold the id of the treated cases.  Values will be
    repeated for all the control cases matched to a given treated case.
<p>
    Note that <i>id_varname</i> == <i>prime_id_varname</i> for treated cases, and they are
    unequal otherwise.
<p>
    <b>matchnumvar(</b><i>matchnum_varname</i><b>)</b> specifies the name of a (new) variable that
    serves as a counter.  It will contain 0 for the treated cases, and 1, 2,
    etc. for control cases - those corresponding to the latter variables in
    <i>varlist</i>.
<p>
    In stating that these variables are new, what is really meant is that
    they are for newly-created variables; but the whole dataset is new, so
    there is nothing restricting you from reusing an existing variable name.
<p>
    <b>clear</b> indicates your understanding that the data in memory will be
    replaced.
<p>
<p>
<b><u>Optional Options</u></b>
<p>
    <b>keepwideids</b> retains the original <i>varlist</i> of id's in wide form.  They will
    be present only on the treated cases; they will be missing for all
    others.  This is provided in case you want to see the matched control
    cases explicitly connected to the treated cases (in the same cases).  Be
    aware, however, that you get a dataset that is both wide and long
    simultaneously, and it can be fairly wasteful of space.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    After obtaining matches using <i>mahapick</i> with the <b>pickids()</b> option, it may
    be more useful, for analysis purposes, to have the data reshaped (or
    stacked) so that all the id values, both treated and control, appear in
    the same variable.  This program does that for you.  (While this can be
    achieved by reshape or stack, some extra steps are required to create a
    structure that contains the connection between the treated cases and
    their matched control cases (which may or may not be important to you).
    <b>stackids</b> takes care of those extra steps for you.)
<p>
    <b>stackids</b> program was created to fill a need which was obviated by the
    advent of the <b>genfile()</b> option in <b>mahapick</b>; if you used the <b>genfile()</b>
    option, then you would not need <b>stackids</b>.  Putting aside some possible
    variations resulting from choices of options, the dataset resulting from
    <b>stackids</b> should be the same as that of using the <b>genfile()</b> option in
    <b>mahapick</b>.
<p>
    Since it is advisable to use the <b>genfile()</b> option, rather than the
    <b>pickids()</b> option in <b>mahapick</b>, <b>stackids</b> may be needed rarely if ever.  It
    is included for completeness.  <b>stackids</b> may be useful, however, if you
    have used <b>pickids()</b> and later find you would have preferred to use the
    <b>genfile()</b> option, but you don't want to rerun the matching process (which
    can be time-consuming).
<p>
    Before running any analyses, you will want to merge some "content" data
    onto the resulting set, as the resulting set bears only identification
    information.  See mahapick for more discussion of this.  Also note that
    there is no explicit variable provided indicating the treated cases.  You
    may recover this information either from the merge to the content data,
    or by identifying the cases with <i>matchnum_varname</i>==0.  (These will also
    be the ones with <i>id_varname</i> == <i>prime_id_varname</i>.)
<p>
<p>
<b><u>Example</u></b>
<p>
    <b>. stackids id match1 match2 match3, idvar(id) idprimevar(prime_id)</b>
        <b>matchnumvar(matchnum) clear</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    David Kantor; initial development was done at The Institute for Policy
    Studies, Johns Hopkins University.  Email kantor.d@att.net if you observe
    any problems.
<p>
<p>
<b><u>Also See</u></b>
    mahapick, mahascore, mahascores, mahascore2, screenmatches, 
</pre>
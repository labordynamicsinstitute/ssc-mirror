<pre>
-------------------------------------------------------------------------------
help for <b>spec_stand</b>                                                 (Rosa Gini)
-------------------------------------------------------------------------------
<p>
<b><u>Create dataset of stratum-specific, unadjusted and standardized rates</u></b>
<p>
        <b>spec_stand</b> <i>num</i> <i>denom</i> <i>stratavars</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>]<b>,</b> <b>by(</b><i>groupvars</i><b>)</b>
                <b><u>us</u></b><b>ing(</b><i>filename</i><b>)</b> <b><u>namepop</u></b><b>std(</b><i>varname</i><b>)</b> [ <b><u>stand</u></b><b>only</b> <b><u>spec</u></b><b>only</b>
                <b><u>unadj</u></b><b>usted</b> <b><u>sa</u></b><b>ving(</b><i>filename</i>[<b>,replace</b>]<b>)</b> <b>no</b><b><u>res</u></b><b>tore</b> <b><u>f</u></b><b>ormat(%</b><i>fmt</i><b>)</b>
                <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <b><u>con</u></b><b>stant(</b><i>#</i><b>)</b> <b><u>rate</u></b><b>name(</b><i>newvarname</i><b>)</b> <b><u>lb</u></b><b>name(</b><i>newvarname</i><b>)</b>
                <b><u>ub</u></b><b>name(</b><i>newvarname</i><b>)</b> <b><u>den</u></b><b>tot(</b><i>newvarname</i><b>)</b> <b><u>num</u></b><b>tot(</b><i>newvarname</i><b>)</b>]
<p>
<b><u>Description</u></b>
<p>
    <b>spec_stand</b> creates an output dataset of rates (resultsset) for <i>num</i> in the
    population defined by <i>pop</i>, across the strata defined by <i>stratavars</i>, in
    order to obtain a comparison across groups identified by <i>groupvars</i>. Both
    stratum-specific and standardized rates are computed, the last being
    defined as a weighted averages of the stratum-specific rates. The
    standard population providing weights for every single stratum must be
    specified in a separate file. As an option, unadjusted rates can be
    computed as well. Standardized rates are computed via the <b>dstdize</b>
    command, while stratum-specific and unadjusted rates are provided by the
    <b>cii</b> command, with the <i>exact</i> option for confidence intervals.
<p>
    The output data set created by <b>spec_stand</b> may be saved to a disk file or
    written to the memory (overwriting any pre-existing data set).
<p>
    <i>num</i> is the variable name for the study population's number of cases.  It
    must contain integers and each subpopulation identified by <i>groupvars</i> must
    have the same values or missing.
<p>
    <i>den</i> identifies the number of subjects represented by each observation in
    the study population.
<p>
    <i>stratavars</i> define the strata, e.g. age bands and/or sex.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>by(</b><i>groupvars</i><b>)</b> is not optional for the <b>spec_stand</b> command; it specifies
        the variables identifying the study populations, across wish rate
        comparisons are to be made.  If you do not have a variable for this
        option, you can generate one by typing "<b>gen new=1</b>" and then
        specifying <b>by(new)</b>.
<p>
    <b>using(</b><i>filename</i><b>)</b> must be used to specify the standard population for the
        <b>spec_stand</b> command.  The file <i>filename</i> must be a Stata dataset,
        containing the variables <i>stratavars</i> and the variable specified in the
        <i>namepopstd</i> option. The variables <i>stratavars</i> might not uniquely
        identify an observation in the dataset: if this is the case, the
        dataset will be contracted.
<p>
    <b>namepopstd(</b><i>varname</i><b>)</b> is the variable containing the number of subjects in
        each stratum and contained in the dataset specified by the <i>using</i>
        option. The variables <i>stratavars</i> might not uniquely identify an
        observation in the dataset: if this is the case, the dataset will be
        contracted and the variable identified by the <i>namepopstd</i> option will
        be summed up across strata. Keep in mind that only records with
        non-missing <i>stratavars</i> will contribute to form the standard
        population.
<p>
    <b>standonly</b> or <b>speconly</b> specify that only stardarized, or, respectively,
        only stratum-specific rates are to be computed and included in the
        final dataset.
<p>
    <b>unadjusted</b>, only available if the <i>speconly</i> option is <i>not</i> specified,
        provides also unadjusted rates.
<p>
    <b>saving(</b><i>filename</i>[<b>,replace</b>]<b>)</b> saves the output data set to a disk file. If
        <b>replace</b> is specified, and a file of that name already exists, then
        the old file is overwritten.
<p>
    <b>norestore</b> specifies that the output data set will be written to the
        memory, overwriting any pre-existing data set.  Otherwise, if
        <b>norestore</b> is not specified, then the pre-existing data set is
        restored in the memory after the execution of <b>spec_stand</b>. Either this
        option or the <b>saving()</b> option should be specified.
<p>
    <b>format(%</b><i>fmt</i><b>)</b> specifies the format in which to store the computed rates
        and confidence intervals.  The default is <b>%5.1f</b>.
<p>
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for the confidence
        interval of the rates; see help level.
<p>
    <b>constant(</b><i>#</i><b>)</b>, a multiplicative constant for wich all rates are multiplied.
        Default is 100.
<p>
    <b>ratename(</b><i>newvarname</i><b>)</b>, <b>lbname(</b><i>newvarname</i><b>)</b>, <b>ubname(</b><i>newvarname</i><b>)</b> specify
        names for variables containing rates and lower and upper limits for
        confidence intervals. Defaults are <b>_rate</b>, <b>_lb</b> and <b>_ub</b>.
<p>
    <b>dentot(</b><i>newvarname</i><b>)</b> and <b>numtot(</b><i>newvarname</i><b>)</b> specify names for variables
        containing total denominators and numerators in the same group.
        Defaults are <b>_</b><i>den</i><b>_tot</b> and <b>_</b><i>num</i><b>_tot</b>.
<p>
<b><u>Examples</u></b>
<p>
    <b>. spec_stand num den age_band sex,by(state year) using(standard.dta)</b>
        <b>namepopstd(population) const(1000) norest</b>
<p>
    <b>. use standard_pop.dta,clear</b>
        <b>. egen age_band=cut(age),at(65,75,85,150)</b>
        <b>. tempfile standard</b>
        <b>. save `standard'</b>
        <b>. use indicators.dta,clear</b>
        <b>. spec_stand num den age_band ,by(state year) using(`standard')</b>
        <b>namepopstd(population) standonly saving(computed.dta,replace)</b>
        <b>rate(rate) low(l) up(u) dentot(den_tot) numtot(num_tot)</b>
<p>
<p>
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>stepp_tail</b>, <b>stepp_window</b>, <b>stepp_plot</b>                   Patrick Royston
-------------------------------------------------------------------------------
<p>
<b><u>Subpopulation treatment effect pattern plot (STEPP)</u></b>
<p>
        <b>stepp_tail</b> <i>regression_cmd</i> [<i>yvar</i>] <i>zvar</i> [<i>adjvars</i>] [<i>if</i>] [<i>in</i>] <b>,</b> <i>options</i>
<p>
        <b>stepp_window</b> <i>regression_cmd</i> [<i>yvar</i>] <i>zvar</i> [<i>adjvars</i>] [<i>if</i>] [<i>in</i>] <b>,</b> <i>options</i>
<p>
        <b>stepp_plot</b> <i>stubname</i> [<b>,</b> <i>options</i>]
<p>
<a name="syntax"></a>    where
<p>
        <i>regression_cmd</i> may be <b>clogit</b>, <b>cnreg</b>, <b>glm</b>, <b>intreg</b>, <b>logistic</b>, <b>logit</b>, 
        <b>mlogit</b>, <b>nbreg</b>, <b>ologit</b>, <b>oprobit</b>, <b>poisson</b>, <b>probit</b>, <b>qreg</b>, <b>regress</b>, 
        <b>stcox</b>, <b>streg</b>, or <b>xtgee</b>.
<p>
<p>
    <i>options</i>                       Description
    -------------------------------------------------------------------------
      <b>gen(</b><i>stubname</i><b>)</b>               creates five new variables containing
                                    results of STEPP analysis
      <b>g(</b><i>#</i><b>)</b>                        (<b>stepp_tail</b> only) defines the number of
                                    subpopulation groups
      <b>n1(</b><i>#</i><b>)</b>                       (<b>stepp_window</b> only) defines the number of
                                    individuals belonging only to one of two
                                    neighbouring subpopulations
      <b>n2(</b><i>#</i><b>)</b>                       (<b>stepp_window</b> only) defines the number of
                                    individuals in a subpopulation
      <b>treatment(</b><i>trt_varlist</i><b>)</b>      defines the list of variables whose
                                    interactions with <i>zvar</i> are to be studied
      <i>regression_cmd_options</i>      options for <i>regression_cmd</i>
<p>
    <i>options</i> for <b>stepp_plot</b>
      <b>vn(</b><i>#</i><b>)</b>                       variable number in <b>treatment()</b>
      <b>plot(</b><i>plot</i><b>)</b>                  adds other plots to the generated graph
      <i>graph_options</i>               options of <b>graph twoway</b>
    -------------------------------------------------------------------------
<p>
<p>
    All weight types supported by <i>regression_cmd</i> are allowed; see weight.
<p>
    <i>yvar</i> is not allowed for <b>streg</b> and <b>stcox</b>. For these commands, you must
        first <b>stset</b> your data.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>ststep_tail</b> and <b>ststep_window</b> compute Bonetti &amp; Gelber (2000, 2004)'s
    STEPP estimators for graphical exploration of a treatment/covariate
    interaction.  <b>ststep_tail</b> provides the tail-oriented estimator, and
    <b>ststep_window</b> the sliding-window estimator. Plotting the results may be
    done by using <b>stepp_plot</b>, in which case <i>stubname</i> is the same as in the
    <b>gen(</b><i>stubname</i><b>)</b> option of <b>stepp_tail</b> and <b>stepp_window</b>.
<p>
    <i>zvar</i> is the continuous covariate whose interaction with treatment is to
    be studied, and <i>adjvars</i> is a list of other covariates used to linearly
    adjust each model fitted to the treatment variable(s) defined by
    <b>treatment()</b>.
<p>
<p>
<b><u>Options</u></b>
<p>
    <u>Options for </u><b><u>stepp_tail</u></b><u> and </u><b><u>stepp_window</u></b>:
<p>
    <b>gen(</b><i>stubname</i><b>)</b> creates five new variables called <i>stubname</i><b>b</b>, <i>stubname</i><b>se</b>,
        <i>stubname</i><b>mean</b>, <i>stubname</i><b>lb</b>, <i>stubname</i><b>ub</b>.  <i>stubname</i><b>b</b> is the estimated
        regression coefficient in each subpopulation, <i>stubname</i><b>se</b> is its
        standard error, <i>stubname</i><b>mean</b> contains the mean of <i>zvar</i> in each
        subpopulation, and <i>stubname</i><b>lb</b> and <i>stubname</i><b>ub</b> are pointwise 95%
        confidence limits for <i>stubname</i><b>b</b>. If <b>treatment()</b> includes more than
        one variable, the created variables have 2, 3, ... appended to the
        names, e.g. <i>stubname</i><b>b2</b>.
<p>
    <b>g(</b><i>#</i><b>)</b> (<b>stepp_tail</b> only) defines the number of subpopulation groups.  The
        actual number of subpopulations used is 2 * # - 1.
<p>
    <b>n1(</b><i>#</i><b>)</b> (<b>stepp_window</b> only) defines the number of individuals belonging
        only to one of two neighbouring subpopulations.
<p>
    <b>n2(</b><i>#</i><b>)</b> (<b>stepp_window</b> only) defines the number of individuals in a
        subpopulation. The overlap between two neighbouring subpopulations is
        <b>n2()</b> minus <b>n1()</b> individuals.
<p>
    <b>treatment(</b><i>trt_varlist</i><b>)</b> defines the list of variables whose interactions
        with <i>zvar</i> are to be studied. Typically <i>trt_varlist</i> will comprise just
        one binary variable, representing the two arms of a parallel-group
        clinical trial.
<p>
    <i>regression_cmd_options</i> are options for <i>regression_cmd</i>.
<p>
    <u>Options for </u><b><u>stepp_plot</u></b>:
<p>
    <b>vn(</b><i>#</i><b>)</b> <i>#</i> is an integer defining the variable number in <b>treatment()</b>, when
        more than one variable is specified. When only one variable is
        specified, <b>vn()</b> is not required.
<p>
    <b>plot(</b><i>plot</i><b>)</b> provides a way to add other plots to the generated graph; see
        help plot option.
<p>
    <i>graph_options</i> are options of <b>graph twoway</b>, such as <b>xtitle()</b>, <b>ytitle()</b>,
        etc.
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>. stepp_tail regress y x a1 a2, g(10) gen(z) treatment(t)</b>
<p>
    <b>. stepp_window stcox x a1 a2, n1(40) n2(50) gen(z) treatment(t)</b>
<p>
    <b>. stepp_plot z, xtitle("Serum rhubarb") ytitle("log relative hazard")</b>
        <b>name(myplot)</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Patrick Royston, MRC Clinical Trials Unit, London.
    pr@ctu.mrc.ac.uk
<p>
<p>
<b><u>References</u></b>
<p>
    M. Bonetti and R. D. Gelber. 2000. A graphical method to assess
        treatment-covariate interactions using the Cox model on subsets of
        the data. <i>Statistics in Medicine</i> 19: 2595-2609.
<p>
    M. Bonetti and R. D. Gelber. 2004. Patterns of treatment effects in
        subsets of patients in clinical trials. <i>Biostatistics</i> 5: 465-481.
<p>
    P. Royston and W. Sauerbre. 2009. Two techniques for investigating
        interactions between treatment and continuous covariates in clinical
        trials. <i>Stata Journal</i> 9(2): 230-251.
<p>
    W. Sauerbrei, P. Royston and K. Zapien. 2007. Detecting an interaction
        between treatment and a continuous covariate: a comparison of two
        approaches.  <i>Computational Statistics and Data Analysis</i> 51:
        4054-4063.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Article: <i>Stata Journal</i>, volume 9, number 2: st0164
<p>
    Online:  mfpi
</pre>
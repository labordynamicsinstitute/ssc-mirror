<pre>
-------------------------------------------------------------------------------
help for <b>ssm</b>
-------------------------------------------------------------------------------
<p>
<b><u>Endogenous-Switch &amp; Sample Selection Count, Binary &amp; Ordinal Response Regressio</u></b>
<b><u>&gt; n</u></b>
<p>
        <b>ssm</b> <i>depvar</i> [<i>indepvars</i>] [<i>weight</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,</b> <b><u>s</u></b><b>witch(</b><i>varname</i>
            = <i>varlist</i><b>)</b> <b><u>f</u></b><b>amily(</b><i>familyname</i><b>)</b> <b><u>l</u></b><b>ink(</b><i>linkname</i><b>)</b> [<b><u>q</u></b><b>uadrature(</b><i>#</i><b>)</b>
            <b><u>fr</u></b><b>om(</b><i>matrix</i><b>)</b> <b><u>sel</u></b><b>ection</b> <b><u>nocon</u></b><b>stant</b> <b><u>adapt</u></b> <b><u>nolo</u></b><b>g</b> <b><u>tr</u></b><b>ace</b>]
<p>
    The outcome model is specified by <i>depvar</i> and [<i>indepvars</i>],
    <b>family(</b><i>familyname</i><b>)</b>, <b>link(</b><i>linkname</i><b>)</b>, etc.
<p>
    The endogenous switching equation is specified by <b><u>s</u></b><b>witch(</b><i>varname</i> =
    <i>varlist</i><b>)</b>, where <i>varname</i> is the name of the endogenous dummy variable and
    <i>varlist</i> are a set of explanatory variables. Endogenous switching models
    are the default specification. Sample selection models are obtained if
    the <b>selection</b> option is used.
<p>
    <i>familyname</i> is one of
<p>
        <b><u>bin</u></b><b>omial</b> | <b><u>poi</u></b><b>sson</b>
<p>
    <i>linkname</i> is one of
<p>
        <b><u>log</u></b> | <b><u>logi</u></b><b>t</b> | <b><u>pro</u></b><b>bit</b> | <b><u>olo</u></b><b>git</b> | <b><u>opr</u></b><b>obit</b>
<p>
    <b>fweight</b>s and <b>pweight</b>s are allowed; see help weights.
<p>
    <b>ssm</b> shares the features of all estimation commands; see help estcom.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>ssm</b> is a wrapper for gllamm to estimate Endogenous-Switch &amp; Sample
    Selection Count, Binary &amp; Ordinal Response Regression by maximum
    likelihood using adaptive quadrature.  <b>ssm</b> interprets a simple syntax,
    prepares the data for <b>gllamm</b>, calls <b>gllamm</b> and produces tailor-made
    output. The <b>commands</b> option causes <b>ssm</b> to print out all data manipulation
    commands and the <b>gllamm</b> command. <b>gllamm</b> itself should be used to extend
    the model and for prediction and simulation using gllapred or gllasim.
    The Endogenous-Switch (Sample Selection) model comprises two submodels:
    the outcome model and the Switch (Selection) model.
<p>
    The outcome model is a generalized linear model that contains an
    endogenous dummy variable among its observed covariates, and a unobserved
    or latent random term.
<p>
    The Switch model is a binary variable model that determines the outcome
    of the endogenous dummy included in the outcome model.  The Switch model
    contains an unobserved random (latent) term that is correlated with the
    unobserved random term included in the outcome model.
<p>
    The Selection model is obtained when the outcome variable is only
    observed if a particular condition is met (selection = 1) and the
    selection dummy does not enter the outcome model.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>family(</b><i>familyname</i><b>)</b> specifies the distribution of <i>depvar</i>; <b>family(</b><i>binomial</i><b>)</b>
        is the default.
<p>
    <b>link(</b><i>linkname</i><b>)</b> specifies the link function; the default is the canonical
        link for the <b>family()</b> specified.
<p>
    <b>selection</b> Sample selection models are estimated, substituting the default
        endogenous switching specification.
<p>
    <b>quadrature(</b><i>#</i><b>)</b> specifies the number of quadrature points to be used.
<p>
    <b>noconstant</b> specifies that the linear predictor has no intercept term,
        thus forcing it through the origin on the scale defined by the link
        function.
<p>
    <b>adapt</b> Use adaptive quadrature instead of the default ordinary quadrature.
<p>
    <b>robust</b> specifies that the Huber/White/sandwich estimator of variance is
        to be used.  If you specify <b>pweight</b>s,<b>robust</b> is implied.
<p>
    <b>commands</b> displays the commands necessary to prepare the data and estimate
        the model in <b>gllamm</b> instead of estimating the model. These commands
        can be copied into a do-file and should work without further editing.
        Note that the data will be changed by the do-file!
<p>
    <b>nolog</b> suppresses the iteration log.
<p>
    <b>trace</b> requests that the estimated coefficient vector be printed at each
        iteration. In addition, all the output produced by <b>gllamm</b> with the
        <b>trace</b> option is also produced.
<p>
    <b>from(</b><i>matrix</i><b>)</b> specifies a matrix of starting values.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    The allowed link functions are
<p>
                   Link function            <b>ssm</b> option     
                   ----------------------------------------
                   log                      <b>link(log)</b>      
                   logit                    <b>link(logit)</b>    
                   probit                   <b>link(probit)</b>   
                   ordinal logit            <b>link(ologit)</b>   
                   ordinal probit           <b>link(oprobit)</b>  
<p>
<p>
    The allowed distribution families are
<p>
                   Family                 <b>ssm</b> option       
                   ----------------------------------------
                   Bernoulli/binomial     <b>family(binomial)</b> 
                   Poisson                <b>family(poisson)</b>  
<p>
    If you specify <b>family()</b> but not <b>link()</b>, you obtain the canonical link for
    the family:
<p>
                    <b>family()</b>                default <b>link()</b>
                    --------------------------------------
                    <b>family(binomial)</b>        <b>link(logit)</b>   
                    <b>family(poisson)</b>         <b>link(log)</b>     
<p>
<b><u>Examples</u></b>
<p>
    <b>* simulate data</b>
    set seed 12345678
    set obs 3500
    local lambda = 0.4
    gen double ve = invnormal(uniform())
    gen double zeta = invnormal(uniform())
    gen double tau = invnormal(uniform())
    gen double x1=invnormal(uniform())
    gen double x2=invnormal(uniform())
    gen double x3=invnormal(uniform())
    gen double x4=invnormal(uniform())
    replace x3 = (x3&gt;0)
    replace x4 = (x4&gt;0)
    gen double selstar = 0.58 + 0.93*x1 + 0.45*x2 - 0.64*x3 + 0.6*x4 + ///
    (ve + zeta)/sqrt(2)
    gen sel = (selstar&gt;0)
    gen double ystar = 0.17 + 0.30*x1 + 0.11*x2 + ///
    (‘lambda’*ve + tau)/sqrt(1+‘lambda’^2)
    gen y = (ystar&gt;0)
    replace y =. if sel==0
<p>
    <b>* estimate model</b>
    . ssm y x1 x2, s(sel = x1 x2 x3 x4) q(16) family(binom) link(probit) sel
        adapt
<p>
<b><u>Webpage</u></b>
<p>
    http://www.gllamm.org
<p>
<b><u>Authors</u></b>
<p>
    Alfonso Miranda (A.Miranda@econ.keele.ac.uk) &amp; Sophia Rabe-Hesketh
             (sophiarh@berkeley.edu).
<p>
<b><u>References</u></b>
(available from the authors)
<p>
    Miranda and Rabe-Hesketh (2006).  Maximum likelihood estimation of
             endogenous switching and sample selection models for binary,
             count, and ordinal variables. The Stata Journal 6 (3), 285-308.
<p>
<p>
    Rabe-Hesketh, S., Skrondal, A. and Pickles, A. (2003).  Maximum
             likelihood estimation of generalized linear models with
             covariate measurement error. The Stata Journal 3, 386-411.
<p>
    Rabe-Hesketh, S., Skrondal, A. and Pickles, A. (2005).  Maximum
             likelihood estimation of limited and discrete dependent variable
             models with nested random effects. Journal of Econometrics 128
             (2), 301-323.
<p>
<p>
    Rabe-Hesketh, S., Pickles, A. and Skrondal, S. (2001).  Correcting for
             covariate measurement error in logistic regression using
             nonparametric maximum likelihood estimation. Statistical
             Modelling 3, 215-232.
<p>
    Rabe-Hesketh, S., Skrondal, A. and Pickles, A. (2002).  Reliable
             estimation of generalized linear mixed models using adaptive
             quadrature.  The Stata Journal 2 (1), 1-21.
<p>
<p>
    Rabe-Hesketh, S., Skrondal, A. and Pickles, A. (2004).  GLLAMM Manual.
             U.C. Berkeley Division of Biostatistics Working Paper Series.
             Working Paper 160.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[U] 23 Estimation and post-estimation commands</b>,
             <b>[U] 29 Overview of Stata estimation commands</b>,
<p>
    Online:  help for cme; gllamm, gllapred, gllasim; estcom, postest; 
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>regoprob</b>
-------------------------------------------------------------------------------
<p>
<b><u>Random Effects Generalized Ordered Probit Estimation</u></b>
<p>
        <b>regoprob</b> <i>depvar</i> [<i>indepvars</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<b>,</b> <b><u>i</u></b><b>(</b><i>varname</i><b>)</b>
               <b><u>q</u></b><b>uadrat(</b><i>#</i><b>)</b> <b><u>p</u></b><b>l</b> <b><u>p</u></b><b>l(</b><i>varlist</i><b>)</b> <b><u>np</u></b><b>l</b> <b><u>np</u></b><b>l(</b><i>varlist</i><b>)</b> <b><u>c</u></b><b>onstraints(</b><i>clist</i><b>)</b>
               <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <i>maximize_options</i> ]
<p>
    <b>regoprob</b> shares the features of all estimation commands; see help est.
    <b>regoprob</b> typed without arguments redisplays previous results.
<p>
    The syntax of predict following <b>regoprob</b> is
<p>
        <b>predict</b> [<i>type</i>] <i>newvarname</i>(<i>s</i>) [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<b>,</b> <i>statistic</i>
                <b><u>o</u></b><b>utcome(</b><i>outcome</i><b>)</b> ]
<p>
    where <i>statistic</i> is
<p>
        <b>p</b>        probability marginal on the individual effect (specify one
                     new variable and <b>outcome()</b> option, or specify k new
                     variables, k = # of outcomes); the default
        <b>xb</b>       linear prediction xb (<b>outcome()</b> option required)
        <b>stdp</b>     S.E. of linear prediction (<b>outcome()</b> option required)
        <b>stddp</b>    S.E. of difference in linear predictions (<b>outcome()</b> option
                     is <b>outcome(</b><i>outcome1</i><b>,</b><i>outcome2</i><b>)</b>)
<p>
    Note that you specify one new variable with <b>xb</b>, <b>stdp</b>, and <b>stddp</b> and
    specify either one or k new variables with <b>p</b>.
<p>
    These statistics are available both in and out of sample; type "<b>predict</b>
    <i>...</i> <b>if e(sample)</b> <i>...</i>" if wanted only for the estimation sample.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>regoprob</b> is a user-written program that estimates panel data generalized
    ordered probit models with random effects. The actual values taken on by
    the dependent variable are irrelevant except that larger values are
    assumed to correspond to "higher" outcomes. The generalized model relaxes
    the <i>parallel regression</i> assumption of standard ordered probit models; see
    help oprobit and its random effects counterpart reoprob.  <b>regoprob</b>
    supports linear constraints and allows the user to partially relax the
    parallel regression assumption by specifying variables in <b>npl()</b> or <b>pl()</b>.
    The likelihood contribution for each unit is approximated using
    Gauss-Hermite quadrature. <b>regoprob</b> requires installation of the <b>goprobit</b>
    and the <b>ghquadm</b> commands.
<p>
    <b>regoprob</b> is a modified version of <b>goprobit</b>. <b>regoprob</b> was written for
    Stata 8 and many of the references in this help file are for Stata 8
    manuals and commands.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>i()</b> specifies the variable corresponding to an independent unit (e.g., a
        subject id).  <b>i(</b><i>varname</i><b>)</b> is not optional.
<p>
    <b>quadrat()</b> specifies the number of points to use for the Gauss-Hermite
        quadrature. It is optional, and the default is 12. Increasing this
        value improves accuracy, but also increases computation time.
<p>
    <b>pl</b>, <b>npl</b>, <b>npl()</b>, <b>pl()</b> provide alternative means for imposing or relaxing
        the parallel regression assumption. Only one may be specified at a
        time.
<p>
        <b>pl</b> specified without parameters constrains all independent variables
            to meet the parallel regression assumption.  It will produce
            results that are equivalent to <b>oprobit</b>.
        <b>npl</b> specified without parameters relaxes the parallel regression
            assumption for all explanatory variables. This is the default
            option.
<p>
        <b>pl(</b><i>varlist</i><b>)</b> constrains the specified explanatory variables to meet
            the parallel regression assumption. All other variables do not
            need to meet the assumption. The variables specified must be a
            subset of the explanatory variables.
<p>
        <b>npl(</b><i>varlist</i><b>)</b> frees the specified explanatory variables from meeting
            the parallel regression assumption. All other explanatory
            variables are constrained to meet the assumption. The variables
            specified must be a subset of the explanatory variables.
<p>
    <b>constraints(</b><i>clist</i><b>)</b> specifies the linear constraints to be applied during
        estimation.  The default is to perform unconstrained estimation.
        Constraints are defined with the constraint command. <b>constraints(1)</b>
        specifies that the model is to be constrained according to constraint
        1; <b>constraints(1-4)</b> specifies constraints 1 through 4;
        <b>constraints(1-4,8)</b> specifies 1 through 4 and 8.  Keep in mind that
        the <b>pl</b>, and <b>npl</b> options work by generating across-equation
        constraints, which may affect how any additional constraints should
        be specified.  When using the<b> constraint</b> command, refer to equations
        by their equation #, e.g. #1, #2, etc.
<p>
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level in percent for the confidence
        intervals of the coefficients; see help level.
<p>
<p>
    <i>maximize_options</i> control the maximization process; see help maximize. You
        should never have to specify them.
<p>
<p>
<b><u>Options for </u></b><b><u>predict</u></b>
<p>
    <b>p</b>, the default, calculates predicted probabilities<i> marginal</i> on the
        individual effect.
<p>
        If you do not specify the <b>outcome()</b> option, you must specify k new
        variables. For instance, say you fitted your model by typing
        "<b>regoprob happy income health, i(persnr)</b>" and that <b>happy</b> takes on
        three values.  Then you could type "<b>predict p1 p2 p3, p</b>" to obtain
        all three predicted probabilities.
<p>
        If you also specify the <b>outcome()</b> option, then you specify one new
        variable. Say that <b>happy</b> took on values 1, 2, and 3. Then typing
        "<b>predict p1, p outcome(1)</b>" would produce the same <b>p1</b> as above,
        "<b>predict p2, p outcome(2)</b>" the same <b>p2</b> as above, etc. If <b>happy</b> took
        on values 7, 22, and 93, you would specify <b>outcome(7)</b>, <b>outcome(22)</b>,
        and <b>outcome(93)</b>. Alternatively, you could specify the outcomes by
        referring to the equation number (<b>outcome(#1)</b>, <b>outcome(#2)</b>, and
        <b>outcome(#3)</b>.
<p>
    <b>xb</b> calculates the linear prediction. You must also specify the <b>outcome()</b>
        option.
<p>
    <b>stdp</b> calculates the standard error of the linear prediction. You must
        specify option <b>outcome()</b>.
<p>
    <b>stddp</b> calculates the standard error of the difference in two linear
        predictions. You must specify option <b>outcome()</b>, in this case with two
        particular outcomes of interest inside the parentheses; for example,
        "<b>predict sed, stdp outcome(1,3)</b>".
<p>
    <b>outcome()</b> specifies for which outcome the statistic is to be calculated.
        <b>equation()</b> is a synonym for <b>outcome()</b>: it does not matter which one
        you use. <b>outcome()</b> and <b>equation()</b> can be specified using (1) <b>#1</b>, <b>#2</b>,
        ..., with <b>#1</b> meaning the first category of the dependent variable, <b>#2</b>
        the second category, etc.; or (2) values of the dependent variable.
<p>
<p>
<b><u>Remarks and Methods</u></b>
<p>
    Standard ordered response models such as <b>oprobit</b> or <b>reoprob</b> impose what
    is called the <i>parallel regression assumption</i>. By default, <b>regoprob</b>
    relaxes this assumption and allows the effects of the explanatory
    variables to vary with the point at which the categories of the dependent
    variable are dichotomized. However, if the <b>pl</b> option is specified,
    <b>regoprob</b> estimates the standard random effects ordered probit model,
    e.g., the commands <b>reoprob y x1 x2 x3, i(id)</b> and <b>regoprob y x1 x2 x3,</b>
    <b>i(id) pl</b> will produce equivalent results.
<p>
    More formally, suppose we have an ordinal dependent variable Y_it which
    takes on the values 1, 2, ..., J, where i denotes cross-sectional units
    and t the time dimension of the (panel) dataset (see help xt).  The
    random effects generalized ordered probit model estimates a set of
    coefficients (including one for the constant) for each of the J - 1
    points at which the dependent variable can be dichotomized. The
    probabilities that Y_it will take on each of the values 1, ..., J
    conditional on the individual effect u_i is equal to
<p>
        P( Y_it = 1 | u_i ) = F( -X_it B_1 - u_i )
<p>
        P( Y_it = j | u_i ) = F( -X_it B_j - u_i ) - F( -X_it B_(j-1) - u_i )
                j = 2, ..., J - 1
<p>
        P( Y_it = J | u_i ) = 1 - F( -X_it B_(J-1) - u_i )
<p>
    The random effects generalized ordered probit model uses the standard
    normal distribution as the cumulative distribution for F(.), although
    other distributions may also be used. The individual effects are assumed
    to be normally distributed with zero mean and variance sigma^2 which is
    parameterized as rho = sigma^2/(1+sigma^2).
<p>
    The standard random effects ordered probit (estimated by <b>reoprob</b> and
    <b>regoprob</b> with the <b>pl</b> option) restricts the B_j coefficients to be the
    same for every dividing point j = 1, ..., J-1. The random effects
    generalized ordered probit model (estimated in <b>regoprob</b> via the <b>npl()</b> and
    <b>pl()</b> options) restricts some B_j coefficients to be the same for every
    dividing point while others are free to vary.
<p>
    Note that the generalized ordered probit model imposes explicit
    restrictions on parameters. Since probabilities are by definition
    constrained to be in the range [0,1], valid combinations must satisfy the
    following inequalities:
<p>
        X_it B_1 &gt;= X_it B_2 &gt;= X_it B_3 ... &gt;= X_it B_J-1
<p>
    The current version of <b>regoprob</b> does not impose these restrictions during
    the maximization process. After fitting the model, the user should verify
    the validity of the model by calculating predicted probabilities.  See
    help goprobit, help gologit2 and http://www.nd.edu/~rwilliam/gologit2/
    for further discussion on this topic.
<p>
    The likelihood contribution for each cross-sectional unit in the above
    model is approximated using a Gauss-Hermite quadrature. See Butler and
    Moffitt (1982) for details about using Gauss-Hermite quadrature to
    approximate such integrals.
<p>
    <b>regoprob</b> uses the d1 method (analytic first derviatives) of Stata's <b>ml</b>
    commands.
<p>
<p>
<b><u>Examples</u></b>
<p>
        <b>. regoprob happy linc unempl health if male == 1, i(id)</b>
<p>
        <b>. regoprob happy linc unempl health if male == 1, i(id) npl(unempl)</b>
<p>
        <b>. regoprob, level(99)</b>
<p>
        <b>. predict xb1, xb outcome(#1)</b>
<p>
<p>
<p>
<b><u>Author</u></b>
<p>
     Stefan Boes
     Socioeconomic Institute
     Statistics and Empirical Economics Research Group
     University of Zurich
     boes@sts.unizh.ch
     http://www.unizh.ch/sts/
<p>
<p>
<p>
<b><u>Acknowledgements</u></b>
<p>
     Guillaume R. Frechette of the New York University wrote <b>reoprob</b> and kindly
     gave me permission to use parts of his code for <b>regoprob</b>. See reoprob for
     a description of the <b>reoprob</b> command.
<p>
     Richard Williams of the Notre Dame Department of Sociology wrote <b>gologit2</b>
     and kindly gave me permission to use parts of his code for programming
     <b>goprobit</b>.  For a more detailed description of <b>gologit2</b> and its features,
     see the reference below or gologit2.
<p>
     <b>reoprob</b> combines the features of <b>goprobit</b> and <b>reoprob</b>, i.e., estimates
     panel data generalized ordered probit models.
<p>
<p>
<p>
<b><u>References</u></b>
<p>
     Boes, S. and R. Winkelmann (2006) "The Effect of Income on Positive and
     Negative Subjective Well-Being." unpublished manuscript.
<p>
     Butler, J.S. and R. Moffitt (1982) "A computationally efficient quadrature
     procedure for the one-factor multinomial probit model." Econometrica 50:
     761-764.
<p>
     Williams, Richard (2006) "Generalized Ordered Logit/ Partial Proportional
     Odds Models for Ordinal Dependent Variables." The Stata Journal 6(1):
     58-82. A pre-publication version is available at 
     http://www.nd.edu/~rwilliam/gologit2/gologit2.pdf.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[U] 23 Estimation and post-estimation commands</b>,
             <b>[U] 29 Overview of Stata estimation commands</b>
<p>
    Online:  help for estcom, postest, constraint, oprobit, goprobit, ologit,
             gologit, gologit2, reoprob
</pre>
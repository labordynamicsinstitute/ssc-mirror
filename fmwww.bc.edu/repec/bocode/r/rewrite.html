<pre>
-------------------------------------------------------------------------------
help for <b>rewrite</b>                                                    (Rosa Gini)
-------------------------------------------------------------------------------
<p>
<b><u>Rewrite text files from disk performing macro substitutions</u></b>
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>rewrite</b> <i>modelfile</i><b> using</b> <i>finalfile</i> <b>,</b> {<b>replace</b>|<b>append</b>} [ <b>tex</b> <b>html</b> ]
<p>
    <i>modelfile</i> must be the name of a text file.
<p>
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>rewrite</b> copies <i>modelfile</i> to <i>finalfile</i>. The difference with<b> copy</b> is that
    <i>modelfile</i> is not copied verbatim:<b>  rewrite</b> performs macro substitution on
    <i>modelfile</i> using the values of global macros that are valid for the
    current Stata session.<b>  rewrite</b> automatizes the tip contained in (Gini
    2008).  As an option, html or LaTeX special characters are also
    substituted.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>replace</b> specifies that <i>finalfile</i> be replaced if it already exists, <b>append</b>
        specifies that the rewritten file will be appended to <i>finalfile</i>. If
        <i>finalfile</i> doesn't exist, either option will create it.
<p>
    <b>tex</b> causes<b> rewrite</b> to substitute to some character that LaTeX considers
        special their corresponding LaTeX commands. <b>html</b> does the same thing
        for html.
<p>
<p>
<p>
<b><u>Remarks</u></b>
<p>
<p>
    <b>rewrite</b> is mainly thought of as an instrument to manipulate code of
    various programming languages (<b>sql</b>,<b> html</b>,<b> tex</b>): the document in <i>modelfile</i>
    is a piece of language code containing some global macros. Before
    executing the code<b> rewrite</b> substitutes the active values of the global
    macros, so that <i>finalfile</i> contains valid programming language code and
    can be executed-possibly from within the same <i>Stata</i> session by means of
    the <b>shell</b> command. A very suitable programming language for this
    procedure is <i>Stata</i>'s language itself.
<p>
    A second use is for generating small texts in<b> html</b> and<b> tex</b> starting form
    the same text file.
<p>
<b><u>Examples</u></b>
<p>
        <b>. rewrite "my document" using "rewritten document", replace</b>
<p>
        <b>. global year=2007</b>
            <b>. rewrite do_file_with_some_macros.txt using finalfile.do,</b>
            <b>replace</b>
            <b>. do finalfile.do</b>
<p>
        <b>. global year=2007</b>
            <b>. rewrite headertex.txt using text.tex, replace</b>
            <b>. rewrite text.txt using text.tex, tex append</b>
            <b>. rewrite foottex.txt using text.tex, append</b>
            <b>. shell pdflatex text.tex</b>
            <b>. shell acroread text.pdf</b>
<p>
        <b>. forvalues year=2000/2007{</b>
            <b>. global year=`year'</b>
            <b>. rewrite code_with_macros.sql using query.sql, append</b>
            <b>. }</b>
            <b>. shell sqlplus </b><i>username</i><b>/</b><i>psswd</i><b>@</b><i>servername</i><b> @query.sql</b>
<p>
<p>
<p>
<b><u>Author</u></b>
<p>
Rosa Gini, Agenzia regionale di sanità della Toscana, Italy.
Email: rosa.gini@arsanita.toscana.it
<p>
<b><u>References</u></b>
<p>
    Gini, R.  2008.  Stata tip 56: Writing parameterized text files.  <i>The</i>
        <i>Stata Journal</i> 8(1): 134-136.
<p>
<p>
<p>
<p>
<p>
</pre>
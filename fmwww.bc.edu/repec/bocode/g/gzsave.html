<pre>
<p>
-------------------------------------------------------------------------------
help for <b>gzsave</b>, <b>gzsaveold</b>, <b>gzuse</b>, <b>gzappend</b>, <b>gzmerge</b>          (Henrik Stovring)
-------------------------------------------------------------------------------
<p>
<b><u>Save, use, append, and merge datasets compressed by gzip on Windows/Unix/Linux/</u></b>
<b><u>&gt; MacOSX</u></b>
<p>
        <b>gzsave</b> [<i>filename</i>] [<b>,</b> <b>replace</b> <i>save_options</i>]
<p>
        <b>gzsaveold</b> [<i>filename</i>] [<b>,</b> <b>replace</b> <i>saveold_options</i>]
<p>
        <b>gzuse</b> <i>filename</i> [<b>,</b> <b>clear</b> <i>use_options</i>]
<p>
        <b>gzuse</b> [<i>varlist</i>] [<i>if</i>] [<i>in</i>] <b>using</b> <i>filename</i> [<b>,</b> <b>clear</b> <i>use_options</i>]
<p>
        <b>gzappend</b> [<i>varlist</i>] <b>using</b> <i>filename</i> [<i>filename</i> <b>...</b>] [<b>,</b> <i>append_options</i>]
<p>
        <b>gzmerge</b> [<i>varlist</i>] <b>using</b> <i>filename</i> [<i>filename</i> <b>...</b>] [<b>,</b> <i>merge_options</i>]
<p>
<b><u>Description</u></b>
<p>
    <b>gzsave</b> compresses and stores the current dataset on disk under the name
    <i>filename</i>. If no <i>filename</i> is specified, the command tries to use the last
    filename under which the data were last known to Stata (c(filename)). If
    <i>filename</i> is specified without an extension, <b>.dta.gz</b> is used.
<p>
    <b>gzsaveold</b> compresses and stores the current dataset on disk in Stata 7
    format.
<p>
    <b>gzuse</b> loads a Stata-format dataset previously saved by <b>gzsave</b> into
    memory.  If <i>filename</i> is specified without an extension, <b>.dta.gz</b> is
    assumed. In the second syntax for <b>gzuse</b>, a subset of the data may be
    read.
<p>
    <b>gzappend</b> appends a Stata-format dataset previously saved by <b>gzsave</b> to the
    current dataset in memory.
<p>
    <b>gzmerge</b> merges one or more Stata-format dataset(s) previously saved by
    <b>gzsave</b> with the current dataset in memory.
<p>
    Obviously, all these commands require the gzip command to be available at
    the command line. It can be downloaded for free at http://www.gzip.org,
    but is preinstalled on most Unix/Linux/MacOSX systems. On
    Unix/Linux/MacOSX you can check if gzip is available with
<p>
        <b>. shell which gzip</b>
<p>
    which should return something like '/usr/bin/gzip'. On Windows the
    gzip.exe must similarly be found in the path, cf. the documentation on
    your Windows version. The easiest way to check if your path is set up
    correctly on Windows is to try out <b>gzsave</b> and <b>gzuse</b> on a test dataset
    (ie. an artificial dataset you can afford to lose!). <b>If it does not work,</b>
    <b>the most likely explanation is that you either have not installed gzip or</b>
    <b>your path is not configured correctly.</b>
<p>
    In principle, the command should work on any system with gzip installed
    and ordinary shell commands available. The command has however only been
    tested on the platforms mentioned above, so as always <b>use at your own</b>
    <b>risk!</b>
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>replace</b> permits gzsave to overwrite an existing dataset. <b>replace</b> may not
        be abbreviated.
<p>
    <b>clear</b> permits the data to be loaded even if there is a dataset already in
        memory and even if that dataset has changed since it was last saved.
<p>
    save_options are all options available with save.
<p>
    saveold_options are all options available with saveold.
<p>
    use_options are all options available with use.
<p>
    append_options are all options available with append.
<p>
    merge_options are all options available with merge.
<p>
<b><u>Remarks</u></b>
<p>
    These commands are useful for two purposes:
<p>
    First, they obviously help lowering the space used on disk by a dataset,
        which may be important when storing very large datasets.
<p>
    Second, they may help reduce network load and hence the time used for
        storing and opening datasets when using a distributed disk system
        such as NFS. This is due to the fact that the commands only transfer
        the compressed datasets over the network, since the uncompressed
        dataset is only stored as a temporay datafile, which typically
        resides on the local disk (where local is relative to the running
        instance of Stata).
<p>
    The price paid for saving disk space (and network load) is the CPU time
    used by gzip - please, test for yourself whether compression is actually
    advantageous in your specific set-up.
<p>
    Note, that the <b>gzsave</b> and <b>gzuse</b> commands sets the filename associated
    with the dataset, so that for example <b>describe</b> correctly reports the
    originating filename of the compressed dataset. An unwanted side-effect
    of this occurs when issuing a <b>save, replace</b> on a dataset opened with
    <b>gzuse</b>, as this will save an uncompressed dataset replacing the original
    compressed dataset. This is, however, considered a feature as it ensures
    that commands such as <b>describe</b> points exactly to the relevant file, and
    it remains the users responsibility to be aware which filename is
    actually used in the command <b>save, replace</b>.
<p>
    If you prefer to use <b>zip</b> for compression, have a look at zipsave.
<p>
<b><u>Examples</u></b>
<p>
    <b>. gzsave myfile</b>
    <b>. gzsave myfile, replace</b>
<p>
    <b>. gzuse myfile</b>
    <b>. gzuse myfile, clear</b>
<p>
    <b>. gzappend using myfile2</b>
<p>
    <b>. gzmerge id using myfile3, unique</b>
<p>
    <b>. shell gzip -l myfile.dta.gz</b>    shows compression ratio
<p>
<b><u>Author</u></b>
<p>
    Henrik Stovring (stovring@biostat.au.dk), Biostatistics, Department of
    Public Health, Aarhus University, Denmark.
<p>
<b><u>Acknowledgements</u></b>
<p>
    Jun Xu, Department of Sociology, Indiana University, USA, for useful
    suggestions and help with testing the command for Windows XP.
<p>
    Morten Andersen, Research Unit of General Practice, University of
    Southern Denmark, Denmark, gave suggestions on filename handling, tested
    on MacOSX, and requested <b>saveold</b>.
<p>
    Christopher Paul Barrington-Leigh, University of British Columbia,
    Canada, requested handling of filenames with blanks and prompted me to
    add <b>gzappend</b> and <b>gzmerge</b> to the list.
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] save</b>
<p>
    Online: help for save, use, compress, append, merge, zipsave (if
             installed, otherwise describe zipsave)
</pre>
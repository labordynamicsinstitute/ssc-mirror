<pre>
<p>
<b>help gsum</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>gsum</b> --      Summary statistics for grouped data
<p>
<b><u>Syntax</u></b>
        <b>gsum</b> <i>varlist</i> [<i>if</i>] [<i>in</i>] [<i>weight</i>] <b>,</b> [<i>options</i>] [<i>group definitions</i>]
<p>
  -----------------------------------------------------------------------------
<p>
  <i>Specifiying Group Ranges</i>
<p>
  <b>gsum</b> accepts variables with codes from 0 to 25 (integers only).
<p>
  Elements of <i>group definitions</i> can be <i>g0(#-#)</i>, <i>g1(#-#)</i>...<i>g#(#-#)</i> where <i>g#</i>
  identifies the group number and <i>(#-#)</i> identifies a numeric range.
<p>
  If, however, <i>varlist</i> has each category labeled in the format of <i>#-#</i>, <b>gsum</b> can
  simply use these values.
<p>
  If you do not specify <i>group definitions</i>, <b>gsum</b> will look for labels.
<p>
  If you do specify <i>group definitions</i>, <b>gsum</b> will ignore the labels.
<p>
    <i>options</i>                     Description
    -------------------------------------------------------------------------
<p>
      <b>quantiles(</b><i>q q ...</i><b>)</b>         the set of quantiles to be calculated, the
                                  default set is 0.25, 0.50, and 0.75.
<p>
      <b>gen(</b><i>newvarlist</i><b>)</b>            create new variable called <i>newvarlist</i>
                                  containing the midpoints.
<p>
      <b>table</b>                      display the value table.
<p>
      <b>save(</b><i>filename</i><b>)</b>             save the value table to <i>filename</i>.
<p>
    -------------------------------------------------------------------------
<p>
<b><u>Description</u></b>
<p>
    <b>gsum</b> calculates summary statistics for an ordinal variable where each
    category represents a range of a conceptually continuous variable. <b>gsum</b>
    provides the weighted <i>N</i>, the mean, the standard deviation, and quantiles
    0.25, 0.50 (the median), and 0.75 (you can specify any set of quantiles
    you want).  Each quantile is available as both the midpoint of the
    category in which the quantile falls, or as a linear interpolation of
    that quantile based on methods presented by Blalock (1979).
<p>
    <b>gsum</b> can also produce a value table (which can also be saved) listing
    each category, the range, the midpoint of that range, the number of
    cases, the weight of each case, and the cumulative distribution function
    (CDF).
<p>
    For an extra tool, <b>gsum</b> can also create a new variable that contains the
    midpoints.
<p>
    <b>gsum</b> accepts any type of [<i>weight</i>] and is byable.
<p>
    For example, you may have a variable <i>age_cat</i> where 1 represents 18-24
    years of age, 2 represents 25-44 years of age, and 3 represents 45-100
    years of age.  You can use <b>gsum</b> to calculate summary statistics such as
    the mean, median, and standard deviation.
<p>
<b><u>Examples</u></b>
<p>
    Use the 2010 GSS data on age
<p>
    <b>. use gssage.dta, clear</b>
<p>
    If the variable <i>age_cat</i> is labled correctly,
<p>
    <b>. gsum age_cat</b>
<p>
    Or, if you are not sure,
<p>
    <b>. gsum age_cat, g1(18-24) g2(25-44) g3(45-100)</b>
<p>
    To use weights,
<p>
    <b>. gsum age_cat [pweight = wtssall]</b>
<p>
    To see the value table,
<p>
    <b>. gsum age_cat, table</b>
<p>
    To save the value table in the file <i>valuetable.dta</i>,
<p>
    <b>. gsum age_cat, save(valuetable.dta)</b>
<p>
    To create the variable <i>midpoint_age_cat</i>,
<p>
    <b>. gsum age_cat, gen(midpoint_age_cat)</b>
<p>
    You can also enter in data from a frequency table.  For example, there is
    a table in Blalock (1979) that shows the frequency of cases for different
    income ranges:
<p>
         Income Range  Frequency
         -----------------------
         1950-2950        17
         2950-3950        26
         3950-4950        38
         4950-5950        51
         5950-6950        36
         6950-7950        21
         -----------------------
         Total           189
<p>
    You can input this table into Stata as a categorical variable and
    frequencies:
<p>
    <b>. clear</b>
    <b>. input y f</b>
    <b>1. 1 17</b>
    <b>2. 2 26</b>
    <b>3. 3 38</b>
    <b>4. 4 51</b>
    <b>5. 5 36</b>
    <b>6. 6 21</b>
    <b>7. end</b>
<p>
    You can then label the categories
<p>
    <b>. label def money 1 "1950-2950" 2 "2950-3950" 3 "3950-4950" 4 "4950-5950"</b>
        <b>5 "5950-6950" 6 "6950-7950"</b>
    <b>. label val y money</b>
<p>
    Then use frequency weights
<p>
    <b>. gsum y [fweight = f], table quantiles(0.50)</b>
<p>
<b><u>Saved results</u></b>
<p>
    <b>gsum</b> saves the following in <b>r()</b>:
<p>
    Scalars        
      <b>r(N)</b>                the number of observations
      <b>r(sum_W)</b>            the sum of the weights
      <b>r(mean)</b>             the mean
      <b>r(var)</b>              the variance
      <b>r(sd)</b>               the standard deviation
      <b>r(mn)</b>               the minimum
      <b>r(mx)</b>               the maximum
      <b>r(qi</b><i>q</i><b>)</b>              the <i>q</i> quantile using the interpolation method
      <b>r(qm</b><i>q</i><b>)</b>              the <i>q</i> quantile using the midpoint method
<p>
<b><u>Acknowledgments</u></b>
<p>
The algorithms used in this program are based on
    Blalock, H.M. 1979. Social Statistics.  2nd Ed. McGraw-Hill: New York
<p>
<b><u>Contact</u></b>
<p>
    This program was written by Eric Hedberg, National Opinion Research
    Center at the University of Chicago.  Any questions or comments can be
    directed to ech@uchicago.edu.
<p>
<p>
</pre>
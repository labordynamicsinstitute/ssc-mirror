<pre>
<p>
-------------------------------------------------------------------------------
help for <b>grqreg</b>                                              Joao Pedro Azevedo
                                                     Last update: 17 March 2011
                                                                   version: 2.1
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Graph the coefficients of a </u></b><b><u>Quantile Regression</u></b>
<p>
<p>
<p>
        <b>grqreg</b> [<i>varlist</i>] [weight] [<b>,</b> <b>qmin(</b><i>integer</i><b>)</b> <b>qmax(</b><i>integer</i><b>)</b>
                     <b>qstep(</b><i>integer</i><b>)</b> <b>quantiles(</b>#[#[# ...]]<b>)</b> <b>level(</b><i>confidence</i>
                     <i>interval</i><b>)</b> <b>title(</b><i>title list</i><b>)</b> <b>mfx(</b><i>type</i><b>)</b> <b>cons</b> <b>ci</b> <b>ols</b> <b>olsci</b>
                     <b>compare</b> <b>list</b> <b>format(</b><i>%fmt</i><b>)</b> <b>seed(</b><i>integer</i><b>)</b> <b>reps(</b><i>integer</i><b>)</b>
                     <b>save(</b><i>filename</i><b>)</b>]
<p>
    <b>fweights</b> and <b>aweights</b> are allowed after <b>qreg</b>; see help weights. See help 
    weight.
<p>
<b><u>Description</u></b>
<p>
<p>
    <b>grqreg</b> graphs the coefficients of a quantile regression (Koenker and
    Basset, 1978). It also has the option to graph the confidence interval,
    the OLS coefficient and the OLS confidence interval on the same graph.
<p>
    <b>grqreg</b> rewards the use of variable labels. The variable labels are used
    in the graphs, providing more intelligible variable descriptions than
    8-letter names. If no variable label is available <b>grqreg</b> uses the
    variable names.
<p>
    <b>grqreg</b> works after <b>qreg</b>, <b>bsqreg</b> and <b>sqreg</b>.
<p>
    <b>grqreg</b> is an rclass program.
<p>
<b><u>Options</u></b>
<p>
    <b>varlist</b> Select variables that will be graphed. Default value are all the
    estimated coefficients except the intercept.
<p>
    <b>qmin</b> sets the minimum value for the quantile. Default value .05.
<p>
    <b>qmax</b> sets the maximum value for the quantile. Default value .95.
<p>
    <b>qstep</b> sets the quantile increments. Default value .05.
<p>
    <b>quantile</b> estimate # quantiles; this is a default option after running
    <b>sqreg</b>. When using this option please use the same number format for all
    quantiles (i.e. .25 .50 .75 or .251 .503 .752) and not (05 515 750).
<p>
    <b>level</b> sets the level of the confidence interval. Default value the same
    used in the original regression.
<p>
    <b>cons</b> plots the intercept. Default off.
<p>
    <b>ci</b> graph confidence interval of Quantile Regression. Default off.
<p>
    <b>ols</b> graph OLS estimate. Default off.
<p>
    <b>list</b>
<p>
    <b>olsci</b> graph OLS confidence interval of the OLS regression. Default off.
<p>
    <b>compare</b> graphs two coefficients of a quantile regression. Only supports
    two variables at the time.  The first variable is ploted on the y-axis
    and the second variable on the x-axis. Default off.
<p>
    <b>title</b> Allow user to assing individual title names for each one of the
    figures. Please note that no spaces are allowed between the name of the
    same figure (i.e. Fig1a Fig1b ... Fig1z).
<p>
    <b>seed(</b><i>integer</i><b>)</b>. Set seed value.
<p>
    <b>reps(</b><i>integer</i><b>)</b>. Default value 20.
<p>
    <b>format(</b><i>%fmt</i><b>)</b>. Default value %9.2f. For more information please see 
    format.
<p>
    <b>save</b> Allow user to create a new dataset with the point estimates used to
    generate the graphs. The replace option is permanently enabled.
<p>
<b><u>mfx</u></b>: Options (the mfx option is not supported after the sqreg command){p_end}
<p>
    <b>dydx</b> specifies that marginal effects be calculated. It is the default.
<p>
    <b>eyex</b> specifies that elasticities be calculated in the form d(lny)/d(lnx)
<p>
    <b>dyex</b> specifies that elasticities be calculated in the form d(y)/d(lnx)
<p>
    <b>eydx</b> specifies that elasticities be calculated in the form d(lny)/d(x)
<p>
<b><u>Standard Errors</u></b>
<p>
    <b>grqreg</b> uses the standard errors generated by the qreg, bsqreg and sqreg
    commands.
<p>
    qreg estimates the variance-covariance matrix of coefficients using a
    method of Kroenker and Basset (1982) and Rogers (1993). This is described
    in <i>Methods and Formulas</i> from the Stata Manual.
<p>
    sqreg obtains an estiamte of the variance-covariance matrix via
    bootstraping and the variance-covariance matrix includes between quantile
    blocks.
<p>
    bsqreg obtains an estiamte of the variance-covariance matrix via
    bootstraping with one quantile.
<p>
    Please notice that: -bsqreg- and -sqreg- have different standard errors
    (same initial seed and quantile) because the two commands use different
    methods to generate bootstrap sample.
<p>
    Both commands calculate the bootstrap standard errors manually instead of
    using the official -bootstrap- prefix command.  The -bsqreg- command uses
    -bsample- to take each of the bootstrap samples.  You can type
<p>
        help bsample
<p>
    for details on this command.  On the other hand, -sqreg- uses the
    undocumented -bsampl_w- command.  You can type
<p>
        viewsource bsampl_w.ado
<p>
    to see the code and more information on this command.  Here, you will see
    that this is logically equivalent to -bsample-, but because they use
    different algorithms, they will not create the same bootstrap sample when
    used with the same seed.
<p>
<b><u>Remarks</u></b>
<p>
    For extreme quantiles it is not recomended to push tau (<b>qstep</b>) into the
    tails (<b>qmin</b> and <b>qmax</b>) too far especially when there are a large number of
    parameters being estimated.
<p>
    The crucial element is the existence of enough observations above and
    below to make it plausible that the fit isn't just an artifact of a few
    extreme observations.
<p>
    The asymptotics rely on there being enough observations on both sides in
    order to get a conditional central limit theorem (CLT) effect from the
    gradient. A rough rule of thumb would be that min{n tau , n(1-tau)}
    should be 10p where p is the number of parameters being estimated. So if
    you have p = 5, n=5000 then tau shouldn't be smaller than .01.
<p>
    For more details on this remark please refer to Koenker and Eboil (2001)
    and Chernozhukov (2000).
<p>
<b><u>Examples</u></b>
<p>
    . webuse auto, clear
    . xi: qreg price mpg i.foreign*i.rep78 headroom
    . grqreg, cons ci ols olsci
<p>
    . qreg price mpg headroom
    . grqreg, cons ci ols olsci title(Fig.1a Fig.1b Fig.1c)
<p>
    . bsqreg price mpg headroom, reps(100)
    . grqreg, cons ci ols olsci title(Fig.1a Fig.1b Fig.1c)
<p>
    . sqreg price weight length foreign, quantile(.25 .5 .75) reps(100)
    . grqreg, ci ols olsci title(Fig.1a Fig.1b Fig.1c)
<p>
    . sqreg price weight length foreign, quantile(.2 .4 .6 .8) reps(100)
    . grqreg, cons
<p>
    . qreg price mpg trunk weight length
    . grqreg weight length, compare
<p>
<p>
<p>
<b><u>References</u></b>
<p>
    Chernozhukov, V. (2000) Conditional Extremes and Near-Extremes. MIT Dept.
        of Economics Working Paper No. 01-21. http://ssrn.com/abstract=272836
<p>
    Koenker, R. and G. Basset (1978) "Regression Quantiles." <i>Econometrica</i>,
        46(1): 33-50.
<p>
    Koenker, R. and G. Basset (1982) "Robust test for heteroscedasticity
        based on regression quantiles." <i>Econometrica</i>, 50(1): 43-61.
<p>
    Koenker, R. and K. F. Hallock (2001) "Quantile Regression." <i>Journal of</i>
        <i>Economic Perspectives</i>, 15(4): 143-156.
<p>
    Koenker, R. and Geling, O. (2001) Reappraising medfly longevity: a
        quantile regression survival analysis.  <i>Journal of the American</i>
        <i>Statistical Association </i>, 96: 458-468.
<p>
    Rogers, W. H. (1993) "Calculation of quantile regression standard
        errors." <i>Stata Technical Bulltin</i>, 3: 77-78.
<p>
<b><u>Author</u></b>
<p>
    Joao Pedro Azevedo
    jazevedo@worldbank.org
<p>
<p>
<b><u>Aknowledgements</u></b>
<p>
    This ado uses part of the code written by Michael Blasnik (qregtrace).
    I would also like to thank Jeffrey T Grogger, Scott Merryman, Martin
    Weiss, Getúlio Borges, James Hassell and Nick Cox for their valuable
    suggestions.
    Many thanks to Joy Wang for the clarifications regarding the bootstrap
    procedures of bsqreg and sqreg.
    The usual disclaimer applies.
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] qreg bsqreg sqreg mfx</b>
    Online:  help for qreg bsqreg sqreg mfx
</pre>
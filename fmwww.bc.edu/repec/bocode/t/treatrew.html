<pre>
<b>help treatrew</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>treatrew</b> -   Estimation of Average Treatment Effects by reweighting on
                   propensity score
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>treatrew</b><i> outcome treatment</i> [<i>varlist</i>] [<i>if</i>] [<i>in</i>] [<i>weight</i>]<b>,</b>
                 <b>model(</b><i>modeltype</i><b>)</b> [<b>GRaphic</b> <b>conf(</b><i>number</i><b>)</b> <b>vce(robust)</b>]
<p>
<p>
    <b>fweight</b>s, <b>iweight</b>s, and <b>pweight</b>s are allowed; see weight.
<p>
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>treatrew</b> estimates Average Treatment Effects by reweighting on propensity
    score as proposed by Rosenbaum and Rubin (1983) in their seminal article.
    Depending on the model specified, <b>treatrew</b> provides consistent estimation
    of Average Treatment Effects under the hypothesis of "selection on
    observables".  Conditional on a pre-specified set of observable exogenous
    variables x - thought of as those driving the non-random assignment to
    treatment - <b>treatrew</b> estimates the Average Treatment Effect (ATE), the
    Average Treatment Effect on Treated (ATET) and the Average Treatment
    Effect on Non-Treated (ATENT), as well as the estimates of these
    parameters conditional on the observable factors x (i.e., ATE(x), ATET(x)
    and ATENT(x)).  Parameters standard errors are provided either
    analytically (following Wooldridge, 2010, p. 920-930) and via
    bootstrapping.  <b>treatrew</b> assumes that the propensity score specification
    is correct.
<p>
    According to the syntax:
<p>
    <i>outcome</i>: is the target variable over which measuring the impact of the
        treatment
<p>
    <i>treatment</i>: is the binary treatment variable taking 1 for treated, and 0
        for untreated units
<p>
    <i>varlist</i>: is the set of pre-treatment (or observable confounding)
        variables
<p>
     
<b><u>Options</u></b>
    
    <b>model(</b><i>modeltype</i><b>)</b> specifies the model for estimating the propensity score,
        where <i>modeltype</i> must be one out of these two:  "probit" or "logit".
        It is always required to specify one model.
<p>
    <b>graphic</b> allows for a graphical representation of the density
        distributions of ATE(x), ATET(x) and ATENT(x).
<p>
    <b>vce(robust)</b> allows for robust regression standard errors in the probit or
        logit estimates.
<p>
    <b>conf(</b><i>number</i><b>)</b> sets the confidence level of probit or logit estimates equal
        to the specified <i>number</i>.  The default is <i>number</i>=95.
<p>
<p>
<a name="modeltype"></a>  <i>modeltype_options</i>           Description
  -----------------------------------------------------------------------------
  Model
  <b>probit</b>                      The propensity score is estimated by a probit
                                  regression
  <b>logit</b>                       The propensity score is estimated by a logit
                                  regression
  -----------------------------------------------------------------------------
<p>
<p>
    <b>treatrew</b> creates a number of variables:
<p>
<p>
        ATE_x is an estimate of the idiosyncratic Average Treatment Effect.
<p>
        ATET_x is an estimate of the idiosyncratic Average Treatment Effect
        on treated.
<p>
        ATENT_x is an estimate of the idiosyncratic Average Treatment Effect
        on Non-Treated.
<p>
<p>
<p>
    <b>treatrew</b> returns the following scalars:
<p>
        e(N) is the total number of (used) observations.
<p>
        e(N1) is the number of (used) treated units.
<p>
        e(N0) is the number of (used) untreated units.
<p>
        e(ate) is the value of the Average Treatment Effect.
<p>
        e(atet) is the value of the Average Treatment Effect on Treated.
<p>
        e(atent) is the value of the Average Treatment Effect on Non-treated.
<p>
<p>
<b><u>Remarks</u></b> 
<p>
    The treatment has to be a 0/1 binary variable (1 = treated, 0 =
    untreated).
<p>
    It is assumed that the probit or logit model is correctly specified.
<p>
    Please remember to use the <b>update query</b> command before running this
    program to make sure you have an up-to-date version of Stata installed.
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>*** EXAMPLE ON "JTRAIN2.DTA" ***</b>
<p>
   . #delimit ;
   . xi: treatrew re78 train educ black re75 unem74 unem78 lre74 agesq mosinex 
&gt; ,
   . vce(robust) conf(90) model(probit) gr  
   . ;
<p>
   . #delimit ;
   . xi: treatrew re78 train educ black re75 unem74 unem78 lre74 agesq mosinex 
&gt; ,
   . model(logit) vce(robust) conf(90)  gr 
   . ;
   
<p>
    <b>*** EXAMPLE ON HOW TO BOOTSTRAP STD. ERR. FOR "ATET" AND "ATENT" ***</b>
<p>
   . #delimit ;
   . xi: bootstrap ate=e(ate)  atet=e(atet)  atent=e(atent), rep(10):
   . treatrew re78 train educ black re75 unem74 unem78 lre74 agesq mosinex ,
   . model(logit) vce(robust) conf(90)  gr 
   . ;
<p>
   
<b><u>References</u></b>
<p>
    Cameron, A.C., and P.K. Trivedi. 2005. <i>Microeconometrics: Methods and</i>
        <i>Applications</i>.  Chapter 25. Cambridge University Press, New York.
<p>
    Cerulli, G. 2012. Ivtreatreg: a new STATA routine for estimating binary
        treatment models with heterogeneous response to treatment under
        observable and unobservable selection, <i>Working Paper Cnr-Ceris</i>, N°
        03/2012.
<p>
    Rosenbaum, P., and D.B. Rubin. 1983. The Central Role of the Propensity
        Score in Observational Studies for Causal Effects. <i>Biometrika</i>, 70,
        41-55.
<p>
    Wooldridge, J.M. 2002.<i>  Econometric Analysis of Cross Section and Panel</i>
        <i>Data</i>.  Chapter 18. The MIT Press, Cambridge.
<p>
    Wooldridge, J.M. 2010.<i>  Econometric Analysis of Cross Section and Panel</i>
        <i>Data, 2nd Edition</i>.  Chapter 21. The MIT Press, Cambridge.
<p>
<p>
<b><u>Acknowledgments</u></b>
<p>
    I wish to thank Enrico Viarisio of the Ceris-CNR technical staff for his
    help in formatting the Technical Report accompanying this routine.
<p>
<p>
<b><u>Author</u></b>
<p>
    Giovanni Cerulli
    Ceris-CNR
    Institute for Economic Research on Firms and Growth, National Research
        Council of Italy
    E-mail: g.cerulli@ceris.cnr.it
<p>
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online:  <b>treatreg</b>, <b>ivregress</b>, <b>ivtreatreg</b>, <b>pscore</b>, <b>psmatch2</b>, <b>nnmatch</b>
</pre>
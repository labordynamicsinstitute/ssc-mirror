<pre>
-------------------------------------------------------------------------------
help for <b>tpoisson</b>                                                (Joseph Hilbe)
-------------------------------------------------------------------------------
<p>
<b><u>Truncated Poisson regression</u></b>
<p>
        <b>tpoisson</b>  <i>depvar</i> [<i>varlist</i>] [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,</b> <b><u>tru</u></b><b>nc(</b><i>varname</i><b>)</b>
             <b>TLEft()</b> <b>TRIght()</b> [ <b><u>off</u></b><b>set(</b><i>varname</i><b>)</b> <b><u>exp</u></b><b>osure(</b><i>varname</i><b>)</b>
             <b><u>cl</u></b><b>uster(</b><i>varname</i><b>)</b> <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <b><u>from</u></b><b>(</b><i>asis</i><b>)</b> <b><u>ir</u></b><b>r</b> <b><u>rob</u></b><b>ust</b> <b>nolog</b>
             <i>maximize_options</i> <i>survey_options</i>]
<p>
        Note: the option <i>trunc</i> must be included in the command. A trunc
        variable must use the following numbers to indicate the type of
        truncation: 0 = <i>left truncated</i>, 1 = <i>not truncated</i>, -1 = <i>right</i>
        <i>truncated</i>.
<p>
        Note: Type value of left truncated site in <i>tleft()</i>.
<p>
              Type value of right truncated site in <i>tright()</i>.
<p>
    <b>aweight</b>s, <b>fweight</b>s, <b>iweight</b>s, and <b>pweight</b>s are allowed; see help weights.
<p>
    <b>tpoisson</b> provides access to all <i>maximize</i> options; see help maximize.
<p>
    <b>tpoisson</b> provides access to all <i>survey</i> options; see help svy.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>tpoisson</b> fits a truncated Poisson maximum-likelihood regression of <i>depvar</i>
    on <i>indepvars</i>, where <i>depvar</i> is a non-negative count variable.  The trunc
    option is required. If no observations are truncated, a trunc variable
    with all 1's must be specified. Interpret parameter estimates as one
    would <b>poisson</b>.
<p>
    Values on either side of the site of truncation are revalued to the 
    value of the trunc value.
<p>
    <b>tpoisson</b> accepts all of the <i>help maximize</i> options, the <i>constraint()</i>
    option, and all survey options and capabilities documented in <b>[SVY]</b>;
    including multi-level surveys; poststratification; and BRR, jackknife,
    and linearization VCE estimators.
<p>
    This program uses <b>ml lf</b> method.
<p>
<p>
<b><u>Options</u></b>
<p>
        +-------+
    ----+ Model +------------------------------------------------------------
<p>
    <b>trunc(</b><i>truncvar</i><b>)</b> is required. Values of 1 indicate a non-truncated, 0 a
        left truncated, and -1 a right truncated observation. <i>truncvar</i> may be
        numeric or a variable.
<p>
    <b>tleft(</b><i>#</i><b>)</b> for left truncation site; <b>tright(</b><i>#</i><b>)</b> for right truncation site
<p>
    <b>trunc(</b><i>1</i><b>)</b> and no <i>tleft</i> or <i>tright</i> values declared is a standard Poisson
        model
<p>
    <b>offset(</b><i>varname</i><b>)</b> specifies a <i>varname</i> in model with coefficient constrained
        to 1.
<p>
    <b>exposure(</b><i>varname</i><b>)</b> specifies a <i>ln(varname)</i> in model with coefficient
        constrained to 1.
<p>
    <b>constraints(</b><i>constraints</i><b>)</b> apply specified linear constraints.
<p>
<p>
<p>
        +-----------+
    ----+ SE/Robust +--------------------------------------------------------
<p>
    <b>cluster(</b><i>varname</i><b>)</b>
<p>
    <b>robust</b> specifies that the Huber/White/sandwich estimator of variance is
        to be used in place of the traditional calculation.  <b>robust</b> combined
        with <b>cluster()</b> allows observations which are not independent within
        cluster (although they must be independent between clusters).  If you
        specify <b>pweight</b>s, <b>robust</b> is implied.
<p>
    <b>vce(</b><i>options</i><b>)</b> allowed. <b>vce()</b> supports <i>robust</i>, <i>opg</i>, and <i>native</i>.  <b>vce</b> does
        not support options <i>bootstrap</i> or <i>jacknife</i>, However, <b>tpoisson</b> does
        support the <b>bootstrap</b> and <b>jacknife</b> commands, so these modeling
        capabilities are allowed.
<p>
<p>
        +-----------+
    ----+ Reporting +--------------------------------------------------------
   
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for confidence
        intervals of the coefficients; see help level.
<p>
    <b>nolog</b> suppresses the iteration log.
<p>
<p>
        +-------------+
    ----+ max options +------------------------------------------------------
<p>
<p>
    <i>maximize_options</i>: technique(algorithm_spec), [no]log, trace, hessian,
        gradient, showstep, shownrtolerance, difficult, iterate(#),
        tolerance(#), ltolerance(#), gtolerance(#), nrtolerance(#),
        nonrtolerance, from(init_specs); see maximize.
<p>
<p>
        +-------------+
    ----+ svy options +------------------------------------------------------
<p>
    <i>survey_options</i> are all available. See help svy
<p>
<p>
<p>
<p>
<b><u>Author and support</u></b>
<p>
    <b>Joseph Hilbe</b>,<b> Arizona State University</b>:<b>  hilbe@asu.edu</b>
<p>
<p>
<b><u>Remarks</u></b>
<p>
    <b>tpoisson</b> is a user authored program. Support is by author. See<b> Hilbe</b>,
    <i>Negative Binomial Regression</i>, Cambridge University Press, for discussion.
    Related information can also be obtained at <b>[R] poisson</b>. Or see<b> cpoisson</b>
    or<b> cpoissone</b>
<p>
<p>
<b><u>Examples</u></b>
<b> Before example 1</b>
<b>. gen byte truncvar = 1</b>
<b>. replace truncvar = 0 if time&lt;=3</b>
<p>
    <b>. tpoisson time hmo age, trunc(truncvar) tle(3) nolog irr</b>
<p>
<b> Before example 2</b>
<b> . replace truncvar = 1</b>
<b> . replace truncvar = 0 if time&lt;=2</b>
<b> . replace truncvar = -1 if time &gt;=30</b>
<p>
    <b>. tpoisson time hmo age, trunc(truncvar) tleft(2) tright(30) nolog</b>
        <b>cluster(provnum)</b>
<p>
    <b>. bootstrap: tpoisson deaths smokes a2-a5, trunc(truncvar) tright(10)</b>
        <b>exposure(pyears) irr nolog</b>
<p>
    <b>. svyset psuid [pweight=finalwgt], strata(stratid)</b>
<p>
    <b>. svy: tpoisson zinc age age2 weight female black orace rural, trunc(cv)</b>
        <b>tright(20) nolog irr</b>
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] Poisson regression</b>; <b>[SVY] Svy: poisson</b>
<p>
    Online:  <b>help</b> <b>cpoisson</b> <b>cpoissone</b> <b> poisson</b>
<p>
<p>
<p>
</pre>
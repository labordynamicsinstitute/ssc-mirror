<pre>
<p>
<b>help tpm postestimation</b>                                      also see:  tpm    
-------------------------------------------------------------------------------
<p>
    tpm postestimation -- Postestimation tools for tpm
<p>
<p>
<b><u>Description</u></b>
<p>
    The following postestimation commands are available for <b>tpm</b>:
<p>
    command          description
    -------------------------------------------------------------------------
        <b>predict</b>      predictions
INCLUDE help post_estat
INCLUDE help post_estimates
INCLUDE help post_lincom
INCLUDE help post_lrtest
INCLUDE help post_margins
INCLUDE help post_nlcom
INCLUDE help post_predictnl
INCLUDE help post_test
INCLUDE help post_testnl
    -------------------------------------------------------------------------
<p>
<p>
<a name="predict"></a><b><u>Syntax for predict</u></b>
<p>
<p>
        <b>predict</b> [<i>type</i>] <i>newvar</i> [<i>if</i>] [<i>in</i>] [<b>,</b> <i>options</i>]
<p>
        <b>predict</b> [<i>type</i>] {<i>stub*</i>|<i>newvar1</i> ... <i>newvarq</i>} [<i>if</i>] [<i>in</i>] <b>,</b> <b><u>sc</u></b><b>ores</b>
<p>
<p>
<a name="options"></a>    <i>options</i>           Description
    -------------------------------------------------------------------------
    Main
      <b>normal</b>           uses normal theory retransformation to obtain fitted
                        values.
      <b>duan</b>             uses Duan's smearing retransformation to obtain fitted
                        values.
      <b><u>sc</u></b><b>ores</b>           calculate first derivative of the log likelihood with
                        respect to xb
<p>
    Options
      <b><u>nooff</u></b><b>set</b>         ignore any <b>offset()</b> or <b>exposure()</b> variable
    -------------------------------------------------------------------------
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>predict</b> returns E(<i>depvar</i>|{indepvar}). In particular, the combined
    prediction is computed as the product of the probability of a positive
    outcome (first part) and the expected value of Y | Y&gt;0 (second part).
    This statistic is available both in and out of sample; type <b>predict</b> ...
    <b>if e(sample)</b> ... if wanted only for the estimation sample.
<p>
<b><u>Options for predict</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>normal</b> uses normal theory retransformation to obtain fitted values when a
        linear regression of the log of the second part outcome is estimated.
        It is the default if no option is specified.
<p>
    <b>duan</b> uses Duan's smearing retransformation to obtain fitted values when a
        linear regression of the log of the second part outcome is estimated.
<p>
    <b>scores</b> create a score variable for each equation (part) in the model.
        Since the score for the second part of the model make sense only with
        respect to the estimation subsample (where Y&gt;0), the calculation is
        automatically restricted to the estimation subsample.
<p>
        +---------+
    ----+ Options +----------------------------------------------------------
<p>
    <b>nooffset</b> may be combined with most statistics and specifies that the
        calculation should be made, ignoring any offset or exposure variable
        specified when the model was fit.
<p>
        If neither the <b>offset(</b><i>varname_o</i><b>)</b> option nor the <b>exposure(</b><i>varname_e</i><b>)</b>
        option was specified when the model was fit, specifying <b>nooffset</b> does
        nothing.
<p>
<p>
<b><u>Remarks</u></b>
    Retransformation after OLS regression of ln(<i>depvar</i>) is needed to obtain
        consistent predictions of <i>depvar</i>. <b>tpm</b> implements this using normal
        theory and smearing retransformations but both assume that the errors
        in the regression are homoscedastic. Retransformation in the case of
        heteroscedastic errors is conceptually complex and we have not
        implemented it in <b>tpm</b>. We suggest the gamma GLM with log link as an
        alternative to a regression of ln(<i>depvar</i>).
<p>
<p>
<b><u>Examples</u></b>
<p>
    Setup
        <b>. webuse womenwk, clear</b>
        <b>. replace wage = 0 if wage==.</b>
<p>
    Two part model with logit and glm with Gaussian family and identity link
        <b>. tpm wage educ age married children, first(logit) second(glm)</b>
        <b>. predict wagehat1</b>
  
    Two part model with probit and glm with gamma family and log link
        <b>. tpm wage educ age married children, f(probit) s(glm, fam(gamma)</b>
            <b>link(log))</b>
        <b>. margins, dydx(*)</b>
<p>
    Two part model with probit and linear regression
        <b>. tpm wage educ age married children, f(probit) s(regress)</b>
        <b>. margins, dydx(*)</b>
<p>
    Two part model with probit and linear regression of log(<i>depvar&gt;0</i>)
        <b>. tpm wage educ age married children, f(probit) s(regress, log)</b>
        <b>. margins, dydx(*)</b>
        <b>. margins, predict(duan) dydx(*)</b>
<p>
</pre>
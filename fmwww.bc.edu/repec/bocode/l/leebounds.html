<pre>
<b>help orderalpha</b> 
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>leebounds</b> -- Lee (2009) treatment effect bounds
<p>
<b><u>Syntax</u></b>
<p>
        <b>leebounds</b> <i>depvar</i> <i>treatvar</i> [<i>if</i>] [<i>in</i>] [<i>weight</i>], [<i>options</i>]
<p>
<p>
<a name="Outcome_and_treatment"></a>    <i>Outcome and treatment</i>         Description
    -------------------------------------------------------------------------
    Model
      <i>depvar</i>                      dependent variable
      <i>treatvar</i>                    binary treatment indicator
<p>
    <i>options</i>                       Description
    -------------------------------------------------------------------------
    Main
      <b><u>sel</u></b><b>ect(</b><i>varname</i><b>)</b>             selection indicator
      <b><u>tig</u></b><b>ht(</b><i>varlist</i><b>)</b>              covariats for tightened bounds
      <b><u>cie</u></b><b>ffect</b>                    compute confidence interval for treatment
                                    effect
<p>
    SE/Bootstrap
      <b>vce(</b><i><u>ana</u></i><i>lytic</i>|<i><u>boot</u></i><i>strap</i><b>)</b>     compute analytic or bootstrapped standard err
&gt; ors; <b>vce(</b><i>analytic</i><b>)</b>  is the default.
<p>
    Reporting
      <b><u>lev</u></b><b>el(</b><i>#</i><b>)</b>                    set confidence level; default is <b>level(</b><i>95</i><b>)</b>
    -------------------------------------------------------------------------
    <b>pweights</b> (default), <b>fweights</b>, and <b>iweights</b> are allowed, <b>aweights</b> are not
      allowed; see weight. Observations with negative weight are skipped for
      any weight type.
    <b>bootstrap</b> is allowed, <b>by</b> and <b>svy</b> are not allowed; see prefix.
<p>
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>leebounds</b> computes treatment effect bounds for samples with non-random
    sample selection/attrition as proposed by Lee (2009). The lower and upper
    bound, respectively, correspond to extreme assumptions about the missing
    information that are consistent with the observed data. As opposed to
    parametric approaches to correcting for sample selection bias, such as
    the classical Heckman (1979) estimator, Lee (2009) bounds rest on very
    few assumptions, i.e. random assignment of treatment and monotonicity.
    Monotonicity means that the treatment status affects selection in just
    one direction. That is, receiving a treatment makes selection either more
    or less likely for any observation. In technical terms, the approach
    rests on a trimming procedure. Either from below or from above, the group
    (treatment, control) that suffers less from sample attrition is trimmed
    at the quantile of the outcome variable that corresponds to the share of
    'excess observations' in this group. Calculating group differentials in
    mean outcome yields the lower and the upper bound, respectively, for the
    treatment effect depending on whether trimming is from below or above.
    <b>leebounds</b> assumes that it is unknown, a priori, which group (treatment,
    control) is subject to the higher selection probability and estimates
    this from data (see Lee, 2009:1090).
<p>
<p>
<b><u>Outcome and treatment</u></b>
<p>
        +-------+
    ----+ Model +------------------------------------------------------------
<p>
    <b>depvar</b> specifies the outcome variable.
<p>
    <b>treatvar</b> specifies a binary variable, indicating receipt of treatment.
        Estimating the effect of <i>treatvar</i> on<i> depvar</i> is subject of the
        empirical analysis. The lager value of <i>treatvar</i> is assumed to
        indicate treatment.
<p>
<p>
<a name="options"></a><b><u>Options</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
<p>
    <b>select(</b><i>varname</i><b>)</b> specifies a binary selection indicator. <i>treatvar</i> my only
        take the value zero or unity. If no selction indicator <i>varname</i> is
        specified, any observation with non-missing information on <i>depvar</i> is
        assumed to be selected while all observations with missing
        information on <i>depvar</i> are assumed to be not selected.
<p>
    <b>tight(</b><i>varlist</i><b>)</b> specifies a list of covariates for computing tightened
        bounds. With <b>tight()</b> specified, the sample is splitted into into
        cells defined by the covariates in <i>varlist</i>. Trimmed means are
        calculated separately for each cell, where the trimming proportion is
        specific to each cell. Finally, a weighted average of trimmed means
        is calculated.  Continuous variables may, hence, not enter <i>varlist</i>
        without afore being converted to categorical variables. Specifying to
        many cells by including numerous variables in <i>varlist</i>, or by
        including variables that take numerous different values, will cause
        error.
<p>
    <b>cieffect</b> requests calculation of a confidence interval for the treatment
        effect. Note that this interval is narrower than the conjunction of
        confidence intervals for the estimated bounds (see Lee, 2009:1089;
        Imbens and Manski, 2004). This interval captures both, uncertainty
        about the bias due to non-random sample attrition and uncertainty
        because of sampling error.
<p>
        +--------------+
    ----+ SE/Bootstrap +-----------------------------------------------------
<p>
    <b>vce(</b><i>analytic</i>|<i>bootstrap</i><b>)</b> specifies whether analytic or bootstrapped
        standard errors are calculated for estimated bounds. <i>analytic</i> is the
        default. <i>bootstrap</i> allows for the suboptions <b><u>r</u></b><b>eps(</b><i>#</i><b>)</b> and <b>nodots</b>; see
        bootstrap. For <b>vce(</b><i>analytic</i><b>)</b> the covariance for the estimated lower
        and upper bound is not computed. If this covariance is of relevance,
        one should choose <b>vce(</b><i>bootstrap</i><b>)</b>.  Instead of specifying
        <b>vce(</b><i>bootstrap</i><b>)</b> one may alternatively use the prefix command
        <b>bootstrap</b>, which allows for numerous additional options.  Yet
        <b>leebounds</b>' internal bootstrapping routine is much faster than the
        prefix command, allows for sampling weights by performing a weighted
        bootstrap, and makes the option <b>cieffect</b> use bootstrapped standard
        errors, too.
<p>
        +-----------+
    ----+ Reporting +--------------------------------------------------------
<p>
    <b>level(</b><i>#</i><b>)</b>; see <b>[R] estimation options</b>. One may change the reported
        confidence level by retyping <b>leebounds</b> without arguments and only
        specifying the option <b>level(</b><i>#</i><b>)</b>. However, this affects only the
        confidence interval for the bounds, but not for the confidence
        interval requested with <b>cieffect</b>.
<p>
<p>
<b><u>Examples</u></b>
<p>
    Basic syntax
        <b>. leebounds wage training</b>
<p>
    Tightened Lee bounds with weighted bootstrap and treatment
    effect-confidence interval
        <b>. leebounds wage training [pw=1/prob], select(wageinfo) tight(female</b>
            <b>immigrant) cieffect vce(boot, reps(250) nodots)</b>
<p>
<p>
<b><u>Saved results</u></b>
<p>
    <b>leebounds</b> saves the following in <b>e()</b>:
<p>
    Scalars        
      <b>e(N)</b>                number of observations
      <b>e(Nsel)</b>             number of selected observations
      <b>e(trim)</b>             (overall) trimming proportion
      <b>e(cells)</b>            number of cells (only saved for <b>tight()</b>)
      <b>e(cilower)</b>          lower bound of treatment effect-confidence interval
                            (only saved for <b>cieffect</b>)
      <b>e(ciupper)</b>          upper bound of treatment effect-confidence interval
                            (only saved for <b>cieffect</b>)
      <b>e(level)</b>            confidence level
      <b>e(N_reps)</b>           number of bootstrap repetitions (only saved for
                            <b>vce(</b><i>bootstrap</i><b>)</b>)
<p>
    Macros         
      <b>e(cmd)</b>              <b>leebounds</b>
      <b>e(cmdline)</b>          command as typed
      <b>e(title)</b>            <b>Lee (2009) treatment effect bounds</b>
      <b>e(vce)</b>              either <b>analytic</b> or <b>bootstrap</b>
      <b>e(vcetype)</b>          <b>Bootstrap</b> for <b>vce(</b><i>bootstrap</i><b>)</b>
      <b>e(depvar)</b>           <i>depvar</i>
      <b>e(treatment)</b>        <i>treatvar</i>
      <b>e(select)</b>           <i>varname</i> (only saved for <b>select()</b>)
      <b>e(cellsel)</b>          cell-specific selection pattern, either <b>homo</b>, or
                            <b>hetero</b> (only saved for <b>tight()</b>)
      <b>e(covariates)</b>       <i>varlist</i> (only saved for <b>tight()</b>)
      <b>e(trimmed)</b>          either <b>treatment</b> or <b>control</b>
      <b>e(wtype)</b>            either <b>pweight</b>, <b>fweight</b>, or <b>iweight</b> (only saved if
                            weights are specified)
      <b>e(wexp)</b>             =<i> exp</i> (only saved if weights are specified)
      <b>e(properties)</b>       <b>b V</b>
<p>
    Matrices       
      <b>e(b)</b>                <i>1x2</i> vector of estimated treatment effect bounds
                            (<i>colnames</i> are of the form<i> treatvar:lower</i> and
                            <i>treatvar:upper</i>)
      <b>e(V)</b>                <i>2x2</i> variance-covariance matrix for estimated
                            treatment effect bounds (covariance set to zero
                            for <b>vce(</b><i>analytic</i><b>)</b>)
<p>
    Functions      
      <b>e(sample)</b>           marks estimation sample
<p>
<p>
<b><u>References</u></b>
<p>
    Heckman, J.J. (1979). Sample Selection Bias as a Specification Error.
    <i>Econometrica</i> 47, 153–161.
<p>
    Imbens, G.W. and C.F. Manski (2004). Confidence Intervals for Partially
    Identified Parameters.<i>  Econometrica</i> 72, 1845–1857.
<p>
    Lee, D.S. (2009). Training, Wages, and Sample Selection: Estimating Sharp
    Bounds on Treatment Effects.<i>  Review of Economic Studies</i> 76, 1071–1102.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] heckman</b>
<p>
      Help:  <b>[R] heckman</b>
<p>
    Online:  <b>bpbounds</b>, <b>bpboundsi</b>, <b>mhbounds</b>
 
<p>
<p>
<b><u>Author</u></b>
<p>
    Harald Tauchmann
    Rheinisch-Westfälisches Institut für Wirtschaftsforschung (RWI)
    Essen, Germany
    E-mail: harald.tauchmann@rwi-essen.de
<p>
<p>
<b><u>Disclaimer</u></b>
 
    This software is provided "as is" without warranty of any kind, either
    expressed or implied. The entire risk as to the quality and performance
    of the program is with you. Should the program prove defective, you
    assume the cost of all necessary servicing, repair or correction. In no
    event will the copyright holders or their employers, or any other party
    who may modify and/or redistribute this software, be liable to you for
    damages, including any general, special, incidental or consequential
    damages arising out of the use or inability to use the program.
 
<p>
<p>
<b><u>Acknowledgements</u></b>
<p>
    This work has been supported in part by the Collaborative Research Center
    "Statistical Modelling of Nonlinear Dynamic Processes" (SFB 823) of the
    German Research Foundation (DFG).
</pre>
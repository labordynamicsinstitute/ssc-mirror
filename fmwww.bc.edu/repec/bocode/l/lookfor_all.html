<pre>
<b>help lookfor_all</b>             <b> Michael Lokshin, Zurab Sajaia, and Dan Blanchette</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
<p>
       <b>lookfor_all</b> -- Searches for variables/patterns in Stata data files
 (.dta)
<p>
<p>
<b><u>Syntax</u></b>
<p>
    Searching within current directory
<p>
        <b>lookfor_all</b> <i>pattern</i>[<i>pattern</i> [...]] [<b>,</b> <i>options</i>]
<p>
    where <i>pattern</i> is a word that could be a name (or part of the name) of the
    variable and/or a word (or part of a word) in the variable label or value
    label name or value label if the <b>vlabs</b> option is specified or a word (or
    part of a word) in a note attached to the dataset or a word (or part of a
    word) in a note attached to a variable if the <b>notes</b> option is specified.
    <b>lookfor_all</b> only does case insensitive searches so searching for "test"
    may find "Test", "TEST", or "tESt" as well as "test".
<p>
    Searching within current directory and subdirectories
<p>
        <b>lookfor_all</b> <i>pattern</i>[<i>pattern</i> [...]] [<b>, subdir</b> <i>options</i>]
<p>
<p>
<a name="options"></a>    <i>options</i>            Description
    -------------------------------------------------------------------------
    Main
<p>
      <b><u>dir</u></b><b>ectory(</b><i>path</i><b>)</b>  an option to specify the root directory where to
                         search
      <b><u>sub</u></b><b>dir</b>           an option for searching subdirectories
      <b><u>d</u></b><b>escribe</b>         an option to format the output
      <b><u>code</u></b><b>book</b>         another option to format the output
      <b><u>vl</u></b><b>abs</b>            also search value label names and value labels
      <b><u>not</u></b><b>es</b>            also search patterns in dataset notes and variable
                         notes
      <b><u>dn</u></b><b>otes</b>           also search patterns in dataset notes
      <b><u>vn</u></b><b>otes</b>           also search patterns in variable notes
<p>
    Advanced
<p>
      <b><u>maxd</u></b><b>epth(</b><i>integer &gt; 1</i><b>)</b>
                         an option to specify how far down a directory tree
                         to search
      <b><u>maxv</u></b><b>var(</b><i>integer</i><b>)</b> an option for Stata SE or Stata MP users to allow
                         <b>lookfor_all</b> to open a dataset with up to 32,767
                         variables
      <b><u>dirf</u></b><b>ilter(</b><i>regular expression</i><b>)</b>
                         an option to specify a regular expression pattern
                         that the subdirectory name has to satisfy in order
                         to search files in that directory.
      <b><u>f</u></b><b>ilter(</b><i>regular expression</i><b>)</b>
                         an option to specify a regular expression pattern
                         that the file name has to satisfy in order to search
                         the file.
<p>
<b><u>Description</u></b>
<p>
    <b>lookfor_all</b> is an extension of the Stata program <b>lookfor</b>.  <b>lookfor_all</b>
    searches through all Stata data files in a current directory and
    subdirectories for the variable(s) with at least one of the specified
    patterns.  Each <i>pattern</i> could be a part/whole variable name and/or a word
    (part of the word) in the variable label.  <b>lookfor_all</b> outputs the list
    of data files where the <i>pattern</i> was found and the list of variables
    within every data file that match the <i>pattern</i>.  The files listed are
    clickable.  By clicking on the file, Stata loads that data file into
    memory.  <b>lookfor_all</b> can also search a directory other than the current
    directory by specifying the <b><u>dir</u></b><b>ectory(</b><i>path</i><b>)</b> option for a search.
<p>
<b><u>Options</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b><u>dir</u></b><b>ectory(</b><i>path</i><b>)</b> specifies the <i>path</i> where <b>lookfor_all</b> should start
        searching.  By default <b>lookfor_all</b> searches files in the current
        directory.
<p>
    <b><u>sub</u></b><b>dir</b> if specified <b>lookfor_all</b> searches through all Stata data files
        (<b>.dta</b>) in the current directory and subdirectories or the specified
        directory and its subdirectories.  If this option is not specified
        <b>lookfor_all</b> searches only within the files in the current directory
        or the specified directory.
<p>
    <b><u>d</u></b><b>escribe</b> controls the way the variables that match the <i>pattern</i> are
        outputted.  By default <b>lookfor_all</b> outputs the variables following
        the name of the data file they are in.  Specifying <b><u>d</u></b><b>escribe</b> makes
        Stata run the <b>describe</b> command on the variables that were found.  You
        can control the output using the options of the Stata command 
        <b>describe</b>.  These options are <b>simple short details fullname numbers</b>.
<p>
    <b><u>code</u></b><b>book</b> controls the way the variables that match the <i>pattern</i> are
        outputted.  Specifying <b><u>code</u></b><b>book</b> makes Stata run the <b>codebook</b> command
        on the variables that were found.  The output will be the number of
        unique observations, mean, minimum, maximum and the label of the
        matching variables.  You can control the output using the options of
        the Stata command <b>codebook</b>.
<p>
    <b><u>vl</u></b><b>abs</b> if specified <b>lookfor_all</b> will also search through the value label
        names and value labels.
<p>
<b>notes</b>
if specified <b>lookfor_all</b> will also search through the notes attached to dataset
&gt; s and variable notes.  Using this option is
the same as specifying both options: <b><u>dn</u></b><b>otes</b> and <b><u>vn</u></b><b>otes</b>{p_end}
<p>
<b><u>dn</u></b><b>otes</b>
if specified <b>lookfor_all</b> will also search through the notes attached to dataset
&gt; s.{p_end}
<p>
<b><u>vn</u></b><b>otes</b>
if specified <b>lookfor_all</b> will also search through the notes attached to variabl
&gt; es.{p_end}
<p>
        +----------+
    ----+ Advanced +---------------------------------------------------------
<p>
    <b><u>maxd</u></b><b>epth(</b><i>integer &gt; 1</i><b>)</b> if specified <b>lookfor_all</b> will only search through
        all Stata data files (<b>.dta</b>) as far down as the positive integer value
        that is specified.  If <b>subdir</b> is not specified and <b>maxdepth</b> is, then
        it is assumed subdirectories should be searched.
<p>
    <b><u>maxv</u></b><b>var(</b><i>integer 4000</i><b>)</b> if specified and you are using Stata SE or MP,
        <b>lookfor_all</b> will temporarily set <b>maxvar</b> to whatever positive integer
        is specified.  The maximum value is 32767.  This allows <b>lookfor_all</b>
        to search a dataset that contains more variables than <b>maxvar</b> is
        currently set to be able to open.  Changing the setting of <b>maxvar</b>
        will stop the<b> page up</b> key from being able to access command history.
        So if you set <b>maxvar</b> to some high value (up to 32767) yourself before
        running <b>lookfor_all</b>, <b>lookfor_all</b> will not need to set it and you will
        be able to access your command history with the<b> page up</b> key after
        running <b>lookfor_all</b>.
<p>
    <b><u>dirf</u></b><b>ilter(</b><i>regular expression</i><b>)</b> if specified <b>lookfor_all</b> will only search
        through all Stata data files (<b>.dta</b>) in the current directory or
        specified directory and only subdirectories that satisfy the regular
        expression pattern.
<p>
    <b><u>f</u></b><b>ilter(</b><i>regular expression</i><b>)</b> if specified <b>lookfor_all</b> will only search
        through Stata data files (<b>.dta</b>) that satisfy the regular expression
        pattern.
<p>
<p>
<b><u>Examples of searching within the current directory</u></b>
<p>
    <b>. lookfor_all edu</b>
<p>
    <b>. lookfor_all edu, describe simple</b>
<p>
    <b>. lookfor_all edu, de short</b>
<p>
<p>
<b><u>Examples of searching the current directory and sub-directories</u></b>
<p>
    <b>. lookfor_all edu, sub</b>
<p>
    <b>. lookfor_all edu, maxdepth(3) de fullnames</b>
<p>
    <b>. lookfor_all edu, sub codebook vlabs</b>
<p>
    <b>. lookfor_all edu, dirfilter(data) codebook</b>
<p>
<p>
<p>
<b><u>Examples of searching the specified directory</u></b>
<p>
    <b>. lookfor_all edu, sub de dir("c:\data\")</b>
<p>
    <b>. lookfor_all edu, sub de dir("c:\data\") filter(^wave1)</b>
<p>
<p>
<b><u>Authors</u></b> 
<p>
    Zurab Sajaia
    The World Bank
    zsajaia@@hotmail.com
<p>
    Michael Lokshin
    The World Bank
    mlokshin@@worldbank.org
<p>
    Dan Blanchette
    The Carolina Population Center
    University of North Carolina - Chapel Hill, USA
    dan_blanchette@unc.edu
<p>
<p>
<b><u>Note</u></b> 
Useful suggestions and feedback by Phil Bardsley and Michael Norman Mitchell ar
&gt; e gratefully acknowledged.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online: <b>lookfor</b>, <b>describe</b>, and <b>codebook</b>
<p>
</pre>
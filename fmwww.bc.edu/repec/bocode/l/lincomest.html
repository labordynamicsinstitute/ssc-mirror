<pre>
-------------------------------------------------------------------------------
help for <b>lincomest</b>                                               (Roger Newson)
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Linear combinations of estimators saved as estimation results</u></b>
<p>
        <b>lincomest</b> [<i>exp</i>] [ <b>,</b> <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <b><u>ef</u></b><b>orm(</b><i>string</i><b>)</b> <b><u>ho</u></b><b>ldname(</b><i>holdname</i><b>)</b> ]
<p>
    where <i>holdname</i> is a name under which any pre-existing estimation results
    will be held, and <i>exp</i> is any linear combination of coefficients that is
    valid syntax for <b>test</b>.  Note, however, that <i>exp</i> must not contain any
    additive constants or equal signs.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>lincomest</b> is an extension to <b>lincom</b>, which calculates confidence
    intervals and <i>P</i>-values for linear combinations of model coefficients.
    <b>lincomest</b> saves the estimate and variance of the linear combination as
    estimation results, with the option of saving the existing estimation
    results to be recalled by <b>_estimates unhold</b> or by <b>estimates restore</b>.  The
    advantage of doing this is that the linear combination can be output by
    <b>estimates table</b>, or input to <b>parmest</b> to create an output dataset (or
    resultsset) with one observation containing a confidence interval and
    <i>P</i>-value for the linear combination.  This dataset can be concatenated
    with other <b>parmest</b> output datasets using <b>dsconcat</b>, and the confidence
    intervals and/or <i>P</i>-values can then be plotted and/or tabulated.
<p>
<p>
<b><u>Options</u></b>
<p>
<b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for confidence intervals;
    see help for <b>level</b>.
<p>
<b>eform(</b><i>string</i><b>)</b> specifies that the linear combination and its confidence limits
    must be reported in exponentiated form, as <b>exp(b)</b> rather than <b>b</b>, and
    labelled by the <i>string</i>.  If <b>eform()</b> is not specified, then the linear
    combination is reported in unexponentiated form, unless the last estimation
    command was <b>logistic</b>, in which case the linear combination is reported in
    exponentiated form, with the <b>eform()</b> option set to <b>"Odds ratio"</b>.  Whether
    or not <b>eform()</b> is specified, <b>lincomest</b> always stores the unexponentiated
    estimates in the <b>estimation results</b>.
<p>
<b>holdname(</b><i>holdname</i><b>)</b> specifies that the existing estimation results are to be
    stored under the name of <i>holdname</i>.  They can then be restored by <b>_estimates</b>
    <b>unhold</b>.  The <b>holdname()</b> option was inherited from the Stata 7 version of
    <b>lincomest</b>, and is retained mainly so that old do-files will still work.
    Under Stata version 8 or above, the preferred way of storing the old
    estimation results is <b>estimates store</b>, and the preferred way of restoring
    them is <b>estimates restore</b>.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    <b>lincomest</b> is intended to be used with <b>parmest</b>, which saves the current
    estimation results as an output dataset (or resultsset) with one
    observation per parameter of the most recently fitted model.  This new
    dataset is used to create tables and/or plots of confidence intervals
    and/or <i>P</i>-values.  Other programs that are very useful with <b>parmest</b> are 
    <b>dsconcat</b>, <b>descsave</b>, <b>factext</b> and <b>sencode</b>.  The latest versions of all
    these programs can be installed from SSC, using the <b>ssc</b> command.  For
    more information about the use of <b>parmest</b> resultssets, see Newson (2003),
    Newson (2004) and Newson (2006).
<p>
<p>
<b><u>Examples</u></b>
<p>
    The following example will work with the <b>auto</b> data if <b>parmest</b> and 
    <b>dsconcat</b> are installed.  It will create a dataset of confidence intervals
    of the parameters corresponding to values of the factor <b>rep78</b>.
<p>
                . tempfile tf1 tf2
                . xi:regress mpg i.rep78
                . parmest,label saving(`tf1',replace)
                . lincomest (_Irep78_2+_Irep78_3+_Irep78_4+_Irep78_5)/4
                . parmest,label saving(`tf2',replace)
                . dsconcat `tf1' `tf2'
                . list parm label estimate min95 max95 p
<p>
    The following example demonstrates the use of <b>lincomest</b> with <b>parmest</b> and
    the <b>estimates</b> utility.  It will save estimates, confidence limits and
    <i>P</i>-values for a ratio of odds ratios, and then restore the original
    estimation results to be printed again.
<p>
                . logit foreign length weight
                . estimates store oldest
                . lincomest 30*length-1000*weight,eform(OR)
                . parmest,label saving(lincom1.dta,replace) eform
                . estimates restore oldest
                . logit,or
<p>
<p>
<b><u>Saved results</u></b>
<p>
    <b>lincomest</b> saves the following in <b>e()</b>:
<p>
    Scalars        
      <b>e(N)</b>                number of observations
      <b>e(N_clust)</b>          number of clusters
      <b>e(df_r)</b>             residual degrees of freedom
      <b>e(N_strata)</b>         number of strata
      <b>e(N_psu)</b>            number of sampled PSUs
      <b>e(deff)</b>             DEFF result
      <b>e(deft)</b>             DEFT result
      <b>e(meft)</b>             MEFT result
<p>
    Macros         
      <b>e(cmd)</b>              <b>lincomest</b>
      <b>e(cmdline)</b>          command as typed
      <b>e(depvar)</b>           name of dependent variable
      <b>e(predict)</b>          program called by <b>predict</b> (<b>lincomest_p</b>)
      <b>e(formula)</b>          linear combination expression
      <b>e(holdname)</b>         <b>holdname()</b> option
      <b>e(properties)</b>       <b>b V</b>
<p>
    Matrices       
      <b>e(b)</b>                coefficient vector
      <b>e(V)</b>                variance-covariance matrix of the estimators
<p>
    Functions      
      <b>e(sample)</b>           marks estimation sample
<p>
    The scalar results <b>e(N_strata)</b>, <b>e(N_psu)</b>, <b>e(deff)</b>, <b>e(deft)</b> and <b>e(meft)</b>
    are only returned if the previous estimation command was a survey
    command, and are equal to the scalar results of the same names returned
    in <b>r()</b> by <b>lincom</b> after survey commands.  The program <b>lincomest_p</b>, called
    by <b>predict</b> after <b>lincomest</b>, tells the user that <b>predict</b> should not be
    used after <b>lincomest</b>.
<p>
    All of these estimation results can be stored as variables in a <b>parmest</b>
    output dataset (or resultsset) if the user specifies the <b>emac()</b>, <b>escal()</b>,
    <b>evec()</b>, <b>erows()</b> and/or <b>ecols()</b> options of <b>parmest</b>.  They can also be
    tabulated using <b>estimates table</b>.
<p>
<p>
<b><u>Author</u></b>
<p>
    Roger Newson, Imperial College London, UK.  Email:
    r.newson@imperial.ac.uk
<p>
<p>
<b><u>References</u></b>
<p>
    Newson, R.  2003.  Confidence intervals and <i>p</i>-values for delivery to the
        end user.  <i>The Stata Journal</i> 3(3): 245-269.  Also downloadable from
        Roger Newson's website at http://www.imperial.ac.uk/nhli/r.newson.
<p>
    Newson, R.  2004.  From datasets to resultssets in Stata.  Presented at
        the 10th United Kingdom Stata Users' Group Meeting, London, 29 June,
        2004.  Also downloadable from Roger Newson's website at
        http://www.imperial.ac.uk/nhli/r.newson.
<p>
    Newson, R.  2006.  Resultssets, resultsspreadsheets and resultsplots in
        Stata.  Presented at the 4th German Stata User Meeting, Mannheim, 31
        March, 2006.  Also downloadable from Roger Newson's website at
        http://www.imperial.ac.uk/nhli/r.newson.
<p>
<p>
<b><u>Also see</u></b>
<p>
 Manual:  <b>[R] lincom</b>, <b>[R] xi</b>, <b>[P] estimates</b>, <b>[U] 20 Estimation and</b>
          <b>post-estimation commands</b>
On-line:  help for <b>lincom</b>, <b>estimates</b>, <b>_estimates</b>, <b>xi</b>
          help for <b>descsave</b>, <b>dsconcat</b>, <b>factext</b>, <b>metaparm</b>, <b>parmest</b>, <b>sencode</b> if
          installed
</pre>
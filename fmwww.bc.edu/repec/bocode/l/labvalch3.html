<pre>
<b>help labvalch3</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
     <b>labvalch3</b> -- Change text in value labels
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>labvalch3</b> [<i>lblname-list</i>] <b>,</b> <i>transformation-option</i> [ <i>options</i> ]
<p>
<p>
    <i>options</i>                Description
    -------------------------------------------------------------------------
    <i>transformation-options</i>
      <b><u>u</u></b><b>pper</b>                change value labels to uppercased characters
      <b><u>l</u></b><b>ower</b>                change value labels to lowercased characters
      <b><u>pre</u></b><b>fix(</b><i>stub</i><b>)</b>         prefix value labels with <i>stub</i>
      <b><u>suff</u></b><b>ix(</b><i>stub</i><b>)</b>         suffix value labels with <i>stub</i>
      <b><u>sub</u></b><b>st(</b><i>this that</i><b>)</b>     in value labels change <i>this</i> to <i>that</i>
      <b><u>bef</u></b><b>ore(</b><i>before</i><b>)</b>       remove <i>before</i> and any text following
      <b><u>aft</u></b><b>er(</b><i>after</i><b>)</b>         remove <i>after</i> and any text preceding
      <b><u>noexc</u></b><b>lude</b>            do not remove <i>before</i> or <i>after</i>
      <b>strfcn(</b><i>strfcn</i><b>(</b><i>args</i><b>))</b> apply string function <i>strfcn</i><b>(</b><i>args</i><b>)</b> to value labels
      <b><u>sy</u></b><b>mbol(</b><i>char</i><b>)</b>         use <i>char</i> as placeholder in <i>args</i>.
<p>
    <i>selection-options</i>
      <b><u>val</u></b><b>id(</b><i>numlist</i><b>)</b>       change value labels associated with valid numbers
      <b><u>inv</u></b><b>alid(</b><i>numlist</i><b>)</b>     do not change value labels associated with invalid
                             numbers
    -------------------------------------------------------------------------
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>labvalch3</b> changes text in value labels specified in <i>lblname-list</i>. If
    <i>lblname-list</i> is not specified, all value labels in memory are changed.
<p>
    If more than one transformation option is specified, <b>labvalch3</b> applies
    options in the following order.
<p>
        1. <i>before</i> or <i>after</i> select text
        2. all occurrences of <i>this</i> are changed to <i>that</i>
        3. value labels are changed to upper- or lowercased characters
        4. string function <i>strfcn</i><b>(</b><i>args</i><b>)</b> is applied
        5. prefix and/or suffix is added
<p>
    <b>Reminder:</b> modifiactions affect all variables that have the same value
    label as one of the value labels (or variables - see Remarks) in
    <i>lblname-list</i> attached.
<p>
<p>
<b><u>Options</u></b>
<p>
        +------------------------+
    ----+ Transformation options +-------------------------------------------
<p>
    <b>upper</b> changes value labels to uppercased characters. May not be specified
        with <b>lower</b>.
<p>
    <b>lower</b> changes value labels to lowercased characters. May not be specified
        with <b>upper</b>.
<p>
    <b>prefix(</b><i>stub</i><b>)</b> prefixes value labels with <i>stub</i>. May be combined with
        <b>suffix()</b>.
<p>
    <b>suffix(</b><i>stub</i><b>)</b> suffixes value labels with <i>stub</i>. May be combined with
        <b>prefix()</b>.
<p>
    <b>subst(</b><i>this that</i><b>)</b> substitutes all occurrences of <i>this</i> in value labels with
        <i>that</i>. Use double quotes if <i>this</i> or <i>that</i> contain embedded spaces. <i>that</i>
        may be empty (<b>""</b>), meaning remove <i>this</i>. Value labels in which <i>this</i> is
        not found are left unchanged.
<p>
    <b>before(</b><i>before</i><b>)</b> removes <i>before</i> and any text following from value labels.
        Thus, value labels will be changed to contain any text preceding
        <i>before</i>. Value labels in which <i>before</i> is not found are left unchanged.
        May not be specified with <b>after</b>.
<p>
    <b>after(</b><i>after</i><b>)</b> removes <i>after</i> and any text preceding from value labels.
        Thus, value labels will be changed to contain any text following
        <i>after</i>. Value labels in which <i>after</i> is not found are left unchanged.
        May not be specified with <b>before</b>.
<p>
    <b>noexclude</b> prevents <b>labvalch3</b> from removing <i>before</i> or <i>after</i> from value
        labels. Specifying <b>before(e) noexclude</b> will change value label
        <b>Domestic</b> to <b>Dome</b>. Specifying <b>before(e)</b> will change value label
        <b>Domestic</b> to <b>Dom</b>.
<p>
    <b>strfcn(</b><i>strfcn</i><b>(</b><i>args</i><b>))</b> applies any string function to value labels. In <i>args</i>
        use placeholder <b>@</b> to refer to value labels. The general from of this
        option is <b>strfcn(</b><i>strfcn</i><b>("@"</b> [<b>,</b> <i>args</i>]<b>))</b>.
<p>
    <b>symbol(</b><i>char</i><b>)</b> uses <i>char</i> as placeholder for value labels in <i>args</i>. Default
        placeholder is <b>@</b>. May only be specified with <b>strfcn</b>.
<p>
        +-------------------+
    ----+ Selection Options +------------------------------------------------
<p>
    <b>valid(</b><i>numlist</i><b>)</b> changes value labels associated with numbers specified in
        <i>numlist</i>.
<p>
    <b>invalid(</b><i>numlist</i><b>)</b> does not change value labels associated with numbers
        specified in <i>numlist</i>.
<p>
<a name="r"></a><p>
<b><u>Remarks</u></b>
<p>
    Also this is no longer shown in the syntax diagram, <i>lblname-list</i> is
    actually <i>namelist</i> and allows variable names. Thus, the syntax diagram
    reads
<p>
        <b>labvalch3</b> [<i>lblname-list</i>|<i>varlist</i>] <b>,</b> <i>transformation-option</i> [ <i>options</i> ]
<p>
    The reason this is no longer shown, is that specifying variable names to
    refer to value label names violates Stata conventions. If variable <b>foo</b>
    has value label <b>foobar</b> attached, specifying <b>foo</b> in <i>varlist</i>, modifies
    value label <b>foobar</b>. The modifications also affect variable <b>bar</b>, if <b>bar</b>
    has value label <b>foobar</b> attached. I thank Daniel Possenriede for bringing
    this to may attention again.
<p>
<p>
<b><u>Examples</u></b>
<p>
        <b>. sysuse auto</b>
        <b>. labvalch3 origin ,suffix(" Automobile")</b>
        <b>. labvalch3 foreign ,subst("Automobile" "Car")</b>
        <b>. labvalch3 ,upper</b>
        <b>. labvalch3 ,strfcn(proper("@"))</b>
        <b>. labvalch3 origin ,before(e) valid(1)</b>
<p>
        
<b><u>Acknowledgments</u></b>
<p>
    This ado was suggested by Dimitriy V. Masterov on Statalist.
<p>
    The name <b>labvalch3</b> is in line with <b>labvalch</b> from <b>labutil</b> package (see
    labutil) by Nick Cox, who also originated the tranformation options in
    his <b>labvarch</b>.
<p>
    Number 3 is chosen as a follow up on the ad hoc solution <b>labvalch2</b> by
    Eric Booth (available under the link above). Also, <b>labvalch3</b> changes the
    third element in label define <i>lblname</i> # <i>label</i>.
<p>
<p>
<b><u>Author</u></b>
<p>
    Daniel Klein, University of Kassel, klein.daniel.81@gmail.com
<p>
<b><u>Also see</u></b>
<p>
<p>
    Online: label, string functions
<p>
    if installed: labvalch, labnoeq, strrec, labvarch, labutil2
</pre>
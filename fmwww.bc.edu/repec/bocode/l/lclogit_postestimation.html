<pre>
<p>
<b>help lclogit postestimation</b>                                                    
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>lclogit postestimation</b> --  Postestimation tools for lclogit
<p>
<b><u>Description</u></b>
<p>
    <b>lclogitpr</b> predicts the probabilities of choice and class membership after
    <b>lclogit</b>.
<p>
    <b>lclogitcov</b> predicts the implied covariances of choice model coefficients
    after <b>lclogit</b>.
<p>
    <b>lclogitml</b> passes active <b>lclogit</b> estimates to <b>gllamm</b>.
<p>
<a name="lclogitpr"></a><b><u>Syntax</u></b>
<p>
        <b>lclogitpr</b> [<i>type</i>] <i>stubname</i> [<i>if</i>] [<i>in</i>] [, <b><u>cl</u></b><b>ass(</b><i>numlist</i><b>)</b> <b>pr0</b> <b>pr</b> <b>up</b> <b>cp</b> ]
<p>
<b><u>Description</u></b>
<p>
    <b>lclogitpr</b> predicts the probabilities of choosing each alternative in a
    choice situation (choice probabilities hereafter), the class shares or
    prior probabilities of class membership and the posterior probabilities
    of class membership. The predicted probabilities are stored in a set of
    variables named <i>stubname</i># where # refers to the relevant class number;
    the only exception is the unconditional choice probability as it is
    stored in a varable named <i>stubname</i>.
<p>
    The command assumes <b>pr</b> when no other option is specified.
<p>
<b><u>Options for lclogitpr</u></b>
<p>
    <b>class(</b><i>numlist</i><b>)</b> specifies the classes for which the probabilities are
        going to be predicted. The default setting assumes all classes.
<p>
    <b>pr0</b> predicts the unconditional choice probability, which equals the
        average of the class-specific choice probabilities weighted by the
        corresponding class shares.
<p>
    <b>pr</b> predicts the unconditional choice probability and the choice
        probabilities conditional on being in particular classes. This is the
        default option when no other option is specified.
<p>
    <b>up</b> predicts the class shares or prior probabilities that the agent is in
        particular classes. They correspond to the class shares predicted by
        using the class memberhsip model coefficient estimates.
<p>
    <b>cp</b> predicts the posterior probabilities that the agent is in particular
        classes taking into account her sequence of choices.
<p>
<a name="lclogitcov"></a><b><u>Syntax</u></b>
<p>
        <b>lclogitcov</b> <i>varlist</i> [<i>if</i>] [<i>in</i>] [, <b><u>no</u></b><b>keep</b> <b><u>var</u></b><b>name(</b><i>stubname</i><b>)</b>
               <b><u>cov</u></b><b>name(</b><i>stubname</i><b>)</b> <b><u>mat</u></b><b>rix(</b><i>name</i><b>)</b> ]
<p>
<b><u>Description</u></b>
<p>
    <b>lclogitcov</b> predicts the implied variances and covariances of choice model
    coefficients using <b>lclogit</b> or <b>lclogitml</b> estimates; see Hess et al. (2011)
    for details. They could be a useful tool for studying the underlying
    pattern of tastes.
<p>
    The defaulting setting stores the predicted variances in a set of
    variables named var_1, var_2, ... where var_k is the predicted variance
    of the coefficient on the kth variable listed in <i>varlist</i>, and the
    predicted covariances in cov_12, cov_13, ..., cov23, ... where cov_kj is
    the predicted covariance between the coefficients on the kth variable and
    the jth variable in <i>varlist</i>.
<p>
    The averages of these variance and covariances across agents (as
    identified by id() in <b>lclogit</b>) in the prediction sample are reported as a
    covariance matrix at the end of <b>lclogitcov</b>'s execution.
<p>
<b><u>Options for lclogitcov</u></b>
<p>
    <b>nokeep</b> drops the predicted variances and covariances from the data set at
        the end of the command's execution. The average covariance matrix is
        still displayed.
<p>
    <b>varname(</b><i>stubname</i><b>)</b> requests the predicted variances to be stored as
        <i>stubname</i>1,<i>stubname</i>2,....
<p>
    <b>covname(</b><i>stubname</i><b>)</b> requests the predicted covariances to be stored as
        <i>stubname</i>12,<i>stubname</i>13,....
<p>
    <b>matrix(</b><i>name</i><b>)</b> stores the reported average covariance matrix in a Stata
        matrix called <i>name</i>.
<p>
<a name="lclogitml"></a><b><u>Syntax</u></b>
<p>
        <b>lclogitml</b> [<i>if</i>] [<i>in</i>] [, <b><u>iter</u></b><b>ate(</b>#<b>)</b> <b><u>l</u></b><b>evel(</b>#<b>)</b> <b><u>nopo</u></b><b>st</b> <b><u>swit</u></b><b>ch</b>
               <i>compatible_gllamm_options</i> ]
<p>
<b><u>Description</u></b>
<p>
    <b>lclogitml</b> is a wrapper for Sophia Rabe-Hesketh's <b>gllamm</b> (findit gllamm)
    which uses the <b>ml d0</b> method to estimate generalised linear latent class
    and mixed models including the latent class conditional logit model. This
    post-estimation command passes active <b>lclogit</b> model specification and
    estimates to <b>gllamm</b>, and its primary usage mainly depends on how
    <b>iterate(</b><i>#</i><b>)</b> is specified; see below for details.
<p>
    The default setting relabels and transforms the<b> ereturn</b> results of<b> gllamm</b>
    in accordance with those of<b> lclogit</b>, before reporting and posting them.
    Users can exploit<b> lclogitpr</b> and<b> lclogitcov</b>, as well as Stata's usual
    post-estimation commands requiring the estimated covariance matrix such
    as<b> nlcom</b>. When <b>switch</b> is specified, the original<b> ereturn</b> results of
    <b>gllamm</b> are reported and posted; users gain access to <b>gllamm</b>'s
    post-estimation commands, but lose access to<b> lclogitpr</b> and<b> lclogitcov</b>.
<p>
    <b>lclogitml</b> can also be used as its own post-estimation command, for
    example to pass the currently active<b> lclogitml</b> results to<b> gllamm</b> for
    further NR iterations.
<p>
<b><u>Options for lclogitml</u></b>
<p>
    <b>iterate(</b><i>#</i><b>)</b> specifies the maximum number of NR iterations for <b>gllamm</b>'s
        likelihood maximization process. The default is <b>iterate(</b><i>0</i><b>)</b> in which
        case the likelihood function and its derivatives are evaluated at the
        currently active estimates; this allows obtaining standard errors
        associated with the current estimates without boostrapping.
<p>
        With a non-zero argument, this option can implement a hybrid
        estimation strategy similar to (1997)'s. He executes a relatively
        small number of EM iterations to obtain intermediate estimates, and
        use them as starting values for direct likelihood maximization via a
        quasi-Newton algorithm until convergence, because the EM algorithm
        tends to slow down near the local maximum. Specifying a non-zero
        argument for this option can also be a useful tool for checking
        whether<b> lclogit</b> has declared convergence prematurely.
<p>
    <b>level(</b><i>#</i><b>)</b> sets confidence level; default is <b>level(</b><i>95</i><b>)</b>.
<p>
    <b>nopost</b> restores the currently active ereturn results at the end of the
        command's execution.
<p>
    <b>switch</b> displays and posts the original<b> gllamm</b> estimation results, without
        relabeling and transforming them in accordance with the<b> lclogit</b>
        output.
<p>
    <i>compatible_gllamm_options</i> refer to <b>gllamm</b>'s estimation options which are
        compatible with the latent class logit model specification. See 
        gllamm for more information.
<p>
<b><u>Saved results</u></b>
<p>
    By default <b>lclogitml</b> saves the following in <b>e()</b>, in addition to the
    others listed for<b> lclogit</b> except <b>e(seed)</b>. When <b>nopost</b> is specified, the
    currently active<b> ereturn</b> results are restored at the end of the command's
    execution. When <b>switch</b> is specified, <b>lclogitml</b> saves the same set of
    results in <b>e()</b> as <b>gllamm</b>.
<p>
    Macros         
      <b>e(cmd)</b>              <b>lclogitml</b>
      <b>e(title)</b>            Model estimated via GLLAMM
<p>
    Matrices       
      <b>e(V)</b>                variance-covariance matrix of the estimators
<p>
<b><u>Reference</u></b>
    Bhat, C., 1997. <i>An endogenous segmentation mode choice model with an</i>
        <i>application to intercity travel</i>. Transportation Science 31, 34-48.
<p>
    Hess, S., Ben-Akiva, M, Gopinath, D., and Walker, J. 2011. <i>Advantages of</i>
        <i>latent class over mixture of logit models</i>, mimeo,
        http://www.stephanehess.me.uk/papers/Hess_Ben-Akiva_Gopinath_Walker_M
        &gt; ay_2011.pdf.
<p>
<b><u>Authors</u></b>
<p>
    This command was written by Daniele Pacifico and Hong il Yoo. Comments
    and suggestions are welcome.
     
    Daniele Pacifico (daniele.pacifico@tesoro.it): Italian Department of the
    Treasury, Italy.
 
    Hong il Yoo (h.yoo@unsw.edu.au):  School of Economics, University of New
    South Wales, Australia.
 
<p>
<b><u>Also see</u></b>
<p>
    Online:  <b>[R] lclogit</b>, <b>lclogit postestimation</b>, <b>gllamm</b>
</pre>
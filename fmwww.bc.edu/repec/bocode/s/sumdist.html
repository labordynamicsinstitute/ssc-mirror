<pre>
-------------------------------------------------------------------------------
help for <b>sumdist</b>                            Stephen P. Jenkins (September 2006)
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Distribution summary statistics, by quantile group</u></b>
<p>
        <b>sumdist</b> <i>varname</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [<b>,</b> <b><u>n</u></b><b>gp(</b><i>#</i><b>)</b> <b><u>qgp</u></b><b>(</b><i>newvarname</i><b>)</b>
               <b><u>pv</u></b><b>ar(</b><i>newvarname</i><b>)</b> <b><u>lv</u></b><b>ar(</b><i>newvarname</i><b>)</b> <b><u>glv</u></b><b>ar(</b><i>newvarname</i><b>)</b> ]
<p>
    <b>fweight</b>s and <b>aweights</b> are allowed; see weights.
<p>
    <b>by</b> may be used with <b>sumdist</b>; see by.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>sumdist</b> estimates distributional summary statistics commonly used by
        income distribution analysts, complementing those available via
        <b>pctile</b>, <b>xtile</b>, and <b>summarize, detail</b>. Calculations are based on all
        non-missing values of <i>varname</i>. Use <b>if</b> if you wish to exclude values
        less than or equal to zero.
<p>
    For variable x and distribution function F(x), the statistics are:
<p>
    (1) quantiles k = 1,2,...,K-1, for K = # quantile groups;
<p>
    (2) the quantiles expressed as a percentage of median(x);
<p>
    (3) the quantile group shares of x in total x (expressed as a %);
<p>
    (4) the cumulative quantile group shares of total x (with cumulation in
        ascending order of x), i.e. the Lorenz ordinates L(p_k) at each p_k
        = F(x_k) for quantile points x_k (expressed as a %);
<p>
    (5) the generalised Lorenz ordinates at each p_k = F(x_k), i.e.
        GL(p_k) = mean(x)*L(p_k).
<p>
    Bootstrapped standard errors for the estimates can be derived using 
    bootstrap. Standard errors derived using linearization methods can be
    calculated for Lorenz and generalized ordinates using <b>svylorenz</b>.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>ngp(</b><i>#</i><b>)</b> specifies the number of quantile groups, and must be an integer
        between 1 and 100. The default is 10.
<p>
    <b>qgp(</b><i>newvarname</i><b>)</b> creates a new variable in the current data set that
        identifies the quantile group membership of each observation. If this
        option (or any of the three below) is combined with <b>by</b>, the variables
        refer to the last bygroup only.
<p>
    The following options may be used to graph Lorenz curves and generalized
        Lorenz curves (see also <b>glcurve</b> which is a more general program for
        this task):
<p>
    <b>pvar(</b><i>newvarname</i><b>)</b> creates a new variable in the current data set
        containing the values of p_k = F(x_k) corresponding to each k, plus
        0.
<p>
    <b>lvar(</b><i>newvarname</i><b>)</b> creates a new variable in the current data set
        containing the cumulative shares L(p_k), plus L(0) = 0.
<p>
    <b>glvar(</b><i>newvarname</i><b>)</b> creates a new variable in the current data set
        containing the generalized Lorenz ordinates GL(p_k), plus GL(0) = 0.
<p>
<p>
<b><u>Examples</u></b>
<p>
    . sumdist x [aw = wgtvar]
<p>
    . sumdist x [aw = wgtvar], ngp(20)
<p>
    . sumdist x [aw = wgtvar], ngp(5) qgp(quintilegroup)
<p>
    . bysort famtype: sumdist x [aw = wgtvar]
<p>
    . // bootstrapped standard errors for share of poorest fifth (Stata
        version 8)
<p>
    . preserve
<p>
    . keep if x &gt; 0 &amp; x &lt; .
<p>
    . version 8: bootstrap "sumdist x, ngp(5)" cush1 = r(cush1), reps(100)
<p>
    . restore
<p>
    . // bootstrapped standard errors for share of poorest fifth (Stata
        version 9)
<p>
    . preserve
<p>
    . keep if x &gt; 0 &amp; x &lt; .
<p>
    . bootstrap cush1 = r(cush1), reps(100): sumdist x, ngp(5)
<p>
    . restore
<p>
    . // draw basic Lorenz curve
<p>
    . sumdist x, ngp(20) pvar(p) lvar(l)
<p>
    . twoway (connect p p) (connect l p, sort)
<p>
<p>
<b><u>Saved Results</u></b>
<p>
    Scalars:
<p>
    <b>r(mean)</b>           mean of <i>varname</i>
    <b>r(median)</b>         median of <i>varname</i>
    <b>r(N)</b>              number of observations
    <b>r(sum_w)</b>          sum of weights
    <b>r(ngps)</b>           number of quantile groups
    <b>r(q</b><i>k</i><b>)</b>             quantile <i>k</i>, where <i>k</i> = 1, ..., <i>ngps</i>-1
    <b>r(sh</b><i>k</i><b>)</b>            share of <i>varname</i> held by each quantile group <i>k</i>
    <b>r(cush</b><i>k</i><b>)</b>          cumulative share of <i>varname</i> held by each quantile group
                 <i>k</i>
    <b>r(gl</b><i>k</i><b>)</b>            generalized Lorenz ordinate of <i>varname</i> held by each
                 quantile group <i>k</i>
<p>
    Matrices:
<p>
    <b>r(quantiles)</b>      1 x (<i>ngps</i>-1) vector of quantiles
    <b>r(relquantiles)</b>   1 x (<i>ngps</i>-1) vector of quantiles relative to median
    <b>r(shares)</b>         1 x (<i>ngps</i>) vector of shares
<p>
<p>
<b><u>Author</u></b>
<p>
    Stephen P. Jenkins, Institute for Social and Economic Research,
    University of Essex. Email: stephenj@essex.ac.uk
<p>
<p>
<b><u>References</u></b>
<p>
Cowell, F.A. 1995. <i>Measuring Inequality</i>, second edition.
Hemel Hempstead: Prentice-Hall/Harvester-Wheatsheaf.
<p>
<p>
<b><u>Also see</u></b>
<p>
    xtile pctile summarize
<p>
    <b>svylorenz</b>, <b>glcurve</b>, if installed.
<p>
</pre>
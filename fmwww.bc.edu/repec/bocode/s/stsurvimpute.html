<pre>
<b>help for stsurvimpute</b>                                           Patrick Royston
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Impute censored survival times</u></b>
 
<p>
<b><u>Syntax</u></b>
<p>
        <b>stsurvimpute</b> [<i>varlist</i>] [<i>if</i>] [<i>in</i>] [<b>,</b> <i>options</i>]
<p>
<p>
    <i>options</i>                       Description
    -------------------------------------------------------------------------
      <b>df(</b><i>#</i><b>)</b>                       baseline degrees of freedom for stpm2
                                    (Royston-Parmar models)
      <b><u>gen</u></b><b>erate(</b><i>newvar</i> [<b>,replace</b>]<b>)</b> creates new variable containing observed
                                    and imputed survival times
      <b><u>ll</u></b><b>ogistic</b>                   imputes using log-logistic distribution
      <b><u>ln</u></b><b>ormal</b>                     imputes using lognormal distribution
      <b><u>sc</u></b><b>ale(</b><i>scalename</i><b>)</b>            specifies the scale on which the
                                    Royston-Parmar model is to be fitted
      <b><u>see</u></b><b>d(</b><i>#</i><b>)</b>                     sets random number seed
      <b><u>tru</u></b><b>ncate(</b><i>#</i><b>)</b>                 truncate survival distribution at <i>#</i>
      <b><u>uni</u></b><b>form(</b><i>varname</i><b>)</b>            uses <i>varname</i> to supply uniformly
                                    distributed random numbers
      <b><u>wei</u></b><b>bull</b>                     imputes using Weibull distribution
      <i>stpm2_options</i>               additional options for stpm2
    -------------------------------------------------------------------------
<p>
    Weights are not allowed. Note that <b>stsurvimpute</b> requires <b>stpm2</b> to be
    installed - it can be downloaded from the SSC archive (see help on ssc).
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>stsurvimpute</b> singly imputes censored observation-times using a parametric
    survival model. Available basic parametric models are Weibull,
    log-logistic and lognormal; also supported are Royston-Parmar flexible
    parametric models, implemented by stpm2. Variables in <i>varlist</i> constitute
    a prognostic model that is used for predicting individual imputed
    survival times. Such a model should make the imputations more accurate
    than using only the overall distribution.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>df(</b><i>#</i><b>)</b> specifies the degrees of freedom for Royston-Parmar models.  When <i>#</i>
        &gt; 1 Royston-Parmar models are used to impute censored survival times,
        and the baseline distribution function is approximated by a
        restricted cubic spline with <i>#</i> degrees of freedom.  If <i>#</i> = 1 then a
        Weibull, log-logistic or lognormal distribution is assumed. Further
        options controlling Royston-Parmar models are available (see stpm2).
<p>
    <b>generate(</b><i>newvar</i> [<b>, replace</b>]<b>)</b> creates a new variable <i>newvar</i> containing
        observed and imputed survival times. <b>replace</b> allows <i>newvar</i> to be
        replaced with new data. <b>replace</b> may not be abbreviated.
<p>
    <b>llogistic</b> imputes assuming a log-logistic distribution.  <b>llogistic</b> is
        equivalent to <b>df(1) scale(odds)</b>.
<p>
    <b>lnormal</b> imputes assuming a lognormal distribution. <b>lnormal</b> is equivalent
        to <b>df(1) scale(normal)</b>.
<p>
    <b>scale(</b><i>scalename</i><b>)</b> specifies on which scale the survival model is to be
        fitted. <i>scalename</i> can be <b>hazard</b>, <b>odds</b> or <b>normal</b>.
<p>
    <b>seed(</b><i>#</i><b>)</b> sets the random number seed before random uniform values are
        generated.
<p>
    <b>truncate(</b><i>#</i><b>)</b> truncates the survival distribution at <i>#</i>. The default <i>#</i> is 1,
        meaning that the entire survival distribution is used for imputation.
        With, for example, <b>truncate(0.8)</b> the longest (but less probable)
        survival times, for which the survival probability is in the range
        0.2 to 0.0, are not imputed. Only the range 0.2 to 1 of the survival
        distribution is used for imputation. The result is shorter and
        perhaps more realistic extreme imputed survival times.
<p>
    <b>uniform(</b><i>varname</i><b>)</b> uses <i>varname</i> to supply uniformly distributed random
        numbers. By default the numbers are created internally. If the <b>unif()</b>
        option is used, the <b>seed()</b> option is ignored.
<p>
    <b>weibull</b> imputes assuming a Weibull distribution.  <b>weibull</b> is equivalent
        to <b>df(1) scale(hazard)</b>.
<p>
    <i>stpm2_options</i> are options for stpm2.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    Royston, Parmar &amp; Altman (2008) present an example of imputing
    right-censored survival times in kidney cancer. The aim is to be able to
    use familiar and informative graphs such as scatter plots and dotplots to
    illustrate the relationship between the outcome and treatments,
    covariates, prognostic scores etc in an informative manner. Note that
    because the imputation of censored observations is heavily
    model-dependent, one cannot validly do linear regression or the like of
    the complete and imputed times on covariates.
<p>
    Royston et al (2008) use the lognormal distribution in their analysis,
    and that is the default provided by <b>stsurvimpute</b>. However, <b>stsurvimpute</b>
    provides many other distributional models which may fit the data better
    than the lognormal, and so give more appropriate imputations. Choosing
    between the various models can be done using the Akaike Information
    Criterion, as discussed by Royston &amp; Parmar (2002) - see also Royston
    (2001) and help on stpm2.
<p>
    An important point to remember when inspecting imputed survival times is
    that their distribution is based on <b>extrapolation</b> of the modelled
    survival distribution into the future, on the assumption that all
    individuals will eventually experience the event of interest. In many
    cases the assumption is false - there is a 'cured fraction' who will
    never experience the event.  The consequence is that in many instances
    unrealistic survival times will be imputed, particularly when a large
    proportion of the times are censored. The higher the censoring
    proportion, the less information is present on the right-hand tail of the
    survival distribution and the more 'wild' the imputed times are likely to
    be.
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>. stsurvimpute x1 x2 x3, gen(t_imputed) weibull</b>
<p>
    <b>. stsurvimpute age sex stage, gen(t_imputed) llogistic</b>
<p>
    <b>. stsurvimpute, scale(normal) df(3) gen(t_imputed) truncate(0.8)</b>
        <b>seed(101)</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Patrick Royston, MRC Clinical Trials Unit, London.
    pr@ctu.mrc.ac.uk
<p>
<p>
<b><u>References</u></b>
<p>
    P. C. Lambert and P. Royston. 2009. Further development of flexible
        parametric models for survival analysis. Stata Journal, in press.
<p>
    P. Royston. 2001. Flexible alternatives to the Cox model, and more.
        <i>Stata Journal</i> <b>1</b>: 1-28.
<p>
    P. Royston and M. K. B. Parmar. 2002. Flexible proportional-hazards and
        proportional-odds models for censored survival data, with application
        to prognostic modelling and estimation of treatment effects.
        <i>Statistics in Medicine</i> <b>21</b>: 2175-2197.
<p>
    P. Royston, M. K. B. Parmar and D. G. Altman. 2008.  Visualizing length
        of survival in time-to-event studies:  a complement to Kaplan–Meier
        plots.  <i>Journal of the National Cancer Institute</i> <b>100</b>: 1-6.
<p>
<p>
<b><u>Also see</u></b>
<p>
</pre>
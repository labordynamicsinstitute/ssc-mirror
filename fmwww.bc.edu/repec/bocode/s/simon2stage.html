<pre>
<b>help simon2stage</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
     <b> Finding Simon two stage designs with extensions</b>
<p>
<b><u>Syntax</u></b>
<p>
        <b>simon2stage</b> [<b>,</b> <i>options</i>]
<p>
    <i>options</i>               Description
    -------------------------------------------------------------------------
    Main
      <b>p0</b>(#)                specifies the null proportion, the default is 0.1.
      <b>p1</b>(#)                specifies the alternative proportion, the default
                            is 0.4.
      <b>alpha</b>(#)             specifies the type I error, the default is 0.05.
      <b>beta</b>(#)              specifies the type 2 error, the default is 0.2.
      <b>minn</b>(#)              specifies the start sample size in the initial
                            grid search, the default is 1.
      <b>maxn</b>(#)              specifies the largest sample size in the initial
                            grid search, the default is 35.
      <b>optimal</b>              specifies that the interest is in the optimal
                            design rather than the minimax.
      <b>optp</b>(#)              specifies the true proportion to optimize the
                            design for, the default is p0.
      <b>eff</b>                  specifies that the design can stop for efficacy as
                            well as futility.
      <b>deltaminimax</b>         specifies that the delta-minimax design is found.
      <b>admiss</b>               specifies that the set of admissible designs
                            should be found.
    -------------------------------------------------------------------------
<p>
<p>
<b><u>Description</u></b>
<p>
    The Simon two stage design is a single arm study with an interim
    analysis. The main purpose of this design is to investigate whether an
    intervention works or not and to stop the study early for futility.
    Under the null hypothesis the probability of a success is <b>p0</b>, this is
    usually taken as the probability of success for the current standard
    treatment.  The probability of a success in this study, <b>p</b>, is tested
    using the null hypothesis <b>H0:p=p0</b> versus the alternative hypothesis
    <b>H1:p&gt;=p1</b>. The probability of success for the alternative hypothesis is
    fixed to be a pre-specified value <b>p1</b>, where <b>p1&gt;p0</b>.
<p>
    The Simon two stage design consists of studying <b>n1</b> participants in a
    first stage and the study stops if there are<b> r1</b> or fewer responders to
    the intervention. If there are more than <b>r1</b> responders in the first stage
    then the study continues until <b>n</b> participants in total are studied. Then
    the null hypothesis is not rejected if there are <b>r</b> or fewer responders.
    Each design must satisfy the type 1 (alpha) and type 2 (beta) errors.
<p>
    The probability of not rejecting <b>H0</b> can be calculated conditional on any
    <b>p</b> and let this function be <b>R(p)</b>.  The design must therefore satisfy the
    constraints <b>R(p0)&gt;=1-alpha</b> and <b>R(p1)&lt;=beta</b>.  The minimax design is one
    that satisfies these constraints with the smallest total sample size <b>n</b>
    and the smallest expected sample size under <b>H0</b>.  The alternative is to
    find the "optimal" design which is the design with the smallest expected
    sample size conditional on the true proportion being specified by the
    <b>optp()</b> option.  The default is optimising the design under the null
    proportion <b>p0</b> and this is the classical Simon two stage design, however
    this command allows greater flexibility.
<p>
    The Simon two stage design has been extended here to allow for stopping
    for efficacy. The design can be indexed by 5 numbers <b>(r1 r2/n1, r/n)</b>. Now
    the study stops for futility if there are<b> r1</b> or fewer responders OR stops
    for efficacy if there are more than <b>r2</b> responders in the first stage. If
    the study continues to the second stage then the null hypothesis is no
    rejected if there are <b>r</b> or fewer responders. Again the type 1 and type 2
    errors must be satisfied for a design to be considered.
<p>
    There are two additional designs that are of interest firstly the
    delta-minimax design as described in Shuster 2002 and secondly the set of
    admissible designs as described by Mander et al. (2010). The set of
    admissible designs are displayed by using a novel figure to help with
    decision making.
<p>
<b><u>Latest Version</u></b>
<p>
    The latest version is always kept on the SSC website. To install the
    latest version click on the following link
<p>
    ssc install simon2stage, replace.
<p>
<b><u>Options</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>p0(</b><i>#</i><b>)</b> specifies the null proportion, the default is 0.1.
<p>
    <b>p1(</b><i>#</i><b>)</b> specifies the alternative proportion, the default is 0.4.
<p>
    <b>alpha(</b><i>#</i><b>)</b> specifies the type I error, the default is 0.05.
<p>
    <b>beta(</b><i>#</i><b>)</b> specifies the type II error, the default is 0.2.
<p>
    <b>minn(</b><i>#</i><b>)</b> specifies the start total sample size in the initial grid search,
        the default is 1.
<p>
    <b>maxn(</b><i>#</i><b>)</b> specifies the largest total sample size in the initial grid
        search, the default is 35.
<p>
    <b>optimal</b> specifies that the interest is in the optimal design rather than
        the minimax.
<p>
    <b>optp(</b><i>#</i><b>)</b> specifies the true proportion to optimize the design for, the
        default is p0.
<p>
    <b>eff</b> specifies that the design can stop for efficacy as well as futility.
<p>
    <b>deltaminimax</b> specifies that the delta-minimax design is found.
<p>
    <b>admiss</b> specifies that the set of admissible designs should be found.
<p>
<b><u> Examples</u></b>
<p>
      simon2stage
<p>
    The minimax design is <b>{1/8 3/13}</b>, if there are no responders or one
    responder out of the first 8 participants then the study stops and the
    null hypothesis is not rejected. If the study proceeds to the second
    stage then the null hypothesis is rejected if there are more than 3
    responders. Under the null hypothesis there is a 0.813 chance that the
    study stops at the first stage and hence the average sample size is
    8*0.813+13*(1-0.813) = 8.934.
<p>
      simon2stage, optimal
<p>
    The optimal design is <b>{1/7 3/15}</b>, this is similar to the previous design
    but there is now a 0.85 chance that the study finishes at stage 1 and the
    average sample size under the null hypothesis is 8.198 which is slightly
    smaller than the minimax desgin.
<p>
      simon2stage, optimal optp(0.2)
<p>
    The optimal design is still <b>{1/7 3/15}</b> but the average sample size is
    much greater at 10.386 as a direct result of a smaller chance 0.577 of
    early termination.
<p>
      simon2stage, optimal optp(0.2) eff
<p>
    The optimal design is <b>{(1 2)/7 3/15}</b> the expected sample size, 9.202, is
    smaller than the previous design because of a greater chance of an early
    termination 0.725.
<p>
      simon2stage,optimal eff deltaminimax
<p>
    The delta-minimax design is <b>{(1 2)/7 3/15}</b> the expected sample size,
    9.550, is larger than the previous designs because this is the <b>maximum</b>
    expected sample size.
<p>
<p>
      simon2stage, optp(0.2)
<p>
    The minimax design optimised at a true response of <b>0.2</b> is <b>{1/8 3/13}</b>. The
    expected sample size, 10.483, much greater than when calculating the
    expected sample size at the null value. This has not altered the minimax
    design.
<p>
      simon2stage,optimal eff admiss maxn(16)
<p>
    The set of admissible designs is plotted. Setting the maximum to be <b>16</b>
    means that the set of admissible designs are found by fixing the maximum
    sample size to be 16 or lower (this limits the designs to search
    through).  Interestingly the design <b>{(1 2)/7 3/15}</b> is only good if there
    is little weight given to the overall sample size.
<p>
<p>
<p>
<b><u>Author</u></b>
<p>
    Adrian Mander, MRC Biostatistics Unit, Cambridge, UK.
    Email adrian.mander@mrc-bsu.cam.ac.uk
<p>
<b><u>References</u></b>
<p>
    R.P.A'Hern (2001) Sample size tables for exact single-stage phase II
    designs. <i>Statistics in Medicine</i> <b>20</b>:859-866.
<p>
    T.R. Fleming (1982) One-sample multiple testing procedure for phase II
    clinical trials. <i>Biometrics</i> <b>38</b>:143-151.
<p>
    Richard Simon (1989) Optimal two-stage designs for phase II clinical
    trials. <i>Controlled Clinical Trials</i> <b>10</b>:1-10.
<p>
    A.P. Mander and S.G. Thompson (2010) Two-stage designs optimal under the
    alternative hypothesis for phase II cancer trials. <i>Contemporary Clinical</i>
    <i>Trials</i> <b>31(6)</b>:572-578.
<p>
    A.P. Mander, J.M. Wason, M.J. Sweeting and S.G. Thompson (2010)
    Admissible two-stage designs for phase II cancer clinical trials.
    <i>(Submitted)</i>
<p>
<b><u>Also see</u></b>
<p>
    Related commands
<p>
    HELP FILES              SSC installation links    Description
<p>
    samplesize (if installed)        (ssc install samplesize)        Sample
    Size graphics
    sampsi_fleming (if installed)    (ssc install sampsi_fleming)    Sample
    Size for Fleming design
    sampsi_reg (if installed)        (ssc install sampsi_reg)        Sample
    Size for linear regression
    sampsi_mcc (if installed)        (ssc install sampsi_mcc)        Sample
    Size for matched case/control studies
    sampsi_rho (if installed)        (ssc install sampsi_rho)        Sample
    Size for Pearson correlation
<p>
<p>
</pre>
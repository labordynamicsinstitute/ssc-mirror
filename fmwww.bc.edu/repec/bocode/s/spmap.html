<pre>
<b>help spmap</b>                                                        Version 1.2.0
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>spmap</b> -- Visualization of spatial data
<p>
<p>
<a name="syntax"></a><b><u>Syntax</u></b>
<p>
        <b>spmap</b> [<i>attribute</i>] [<i>if</i>] [<i>in</i>] <b>using</b> <i>basemap</i> [<b>,</b>
               <i>basemap_options</i>
               <b><u>pol</u></b><b>ygon(</b><i>polygon_suboptions</i><b>)</b>
               <b><u>lin</u></b><b>e(</b><i>line_suboptions</i><b>)</b>
               <b><u>poi</u></b><b>nt(</b><i>point_suboptions</i><b>)</b>
               <b><u>dia</u></b><b>gram(</b><i>diagram_suboptions</i><b>)</b>
               <b><u>arr</u></b><b>ow(</b><i>arrow_suboptions</i><b>)</b>
               <b><u>lab</u></b><b>el(</b><i>label_suboptions</i><b>)</b>
               <b><u>sca</u></b><b>lebar(</b><i>scalebar_suboptions</i><b>)</b>
               <i>graph_options</i>]
<p>
<p>
<a name="basemap1"></a>    <i>basemap_options</i><i>                     </i> Description
    -------------------------------------------------------------------------
    Main
    * <b>id(</b><i>idvar</i><b>)</b>                          base map polygon identifier
<p>
    Cartogram
      <b><u>a</u></b><b>rea(</b><i>areavar</i><b>)</b>                      draw base map polygons with area
                                           proportional to variable <i>areavar</i>
      <b>split</b>                              split multipart base map polygons
      <b><u>m</u></b><b>ap(</b><i>backgroundmap</i><b>)</b>                 draw background map defined in Stata
                                           dataset <i>backgroundmap</i>
      <b><u>mfc</u></b><b>olor(</b><i>colorstyle</i><b>)</b>                fill color of the background map
      <b><u>moc</u></b><b>olor(</b><i>colorstyle</i><b>)</b>                outline color of the background map
      <b><u>mos</u></b><b>ize(</b><i>linewidthstyle</i><b>)</b>             outline thickness of the background
                                           map
      <b><u>mop</u></b><b>attern(</b><i>linepatternstyle</i><b>)</b>        outline pattern of the background
                                           map
<p>
    Choropleth map
      <b><u>clm</u></b><b>ethod(</b><i>method</i><b>)</b>                   <i>attribute</i> classification method,
                                           where <i>method</i> is one of the
                                           following: <b><u>q</u></b><b>uantile</b>, <b><u>b</u></b><b>oxplot</b>,
                                           <b><u>e</u></b><b>qint</b>, <b><u>s</u></b><b>tdev</b>, <b><u>k</u></b><b>means</b>, <b><u>c</u></b><b>ustom</b>,
                                           <b><u>u</u></b><b>nique</b>
      <b><u>cln</u></b><b>umber(</b><i>#</i><b>)</b>                        number of classes
      <b><u>clb</u></b><b>reaks(</b><i>numlist</i><b>)</b>                  custom class breaks
      <b><u>eir</u></b><b>ange(</b><i>min max</i><b>)</b>                   <i>attribute</i> range for <b>eqint</b>
                                           classification method
      <b><u>kmi</u></b><b>ter(</b><i>#</i><b>)</b>                          number of iterations for <b>kmeans</b>
                                           classification method
      <b><u>ndf</u></b><b>color(</b><i>colorstyle</i><b>)</b>               fill color of empty (no data) base
                                           map polygons
      <b><u>ndo</u></b><b>color(</b><i>colorstyle</i><b>)</b>               outline color of empty (no data)
                                           base map polygons
      <b><u>nds</u></b><b>ize(</b><i>linewidthstyle</i><b>)</b>             outline thickness of empty (no data)
                                           base map polygons
      <b><u>ndl</u></b><b>abel(</b><i>string</i><b>)</b>                    legend label of empty (no data) base
                                           map polygons
<p>
    Format
      <b><u>fc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  fill color of base map polygons
      <b><u>oc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  outline color of base map polygons
      <b><u>os</u></b><b>ize(</b><i>linewidthstyle</i><i>_list</i><b>)</b>         outline thickness of base map
                                           polygons
<p>
    Legend
      <b>legenda(on</b>|<b>off)</b>                    display/hide base map legend
      <b><u>legt</u></b><b>itle(</b><i>string</i><b>)</b>                   base map legend title
      <b><u>legl</u></b><b>abel(</b><i>string</i><b>)</b>                   single-key base map legend label
      <b><u>lego</u></b><b>rder(hilo</b>|<b>lohi)</b>                base map legend order
      <b><u>legs</u></b><b>tyle(0</b>|<b>1</b>|<b>2</b>|<b>3)</b>                  base map legend style
      <b><u>legj</u></b><b>unction(</b><i>string</i><b>)</b>                string connecting lower and upper
                                           class limits in base map legend
                                           labels when <b>legstyle(2)</b>
      <b><u>legc</u></b><b>ount</b>                           display number of base map polygons
                                           belonging to each class
    -------------------------------------------------------------------------
    * Required option
<p>
<a name="polygon1"></a>    <i>polygon_suboptions</i><i>                  </i> Description
    -------------------------------------------------------------------------
    Main
    * <b><u>d</u></b><b>ata(</b><i>polygon</i><b>)</b>                      Stata dataset defining one or more
                                           supplementary polygons to be
                                           superimposed onto the base map
      <b><u>s</u></b><b>elect(</b><i>command</i><b>)</b>                    keep/drop specified records of
                                           dataset <i>polygon</i>
      <b>by(</b><i>byvar_pl</i><b>)</b>                       group supplementary polygons by
                                           variable <i>byvar_pl</i>
<p>
    Format
      <b><u>fc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  fill color of supplementary polygons
      <b><u>oc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  outline color of supplementary
                                           polygons
      <b><u>os</u></b><b>ize(</b><i>linewidthstyle</i><i>_list</i><b>)</b>         outline thickness of supplementary
                                           polygons
<p>
    Legend
      <b>legenda(on</b>|<b>off)</b>                    display/hide supplementary-polygon
                                           legend
      <b><u>legt</u></b><b>itle(</b><i>string</i><b>)</b>                   supplementary-polygon legend title
      <b><u>legl</u></b><b>abel(</b><i>string</i><b>)</b>                   single-key supplementary-polygon
                                           legend label
      <b><u>legs</u></b><b>how(</b><i>numlist</i><b>)</b>                   display only selected keys of
                                           supplementary-polygon legend
      <b><u>legc</u></b><b>ount</b>                           display number of supplementary
                                           polygons belonging to each group
    -------------------------------------------------------------------------
    * Required when option <b>polygon()</b> is specified
<p>
<a name="line1"></a>    <i>line_suboptions</i><i>                     </i> Description
    -------------------------------------------------------------------------
    Main
    * <b><u>d</u></b><b>ata(</b><i>line</i><b>)</b>                         Stata dataset defining one or more
                                           polylines to be superimposed onto
                                           the base map
      <b><u>s</u></b><b>elect(</b><i>command</i><b>)</b>                    keep/drop specified records of
                                           dataset <i>line</i>
      <b>by(</b><i>byvar_ln</i><b>)</b>                       group polylines by variable <i>byvar_ln</i>
<p>
    Format
      <b><u>co</u></b><b>lor(</b><i>colorlist</i><b>)</b>                   polyline color
      <b><u>si</u></b><b>ze(</b><i>linewidthstyle</i><i>_list</i><b>)</b>          polyline thickness
      <b><u>pa</u></b><b>ttern(</b><i>linepatternstyle</i><i>_list</i><b>)</b>     polyline pattern
<p>
    Legend
      <b>legenda(on</b>|<b>off)</b>                    display/hide polyline legend
      <b><u>legt</u></b><b>itle(</b><i>string</i><b>)</b>                   polyline legend title
      <b><u>legl</u></b><b>abel(</b><i>string</i><b>)</b>                   single-key polyline legend label
      <b><u>legs</u></b><b>how(</b><i>numlist</i><b>)</b>                   display only selected keys of
                                           polyline legend
      <b><u>legc</u></b><b>ount</b>                           display number of polylines
                                           belonging to each group
    -------------------------------------------------------------------------
    * Required when option <b>line()</b> is specified
<p>
<a name="point1"></a>    <i>point_suboptions</i><i>                    </i> Description
    -------------------------------------------------------------------------
    Main
      <b><u>d</u></b><b>ata(</b><i>point</i><b>)</b>                        Stata dataset defining one or more
                                           points to be superimposed onto the
                                           base map
      <b><u>s</u></b><b>elect(</b><i>command</i><b>)</b>                    keep/drop specified records of
                                           dataset <i>point</i>
      <b>by(</b><i>byvar_pn</i><b>)</b>                       group points by variable <i>byvar_pn</i>
    * <b><u>x</u></b><b>coord(</b><i>xvar_pn</i><b>)</b>                    variable containing the x-coordinate
                                           of points
    * <b><u>y</u></b><b>coord(</b><i>yvar_pn</i><b>)</b>                    variable containing the y-coordinate
                                           of points
<p>
    Proportional size
      <b><u>prop</u></b><b>ortional(</b><i>propvar_pn</i><b>)</b>           draw point markers with size
                                           proportional to variable
                                           <i>propvar_pn</i>
      <b><u>pr</u></b><b>ange(</b><i>min max</i><b>)</b>                    normalization range of variable
                                           <i>propvar_pn</i>
      <b><u>ps</u></b><b>ize(relative</b>|<b>absolute)</b>           reference system for drawing point
                                           markers
<p>
    Deviation
      <b><u>dev</u></b><b>iation(</b><i>devvar_pn</i><b>)</b>               draw point markers as deviations
                                           from given reference value of
                                           variable <i>devvar_pn</i>
      <b><u>refv</u></b><b>al(mean</b>|<b>median</b>|<i>#</i><b>)</b>              reference value of variable
                                           <i>devvar_pn</i>
      <b><u>refw</u></b><b>eight(</b><i>weightvar_pn</i><b>)</b>            compute reference value of variable
                                           <i>devvar_pn</i> weighting observations
                                           by variable <i>weightvar_pn</i>
      <b><u>dm</u></b><b>ax(</b><i>#</i><b>)</b>                            absolute value of maximum deviation
<p>
    Format
      <b><u>si</u></b><b>ze(</b><i>markersizestyle</i><i>_list</i><b>)</b>         size of point markers
      <b><u>sh</u></b><b>ape(</b><i>symbolstyle</i><i>_list</i><b>)</b>            shape of point markers
      <b><u>fc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  fill color of point markers
      <b><u>oc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  outline color of point markers
      <b><u>os</u></b><b>ize(</b><i>linewidthstyle</i><i>_list</i><b>)</b>         outline thickness of point markers
<p>
    Legend
      <b>legenda(on</b>|<b>off)</b>                    display/hide point legend
      <b><u>legt</u></b><b>itle(</b><i>string</i><b>)</b>                   point legend title
      <b><u>legl</u></b><b>abel(</b><i>string</i><b>)</b>                   single-key point legend label
      <b><u>legs</u></b><b>how(</b><i>numlist</i><b>)</b>                   display only selected keys of point
                                           legend
      <b><u>legc</u></b><b>ount</b>                           display number of points belonging
                                           to each group
    -------------------------------------------------------------------------
    * Required when option <b>point()</b> is specified
<p>
<a name="diagram1"></a>    <i>diagram_suboptions</i><i>                  </i> Description
    -------------------------------------------------------------------------
    Main
      <b><u>d</u></b><b>ata(</b><i>diagram</i><b>)</b>                      Stata dataset defining one or more
                                           diagrams to be superimposed onto
                                           the base map at given reference
                                           points
      <b><u>s</u></b><b>elect(</b><i>command</i><b>)</b>                    keep/drop specified records of
                                           dataset <i>diagram</i>
      <b>by(</b><i>byvar_dg</i><b>)</b>                       group diagrams by variable <i>byvar_dg</i>
    * <b><u>x</u></b><b>coord(</b><i>xvar_dg</i><b>)</b>                    variable containing the x-coordinate
                                           of diagram reference points
    * <b><u>y</u></b><b>coord(</b><i>yvar_dg</i><b>)</b>                    variable containing the y-coordinate
                                           of diagram reference points
    * <b><u>v</u></b><b>ariables(</b><i>diagvar_dg</i><b>)</b>              variable or variables to be
                                           represented by diagrams
      <b><u>t</u></b><b>ype(frect</b>|<b>pie)</b>                    diagram type
<p>
    Proportional size
      <b><u>prop</u></b><b>ortional(</b><i>propvar_dg</i><b>)</b>           draw diagrams with area proportional
                                           to variable <i>propvar_dg</i>
      <b><u>pr</u></b><b>ange(</b><i>min max</i><b>)</b>                    reference range of variable
                                           <i>propvar_dg</i>
<p>
    Framed-rectangle chart
      <b><u>r</u></b><b>ange(</b><i>min max</i><b>)</b>                     reference range of variable
                                           <i>diagvar_dg</i>
      <b><u>refv</u></b><b>al(mean</b>|<b>median</b>|<i>#</i><b>)</b>              reference value of variable
                                           <i>diagvar_dg</i>
      <b><u>refw</u></b><b>eight(</b><i>weightvar_dg</i><b>)</b>            compute the reference value of
                                           variable <i>diagvar_dg</i> weighting
                                           observations by variable
                                           <i>weightvar_dg</i>
      <b><u>refc</u></b><b>olor(</b><i>colorstyle</i><b>)</b>               color of the line representing the
                                           reference value of variable
                                           <i>diagvar_dg</i>
      <b><u>refs</u></b><b>ize(</b><i>linewidthstyle</i><b>)</b>            thickness of the line representing
                                           the reference value of variable
                                           <i>diagvar_dg</i>
<p>
    Format
      <b><u>si</u></b><b>ze(</b><i>#</i><b>)</b>                            diagram size
      <b><u>fc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  fill color of the diagrams
      <b><u>oc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                  outline color of the diagrams
      <b><u>os</u></b><b>ize(</b><i>linewidthstyle</i><i>_list</i><b>)</b>         outline thickness of the diagrams
<p>
    Legend
      <b>legenda(on</b>|<b>off)</b>                    display/hide diagram legend
      <b><u>legt</u></b><b>itle(</b><i>string</i><b>)</b>                   diagram legend title
      <b><u>legs</u></b><b>how(</b><i>numlist</i><b>)</b>                   display only selected keys of
                                           diagram legend
      <b><u>legc</u></b><b>ount</b>                           display number of diagrams belonging
                                           to each group
    -------------------------------------------------------------------------
    * Required when option <b>diagram()</b> is specified
<p>
<a name="arrow1"></a>    <i>arrow_suboptions</i><i>                    </i> Description
    -------------------------------------------------------------------------
    Main
    * <b><u>d</u></b><b>ata(</b><i>arrow</i><b>)</b>                        Stata dataset defining one or more
                                           arrows to be superimposed onto the
                                           base map
      <b><u>s</u></b><b>elect(</b><i>command</i><b>)</b>                    keep/drop specified records of
                                           dataset <i>arrow</i>
      <b>by(</b><i>byvar_ar</i><b>)</b>                       group arrows by variable <i>byvar_ar</i>
<p>
    Format
      <b><u>dir</u></b><b>ection(</b><i>directionstyle_list</i><b>)</b>     arrow direction, where
                                           <i>directionstyle</i> is one of the
                                           following: <b>1</b> (monodirectional
                                           arrow), <b>2</b> (bidirectional arrow)
      <b><u>hsi</u></b><b>ze(</b><i>markersizestyle</i><i>_list</i><b>)</b>        arrowhead size
      <b><u>han</u></b><b>gle(</b><i>anglestyle</i><i>_list</i><b>)</b>            arrowhead angle
      <b><u>hba</u></b><b>rbsize(</b><i>markersizestyle</i><i>_list</i><b>)</b>    size of filled portion of arrowhead
      <b><u>hfc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                 arrowhead fill color
      <b><u>hoc</u></b><b>olor(</b><i>colorlist</i><b>)</b>                 arrowhead outline color
      <b><u>hos</u></b><b>ize(</b><i>linewidthstyle</i><i>_list</i><b>)</b>        arrowhead outline thickness
      <b><u>lco</u></b><b>lor(</b><i>colorlist</i><b>)</b>                  arrow shaft line color
      <b><u>lsi</u></b><b>ze(</b><i>linewidthstyle</i><i>_list</i><b>)</b>         arrow shaft line thickness
      <b><u>lpa</u></b><b>ttern(</b><i>linepatternstyle</i><i>_list</i><b>)</b>    arrow shaft line pattern
<p>
    Legend
      <b>legenda(on</b>|<b>off)</b>                    display/hide arrow legend
      <b><u>legt</u></b><b>itle(</b><i>string</i><b>)</b>                   arrow legend title
      <b><u>legl</u></b><b>abel(</b><i>string</i><b>)</b>                   single-key arrow legend label
      <b><u>legs</u></b><b>how(</b><i>numlist</i><b>)</b>                   display only selected keys of arrow
                                           legend
      <b><u>legc</u></b><b>ount</b>                           display number of arrows belonging
                                           to each group
    -------------------------------------------------------------------------
    * Required when option <b>arrow()</b> is specified
<p>
<a name="label1"></a>    <i>label_suboptions</i><i>                    </i> Description
    -------------------------------------------------------------------------
    Main
      <b><u>d</u></b><b>ata(</b><i>label</i><b>)</b>                        Stata dataset defining one or more
                                           labels to be superimposed onto the
                                           base map at given reference points
      <b><u>s</u></b><b>elect(</b><i>command</i><b>)</b>                    keep/drop specified records of
                                           dataset <i>label</i>
      <b>by(</b><i>byvar_lb</i><b>)</b>                       group labels by variable <i>byvar_lb</i>
    * <b><u>x</u></b><b>coord(</b><i>xvar_lb</i><b>)</b>                    variable containing the x-coordinate
                                           of label reference points
    * <b><u>y</u></b><b>coord(</b><i>yvar_lb</i><b>)</b>                    variable containing the y-coordinate
                                           of label reference points
    * <b><u>l</u></b><b>abel(</b><i>labvar_lb</i><b>)</b>                   variable containing the labels
<p>
    Format
      <b><u>le</u></b><b>ngth(</b><i>lengthstyle_list</i><b>)</b>           maximum number of label characters,
                                           where <i>lengthstyle</i> is any integer&gt;0
      <b><u>si</u></b><b>ze(</b><i>textsizestyle</i><i>_list</i><b>)</b>           label size
      <b><u>co</u></b><b>lor(</b><i>colorlist</i><b>)</b>                   label color
      <b><u>po</u></b><b>sition(</b><i>clockpos</i><i>_list</i><b>)</b>            position of labels relative to their
                                           reference point
      <b><u>ga</u></b><b>p(</b><i>relativesize</i><i>_list</i><b>)</b>             gap between labels and their
                                           reference point
      <b><u>an</u></b><b>gle(</b><i>anglestyle</i><i>_list</i><b>)</b>             label angle
    -------------------------------------------------------------------------
    * Required when option <b>label()</b> is specified
<p>
<a name="scalebar1"></a>    <i>scalebar_suboptions</i><i>                 </i> Description
    -------------------------------------------------------------------------
    Main
    * <b><u>u</u></b><b>nits(</b><i>#</i><b>)</b>                           scale bar extent
      <b><u>s</u></b><b>cale(</b><i>#</i><b>)</b>                           ratio of scale bar units to map
                                           units
      <b><u>x</u></b><b>pos(</b><i>#</i><b>)</b>                            scale bar horizontal position
                                           relative to plot region center
      <b><u>y</u></b><b>pos(</b><i>#</i><b>)</b>                            scale bar vertical position relative
                                           to plot region center
<p>
    Format
      <b><u>si</u></b><b>ze(</b><i>#</i><b>)</b>                            scale bar height multiplier
      <b><u>fc</u></b><b>olor(</b><i>colorstyle</i><b>)</b>                 fill color of scale bar
      <b><u>oc</u></b><b>olor(</b><i>colorstyle</i><b>)</b>                 outline color of scale bar
      <b><u>os</u></b><b>ize(</b><i>linewidthstyle</i><b>)</b>              outline thickness of scale bar
      <b><u>la</u></b><b>bel(</b><i>string</i><b>)</b>                      scale bar label
      <b><u>tc</u></b><b>olor(</b><i>colorstyle</i><b>)</b>                 color of scale bar text
      <b><u>ts</u></b><b>ize(</b><i>textsizestyle</i><b>)</b>               size of scale bar text
    -------------------------------------------------------------------------
    * Required when option <b>scalebar()</b> is specified
<p>
<a name="graph1"></a>    <i>graph_options</i><i>                       </i> Description
    -------------------------------------------------------------------------
    Main
      <b>polyfirst</b>                          draw supplementary polygons before
                                           the base map
      <b><u>gs</u></b><b>ize(</b><i>#</i><b>)</b>                           length of shortest side of <i>available</i>
                                           <i>area</i> (in inches)
      <b><u>free</u></b><b>style</b>                          ignore built-in graph formatting
                                           presets and restrictions
      <i>twoway_options</i>                     any options documented in
                                           <b>[G] </b><i>twoway_options</i>, except for
                                           <i>aspect_option</i>, <i>scheme_option</i>,
                                           <i>by_option</i>, and <i>advanced_options</i>
    -------------------------------------------------------------------------
<p>
<p>
<a name="desc"></a><b><u>Description</u></b>
<p>
    <b>spmap</b> is aimed at visualizing several kinds of spatial data, and is
    particularly suited for drawing thematic maps and displaying the results
    of spatial data analyses.
<p>
    <b>spmap</b> functioning rests on three basic principles:
<p>
         o  First, a base map representing a given study region <i>R</i> made up of
            <i>N</i> polygons is drawn.
<p>
         o  Second, at the user's choice, one or more types of additional
            spatial objects may be superimposed onto the base map. In the
            current version of <b>spmap</b>, six different types of spatial objects
            can be superimposed onto the base map: polygons (via option
            <b>polygon()</b>), polylines (via option <b>line()</b>), points (via option
            <b>point()</b>), diagrams (via option <b>diagram()</b>), arrows (via option
            <b>arrow()</b>), and labels (via option <b>label()</b>).
<p>
         o  Third, at the user's choice, one or more additional map elements
            may be added, such as a scale bar (via option <b>scalebar()</b>), a
            title, a subtitle, a note, and a caption (via <i>title_options</i>).
<p>
    Proper specification of <b>spmap</b> options and suboptions, combined with the
    availability of properly formatted spatial data, allows the user to draw
    several kinds of maps, including choropleth maps, proportional symbol
    maps, pin maps, pie chart maps, and noncontiguous area cartograms.
<p>
    While providing sensible defaults for most options and supoptions, <b>spmap</b>
    gives the user full control over the formatting of almost every map
    element, thus allowing the production of highly customized maps.
<p>
<p>
<a name="spatdata"></a><b><u>Spatial data format</u></b>
<p>
    <b>spmap</b> requires that the spatial data to be visualized be arranged into
    properly formatted Stata datasets. Such datasets can be classified into
    nine categories: <i>master</i>, <i>basemap</i>, <i>backgroundmap</i>, <i>polygon</i>, <i>line</i>, <i>point</i>,
    <i>diagram</i>, <i>arrow</i>, <i>label</i>.
<p>
<a name="sd_master"></a>    The <i>master</i> dataset is the dataset that resides in memory when <b>spmap</b> is
    invoked. At the minimum, it must contain variable <i>idvar</i>, a numeric
    variable that uniquely identifies the polygon or polygons making up the
    base map. If a choropleth map is to be drawn, then the <i>master</i> dataset
    should contain also variable <i>attribute</i>, a numeric variable expressing the
    values of the feature to be represented. Additionally, if a noncontiguous
    area cartogram is to be drawn - i.e., if the polygons making up the base
    map are to be drawn with area proportional to the values of a given
    numeric variable <i>areavar</i> - then the <i>master</i> dataset should contain also
    variable <i>areavar</i>.
<p>
<a name="sd_basemap"></a>    A <i>basemap</i> dataset is a Stata dataset that contains the definition of the
    polygon or polygons making up the base map. A <i>basemap</i> dataset is required
    to have the following structure:
<p>
                       _ID        _X        _Y  _EMBEDDED
                     -------------------------------------
                         1         .         .          0
                         1        10        30          0
                         1        10        50          0
                         1        30        50          0
                         1        30        30          0
                         1        10        30          0
                         2         .         .          0
                         2        10        10          0
                         2        10        30          0
                         2        18        30          0
                         2        18        10          0
                         2        10        10          0
                         2         .         .          0
                         2        22        10          0
                         2        22        30          0
                         2        30        30          0
                         2        30        10          0
                         2        22        10          0
                         3         .         .          1
                         3        15        35          1
                         3        15        45          1
                         3        25        45          1
                         3        25        35          1
                         3        15        35          1
                     -------------------------------------
<p>
    _ID is required and is a numeric variable that uniquely identifies the
    polygons making up the base map. _X is required and is a numeric variable
    that contains the <i>x</i>-coordinate of the nodes of the base map polygons. _Y
    is required and is a numeric variable that contains the <i>y</i>-coordinate of
    the nodes of the base map polygons. Finally, _EMBEDDED is optional and is
    an indicator variable taking value 1 if the corresponding polygon is
    completely enclosed in another polygon, and value 0 otherwise. The
    following should be noticed:
<p>
         o  Both simple and multipart polygons are allowed. In the example
            above, polygons 1 and 3 are simple (i.e., they consist of a
            single area), while polygon 2 is multipart (i.e., it consists of
            two distinct areas).
<p>
         o  The first record of each simple polygon or of each part of a
            multipart polygon must contain missing <i>x</i>- and <i>y</i>-coordinates.
<p>
         o  The non-missing coordinates of each simple polygon or of each
            part of a multipart polygon must be ordered so as to correspond
            to consecutive nodes.
  
         o  Each simple polygon or each part of a multipart polygon must be
            "closed", i.e., the last pair of non-missing coordinates must be
            equal to the first pair.
       
         o  A <i>basemap</i> dataset is always required to be sorted by variable
            _ID.
<p>
<a name="sd_backgroundmap"></a>    A <i>backgroundmap</i> dataset is a Stata dataset that contains the definition
    of the polygon or polygons making up the background map - a map that can
    be optionally drawn as background of a noncontiguous area cartogram. A
    <i>backgroundmap</i> dataset has exactly the same structure as a <i>basemap</i>
    dataset, except for variable _EMBEDDED that is never used.
<p>
<a name="sd_polygon"></a>    A <i>polygon</i> dataset is a Stata dataset that contains the definition of one
    or more supplementary polygons to be superimposed onto the base map. A
    <i>polygon</i> dataset is required to have the following structure:
<p>
                       _ID        _X        _Y   <i>byvar_pl</i>
                     -------------------------------------
                         1         .         .          1
                         1        20        40          1
                         1        20        42          1
                         1        25        42          1
                         1        25        40          1
                         1        20        40          1
                         2         .         .          1
                         2        11        20          1
                         2        11        25          1
                         2        13        25          1
                         2        13        20          1
                         2        11        20          1
                         3         .         .          2
                         3        25        25          2
                         3        25        35          2
                         3        30        35          2
                         3        30        25          2
                         3        25        25          2
                     -------------------------------------
<p>
    Variables _ID, _X, and _Y are defined exactly in the same way as in a
    <i>basemap</i> dataset, with the sole exception that only simple polygons are
    allowed. In turn, <i>byvar_pl</i> is a placeholder denoting an optional variable
    that can be specified to distinguish different kinds of supplementary
    polygons.
<p>
<a name="sd_line"></a>    A <i>line</i> dataset is a Stata dataset that contains the definition of one or
    more polylines to be superimposed onto the base map. A <i>line</i> dataset is
    required to have the following structure:
<p>
                       _ID        _X        _Y   <i>byvar_ln</i>
                     -------------------------------------
                         1         .         .          1
                         1        11        30          1
                         1        12        33          1
                         1        15        33          1
                         1        16        35          1
                         1        18        40          1
                         1        25        38          1
                         1        25        42          1
                         2         .         .          2
                         2        12        20          2
                         2        18        15          2
                         3         .         .          2
                         3        27        28          2
                         3        27        25          2
                         3        28        27          2
                         3        29        25          2
                     -------------------------------------
<p>
    _ID is required and is a numeric variable that uniquely identifies the
    polylines. _X is required and is a numeric variable that contains the
    <i>x</i>-coordinate of the nodes of the polylines. _Y is required and is a
    numeric variable that contains the <i>y</i>-coordinate of the nodes of the
    polylines. Finally, <i>byvar_ln</i> is a placeholder denoting an optional
    variable that can be specified to distinguish different kinds of
    polylines. The following should be noticed:
<p>
         o  The first record of each polyline must contain missing <i>x</i>- and
            <i>y</i>-coordinates.
<p>
         o  The non-missing coordinates of each polyline must be ordered so
            as to correspond to consecutive nodes.
<p>
<a name="sd_point"></a>    A <i>point</i> dataset is a Stata dataset that contains the definition of one or
    more points to be superimposed onto the base map. A <i>point</i> dataset is
    required to have the following structure:
<p>
        <i>xvar_pn</i>  <i>yvar_pn</i>  <i>byvar_pn</i>  <i>propvar_pn</i>  <i>devvar_pn</i>  <i>weightvar_pn</i>
       -----------------------------------------------------------------
             11       30         1         100         30          1000
             20       34         1         110         25          1500
             25       40         1          90         40          1230
             25       45         2         200         10           950
             15       20         2          50         70           600
       -----------------------------------------------------------------
<p>
    <i>xvar_pn</i> is a placeholder denoting a required numeric variable that
    contains the <i>x</i>-coordinate of the points. <i>yvar_pn</i> is a placeholder
    denoting a required numeric variable that contains the <i>y</i>-coordinate of
    the points. <i>byvar_pn</i> is a placeholder denoting an optional variable that
    can be specified to distinguish different kinds of points. <i>propvar_pn</i> is
    a placeholder denoting an optional variable that, when specified,
    requests that the point markers be drawn with size proportional to
    <i>propvar_pn</i>. <i>devvar_pn</i> is a placeholder denoting an optional variable
    that, when specified, requests that the point markers be drawn as
    deviations from a given reference value of <i>devvar_pn</i>. Finally,
    <i>weightvar_pn</i> is a placeholder denoting an optional variable that, when
    specified, requests that the reference value of <i>devvar_pn</i> be computed
    weighting observations by variable <i>weightvar_pn</i>. It is important to note
    that the required and optional variables making up a <i>point</i> dataset can
    either reside in an external dataset or be part of the <i>master</i> dataset.
<p>
<a name="sd_diagram"></a>    A <i>diagram</i> dataset is a Stata dataset that contains the definition of one
    or more diagrams to be superimposed onto the base map at given reference
    points. A <i>diagram</i> dataset is required to have the following structure:
<p>
       <i>xvar_dg</i>  <i>yvar_dg</i>  <i>byvar_dg</i>  <i>diagvar_dg</i>  <i>propvar_dg</i>  <i>weightvar_dg</i>
      ------------------------------------------------------------------
            15       30         1         ...          30          1000
            18       40         1         ...          25          1500
            20       45         1         ...          40          1230
            25       45         2         ...          10           950
            15       20         2         ...          70           600
      ------------------------------------------------------------------
<p>
    <i>xvar_dg</i> is a placeholder denoting a required numeric variable that
    contains the <i>x</i>-coordinate of the diagram reference points. <i>yvar_dg</i> is a
    placeholder denoting a required numeric variable that contains the
    <i>y</i>-coordinate of the diagram reference points. <i>byvar_dg</i> is a placeholder
    denoting an optional variable that can be specified to distinguish
    different groups of diagrams. <i>diagvar_dg</i> is a placeholder denoting one or
    more variables to be represented by the diagrams. <i>propvar_dg</i> is a
    placeholder denoting an optional variable that, when specified, requests
    that the diagrams be drawn with area proportional to <i>propvar_dg</i>. Finally,
    <i>weightvar_dg</i> is a placeholder denoting an optional variable that, when
    specified, requests that the reference value of the diagrams be computed
    weighting observations by variable <i>weightvar_dg</i> (this applies only to
    framed-rectangle charts). It is important to note that the required and
    optional variables making up a <i>diagram</i> dataset can either reside in an
    external dataset or be part of the <i>master</i> dataset.
<p>
<a name="sd_arrow"></a>    An <i>arrow</i> dataset is a Stata dataset that contains the definition of one
    or more arrows to be superimposed onto the base map. An <i>arrow</i> dataset is
    required to have the following structure:
<p>
             _ID       _X1       _Y1       _X2       _Y2   <i>byvar_ar</i>
           ---------------------------------------------------------
               1        11        30        18        30          1
               2        15        40        15        45          1
               3        15        40        25        40          1
               4        20        35        28        45          2
               5        17        20        20        11          2
           ---------------------------------------------------------
<p>
    _ID is required and is a numeric variable that uniquely identifies the
    arrows. _X1 is required and is a numeric variable that contains the
    <i>x</i>-coordinate of the starting point of the arrows. _Y1 is required and is
    a numeric variable that contains the <i>y</i>-coordinate of the starting point
    of the arrows. _X2 is required and is a numeric variable that contains
    the <i>x</i>-coordinate of the ending point of the arrows. _Y2 is required and
    is a numeric variable that contains the <i>y</i>-coordinate of the ending point
    of the arrows. Finally, <i>byvar_ar</i> is a placeholder denoting an optional
    variable that can be specified to distinguish different kinds of arrows.
<p>
<a name="sd_label"></a>    A <i>label</i> dataset is a Stata dataset that contains the definition of one or
    more labels to be superimposed onto the base map at given reference
    points. A <i>label</i> dataset is required to have the following structure:
<p>
                     <i>xvar_lb</i>  <i>yvar_lb</i>  <i>byvar_lb</i>  <i>labvar_lb</i>
                    ---------------------------------------
                          11       33         1      Abcde
                          20       37         1        Fgh
                          25       43         1       IJKL
                          25       48         2     Mnopqr
                          15       22         2        stu
                    ---------------------------------------
<p>
    <i>xvar_lb</i> is a placeholder denoting a required numeric variable that
    contains the <i>x</i>-coordinate of the label reference points. <i>yvar_lb</i> is a
    placeholder denoting a required numeric variable that contains the
    <i>y</i>-coordinate of the label reference points. <i>byvar_lb</i> is a placeholder
    denoting an optional variable that can be specified to distinguish
    different kinds of labels. Finally, <i>labvar_lb</i> is a placeholder denoting
    the variable that contains the labels. It is important to note that the
    required and optional variables making up a <i>label</i> dataset can either
    reside in an external dataset or be part of the <i>master</i> dataset.
<p>
<p>
<a name="color"></a><b><u>Color lists</u></b>
<p>
    Some <b>spmap</b> options and suboptions request the user to specify a list of
    one or more colors. When the list includes only one color, the user is
    required to specify a standard <i>colorstyle</i>. On the other hand, when the
    list includes two or more colors, the user can either specify a standard
    <i>colorstyle</i> <i>list</i>, or specify the name of a predefined color scheme.
<p>
<a name="colorscheme"></a>    The following table lists the predefined color schemes available in the
    current version of <b>spmap</b>, indicating the name of each scheme, the maximum
    number of different colors it allows, its type, and its source.
<p>
                       NAME     MAXCOL         TYPE     SOURCE
               ------------------------------------------------
                      Blues          9   Sequential     Brewer
                     Blues2         99   Sequential     Custom
                       BuGn          9   Sequential     Brewer
                       BuPu          9   Sequential     Brewer
                       GnBu          9   Sequential     Brewer
                     Greens          9   Sequential     Brewer
                    Greens2         99   Sequential     Custom
                      Greys          9   Sequential     Brewer
                     Greys2         99   Sequential     Brewer
                       Heat         16   Sequential     Custom
                       OrRd          9   Sequential     Brewer
                    Oranges          9   Sequential     Brewer
                       PuBu          9   Sequential     Brewer
                     PuBuGn          9   Sequential     Brewer
                       PuRd          9   Sequential     Brewer
                    Purples          9   Sequential     Brewer
                    Rainbow         99   Sequential     Custom
                       RdPu          9   Sequential     Brewer
                       Reds          9   Sequential     Brewer
                      Reds2         99   Sequential     Custom
                    Terrain         16   Sequential     Custom
                Topological         16   Sequential     Custom
                       YlGn          9   Sequential     Brewer
                     YlGnBu          9   Sequential     Brewer
                     YlOrBr          9   Sequential     Brewer
                     YlOrRd          9   Sequential     Brewer
                       BrBG         11    Diverging     Brewer
                       BuRd         11    Diverging     Custom
                     BuYlRd         11    Diverging     Custom
                       PRGn         11    Diverging     Brewer
                       PiYG         11    Diverging     Brewer
                       PuOr         11    Diverging     Brewer
                       RdBu         11    Diverging     Brewer
                       RdGy         11    Diverging     Brewer
                     RdYlBu         11    Diverging     Brewer
                     RdYlGn         11    Diverging     Brewer
                   Spectral         11    Diverging     Brewer
                     Accent          8  Qualitative     Brewer
                      Dark2          8  Qualitative     Brewer
                     Paired         12  Qualitative     Brewer
                    Pastel1          9  Qualitative     Brewer
                    Pastel2          8  Qualitative     Brewer
                       Set1          9  Qualitative     Brewer
                       Set2          8  Qualitative     Brewer
                       Set3         12  Qualitative     Brewer
               ------------------------------------------------
<p>
    Following Brewer (1999), <i>sequential schemes</i> are typically used to
    represent ordered data, so that higher data values are represented by
    darker colors; in turn, <i>diverging schemes</i> are used when there is a
    meaningful midpoint in the data, to emphasize progressive divergence from
    this midpoint in the two opposite directions; finally, <i>qualitative</i>
    <i>schemes</i> are generally used to represent unordered, categorical data.
<p>
    The color schemes whose source is indicated as "Brewer" were designed by
    Dr. Cynthia A. Brewer, Department of Geography, The Pennsylvania State
    University, University Park, Pennsylvania, USA (Brewer et al. 2003).
    These color schemes are used with Dr. Brewer’s permission and are taken
    from the ColorBrewer map design tool available at ColorBrewer.org.
<p>
<p>
<a name="choromap"></a><b><u>Choropleth maps</u></b>
<p>
    A choropleth map can be defined as a map in which each subarea (e.g.,
    each census tract) of a given study region (e.g., a city) is colored or
    shaded with an intensity proportional to the value taken on by a given
    quantitative variable in that subarea (Slocum et al. 2005). Since
    choropleth maps are one of the most popular means for representing the
    spatial distribution of quantitative variables, it is worth noting the
    way <b>spmap</b> can be used to draw this kind of map.
<p>
    In <b>spmap</b>, a choropleth map is a base map whose constituent polygons are
    colored according to the values taken on by <i>attribute</i>, a numeric variable
    that must be contained in the <i>master</i> dataset and specified immediately
    after the main command (see syntax diagram above). To draw the desired
    choropleth map, <b>spmap</b> first groups the values taken on by variable
    <i>attribute</i> into <i>k</i> classes defined by a given set of class breaks, and then
    assigns a different color to each class. The current version of <b>spmap</b>
    offers six methods for determining class breaks:
<p>
         o  <i>Quantiles</i>: class breaks correspond to quantiles of the
            distribution of variable <i>attribute</i>, so that each class includes
            approximately the same number of polygons.
<p>
         o  <i>Boxplot</i>: the distribution of variable <i>attribute</i> is divided into 6
            classes defined as follows: [min, p25 - 1.5*iqr],
            (p25 - 1.5*iqr, p25], (p25, p50], (p50, p75],
            (p75, p75 + 1.5*iqr] and (p75 + 1.5*iqr, max], where
            iqr = interquartile range.
<p>
         o  <i>Equal intervals</i>: class breaks correspond to values that divide
            the distribution of variable <i>attribute</i> into <i>k</i> equal-width
            intervals.
<p>
         o  <i>Standard deviates</i>: the distribution of variable <i>attribute</i> is
            divided into <i>k</i> classes (2 &lt;= <i>k</i> &lt;= 9) whose width is defined as a
            fraction <i>p</i> of its standard deviation sd. Following the
            suggestions of Evans (1977), this proportion <i>p</i> varies with <i>k</i> as
            follows:
<p>
                                    <i>k</i>      <i>p</i>
                                 ------------
                                    2     inf
                                    3     1.2
                                    4     1.0
                                    5     0.8
                                    6     0.8
                                    7     0.8
                                    8     0.6
                                    9     0.6
                                 ------------
<p>
            Class intervals are centered on the arithmetic mean <i>m</i>, which is a
            class midpoint if <i>k</i> is odd and a class boundary if <i>k</i> is even; the
            lowest and highest classes are open-ended (Evans 1977).
<p>
         o  <i>k-means</i>: the distribution of variable <i>attribute</i> is divided into <i>k</i>
            classes using k-means partition cluster analysis. The clustering
            procedure is applied several times to variable <i>attribute</i>, and the
            solution that maximizes the goodness-of-variance fit (Armstrong
            et al. 2003) is used.
<p>
         o  <i>Custom</i>: class breaks are specified by the user.
<p>
    Alternatively, <b>spmap</b> allows the user to leave the values of variable
    <i>attribute</i> ungrouped. In this case, <i>attribute</i> is treated as a categorical
    variable and a different color is assigned to each of its values.
<p>
<p>
<a name="basemap2"></a><b><u>Options for drawing the base map</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>id(</b><i>idvar</i><b>)</b> specifies the name of a numeric variable that uniquely
        identifies the polygon or polygons making up the base map. <i>idvar</i> must
        be contained in the <i>master</i> dataset, and its values must correspond to
        the values taken on by variable _ID contained in the <i>basemap</i> dataset.
<p>
        +-----------+
    ----+ Cartogram +--------------------------------------------------------
<p>
    <b>area(</b><i>areavar</i><b>)</b> requests that the polygons making up the base map be drawn
        with area proportional to the values taken on by numeric variable
        <i>areavar</i>, so that a noncontiguous area cartogram (Olson 1976) is
        obtained. <i>areavar</i> must be contained in the <i>master</i> dataset.
<p>
    <b>split</b> requests that, before drawing a noncontiguous area cartogram, all
        multipart base map polygons be split into their constituent parts,
        each of which will then be treated as a distinct simple polygon.
<p>
    <b>map(</b><i>backgroundmap</i><b>)</b> requests that, when drawing a noncontiguous area
        cartogram, the polygons making up the base map be superimposed onto a
        background map defined in Stata dataset <i>backgroundmap</i>.
<p>
    <b>mfcolor(</b><i>colorstyle</i><b>)</b> specifies the fill color of the background map. The
        default is <b>mfcolor(none)</b>.
<p>
    <b>mocolor(</b><i>colorstyle</i><b>)</b> specifies the outline color of the background map.
        The default is <b>mocolor(black)</b>.
<p>
    <b>mosize(</b><i>linewidthstyle</i><b>)</b> specifies the outline thickness of the background
        map. The default is <b>mosize(thin)</b>.
<p>
    <b>mopattern(</b><i>linepatternstyle</i><b>)</b> specifies the outline pattern of the
        background map. The default is <b>mopattern(solid)</b>.
<p>
        +----------------+
    ----+ Choropleth map +---------------------------------------------------
<p>
    <b>clmethod(</b><i>method</i><b>)</b> specifies the method to be used for classifying variable
        <i>attribute</i> and representing its spatial distribution as a choropleth
        map.
<p>
        <b>clmethod(quantile)</b> is the default and requests that the quantiles
            method be used.
<p>
        <b>clmethod(boxplot)</b> requests that the boxplot method be used.
<p>
        <b>clmethod(eqint)</b> requests that the equal intervals method be used.
<p>
        <b>clmethod(stdev)</b> requests that the standard deviates method be used.
<p>
        <b>clmethod(kmeans)</b> requests that the <i>k</i>-means method be used.
<p>
        <b>clmethod(custom)</b> requests that class breaks be specified by the user
            with option <b>clbreaks(</b><i>numlist</i><b>)</b>.
<p>
        <b>clmethod(unique)</b> requests that each value of variable <i>attribute</i> be
            treated as a distinct class.
<p>
    <b>clnumber(</b><i>#</i><b>)</b> specifies the number of classes <i>k</i> in which variable <i>attribute</i>
        is to be divided. When the quantiles, equal intervals, standard
        deviates, or <i>k</i>-means classification method is chosen, the default is
        <b>clnumber(4)</b>. When the boxplot classification method is chosen, this
        option is inactive and <i>k</i>=6. When the custom classification method is
        chosen, this option is inactive and <i>k</i> equals the number of elements
        of <i>numlist</i> specified in option <b>clbreaks(</b><i>numlist</i><b>)</b> minus 1. When the
        unique classification method is chosen, this option is inactive and <i>k</i>
        equals the number of different values taken on by variable <i>attribute</i>.
<p>
    <b>clbreaks(</b><i>numlist</i><b>)</b> is required when option <b>clmethod(custom)</b> is specified.
        It defines the custom class breaks to be used for classifying
        variable <i>attribute</i>. <i>numlist</i> should be specified so that the first
        element is the minimum value of variable <i>attribute</i> to be considered;
        the second to <i>k</i>th elements are the class breaks; and the last element
        is the maximum value of variable <i>attribute</i> to be considered. For
        example, suppose we want to group the values of variable <i>attribute</i>
        into the following four classes: [10,15], (15,20], (20,25] and
        (25,50]; for this we must specify <b>clbreaks(10 15 20 25 50)</b>.
<p>
    <b>eirange(</b><i>min max</i><b>)</b> specifies the range of values (minimum and maximum) to
        be considered in the calculation of class breaks when option
        <b>clmethod(eqint)</b> is specified. This option overrides the default range
        [min(<i>attribute</i>), max(<i>attribute</i>)].
<p>
    <b>kmiter(</b><i>#</i><b>)</b> specifies the number of times the clustering procedure is
        applied when option <b>clmethod(kmeans)</b> is specified. The default is
        <b>kmiter(20)</b>.
<p>
    <b>ndfcolor(</b><i>colorstyle</i><b>)</b> specifies the fill color of the empty (no data)
        polygons of the choropleth map. The default is <b>ndfcolor(white)</b>.
<p>
    <b>ndocolor(</b><i>colorstyle</i><b>)</b> specifies the outline color of the empty (no data)
        polygons of the choropleth map. The default is <b>ndocolor(black)</b>.
<p>
    <b>ndsize(</b><i>linewidthstyle</i><b>)</b> specifies the outline thickness of the empty (no
        data) polygons of the choropleth map. The default is <b>ndsize(thin)</b>.
<p>
    <b>ndlabel(</b><i>string</i><b>)</b> specifies the legend label to be attached to the empty
        (no data) polygons of the choropleth map. The default is <b>ndlabel(No</b>
        <b>data)</b>.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>fcolor(</b><i>colorlist</i><b>)</b> specifies the list of fill colors of the base map
        polygons. When no choropleth map is drawn, the list should include
        only one element. On the other hand, when a choropleth map is drawn,
        the list should be either composed of <i>k</i> elements, or represented by
        the name of a predefined color scheme. The default fill color is
        <b>none</b>. When a choropleth map is drawn, the default argument is a color
        scheme that depends on the classification method specified in option
        <b>clmethod(</b><i>method</i><b>)</b>:
<p>
                       Classification         Default  
                           method          color scheme  
                      ----------------------------------
                           quantile            Greys  
                           boxplot             BuRd   
                           eqint               Greys  
                           stdev               BuRd   
                           kmeans              Greys  
                           custom              Greys  
                           unique              Paired 
                      ----------------------------------
<p>
    <b>ocolor(</b><i>colorlist</i><b>)</b> specifies the list of outline colors of the base map
        polygons. When no choropleth map is drawn, the list should include
        only one element. On the other hand, when a choropleth map is drawn,
        the list should be either composed of <i>k</i> elements, or represented by
        the name of a predefined color scheme. The default outline color is
        <b>black</b>, the default specification is <b>ocolor(black ...)</b>.
<p>
    <b>osize(</b><i>linewidthstyle</i><i>_list</i><b>)</b> specifies the list of outline thicknesses of
        the base map polygons. When no choropleth map is drawn, the list
        should include only one element. On the other hand, when a choropleth
        map is drawn, the list should be composed of <i>k</i> elements. The default
        outline thickness is <b>thin</b>, the default specification is <b>osize(thin</b>
        <b>...)</b>.
<p>
        +--------+
    ----+ Legend +-----------------------------------------------------------
<p>
    <b>legenda(on</b>|<b>off)</b> specifies whether the base map legend should be displayed
        or hidden.
<p>
        <b>legenda(on)</b> requests that the base map legend be displayed. This is
            the default when a choropleth map is drawn.
<p>
        <b>legenda(off)</b> requests that the base map legend be hidden. This is the
            default when no choropleth map is drawn.
<p>
    <b>legtitle(</b><i>string</i><b>)</b> specifies the title of the base map legend. When a
        choropleth map is drawn, option <b>legtitle(varlab)</b> requests that the
        label of variable <i>attribute</i> be used as the legend title.
<p>
    <b>leglabel(</b><i>string</i><b>)</b> specifies the label to be attached to the single key of
        the base map legend when no choropleth map is drawn. This option is
        required when option <b>legenda(on)</b> is specified and no choropleth map
        is drawn.
<p>
    <b>legorder(hilo</b>|<b>lohi)</b> specifies the display order of the keys of the base
        map legend when a choropleth map is drawn.
<p>
        <b>legorder(hilo)</b> is the default and requests that the keys of the base
            map legend be displayed in descending order of variable
            <i>attribute</i>.
<p>
        <b>legorder(lohi)</b> requests that the keys of the base map legend be
            displayed in ascending order of variable <i>attribute</i>. This is the
            default when option <b>clmethod(</b><b><u>u</u></b><b>nique)</b> is specified.
<p>
    <b>legstyle(0</b>|<b>1</b>|<b>2</b>|<b>3)</b> specifies the way the keys of the base map legend are
        labelled when a choropleth map is drawn.
<p>
        <b>legstyle(0)</b> requests that the keys of the base map legend not be
            labelled.
<p>
        <b>legstyle(1)</b> is the default and requests that the keys of the base map
            legend be labelled using the standard mathematical notation for
            value intervals (e.g.: (20,35]).
<p>
        <b>legstyle(2)</b> requests that the keys of the base map legend be labelled
            using the notation ll&amp;ul, where ll denotes the lower limit of the
            class interval, ul denotes the upper limit of the class interval,
            and &amp; denotes a string that separates the two values. For
            example, if ll=20, ul=35, and &amp;=" - ", then the resulting label
            will be "20 - 35".
<p>
        <b>legstyle(3)</b> requests that only the first and last keys of the base
            map legend be labelled; the first key is labelled with the lower
            limit of the corresponding class interval, the last key is
            labelled with the upper limit of the corresponding class
            interval.
<p>
    <b>legjunction(</b><i>string</i><b>)</b> specifies the string to be used as separator when
        option <b>legstyle(2)</b> is specified. The default is <b>legjunction(" - ")</b>.
<p>
    <b>legcount</b> requests that, when a choropleth map is drawn, the number of
        base map polygons belonging to each class of variable <i>attribute</i> be
        displayed in the legend.
<p>
<p>
<a name="polygon2"></a><b><u>Option polygon() suboptions</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>data(</b><i>polygon</i><b>)</b> requests that one or more supplementary polygons defined in
        Stata dataset <i>polygon</i> be superimposed onto the base map.
<p>
    <b>select(</b><i>command</i><b>)</b> requests that a given subset of records of dataset
        <i>polygon</i> be selected using Stata commands keep or drop.
<p>
    <b>by(</b><i>byvar_pl</i><b>)</b> indicates that the supplementary polygons defined in dataset
        <i>polygon</i> belong to <i>kpl</i> different groups specified by variable
        <i>byvar_pl</i>.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>fcolor(</b><i>colorlist</i><b>)</b> specifies the list of fill colors of the supplementary
        polygons. When suboption <b>by(</b><i>byvar_pl</i><b>)</b> is not specified, the list
        should include only one element. On the other hand, when suboption
        <b>by(</b><i>byvar_pl</i><b>)</b> is specified, the list should be either composed of <i>kpl</i>
        elements, or represented by the name of a predefined color scheme.
        The default fill color is <b>none</b>, the default specification is
        <b>fcolor(none ...)</b>.
<p>
    <b>ocolor(</b><i>colorlist</i><b>)</b> specifies the list of outline colors of the
        supplementary polygons. When suboption <b>by(</b><i>byvar_pl</i><b>)</b> is not specified,
        the list should include only one element. On the other hand, when
        suboption <b>by(</b><i>byvar_pl</i><b>)</b> is specified, the list should be either
        composed of <i>kpl</i> elements, or represented by the name of a predefined
        color scheme. The default outline color is <b>black</b>, the default
        specification is <b>ocolor(black ...)</b>.
<p>
    <b>osize(</b><i>linewidthstyle</i><i>_list</i><b>)</b> specifies the list of outline thicknesses of
        the supplementary polygons. When suboption <b>by(</b><i>byvar_pl</i><b>)</b> is not
        specified, the list should include only one element. On the other
        hand, when suboption <b>by(</b><i>byvar_pl</i><b>)</b> is specified, the list should be
        composed of <i>kpl</i> elements. The default outline thickness is <b>thin</b>, the
        default specification is <b>osize(thin ...)</b>.
<p>
        +--------+
    ----+ Legend +-----------------------------------------------------------
<p>
    <b>legenda(on</b>|<b>off)</b> specifies whether the supplementary-polygon legend should
        be displayed or hidden.
<p>
        <b>legenda(on)</b> requests that the supplementary-polygon legend be
            displayed.
<p>
        <b>legenda(off)</b> is the default and requests that the
            supplementary-polygon legend be hidden.
<p>
    <b>legtitle(</b><i>string</i><b>)</b> specifies the title of the supplementary-polygon legend.
        When suboption <b>by(</b><i>byvar_pl</i><b>)</b> is specified, suboption <b>legtitle(varlab)</b>
        requests that the label of variable <i>byvar_pl</i> be used as the legend
        title.
<p>
    <b>leglabel(</b><i>string</i><b>)</b> specifies the label to be attached to the single key of
        the supplementary-polygon legend when suboption <b>by(</b><i>byvar_pl</i><b>)</b> is not
        specified. This suboption is required when suboption <b>legenda(on)</b> is
        specified and suboption <b>by(</b><i>byvar_pl</i><b>)</b> is not specified.
<p>
    <b>legshow(</b><i>numlist</i><b>)</b> requests that, when suboption <b>by(</b><i>byvar_pl</i><b>)</b> is specified,
        only the keys included in <i>numlist</i> be displayed in the
        supplementary-polygon legend.
<p>
    <b>legcount</b> requests that the number of supplementary polygons be displayed
        in the legend.
<p>
<p>
<a name="line2"></a><b><u>Option line() suboptions</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>data(</b><i>line</i><b>)</b> requests that one or more polylines defined in Stata dataset
        <i>line</i> be superimposed onto the base map.
<p>
    <b>select(</b><i>command</i><b>)</b> requests that a given subset of records of dataset <i>line</i>
        be selected using Stata commands keep or drop.
<p>
    <b>by(</b><i>byvar_ln</i><b>)</b> indicates that the polylines defined in dataset <i>line</i> belong
        to <i>kln</i> different groups specified by variable <i>byvar_ln</i>.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>color(</b><i>colorlist</i><b>)</b> specifies the list of polyline colors. When suboption
        <b>by(</b><i>byvar_ln</i><b>)</b> is not specified, the list should include only one
        element. On the other hand, when suboption <b>by(</b><i>byvar_ln</i><b>)</b> is specified,
        the list should be either composed of <i>kln</i> elements, or represented by
        the name of a predefined color scheme. The default color is <b>black</b>,
        the default specification is <b>color(black ...)</b>.
<p>
    <b>size(</b><i>linewidthstyle</i><i>_list</i><b>)</b> specifies the list of polyline thicknesses.
        When suboption <b>by(</b><i>byvar_ln</i><b>)</b> is not specified, the list should include
        only one element. On the other hand, when suboption <b>by(</b><i>byvar_ln</i><b>)</b> is
        specified, the list should be composed of <i>kln</i> elements. The default
        thickness is <b>thin</b>, the default specification is <b>size(thin ...)</b>.
<p>
    <b>pattern(</b><i>linepatternstyle</i><i>_list</i><b>)</b> specifies the list of polyline patterns.
        When suboption <b>by(</b><i>byvar_ln</i><b>)</b> is not specified, the list should include
        only one element. On the other hand, when suboption <b>by(</b><i>byvar_ln</i><b>)</b> is
        specified, the list should be composed of <i>kln</i> elements. The default
        pattern is <b>solid</b>, the default specification is <b>pattern(solid ...)</b>.
<p>
        +--------+
    ----+ Legend +-----------------------------------------------------------
<p>
    <b>legenda(on</b>|<b>off)</b> specifies whether the polyline legend should be displayed
        or hidden.
<p>
        <b>legenda(on)</b> requests that the polyline legend be displayed.
<p>
        <b>legenda(off)</b> is the default and requests that the polyline legend be
            hidden.
<p>
    <b>legtitle(</b><i>string</i><b>)</b> specifies the title of the polyline legend. When
        suboption <b>by(</b><i>byvar_ln</i><b>)</b> is specified, suboption <b>legtitle(varlab)</b>
        requests that the label of variable <i>byvar_ln</i> be used as the legend
        title.
<p>
    <b>leglabel(</b><i>string</i><b>)</b> specifies the label to be attached to the single key of
        the polyline legend when suboption <b>by(</b><i>byvar_ln</i><b>)</b> is not specified.
        This suboption is required when suboption <b>legenda(on)</b> is specified
        and suboption <b>by(</b><i>byvar_ln</i><b>)</b> is not specified.
<p>
    <b>legshow(</b><i>numlist</i><b>)</b> requests that, when suboption <b>by(</b><i>byvar_ln</i><b>)</b> is specified,
        only the keys included in <i>numlist</i> be displayed in the polyline
        legend.
<p>
    <b>legcount</b> requests that the number of polylines be displayed in the
        legend.
<p>
<p>
<a name="point2"></a><b><u>Option point() suboptions</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>data(</b><i>point</i><b>)</b> requests that one or more points defined in Stata dataset
        <i>point</i> be superimposed onto the base map.
<p>
    <b>select(</b><i>command</i><b>)</b> requests that a given subset of records of dataset <i>point</i>
        be selected using Stata commands keep or drop.
<p>
    <b>by(</b><i>byvar_pn</i><b>)</b> indicates that the points defined in dataset <i>point</i> belong to
        <i>kpn</i> different groups specified by variable <i>byvar_pn</i>.
<p>
    <b>xcoord(</b><i>xvar_pn</i><b>)</b> specifies the name of the variable containing the
        <i>x</i>-coordinate of each point.
<p>
    <b>ycoord(</b><i>yvar_pn</i><b>)</b> specifies the name of the variable containing the
        <i>y</i>-coordinate of each point.
<p>
        +-------------------+
    ----+ Proportional size +------------------------------------------------
<p>
    <b>proportional(</b><i>propvar_pn</i><b>)</b> requests that the point markers be drawn with
        size proportional to the values taken on by numeric variable
        <i>propvar_pn</i>.
<p>
    <b>prange(</b><i>min max</i><b>)</b> requests that variable <i>propvar_pn</i> specified in suboption
        <b>proportional(</b><i>propvar_pn</i><b>)</b> be normalized based on range [<i>min</i>, <i>max</i>].
        This suboption overrides the default normalization based on range [0,
        max(<i>propvar_pn</i>)].
<p>
    <b>psize(relative</b>|<b>absolute)</b> specifies the reference system for drawing the
        point markers.
<p>
        <b>psize(relative)</b> is the default and requests that the point markers be
            drawn using relative minimum and maximum reference values. This
            is the best choice when there is no need to compare the map at
            hand with other maps of the same kind.
<p>
        <b>psize(absolute)</b> requests that the point markers be drawn using
            absolute minimum and maximum reference values. This is the best
            choice when the map at hand is to be compared with other maps of
            the same kind.
<p>
        +-----------+
    ----+ Deviation +--------------------------------------------------------
<p>
    <b>deviation(</b><i>devvar_pn</i><b>)</b> requests that the point markers be drawn as
        deviations from a reference value of numeric variable <i>devvar_pn</i>
        specified in option <b>refval()</b>. When this suboption is specified, in
        the first place the values of variable <i>devvar_pn</i> are re-expressed as
        deviations from the chosen reference value. Then, points associated
        with positive deviations are represented by solid markers, whereas
        points associated with negative deviations are represented by hollow
        markers of the same shape; in both cases, markers are drawn with size
        proportional to the absolute value of the deviation. This suboption
        is incompatible with suboption <b>proportional(</b><i>propvar_pn</i><b>)</b>.
<p>
    <b>refval(mean</b>|<b>median</b>|<i>#</i><b>)</b> specifies the reference value of variable <i>devvar_pn</i>
        for computing deviations.
<p>
        <b>refval(mean)</b> is the default and requests that the arithmetic mean of
            variable <i>devvar_pn</i> be taken as the reference value.
<p>
        <b>refval(median)</b> requests that the median of variable <i>devvar_pn</i> be
            taken as the reference value.
<p>
        <b>refval(</b><i>#</i><b>)</b> requests that an arbitrary real value <i>#</i> be taken as the
            reference value.
<p>
    <b>refweight(</b><i>weightvar_pn</i><b>)</b> requests that the reference value of variable
        <i>devvar_pn</i> be computed weighting observations by values of variable
        <i>weightvar_pn</i>.
<p>
    <b>dmax(</b><i>#</i><b>)</b> requests that the point markers be drawn using value <i>#</i> as the
        maximum absolute deviation of reference.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>size(</b><i>markersizestyle</i><i>_list</i><b>)</b> specifies the list of point marker sizes. When
        suboption <b>by(</b><i>byvar_pn</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_pn</i><b>)</b> is
        specified, the list should be composed of <i>kpn</i> elements. The default
        size is <b>*1</b>, the default specification is <b>size(*1 ...)</b>.
<p>
    <b>shape(</b><i>symbolstyle</i><i>_list</i><b>)</b> specifies the list of point marker shapes. When
        suboption <b>by(</b><i>byvar_pn</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_pn</i><b>)</b> is
        specified, the list should be composed of <i>kpn</i> elements. The default
        shape is <b>o</b>, the default specification is <b>shape(o ...)</b>. When suboption
        <b>deviation(</b><i>devvar_pn</i><b>)</b> is specified, this suboption accepts only solid
        <i>symbolstyles</i> written in short form: <b>O D T S o d t s</b>.
<p>
    <b>fcolor(</b><i>colorlist</i><b>)</b> specifies the list of fill colors of the point markers.
        When suboption <b>by(</b><i>byvar_pn</i><b>)</b> is not specified, the list should include
        only one element. On the other hand, when suboption <b>by(</b><i>byvar_pn</i><b>)</b> is
        specified, the list should be either composed of <i>kpn</i> elements, or
        represented by the name of a predefined color scheme. The default
        fill color is <b>black</b>, the default specification is <b>fcolor(black ...)</b>.
<p>
    <b>ocolor(</b><i>colorlist</i><b>)</b> specifies the list of outline colors of the point
        markers. When suboption <b>by(</b><i>byvar_pn</i><b>)</b> is not specified, the list
        should include only one element. On the other hand, when suboption
        <b>by(</b><i>byvar_pn</i><b>)</b> is specified, the list should be either composed of <i>kpn</i>
        elements, or represented by the name of a predefined color scheme.
        The default outline color is <b>none</b>, the default specification is
        <b>ocolor(none ...)</b>.
<p>
    <b>osize(</b><i>linewidthstyle</i><i>_list</i><b>)</b> specifies the list of outline thicknesses of
        the point markers. When suboption <b>by(</b><i>byvar_pn</i><b>)</b> is not specified, the
        list should include only one element. On the other hand, when
        suboption <b>by(</b><i>byvar_pn</i><b>)</b> is specified, the list should be composed of
        <i>kpl</i> elements. The default outline thickness is <b>thin</b>, the default
        specification is <b>osize(thin ...)</b>.
<p>
        +--------+
    ----+ Legend +-----------------------------------------------------------
<p>
    <b>legenda(on</b>|<b>off)</b> specifies whether the point legend should be displayed or
        hidden.
<p>
        <b>legenda(on)</b> requests that the point legend be displayed.
<p>
        <b>legenda(off)</b> is the default and requests that the point legend be
            hidden.
<p>
    <b>legtitle(</b><i>string</i><b>)</b> specifies the title of the point legend. When suboption
        <b>by(</b><i>byvar_pn</i><b>)</b> is specified, suboption <b>legtitle(varlab)</b> requests that
        the label of variable <i>byvar_pn</i> be used as the legend title.
<p>
    <b>leglabel(</b><i>string</i><b>)</b> specifies the label to be attached to the single key of
        the point legend when suboption <b>by(</b><i>byvar_pn</i><b>)</b> is not specified. This
        suboption is required when suboption <b>legenda(on)</b> is specified and
        suboption <b>by(</b><i>byvar_pn</i><b>)</b> is not specified.
<p>
    <b>legshow(</b><i>numlist</i><b>)</b> requests that, when suboption <b>by(</b><i>byvar_pn</i><b>)</b> is specified,
        only the keys included in <i>numlist</i> be displayed in the point legend.
<p>
    <b>legcount</b> requests that the number of points be displayed in the legend.
<p>
<p>
<a name="diagram2"></a><b><u>Option diagram() suboptions</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>data(</b><i>diagram</i><b>)</b> requests that one or more diagrams defined in Stata dataset
        <i>diagram</i> be superimposed onto the base map at given reference points.
<p>
    <b>select(</b><i>command</i><b>)</b> requests that a given subset of records of dataset
        <i>diagram</i> be selected using Stata commands keep or drop.
<p>
    <b>by(</b><i>byvar_dg</i><b>)</b> indicates that the diagrams defined in dataset <i>diagram</i>
        belong to <i>kdg</i> different groups specified by variable <i>byvar_dg</i>. This
        option is active only when just one variable is specified in
        suboption <b>variables(</b><i>diagvar_dg</i><b>)</b>.
<p>
    <b>xcoord(</b><i>xvar_dg</i><b>)</b> specifies the name of the variable containing the
        <i>x</i>-coordinate of each diagram reference point.
<p>
    <b>ycoord(</b><i>yvar_dg</i><b>)</b> specifies the name of the variable containing the
        <i>y</i>-coordinate of each diagram reference point.
<p>
    <b>variables(</b><i>diagvar_dg</i><b>)</b> specifies the list of variables to be represented
        by the diagrams.
<p>
    <b>type(frect</b>|<b>pie)</b> specifies the type of diagram to be used.
<p>
        <b>type(frect)</b> is the default when only one variable is specified in
            suboption <b>variables(</b><i>diagvar_dg</i><b>)</b> and requests that
            framed-rectangle charts (Cleveland and McGill 1984; Cleveland
            1994) be used.
<p>
        <b>type(pie)</b> is the default (and the only possibility) when two or more
            variables are specified in suboption <b>variables(</b><i>diagvar_dg</i><b>)</b> and
            requests that pie charts be used. When option <b>type(pie)</b> is
            specified, the variables specified in suboption
            <b>variables(</b><i>diagvar_dg</i><b>)</b> are rescaled so that they sum to 1 within
            each observation.
<p>
        +-------------------+
    ----+ Proportional size +------------------------------------------------
<p>
    <b>proportional(</b><i>propvar_dg</i><b>)</b> requests that the diagrams be drawn with size
        proportional to the values taken on by numeric variable <i>propvar_dg</i>.
<p>
    <b>prange(</b><i>min max</i><b>)</b> requests that variable <i>propvar_dg</i> specified in suboption
        <b>proportional(</b><i>propvar_dg</i><b>)</b> be normalized based on range [<i>min</i>, <i>max</i>].
        This suboption overrides the default normalization based on range [0,
        max(<i>propvar_dg</i>)].
<p>
        +------------------------+
    ----+ Framed-rectangle chart +-------------------------------------------
<p>
    <b>range(</b><i>min max</i><b>)</b> requests that variable <i>diagvar_dg</i> specified in suboption
        <b>variables(</b><i>diagvar_dg</i><b>)</b> be normalized based on range [<i>min</i>, <i>max</i>]. This
        suboption overrides the default normalization based on range [0,
        max(<i>diagvar_dg</i>)].
<p>
    <b>refval(mean</b>|<b>median</b>|<i>#</i><b>)</b> specifies the reference value of variable
        <i>diagvar_dg</i> for drawing the reference line.
<p>
        <b>refval(mean)</b> is the default and requests that the arithmetic mean of
            variable <i>diagvar_dg</i> be taken as the reference value.
<p>
        <b>refval(median)</b> requests that the median of variable <i>diagvar_dg</i> be
            taken as the reference value.
<p>
        <b>refval(</b><i>#</i><b>)</b> requests that an arbitrary real value <i>#</i> be taken as the
            reference value.
<p>
    <b>refweight(</b><i>weightvar_dg</i><b>)</b> requests that the reference value of variable
        <i>diagvar_dg</i> be computed weighting observations by values of variable
        <i>weightvar_dg</i>.
<p>
    <b>refcolor(</b><i>colorstyle</i><b>)</b> specifies the color of the reference line. The
        default is <b>refcolor(black)</b>.
<p>
    <b>refsize(</b><i>linewidthstyle</i><b>)</b> specifies the thickness of the reference line.
        The default is <b>refsize(medium)</b>.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>size(</b><i>#</i><b>)</b> specifies a multiplier that affects the size of the diagrams. For
        example, <b>size(1.5)</b> requests that the default size of all the diagrams
        be increased by 50%. The default is <b>size(1)</b>.
<p>
    <b>fcolor(</b><i>colorlist</i><b>)</b> specifies the list of fill colors of the diagrams. When
        just one variable is specified in suboption <b>variables(</b><i>diagvar_dg</i><b>)</b> and
        suboption <b>by(</b><i>byvar_dg</i><b>)</b> is not specified, the list should include only
        one element. When just one variable is specified in suboption
        <b>variables(</b><i>diagvar_dg</i><b>)</b> and suboption <b>by(</b><i>byvar_dg</i><b>)</b> is specified, the
        list should be either composed of <i>kdg</i> elements, or represented by the
        name of a predefined color scheme. Finally, when <i>J</i>&gt;1 variables are
        specified in suboption <b>variables(</b><i>diagvar_dg</i><b>)</b>, the list should be
        either composed of <i>J</i> elements, or represented by the name of a
        predefined color scheme. The default fill color is <b>black</b>, the default
        specification when <i>J</i>=1 is <b>fcolor(black ...)</b>, and the default
        specification when <i>J</i>&gt;1 is <b>fcolor(red blue orange green lime navy</b>
        <b>sienna ltblue</b> <b>cranberry emerald eggshell magenta olive brown yellow</b>
        <b>dkgreen)</b>.
<p>
    <b>ocolor(</b><i>colorlist</i><b>)</b> specifies the list of outline colors of the diagrams.
        When just one variable is specified in suboption
        <b>variables(</b><i>diagvar_dg</i><b>)</b> and suboption <b>by(</b><i>byvar_dg</i><b>)</b> is not specified,
        the list should include only one element. When just one variable is
        specified in suboption <b>variables(</b><i>diagvar_dg</i><b>)</b> and suboption
        <b>by(</b><i>byvar_dg</i><b>)</b> is specified, the list should be either composed of <i>kdg</i>
        elements, or represented by the name of a predefined color scheme.
        Finally, when <i>J</i>&gt;1 variables are specified in suboption
        <b>variables(</b><i>diagvar_dg</i><b>)</b>, the list should be either composed of <i>J</i>
        elements, or represented by the name of a predefined color scheme.
        The default fill color is <b>black</b>, the default specification is
        <b>ocolor(black ...)</b>.
<p>
    <b>osize(</b><i>linewidthstyle</i><i>_list</i><b>)</b> specifies the list of outline thicknesses of
        the diagrams. When just one variable is specified in suboption
        <b>variables(</b><i>diagvar_dg</i><b>)</b> and suboption <b>by(</b><i>byvar_dg</i><b>)</b> is not specified,
        the list should include only one element. When just one variable is
        specified in suboption <b>variables(</b><i>diagvar_dg</i><b>)</b> and suboption
        <b>by(</b><i>byvar_dg</i><b>)</b> is specified, the list should be composed of <i>kdg</i>
        elements. Finally, when <i>J</i>&gt;1 variables are specified in suboption
        <b>variables(</b><i>diagvar_dg</i><b>)</b>, the list should be composed of <i>J</i> elements. The
        default outline thickness is <b>thin</b>, the default specification is
        <b>osize(thin ...)</b>.
<p>
        +--------+
    ----+ Legend +-----------------------------------------------------------
<p>
    <b>legenda(on</b>|<b>off)</b> specifies whether the diagram legend should be displayed
        or hidden.
<p>
        <b>legenda(on)</b> requests that the diagram legend be displayed.
<p>
        <b>legenda(off)</b> is the default and requests that the point diagram be
            hidden.
<p>
    <b>legtitle(</b><i>string</i><b>)</b> specifies the title of the diagram legend. When just one
        variable is specified in suboption <b>variables(</b><i>diagvar_dg</i><b>)</b>, suboption
        <b>legtitle(varlab)</b> requests that the label of variable <i>diagvar_dg</i> be
        used as the legend title.
<p>
    <b>legshow(</b><i>numlist</i><b>)</b> requests that only the keys included in <i>numlist</i> be
        displayed in the diagram legend.
<p>
    <b>legcount</b> requests that the number of diagrams be displayed in the legend.
<p>
<p>
<a name="arrow2"></a><b><u>Option arrow() suboptions</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>data(</b><i>arrow</i><b>)</b> requests that one or more arrows defined in Stata dataset
        <i>arrow</i> be superimposed onto the base map.
<p>
    <b>select(</b><i>command</i><b>)</b> requests that a given subset of records of dataset <i>arrow</i>
        be selected using Stata commands keep or drop.
<p>
    <b>by(</b><i>byvar_ar</i><b>)</b> indicates that the arrows defined in dataset <i>arrow</i> belong to
        <i>kar</i> different groups specified by variable <i>byvar_ar</i>.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>direction(</b><i>directionstyle_list</i><b>)</b> specifies the list of arrow directions,
        where <i>directionstyle</i> is one of the following:  <b>1</b> (monodirectional
        arrow), <b>2</b> (bidirectional arrow). When suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not
        specified, the list should include only one element. On the other
        hand, when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is specified, the list should be
        composed of <i>kar</i> elements. The default direction is <b>1</b>, the default
        specification is <b>direction(1 ...)</b>.
<p>
    <b>hsize(</b><i>markersizestyle</i><i>_list</i><b>)</b> specifies the list of arrowhead sizes. When
        suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is
        specified, the list should be composed of <i>kar</i> elements. The default
        size is <b>1.5</b>, the default specification is <b>hsize(1.5 ...)</b>.
<p>
    <b>hangle(</b><i>anglestyle</i><i>_list</i><b>)</b> specifies the list of arrowhead angles. When
        suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is
        specified, the list should be composed of <i>kar</i> elements. The default
        angle is <b>28.64</b>, the default specification is <b>hangle(28.64 ...)</b>.
<p>
    <b>hbarbsize(</b><i>markersizestyle</i><i>_list</i><b>)</b> specifies the list of sizes of the filled
        portion of arrowheads. When suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified,
        the list should include only one element. On the other hand, when
        suboption <b>by(</b><i>byvar_ar</i><b>)</b> is specified, the list should be composed of
        <i>kar</i> elements. The default size is <b>1.5</b>, the default specification is
        <b>hbarbsize(1.5 ...)</b>.
<p>
    <b>hfcolor(</b><i>colorlist</i><b>)</b> specifies the list of arrowhead fill colors. When
        suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is
        specified, the list should be either composed of <i>kar</i> elements, or
        represented by the name of a predefined color scheme. The default
        fill color is <b>black</b>, the default specification is <b>hfcolor(black ...)</b>.
<p>
    <b>hocolor(</b><i>colorlist</i><b>)</b> specifies the list of arrowhead outline colors. When
        suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is
        specified, the list should be either composed of <i>kar</i> elements, or
        represented by the name of a predefined color scheme. The default
        outline color is <b>black</b>, the default specification is
        <b>hocolor(black ...)</b>.
<p>
    <b>hosize(</b><i>linewidthstyle</i><i>_list</i><b>)</b> specifies the list of arrowhead outline
        thicknesses. When suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list
        should include only one element. On the other hand, when suboption
        <b>by(</b><i>byvar_ar</i><b>)</b> is specified, the list should be composed of <i>kar</i>
        elements. The default outline thickness is <b>thin</b>, the default
        specification is <b>hosize(thin ...)</b>.
<p>
    <b>lcolor(</b><i>colorlist</i><b>)</b> specifies the list of arrow shaft line colors. When
        suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is
        specified, the list should be either composed of <i>kar</i> elements, or
        represented by the name of a predefined color scheme. The default
        color is <b>black</b>, the default specification is <b>lcolor(black ...)</b>.
<p>
    <b>lsize(</b><i>linewidthstyle</i><i>_list</i><b>)</b> specifies the list of arrow shaft line
        thicknesses. When suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list
        should include only one element. On the other hand, when suboption
        <b>by(</b><i>byvar_ar</i><b>)</b> is specified, the list should be composed of <i>kar</i>
        elements. The default thickness is <b>thin</b>, the default specification is
        <b>lsize(thin ...)</b>.
<p>
    <b>lpattern(</b><i>linepatternstyle</i><i>_list</i><b>)</b> specifies the list of arrow shaft line
        patterns. When suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified, the list
        should include only one element. On the other hand, when suboption
        <b>by(</b><i>byvar_ar</i><b>)</b> is specified, the list should be composed of <i>kar</i>
        elements. The default pattern is <b>solid</b>, the default specification is
        <b>lpattern(solid ...)</b>.
<p>
        +--------+
    ----+ Legend +-----------------------------------------------------------
<p>
    <b>legenda(on</b>|<b>off)</b> specifies whether the arrow legend should be displayed or
        hidden.
<p>
        <b>legenda(on)</b> requests that the arrow legend be displayed.
<p>
        <b>legenda(off)</b> is the default and requests that the arrow legend be
            hidden.
<p>
    <b>legtitle(</b><i>string</i><b>)</b> specifies the title of the arrow legend. When suboption
        <b>by(</b><i>byvar_ar</i><b>)</b> is specified, suboption <b>legtitle(varlab)</b> requests that
        the label of variable <i>byvar_ar</i> be used as the legend title.
<p>
    <b>leglabel(</b><i>string</i><b>)</b> specifies the label to be attached to the single key of
        the arrow legend when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified. This
        suboption is required when suboption <b>legenda(on)</b> is specified and
        suboption <b>by(</b><i>byvar_ar</i><b>)</b> is not specified.
<p>
    <b>legshow(</b><i>numlist</i><b>)</b> requests that, when suboption <b>by(</b><i>byvar_ar</i><b>)</b> is specified,
        only the keys included in <i>numlist</i> be displayed in the arrow legend.
<p>
    <b>legcount</b> requests that the number of arrows be displayed in the legend.
<p>
<p>
<a name="label2"></a><b><u>Option label() suboptions</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>data(</b><i>label</i><b>)</b> requests that one or more labels defined in Stata dataset
        <i>label</i> be superimposed onto the base map at given reference points.
<p>
    <b>select(</b><i>command</i><b>)</b> requests that a given subset of records of dataset <i>label</i>
        be selected using Stata commands keep or drop.
<p>
    <b>by(</b><i>byvar_lb</i><b>)</b> indicates that the labels defined in dataset <i>label</i> belong to
        <i>klb</i> different groups specified by variable <i>byvar_lb</i>.
<p>
    <b>xcoord(</b><i>xvar_lb</i><b>)</b> specifies the name of the variable containing the
        <i>x</i>-coordinate of each label reference point.
<p>
    <b>ycoord(</b><i>yvar_lb</i><b>)</b> specifies the name of the variable containing the
        <i>y</i>-coordinate of each label reference point.
<p>
    <b>label(</b><i>labvar_lb</i><b>)</b> specifies the name of the variable containing the
        labels.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>length(</b><i>lengthstyle_list</i><b>)</b> specifies the list of label lengths, where
        <i>lengthstyle</i> is any integer greater than 0 indicating the maximum
        number of characters of the labels. When suboption <b>by(</b><i>byvar_lb</i><b>)</b> is
        not specified, the list should include only one element. On the other
        hand, when suboption <b>by(</b><i>byvar_lb</i><b>)</b> is specified, the list should be
        composed of <i>klb</i> elements. The default label lenght is <b>12</b>, the default
        specification is <b>length(12 ...)</b>.
<p>
    <b>size(</b><i>textsizestyle</i><i>_list</i><b>)</b> specifies the list of label sizes. When
        suboption <b>by(</b><i>byvar_lb</i><b>)</b> is not specified, the list should include only
        one element. On the other hand, when suboption <b>by(</b><i>byvar_lb</i><b>)</b> is
        specified, the list should be composed of <i>klb</i> elements. The default
        label size is <b>*1</b>, the default specification is <b>size(*1 ...)</b>.
<p>
    <b>color(</b><i>colorlist</i><b>)</b> specifies the list of label colors. When suboption
        <b>by(</b><i>byvar_lb</i><b>)</b> is not specified, the list should include only one
        element. On the other hand, when suboption <b>by(</b><i>byvar_lb</i><b>)</b> is specified,
        the list should be either composed of <i>klb</i> elements, or represented by
        the name of a predefined color scheme. The default label color is
        <b>black</b>, the default specification is <b>color(black ...)</b>.
<p>
    <b>position(</b><i>clockpos</i><i>_list</i><b>)</b> specifies the list of label positions relative to
        their reference point. When suboption <b>by(</b><i>byvar_lb</i><b>)</b> is not specified,
        the list should include only one element. On the other hand, when
        suboption <b>by(</b><i>byvar_lb</i><b>)</b> is specified, the list should be composed of
        <i>klb</i> elements. The default label position is <b>0</b>, the default
        specification is <b>position(0 ...)</b>.
<p>
    <b>gap(</b><i>relativesize</i><i>_list</i><b>)</b> specifies the list of gaps between labels and
        their reference point. When suboption <b>by(</b><i>byvar_lb</i><b>)</b> is not specified,
        the list should include only one element. On the other hand, when
        suboption <b>by(</b><i>byvar_lb</i><b>)</b> is specified, the list should be composed of
        <i>klb</i> elements. The default label gap is <b>*1</b>, the default specification
        is <b>gap(*1 ...)</b>.
<p>
    <b>angle(</b><i>anglestyle</i><i>_list</i><b>)</b> specifies the list of label angles. When suboption
        <b>by(</b><i>byvar_lb</i><b>)</b> is not specified, the list should include only one
        element. On the other hand, when suboption <b>by(</b><i>byvar_lb</i><b>)</b> is specified,
        the list should be composed of <i>klb</i> elements. The default label angle
        is <b>horizontal</b>, the default specification is <b>angle(horizontal ...)</b>.
<p>
<p>
<a name="scalebar2"></a><b><u>Option scalebar() suboptions</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>units(</b><i>#</i><b>)</b> specifies the length of the scale bar expressed in arbitrary
        units.
<p>
    <b>scale(</b><i>#</i><b>)</b> specifies the ratio of scale bar units to map units. For
        example, suppose map coordinates are expressed in meters: if the
        scale bar length is to be expressed in meters too, then the ratio of
        scale bar units to map units will be 1; if, on the other hand, the
        scale bar length is to be expressed in kilometers, then the ratio of
        scale bar units to map units will be 1/1000. The default is <b>scale(1)</b>.
<p>
    <b>xpos(</b><i>#</i><b>)</b> specifies the distance of the scale bar from the center of the
        plot region on the horizontal axis, expressed as percentage of half
        the total width of the plot region. Positive values request that the
        distance be computed from the center to the right, whereas negative
        values request that the distance be computed from the center to the
        left. The default is <b>xpos(0)</b>.
<p>
    <b>ypos(</b><i>#</i><b>)</b> specifies the distance of the scale bar from the center of the
        plot region on the vertical axis, expressed as percentage of half the
        total height of the plot region. Positive values request that the
        distance be computed from the center to the top, whereas negative
        values request that the distance be computed from the center to the
        bottom. The default is <b>ypos(-110)</b>.
<p>
        +--------+
    ----+ Format +-----------------------------------------------------------
<p>
    <b>size(</b><i>#</i><b>)</b> specifies a multiplier that affects the height of the scale bar.
        For example, <b>size(1.5)</b> requests that the default height of the scale
        bar be increased by 50%. The default is <b>size(1)</b>.
<p>
    <b>fcolor(</b><i>colorstyle</i><b>)</b> specifies the fill color of the scale bar. The default
        is <b>fcolor(black)</b>.
<p>
    <b>ocolor(</b><i>colorstyle</i><b>)</b> specifies the outline color of the scale bar. The
        default is <b>ocolor(black)</b>.
<p>
    <b>osize(</b><i>linewidthstyle</i><b>)</b> specifies the outline thickness of the scale bar.
        The default is <b>osize(vthin)</b>.
<p>
    <b>label(</b><i>string</i><b>)</b> specifies the descriptive label of the scale bar. The
        default is <b>label(Units)</b>.
<p>
    <b>tcolor(</b><i>colorstyle</i><b>)</b> specifies the color of the scale bar text. The default
        is <b>tcolor(black)</b>.
<p>
    <b>tsize(</b><i>textsizestyle</i><b>)</b> specifies the size of the scale bar text. The
        default is <b>tsize(*1)</b>.
<p>
<p>
<a name="graph2"></a><b><u>Graph options</u></b>
<p>
        +------+
    ----+ Main +-------------------------------------------------------------
<p>
    <b>polyfirst</b> requests that the supplementary polygons specified in option
        <b>polygon()</b> be drawn before the base map. By default, the base map is
        drawn before any other spatial object.
<p>
    <b>gsize(</b><i>#</i><b>)</b> specifies the length (in inches) of the shortest side of the
        graph<i> available area</i> (the lenght of the longest side is set
        internally by <b>spmap</b> to minimize the amount of blank space around the
        map). The default ranges from 1 to 4, depending on the aspect ratio
        of the map. Alternatively, the height and width of the graph
        <i>available area</i> can be set using the standard <b>xsize()</b> and <b>ysize()</b>
        options.
<p>
    <b>freestyle</b> requests that, when drawing the graph, all the formatting
        presets and restrictions built in <b>spmap</b> be ignored. By default, <b>spmap</b>
        presets the values of some graph options and restricts the use of
        some others, so as to produce a "nice" graph automatically. By
        specifying option <b>freestyle</b>, the user loses this feature but gains
        full control over most of the graph formatting options.
<p>
    <i>twoway_options</i> include all the options documented in <b>[G] </b><i>twoway_options</i>,
        except for <i>aspect_option</i>, <i>scheme_option</i>, <i>by_option</i>, and
        <i>advanced_options</i>. These include <i>added_line_options</i>, 
        <i>added_text_options</i>, <i>axis_options</i>, <i>title_options</i>, <i>legend_option</i>, and 
        <i>region_options</i>, as well as options <b>nodraw</b>, <b>name()</b>, and <b>saving()</b>. When
        option <b>freestyle</b> is specified, it is possible to control also 
        <i>aspect_option</i> and <i>scheme_option</i>.
<p>
<p>
<b><u>Examples 1: Choropleth maps</u></b>
<p>
    NOTE: All the examples illustrated in the present and in the following
          sections can be run by clicking on the blue hyperlinks only if
          Stata is called from the directory where the <b>spmap</b> ancillary
          datasets are located.
<p>
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       </b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(2) legend(region(lcolor(black)))                        </b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1m using "Italy-RegionsCoordinates.dta", id(id)         ///</b>
<b>        ndfcolor(red)                                                    ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(2) legend(region(lcolor(black)))                        </b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clmethod(eqint) clnumber(5) eirange(20 70)                       ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(2) legend(region(lcolor(black)))                        </b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clnumber(20) fcolor(Reds2) ocolor(none ..)                       ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(3)                                                      </b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clnumber(20) fcolor(Reds2) ocolor(none ..)                       ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(3) legend(ring(1) position(3))                          </b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clnumber(20) fcolor(Reds2) ocolor(none ..)                       ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(3) legend(ring(1) position(3))                          ///</b>
<b>        plotregion(margin(vlarge))                                       </b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clnumber(20) fcolor(Reds2) ocolor(none ..)                       ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(3) legend(ring(1) position(3))                          ///</b>
<b>        plotregion(icolor(stone)) graphregion(icolor(stone))</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clnumber(20) fcolor(Greens2) ocolor(white ..) osize(medthin ..)  ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(3) legend(ring(1) position(3))                          ///</b>
<b>        plotregion(icolor(stone)) graphregion(icolor(stone))</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clnumber(20) fcolor(Greens2) ocolor(white ..) osize(thin ..)     ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        legstyle(3) legend(ring(1) position(3))                          ///</b>
<b>        plotregion(icolor(stone)) graphregion(icolor(stone))             ///</b>
<b>        polygon(data("Italy-Highlights.dta") ocolor(white)               ///</b>
<b>        osize(medthick))</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>      clnumber(20) fcolor(Greens2) ocolor(white ..) osize(medthin ..)    ///</b>
<b>      title("Pct. Catholics without reservations", size(*0.8))           ///</b>
<b>      subtitle("Italy, 1994-98" " ", size(*0.8))                         ///</b>
<b>      legstyle(3) legend(ring(1) position(3))                            ///</b>
<b>      plotregion(icolor(stone)) graphregion(icolor(stone))               ///</b>
<b>      scalebar(units(500) scale(1/1000) xpos(-100) label(Kilometers))</b>
      (click to run)
<p>
<p>
<b><u>Examples 2: Proportional symbol maps</u></b>
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id)                 ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        point(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) proportional(relig1) fcolor(red) size(*1.5))</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id)                 ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        point(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) proportional(relig1) fcolor(red) size(*1.5)       ///</b>
<b>        shape(s))</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id)                 ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        point(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) proportional(relig1) fcolor(red)                  ///</b>
<b>        ocolor(white) size(*3))                                          ///</b>
<b>        label(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) label(relig1) color(white) size(*0.7))</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id)                 ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        point(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) deviation(relig1) fcolor(red) dmax(30)            ///</b>
<b>        legenda(on) leglabel(Deviation from the mean))</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id) fcolor(white)   ///</b>
<b>        title("Catholics without reservations", size(*0.9) box bexpand   ///</b>
<b>        span margin(medsmall) fcolor(sand)) subtitle(" ")                ///</b>
<b>        point(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) proportional(relig1) prange(0 70)                 ///</b>
<b>        psize(absolute) fcolor(red) ocolor(white) size(*0.6))            ///</b>
<b>        plotregion(margin(medium) color(stone))                          ///</b>
<b>        graphregion(fcolor(stone) lcolor(black))                         ///</b>
<b>        name(g1, replace) nodraw</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id) fcolor(white)   ///</b>
<b>        title("Catholics with reservations", size(*0.9) box bexpand      ///</b>
<b>        span margin(medsmall) fcolor(sand)) subtitle(" ")                ///</b>
<b>        point(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) proportional(relig2) prange(0 70)                 ///</b>
<b>        psize(absolute) fcolor(green) ocolor(white) size(*0.6))          ///</b>
<b>        plotregion(margin(medium) color(stone))                          ///</b>
<b>        graphregion(fcolor(stone) lcolor(black))                         ///</b>
<b>        name(g2, replace) nodraw</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id) fcolor(white)   ///</b>
<b>        title("Other", size(*0.9) box bexpand                            ///</b>
<b>        span margin(medsmall) fcolor(sand)) subtitle(" ")                ///</b>
<b>        point(data("Italy-RegionsData.dta") xcoord(xcoord)               ///</b>
<b>        ycoord(ycoord) proportional(relig3) prange(0 70)                 ///</b>
<b>        psize(absolute) fcolor(blue) ocolor(white) size(*0.6))           ///</b>
<b>        plotregion(margin(medium) color(stone))                          ///</b>
<b>        graphregion(fcolor(stone) lcolor(black))                         ///</b>
<b>        name(g3, replace) nodraw</b>
<b>    . graph combine g1 g2 g3, rows(1) title("Religious orientation")     ///</b>
<b>        subtitle("Italy, 1994-98" " ") xsize(5) ysize(2.6)               ///</b>
<b>        plotregion(margin(medsmall) style(none))                         ///</b>
<b>        graphregion(margin(zero) style(none))                            ///</b>
<b>        scheme(s1mono)</b>
      (click to run)
<p>
<p>
<b><u>Examples 3: Other maps</u></b>
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap using "Italy-RegionsCoordinates.dta", id(id) fcolor(stone)   ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8))                       ///</b>
<b>        diagram(variable(relig1) range(0 100) refweight(pop98)           ///</b>
<b>        xcoord(xcoord) ycoord(ycoord) fcolor(red))</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap using "Italy-RegionsCoordinates.dta", id(id) fcolor(stone)   ///</b>
<b>        diagram(variable(relig1 relig2 relig3) proportional(fortell)     ///</b>
<b>        xcoord(xcoord) ycoord(ycoord) legenda(on))                       ///</b>
<b>        legend(title("Religious orientation", size(*0.5) bexpand         ///</b>
<b>        justification(left)))                                            ///</b>
<b>        note(" "                                                         ///</b>
<b>        "NOTE: Chart size proportional to number of fortune tellers per million</b>
<b>&gt;  population", ///</b>
<b>        size(*0.75))</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clmethod(stdev) clnumber(5)                                      ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8)) area(pop98)           ///</b>
<b>        note(" "                                                         ///</b>
<b>        "NOTE: Region size proportional to population", size(*0.75))</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta", id(id)          ///</b>
<b>        clmethod(stdev) clnumber(5)                                      ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Italy, 1994-98" " ", size(*0.8)) area(pop98)           ///</b>
<b>        map("Italy-OutlineCoordinates.dta") mfcolor(stone)               ///</b>
<b>        note(" "                                                         ///</b>
<b>        "NOTE: Region size proportional to population", size(*0.75))</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id) fc(bluishgray)  ///</b>
<b>        ocolor(none)                                                     ///</b>
<b>        title("Provincial capitals" " ", size(*0.9) color(white))        ///</b>
<b>        point(data("Italy-Capitals.dta") xcoord(xcoord)                  ///</b>
<b>        ycoord(ycoord) fcolor(emerald))                                  ///</b>
<b>        plotregion(margin(medium) icolor(dknavy) color(dknavy))          ///</b>
<b>        graphregion(icolor(dknavy) color(dknavy))</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id) fc(bluishgray)  ///</b>
<b>        ocolor(none)                                                     ///</b>
<b>        title("Provincial capitals" " ", size(*0.9) color(white))        ///</b>
<b>        point(data("Italy-Capitals.dta") xcoord(xcoord)                  ///</b>
<b>        ycoord(ycoord) by(size) fcolor(orange red maroon) shape(s ..)    ///</b>
<b>        legenda(on))                                                     ///</b>
<b>        legend(title("Population 1998", size(*0.5) bexpand               ///</b>
<b>        justification(left)) region(lcolor(black) fcolor(white))         ///</b>
<b>        position(2))                                                     ///</b>
<b>        plotregion(margin(medium) icolor(dknavy) color(dknavy))          ///</b>
<b>        graphregion(icolor(dknavy) color(dknavy))</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id) fc(sand)        ///</b>
<b>        title("Main lakes and rivers" " ", size(*0.9))                   ///</b>
<b>        polygon(data("Italy-Lakes.dta") fcolor(blue) ocolor(blue))       ///</b>
<b>        line(data("Italy-Rivers.dta") color(blue) )</b>
      (click to run)
<p>
<b>    . use "Italy-RegionsData.dta", clear</b>
<b>    . spmap relig1 using "Italy-RegionsCoordinates.dta" if zone==1,      ///</b>
<b>        id(id) fcolor(Blues2) ocolor(white ..) osize(medthin ..)         ///</b>
<b>        title("Pct. Catholics without reservations", size(*0.8))         ///</b>
<b>        subtitle("Northern Italy, 1994-98" " ", size(*0.8))              ///</b>
<b>        polygon(data("Italy-OutlineCoordinates.dta") fcolor(gs12)        ///</b>
<b>        ocolor(white) osize(medthin)) polyfirst</b>
      (click to run)
<p>
<b>    . use "Italy-OutlineData.dta", clear</b>
<b>    . spmap using "Italy-OutlineCoordinates.dta", id(id) fc(sand)        ///</b>
<b>        title("Main lakes and rivers" " ", size(*0.9))                   ///</b>
<b>        polygon(data("Italy-Lakes.dta") fcolor(blue) ocolor(blue))       ///</b>
<b>        line(data("Italy-Rivers.dta") color(blue) )                      ///</b>
<b>        freestyle aspect(1.4) xlab(400000 900000 1400000, grid)</b>
      (click to run)
<p>
<p>
<b><u>Acknowledgments</u></b>
<p>
    I wish to thank Nick Cox, Ian Evans, and Vince Wiggins for helping set up
    <b>tmap</b> (Pisati 2004), the predecessor of <b>spmap</b>. I also thank Kevin Crow,
    Bill Gould, Friedrich Huebler, and Scott Merryman for promoting <b>tmap</b> by
    making available to the Stata community several helpful resources related
    to the program. The development of <b>spmap</b> benefitted from suggestions by
    João Pedro Azevedo, Kit Baum, Daniele Checchi, Kevin Crow, David Drukker,
    Friedrich Huebler, Laszlo Kardos, Ulrich Kohler, Mattia Landoni, Scott
    Merryman, Derek Wagner, the participants in the 1st Italian Stata Users
    Group Meeting, and the participants in the 3rd German Stata Users Group
    Meeting: many thanks to all of them.
<p>
<p>
<b><u>Author</u></b>
<p>
    Maurizio Pisati
    Department of Sociology and Social Research
    University of Milano Bicocca - Italy
    maurizio.pisati@unimib.it
<p>
<p>
<b><u>References</u></b>
<p>
    Armstrong, M.P., Xiao, N. and D.A. Bennett. 2003. Using genetic
        algorithms to create multicriteria class intervals for choropleth
        maps. <i>Annals of the Association of American Geographers</i> 93: 595-623.
<p>
    Brewer, C.A. 1999. Color use guidelines for data representation.
        <i>Proceedings of the Section on Statistical Graphics, American</i>
        <i>Statistical Association</i>. Alexandria VA, 55-60.
<p>
    Brewer, C.A., Hatchard, G.W. and M.A. Harrower. 2003. ColorBrewer in
        print: A catalog of color schemes for maps. <i>Cartography and</i>
        <i>Geographic</i> <i>Information Science</i> 52: 5-32.
<p>
    Cleveland, W.S. 1994. <i>The Elements of Graphing Data</i>. Summit: Hobart
        Press.
<p>
    Cleveland, W.S. and R. McGill. 1984. Graphical perception: Theory,
        experimentation, and application to the development of graphical
        methods. <i>Journal of the American Statistical Association</i> 79: 531-554.
<p>
    Evans, I.S. 1977. The selection of class intervals. <i>Transactions of the</i>
        <i>Institute of British Geographers</i> 2: 98-124.
<p>
    Olson, J.M. 1976. Noncontiguous area cartograms. <i>The Professional</i>
        <i>Geographer</i> 28: 371-380.
<p>
    Pisati, M. 2004. Simple thematic mapping. <i>The Stata Journal</i> 4: 361-378.
<p>
    Slocum, T.A., McMaster, R.B., Kessler, F.C and H.H. Howard. 2005.
        <i>Thematic Cartography and Geographic Visualization</i>. 2nd ed. Upper
        Saddle River: Pearson Prentice Hall.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Online:  <b>shp2dta</b> (if installed), <b>mif2dta</b> (if installed)
</pre>
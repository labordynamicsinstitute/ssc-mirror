<pre>
<p>
-------------------------------------------------------------------------------
help for <b>simsum</b>                                                       Ian White
-------------------------------------------------------------------------------
<p>
<b><u>Analyses of simulation studies including Monte Carlo error</u></b>
<p>
<b><u>Introduction</u></b>
<p>
    The program <b>simsum</b> analyses simulation studies in which each simulated
    data set yields point estimates by one or more analysis methods. Bias,
    empirical standard error and precision relative to a reference method can
    be computed for each method.  If, in addition, model-based standard
    errors are available then <b>simsum</b> can compute the average model-based
    standard error, the relative error in the model-based standard error, the
    coverage of nominal confidence intervals, and the power to reject a null
    hypothesis.  Monte Carlo errors are available for all estimated
    quantities.
<p>
<p>
<b><u>Syntax</u></b>
<p>
    Data may be in a wide or long format.
<p>
    In the wide format, the data contain one record per simulated data set.
    The appropriate syntax is:
<p>
        <b>simsum</b> <i>estvarlist</i> [<i>if</i>] [<i>in</i>], [<b>true(</b><i>expression</i><b>)</b> <i>options</i>]
<p>
    where <i>estvarlist</i> is a <i>varlist</i> containing point estimates from one or more
    analysis methods.
<p>
    In the long format, the data contain one record per method per simulated
    data set, and the appropriate syntax is:
<p>
        <b>simsum</b> <i>estvarname</i> [<i>if</i>] [<i>in</i>], [<b>true(</b><i>expression</i><b>)</b> <b><u>meth</u></b><b>odvar(</b><i>varname</i><b>)</b>
                 <b>id(</b><i>varlist</i><b>)</b> <i>options</i>]
<p>
    where <i>estvarname</i>is a variable containing the point estimates,
    <b><u>meth</u></b><b>odvar(</b><i>varname</i><b>)</b> identifies the method and <b>id(</b><i>varlist</i><b>)</b> identifies the
    simulated data set.  The <i>options</i> are described below.
<p>
<p>
<b><u>Main options</u></b>
<p>
    <b>true(</b><i>expression</i><b>)</b> gives the true value of the parameter.  This is used in
        calculations of bias and coverage and is required whenever these
        statistics are requested.
<p>
    <b><u>meth</u></b><b>odvar(</b><i>varname</i><b>)</b> specifies that the data are in long format, with each
        record representing one analysis of one simulated data set using the
        method identified by <i>varname</i>.  Option <b>id(</b><i>varlist</i><b>)</b> must be specified.
        If <b><u>meth</u></b><b>odvar()</b> is not specified, the data must be in wide format,
        with each record representing all analyses of one simulated data set.
<p>
    <b>id(</b><i>varlist</i><b>)</b> is required with option <b><u>meth</u></b><b>odvar()</b>.  <i>varlist</i> must uniquely
        identify the data set used for each record, within levels of the
        by-variables.
<p>
    <b>se(</b><i>varlist</i><b>)</b> lists the names of the variables containing the standard
        errors of the point estimates.  For data in long format, this is a
        single variable.
<p>
    <b><u>sep</u></b><b>refix(</b><i>string</i><b>)</b> specifies that the names of the variables containing the
        standard errors of the point estimates are formed by adding the given
        prefix to the names of the variables containing the point estimates.
        It may be combined with <b><u>ses</u></b><b>uffix()</b> but not with <b>se()</b>.
<p>
    <b><u>ses</u></b><b>uffix(</b><i>string</i><b>)</b> specifies that the names of the variables containing the
        standard errors of the point estimates are formed by adding the given
        suffix to the names of the variables containing the point estimates.
        It may be combined with <b><u>sep</u></b><b>refix()</b> but not with <b>se()</b>.
<p>
<p>
<b><u>Data checking options</u></b>
<p>
    <b>graph</b> requests a descriptive graph of standard errors against point
        estimates.
<p>
    <b><u>nomem</u></b><b>check</b> turns off checking that adequate memory is free.  This check
        aims to avoid spending calculation time when <b>simsum</b> is likely to fail
        due to lack of memory.
<p>
    <b>max(</b>#<b>)</b> specifies the maximum acceptable absolute value of the point
        estimates, standardised to mean 0 and SD 1.  The default value is 10.
<p>
    <b>semax(</b>#<b>)</b> specifies the maximum acceptable value of the standard error, as
        a multiple of the mean standard error.  The default value is 100.
<p>
    <b>dropbig</b> specifies that point estimates or standard errors beyond the
        maximum acceptable values should be dropped.  Otherwise the program
        halts with an error. (Missing values are always dropped.)
<p>
    <b>nolistbig</b> suppresses listing of point estimates and standard errors that
        lie outside the acceptable limits.
<p>
    <b>listmiss</b> lists observations with missing point estimates and/or standard
        errors.
<p>
<p>
<b><u>Calculation options</u></b>
<p>
    <b>level(</b>#<b>)</b> specifies the confidence level for coverages and powers. Default
        is <b>$level</b>.
<p>
    <b>by(</b><i>varlist</i><b>)</b> summarises the results by <i>varlist</i>.
<p>
    <b>mcse</b> reports Monte Carlo standard errors for all summaries.
<p>
    <b>robust</b> is only useful if <b>mcse</b> is also specified.  It requests robust
        Monte Carlo standard errors for the statistics <b>empse</b>, <b>relprec</b> and
        <b>relerror</b>, instead of those based on an assumption of normally
        distributed point estimates.
<p>
    <b><u>modelsem</u></b><b>ethod(rmse|mean)</b> specifies whether the model standard error
        should be summarised as the root mean squared value (the default) or
        as the arithmetic mean.
<p>
    <b>ref(</b><i>string</i><b>)</b> specifies the reference method against which relative
        precisions will be calculated.  With data in wide format, <i>string</i> must
        be a variable name.  With data in long format, <i>string</i> must be a value
        of the method variable; if the value is labelled then the label must
        be used.
<p>
<p>
<b><u>Options specifying degrees of freedom</u></b>
<p>
    Degrees of freedom are used in calculating coverages and powers.
<p>
    <b>df(</b><i>string</i><b>)</b> specifies the degrees of freedom.  It may contain a variable
        name or a number (to apply to all estimators), or a list of variables
        containing the degrees of freedom for each estimator.
<p>
    <b><u>dfp</u></b><b>refix(</b><i>string</i><b>)</b> specifies that the names of the variables containing the
        degrees of freedom are formed by adding the given prefix to the names
        of the variables containing the point estimates.  It may be combined
        with <b>dfsuffix()</b> but not with <b>df()</b>.
<p>
    <b><u>dfs</u></b><b>uffix(</b><i>string</i><b>)</b> specifies that the names of the variables containing the
        degrees of freedom are formed by adding the given suffix to the names
        of the variables containing the point estimates.  It may be combined
        with <b>dfprefix()</b> but not with <b>df()</b>.
<p>
<p>
<b><u>Statistic options</u></b>
<p>
    If none of the following options is specified, then all available
        statistics are computed.
<p>
    <b>bsims</b> reports the number of simulations with non-missing point estimates.
<p>
    <b>sesims</b> reports the number of simulations with non-missing standard
        errors.
<p>
    <b>bias</b> estimates the bias in the point estimates.
<p>
    <b>empse</b> estimates the empirical standard error -- the standard deviation of
        the point estimates.
<p>
    <b>relprec</b> estimates the relative precision -- the inverse squared ratio of
        the empirical standard error of this method to the empirical standard
        error of the reference method.  This calculation is slow: omitting it
        can reduce run time by up to 90%.
<p>
    <b>modelse</b> estimates the model-based standard error. See <b>modelsemethod()</b>
        above.
<p>
    <b>relerror</b> estimates the proportional error in the model-based standard
        error, using the empirical standard error as gold standard.
<p>
    <b>cover</b> estimates the coverage of nominal confidence intervals at the
        specified level.
<p>
    <b>power</b> estimates the power to reject the null hypothesis that the true
        parameter is zero, at the specified level.
<p>
<p>
<b><u>Output options</u></b>
<p>
    <b>clear</b> loads the summary data into memory.
<p>
    <b>saving(</b><i>filename</i><b>)</b> saves the summary data into <i>filename</i>.
<p>
    <b>nolist</b> suppresses listing of the results, and is only allowed when <b>clear</b>
        or <b>saving()</b> is specified.
<p>
    <b>listsep</b> lists the results using one table per statistic, giving narrower
        &amp; better formatted output.  The default is to list the results as a
        single table.
<p>
    <b>format(</b><i>string</i><b>)</b> specifes the format for printing the results and saving
        the summary data.  If <b>listsep</b> is also specified then up to three
        formats may be specified:  (1) for results on the scale of the
        original estimates (bias, empse, modelse); (2) for percentages
        (relprec, relerror, cover, power); (3) for integers (bsims, sesims).
        Defaults are the existing format of the [first] estimate variable for
        (1) and (2), and %7.0f for (3).
<p>
    <b>sepby(</b><i>varlist</i><b>)</b> invokes this <b>list</b> option when printing the results.
<p>
    <b><u>ab</u></b><b>breviate(</b>#<b>)</b> invokes this <b>list</b> option when printing the results.
<p>
    <b>gen(</b><i>string</i><b>)</b> specifes the prefix for new variables identifying the
        different statistics in the output data set (only useful with <b>clear</b>
        or <b>saving()</b>).
<p>
<p>
<b><u>Example</u></b>
<p>
    This example uses data in long format stored in MIsim.dta:
<p>
    <b>. simsum b, se(se) methodvar(method) id(dataset) true(0.5) mcse</b>
        <b>format(%7.0g)</b>
<p>
    Alternatively, the data could first be reshaped to wide format:
<p>
    <b>. reshape wide b se, i(dataset) j(method) string</b>
<p>
    <b>. simsum b*, se(se*) true(0.5) mcse format(%7.0g)</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Ian White, MRC Biostatistics Unit, Cambridge, UK;
</pre>
<pre>
help for <b> help stpepemori</b>
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>stpepemori</b> --  Test equality of cumulative incidence or conditional
                     probability in presence of competing risks
<p>
<p>
<b><u>Syntax</u></b>
<p>
    <b>stpepemori</b> <i>varname</i> [<i>if</i>] [<i>in</i>] <b>,</b> <b>compet(</b><i>numlist</i><b>)</b> [ <b><u>cond</u></b><b>itional</b> ]
<p>
<p>
    <b>stpepemori</b> is for use with survival-time data; see help st. In previous
    <b>stset</b> you must specify <b><u>f</u></b><b>ailure(</b><i>varname</i><b>==</b><i>numlist</i><b>)</b> where <i>numlist</i> refers to
    the event of interest.
<p>
    <b>stpepemori</b> can be used just with single-record st data.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>stpepemori</b> tests the equality of cumulative incidences or conditional
    probabilities across two groups. So <i>varname</i> specifying the groups to be
    compared can take just two values.  The values in <i>numlist</i> of the previous
    <b>stset</b> are assumed as occurrence of event of interest. In <b>compet()</b> you
    must specify <i>numlist</i> corresponding to the occurrence of the competing
    event. Then, <b>stpepemori</b> computes the test proposed by Pepe and Mori for
    the main and competing event.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>compet(</b><i>numlist</i><b>)</b> is not an option. A failure of a competing event occurs
        whenever <i>failvar</i> specified in the previous <b>stset</b> takes on any of the
        values of this <i>numlist</i>.
<p>
    <b>conditional</b> specifies that conditional probability difference must be
        tested.
<p>
<p>
<b><u>Example</u></b>
<p>
    Setup
        <b>. use follic</b>
<p>
    Create the indicator variable for the event of interest and competing
    risk
        <b>. gen byte evcens = (resp=="NR" | relsite!="") + 2*(resp=="CR" &amp;</b>
            <b>relsite=="" &amp; stat==1)</b>
<p>
    Declare data to be survival-time data
        <b>. stset dftime, fail(evcens==1)</b>
<p>
    Two groups are defined based on age, dichomotized at 65
        <b>. gen byte age65 = age&gt;65</b>
<p>
    Pepe and Mori test comparing the cumulative incidence for the main event
    and competing risk between two age groups
        <b>. stpepemori age65, compet(2)</b>
<p>
<p>
    Pepe and Mori test comparing the conditional probability for the main
    event and competing risk between two age groups
        <b>. stpepemori age65, compet(2) conditional</b>
<p>
<p>
Downloading ancillary files in one of your <b>`"`c(adopath)'"'</b> directory you can
run this example.
<p>
          <i>(</i><i>click to run</i><i>)</i>
<p>
<p>
<b><u>Remarks</u></b>
<p>
When competing risks are present Kalbfleish and Prentice (1980) suggest the use
of the cumulative incidence to estimate the probability of an event. Pepe and
Mori(1993) give a method for comparing this function estimated in two groups.
This statistic is based on cumulative weighted differences between these
functions where the weights decrease as the time progresses.  At later time
points, in fact, the number of observations still at risk is small so it seems
reasonable to down-weights differences at these time points.
<p>
Pepe and Mori (1993) proposed the conditional probability as a function
incorporating the cumulative incidence of the event of interest and the
cumulative incidence of the competing risk. Note that an estimate of the
conditional probability can be easily obtained by the cumulative incidence. For
example the conditional probability for the event of interest is:
<i>CI_main/(1-CI_competing)</i> as shown by running the example. The same test
comparing two cumulative incidences can be applied to the conditional
probabilities.
<p>
<p>
<p>
<b><u>Saved results</u></b>
<p>
    <b>stpepemori</b> saves the following in <b>r()</b>:
<p>
    Scalars   
      <b>r(1)</b>           chi-squared statistic for event of interest
      <b>r(2)</b>           chi-squared statistic for competing risk
      <b>r(p1)</b>          p-value for event of interest
      <b>r(p2)</b>          p-value for competing risk
<p>
<p>
<p>
<b><u>Also see</u></b>
<p>
    stcompet
<p>
    <b>[ST] sts test</b>
<p>
<p>
<p>
<b><u>References</u></b>
<p>
M.S. Pepe and M. Mori. Kaplan-Meier, marginal or conditional probability curves
in summarizing competing risks failure time data. Stat in Med (1993), 12, 737 -
751.
<p>
M. Pintilie. Competing risks: A practical perspective.  Wiley, Chichester,
2006, p. 71 - 86 and 127 - 137.
<p>
<p>
<p>
<b><u>Authors</u></b>
<p>
Enzo Coviello (enzo.coviello@alice.it)
<p>
<p>
<b><u>Aknowledgments</u></b>
<p>
I am grateful to prof. Melania Pintilie for making available R codes computing
the above tests and for his book.
</pre>
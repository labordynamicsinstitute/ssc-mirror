<pre>
-------------------------------------------------------------------------------
help for <b>savasas</b>                                              manual:  <b>[R] none</b>
                                                             dialog:  <b> none</b>    
<p>
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Save dataset as a SAS dataset</u></b>
<p>
        <b>savasas</b> [<i>varlist</i>] [<b>using</b> <i>filename</i>] [<i>if</i>] [<i>in</i>] [<b>,</b>
                 <b><u>t</u></b><b>ype(</b><i>version_of_sas_data_file</i><b>)</b> <b>replace</b> <b><u>for</u></b><b>mats</b> <b><u>ren</u></b><b>ame</b> <b><u>me</u></b><b>ssy</b>
                 <b><u>ch</u></b><b>eck</b> <b>sascode</b> <b>compress</b> ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>NOTE:</b> Before the first use of <b>savasas</b> the <b>sasexe.ado</b> file may need to be
    edited to set the location of your SAS executable file.  Instructions on
    how to do this is at the bottom of this help file.
<p>
    <b>savasas</b> saves the Stata dataset in memory as a SAS file.  By default the
    output dataset will have the same name and be in the same directory, but
    with the ".sas7bdat" file name extension and contain all observations and
    every variable in the Stata datafile.  <b>savasas</b> can save to other versions
    of SAS:  Version 8 or 9 (*.sas7bdat), Version 6 (*.sd2/*.ssd01/*.ssd02),
    SAS 6 Transport/xport (*.xpt).
<p>
        The procedure is as follows:
<p>
        (1) <b>savasas</b> uses fdasave to save the dataset in memory temporarily to
        a SAS xport datafile.
<p>
        (2) <b>savasas</b> writes a SAS input program to load the data into SAS and
        to assign variable names, labels (and formats).
<p>
        (3) <b>savasas</b> runs the program in SAS in batch mode to load the xport
        datafile created by fdasave.
<p>
            Note to Windows users:  This is where the Windows operating
            system will pop-up windows that indicate that SAS is running in
            batch.  Do not try to close these windows as that will
            potentially halt <b>savasas</b>.
<p>
        (4) SAS saves the data as whatever version SAS file type was
        specified.
<p>
    For Stata SE users: the maximum length for a string variable is 244
    characters.  In such cases, the first 200 characters will be taken and
    passed on to SAS (this is a limitation of the SAS xport dataset used to
    transfer data from Stata to SAS).
<p>
    <b>NOTE: savasas</b> calls SAS to run the SAS program.  This requires the
    ability to run SAS on your computer.  If you do not have a working copy
    of SAS, use the <b>sascode</b> option and copy the SAS program
    (<i>myData</i>_infile.sas) and the SAS xport datafile (<i>myData</i>.xpt) to a machine
    that has a working copy of SAS.  The SAS program will need to be modified
    to point to the location of the SAS xport datafile.
<p>
    When <b>savasas</b> has successfully saved your data as a SAS dataset it will
    display a message similar to the following:
<p>
    <b>savasas</b> successfully saved the SAS file: *
<p>
    c:\myData\MySASdata.sas7bdat *
<p>
    SAS reports that the dataset has 1000 observations and 20 variables. *
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>type(</b><i>version_of_sas_data_file</i><b>)</b> specifies the SAS datafile version
        desired, from the following list:
<p>
        <u>one of</u>      <u>SAS version datafile</u>
<p>
            <b>sas</b>         current version of SAS * <i>the default if no type</i>
        <i>specified</i> *
<p>
            <b>sas6</b>        SAS version 6
<p>
            <b>sasx</b>        SAS version 6 transport/xport
<p>
        Hint: If you specify the correct file name extension, you do not have
        to specify <b>type</b>.  Remember that a current version SAS (.sas7bdat)
        file will be created if no file extension or type specification is
        made.
<p>
        SAS version 6 and Transport/xport file restrictions:
 
            1) File names or variable names cannot be longer than 8
            characters.  <b>savasas</b> checks for names that are longer than 8
            characters; and, if the <b>rename</b> option is issued, renames them to
            the first 8 characters or up to 7 plus a number.  In addition, it
            displays the list of renamed variables.
<p>
            2) Variable labels can be a maximum of 40 characters.  <b>savasas</b>
            saves the first 40 characters.
    
    <b>replace</b> works like Stata's replace in that it allows you to overwrite the
        SAS data file if it already exists.
<p>
    <b>formats</b> specifies that value labels are to be saved as SAS formats in a
        file that will have the same name as the datafile but with the
        ".sas7bcat" file extension.  This formats catalog file will be
        created in the same directory as the SAS datafile.  To use this SAS
        formats catalog file you will need to add code to your program to
        make SAS aware that this file contains format definitions used by
        variables in the dataset.  Your code should look something like this:
<p>
        libname in "c:\myData";
<p>
        options fmtsearch=(in.mySASdataset);
<p>
        NOTE:  SAS user-defined formats for versions prior to SAS version 9
        have to be 8 characters or less and cannot end in a number.  This is
        a list of format names that SAS reserves and thus cannot be
        user-defined format names:
<p>
        <b>best</b>, <b>binary</b>, <b>comma</b>, <b>commax</b>, <b>d</b>, <b>date</b>, <b>datetime</b>, <b>dateampm</b>, <b>day</b>,
        <b>ddmmyy</b>, <b>dollar</b>, <b>dollarx</b>, <b>downame</b>, <b>e</b>, <b>eurdfdd</b>, <b>eurdfde</b>, <b>eurdfdn</b>,
        <b>eurdfdt</b>, <b>eurdfdwn</b>, <b>eurdfmn</b>, <b>eurdfmy</b>, <b>eurdfwdx</b>, <b>eurdfwkx</b>, <b>f</b>, <b>float</b>,
        <b>fract</b>, <b>hex</b>, <b>hhmm</b>, <b>hour</b>, <b>ib</b>, <b>ibr</b>, <b>ieee</b>, <b>julday</b>, <b>julian</b>, <b>percent</b>,
        <b>minguo</b>, <b>mmddyy</b>, <b>mmss</b>, <b>mmyy</b>, <b>monname</b>, <b>month</b>, <b>monyy</b>, <b>negparen</b>, <b>nengo</b>,
        <b>numx</b>, <b>octal</b>, <b>pd</b>, <b>pdjulg</b>, <b>pdjuli</b>, <b>pib</b>, <b>pibr</b>, <b>pk</b>, <b>pvalue</b>, <b>qtr</b>, <b>qtrr</b>,
        <b>rb</b>, <b>roman</b>, <b>s370ff</b>, <b>s370fib</b>, <b>s370fibu</b>, <b>s370fpd</b>, <b>s370fpdu</b>, <b>s370fpib</b>,
        <b>s370frb</b>, <b>s370fzd</b>, <b>s370fzdl</b>, <b>s370fzds</b>, <b>s370fzdt</b>, <b>s370fzdu</b>, <b>ssn</b>, <b>time</b>,
        <b>timeampm</b>, <b>tod</b>, <b>weekdate</b>, <b>weekdatx</b>, <b>weekday</b>, <b>worddate</b>, <b>worddatx</b>,
        <b>wordf</b>, <b>words</b>, <b>year</b>, <b>yen</b>, <b>yymm</b>, <b>yymmdd</b>, <b>yymon</b>, <b>yyq</b>, <b>yyqr</b>, <b>z</b>, <b>zd</b>
<p>
    <b>savasas</b> will make some attempt to rename invalid SAS formats but it would
        be best for you to rename or drop them yourself before saving to SAS.
        Formats will be renamed if needed.
<p>
    <b>rename</b> specifies that any required renaming of file name and/or variable
        names is to be done.  The <b>rename</b> option is only necessary when saving
        to SAS 6/transport or when variable names are not unique in SAS. When
        saving to SAS 6/transport <b>rename</b> attempts to rename long variable
        names (more than 8 characters) to be unique by shortening all long
        variable names to the first 8 characters or up to the 7 plus a
        number.  <b>savasas</b> displays the list of renamed variables.  <b>rename</b> also
        renames the SAS file name when the name provided is not a valid SAS
        file name.
<p>
    <b>messy</b> specifies that all the intermediary files created by <b>savasas</b> during
        its operation are not to be deleted.  The <b>messy</b> option prevents
        <b>savasas</b> from cleaning up after it has finished.  This option is
        mostly useful for debugging purposes in order to find out where
        something went wrong.  All intermediary files have a name starting
        with an underscore (_) followed by the process ID and are located in
        Stata's temp directory.
<p>
    <b>check</b> specifies that basic stats for both datasets are to be generated to
        compare the Stata input dataset with the SAS output dataset in order
        to make sure <b>savasas</b> created the files correctly.  This is a
        comparison that should be done after any datafile is converted to any
        other type of datafile by any software.  The SAS file is created in
        the same directory as the output SAS datafile and is named starting
        with the name of the data file followed by "_SAScheck.lst" (SAS), for
        example: "<i>mydata</i>_SAScheck.lst"
<p>
    <b>sascode</b> specifies that only a SAS xport datafile and an input SAS program
        are to be created.  By default, <b>savasas</b> executes all four steps
        outlined above.  The <b>sascode</b> option aborts this process after step
        (2).  The user then needs to read in the data <i>manually</i> using SAS.
        For example: <b>savasas</b> writes a SAS program <i>myData</i>_infile.sas to read
        in the xport datafile <i>myData</i>.xpt.
<p>
    <b>compress</b> specifies that the SAS dataset is to be created with minimum
        data storage settings that still accurately store the data.  This
        used to be the default for <b>savasas</b>, but the compress command can slow
        down <b>savasas</b> quite a bit when the dataset has many thousands of
        variables.
<p>
<b><u>Examples</u></b>
<p>
    To save the dataset in memory to the same directory with the same name as
    the dataset in memory as a sas7bdat file, type
<p>
    <b>. savasas</b>
<p>
    To save the dataset in memory to the current directory with the name
    mySASdata as a sas7bdat file, type
<p>
    <b>. savasas using mySASdata</b>
<p>
    To save the dataset in memory to c:\data\ directory with the name
    mySASdata as a sas7bdat file and create 2 check files, type
<p>
    <b>. savasas using c:\data\mySASdata.sas7bdat, check</b>
<p>
    To save only variables between var1 and var20 from the dataset in memory
    to the current directory with the name mySASdata as a sas7bdat file and
    create a formats.sas7bcat file containing SAS formats of any Stata value
    labels, replacing an existing file if necessary, type
<p>
    <b>. savasas gender-q32_b using mySASdata, formats replace</b>
<p>
    More examples:
<p>
    <b>. savasas using mySASdata.sas7bdat, replace</b>
<p>
    <b>. savasas in 1/30 using mySASdata, type(sas6) check</b>
<p>
    <b>. savasas using mySASdata, sascode type(sas6)</b>
<p>
    <b>. savasas using mySASdata, messy type(sasx) rename</b>
<p>
<p>
<b><u>Setting up savasas</u></b>
<p>
    If you are setting up this program on your computer for the first time,
    please edit <b>sasexe.ado</b> to set the location of your SAS executable file
    (sas.exe).  If you do not, <b>savasas</b> will look in the "usual" locations for
    it.  The <b>sasexe.ado</b> file is an ASCII text file and should be saved as
    such after editing.  Stata's <b>do-file</b> editor will do the trick.
<p>
    edit sasexe.ado (click, to edit the <b>sasexe.ado</b> file, remember to save
    when done.)
<p>
<p>
<b><u>Author</u></b>
<p>
    Dan Blanchette
    The Carolina Population Center
    University of North Carolina - Chapel Hill, USA
    dan_blanchette@unc.edu
<p>
<p>
<b><u>Acknowledgements</u></b>     
<p>
    The user-written program <b>outdat</b> inspired this program.
<p>
<p>
<b><u>Also see</u></b>
<p>
    On-line: fdasave, save, outdat (if installed), usesas (if installed)
<p>
</pre>
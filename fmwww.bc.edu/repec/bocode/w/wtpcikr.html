<pre>
-------------------------------------------------------------------------------
<b>help for wtpcikr</b>
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Title</u></b>
<p>
    <b>wtpcikr ---</b> Estimate Krinsky and Robb Confidence Intervals for Mean and
    Median Willingness to Pay (WTP)
<p>
<a name="contents"></a>        +--------------------+
    ----+  Table of Contents +-----------------------------------------------
<p>
  Syntax
  General description of <b>wtpcikr</b>
  Description of the options
  Saved results
  Examples
  Author information
  Citation
  References
  Acknowledgments
<p>
<p>
<a name="syntax"></a><b><u>Syntax</u></b> 
<p>
    <b>wtpcikr</b> <i>varlist</i> [<b>if</b><i> exp</i>] [<b>in</b><i> range</i>] [<b>,</b> <b>reps(</b><i>#</i><b>)</b> <b>seed(</b><i>#</i><b>)</b> <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b>
        <b><u>mym</u></b><b>ean(</b><i>name</i><b>)</b> <b><u>bm</u></b><b>at(</b><i>name</i><b>)</b> <b><u>vm</u></b><b>at(</b><i>name</i><b>)</b> <b><u>eq</u></b><b>uation(</b><i>name</i><b>)</b> <b><u>expo</u></b><b>nential</b>
        <b><u>meanl</u></b><b>ist</b> <b>dots</b> <b><u>sa</u></b><b>ving(</b><i>filename</i> [<b>,</b> <i>saving_options</i>]<b>)</b>]
<p>
<p>
<p>
    <i>options</i>                 Description
    -------------------------------------------------------------------------
    Options
     
      <b>reps(</b><i>#</i><b>)</b>               set the number of replications
      <b>seed(</b><i>#</i><b>)</b>               specify the seed number
      <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b>              set the confidence level
      <b><u>mym</u></b><b>ean(</b><i>name</i><b>)</b>          supply a mean vector
      <b><u>bm</u></b><b>at(</b><i>name</i><b>)</b>            specify a vector of parameter estimates
      <b><u>vm</u></b><b>at(</b><i>name</i><b>)</b>            supply a variance covariance matrix
      <b><u>eq</u></b><b>uation(</b><i>name</i><b>)</b>        set the equation name
      <b><u>expo</u></b><b>nential</b>           exponential functional form
      <b><u>meanl</u></b><b>ist</b>              report the mean vector used in computation
      <b>dots</b>                  display replication dots
      <b>saving(</b><i>filename</i><b>, ...)</b> save results to <i>filename</i>
<p>
<p>
<a name="description"></a>        +-------------+
    ----+ Description +------------------------------------------------------
<p>
    <b>wtpcikr</b> computes mean and/or median willingness to pay (WTP), confidence
    intervals (CI) based on the Krinsky and Robb (1986) method, achieved
    significance levels (ASL) for testing the null hypothesis that WTP&lt;=0,
    and relative efficiency measures (Loomis and Ekstrand, 1998). The command
    supports both linear and exponential contingent valuation models
    estimated with or without covariates using the Stata commands <b>probit</b>, 
    <b>logit</b>, and <b>biprobit</b>. It can also be used for user-written maximum
    likelihood programs as long as the formulas for WTP measures apply. The
    user bears the responsibility as to whether WTP formulas apply. Users are
    referred to Haab and McConnell (2002), pp. 52-57 and p. 104 for WTP
    models and mean/median WTP formulas, and pp. 110-112 for the Krinsky and
    Robb procedure. See also Park et al. (1991).
<p>
    It is crucial that the order of the variables in <i>varlist</i> after <b>wtpcikr</b> be
    the same as in <i>varlist</i> after the Stata estimation command. Equally
    important is the assumption that the<b> </b><i>bid variable</i> follows the dependent
    variable in <i>varlist</i> after the estimation command and is the first
    variable specified in <i>varlist</i> after <b>wtpcikr</b> (see examples below).
<p>
    <b>wtpcikr</b> uses Mata to take random draws from multivariate normal
    distribution using the variance-covariance matrix <b>vmat</b> and the vector of
    parameter estimates <b>bmat</b> or the defaults to these options.
<p>
    For exponential logit models, mean WTP is not defined if sigma&gt;1. Stata
        will issue a warning and only median WTP will be calculated if
        sigma&gt;1.
<p>
<p>
<a name="options"></a>        +---------------------+
    ----+ Options for wtpcikr +----------------------------------------------
<p>
    <b>reps(</b><i>#</i><b>)</b> specifies the number of replications to be performed for the
        simulations. The default is <b>reps(</b><i>5000</i><b>)</b>.
<p>
    <b>seed(</b><i>#</i><b>)</b> sets the random-number seed, which is defaulted to <b>seed(</b><i>032007</i><b>)</b>.
        This option is useful to ensure replicability of the results.
<p>
    <b>level(</b><i>#</i><b>)</b> sets the confidence level. The default is <b>level(</b><i>95</i><b>)</b>.
<p>
    <b>equation(</b><i>name</i><b>)</b> causes <b>wtpcikr</b> to choose a specific equation for which WTP
        measures and confidence interval are requested, if there are multiple
        equations. This option is relevant for double bounded models
        estimated using the <b>biprobit</b> command and user-written maximum
        likelihood programs which estimate ancillary parameters considered by
        Stata as equations. By default, computation is done using the first
        equation.
<p>
    <b>mymean(</b><i>name</i><b>)</b> specifies a vector containing sample means of independent
        variables (dimension 1 x k-1, k is the number of independent
        variables specified in <i>varlist</i> after <b>wtpcikr</b>) to be used in the
        calculations. For models with covariates, by default, <b>wtpcikr</b> uses
        the sample means of the independent variables specified in <i>varlist</i>
        except the bid variable. Using this option, the user can supply a
        mean vector indicating the mean value to be used for each independent
        variable in <i>varlist</i> except the bid variable. This option may be of
        interest to adjust for the fact some socio-demographic
        characteristics of the sampled respondents sometimes differ from
        those of the general population in the study area. For example,
        secondary data from the Census Bureau on the socio-demographic
        characteristics of the study area population may be combined with
        socio-demographic characteristics of the sampled respondents in
        calculating WTP measures and confidence intervals (see example
        below).
<p>
        This option cannot be specified for constant-only models containing
        only a constant term and the bid variable as covariates.
<p>
    <b>bmat(</b><i>name</i><b>)</b> specifies a vector of parameter estimates to be used. The
        default is the vector of estimated coefficients returned in e(b) by
        the estimation command.
<p>
    <b>vmat(</b><i>name</i><b>)</b> specifies a variance-covariance matrix to be used. The default
        is the variance-covariance matrix returned in e(V) by the estimation
        command.  The <b>bmat(</b><i>name</i><b>)</b> and <b>vmat(</b><i>name</i><b>)</b> or <b>mymean(</b><i>name</i><b>)</b> options allow
        the user to trick <b>wtpcikr</b> to compute WTP measures and CI for models
        not even estimated in Stata or for models estimated in Stata but
        without using the above-mentioned Stata commands. In this case, the
        user is reminded that in the vector of the parameter estimates <b>bmat</b>,
        the coefficients on the bid variable and the constant term must be
        listed in the first and last position respectively.  The position of
        the <b>vmat</b> elements must match that of the <b>bmat</b> elements. The question
        as to which formula <b>wtpcikr</b> will use in the calculations is an
        important one. By default, the formula corresponding to linear probit
        and logit models is used. If the user wants calculations to be done
        for an exponential logit model, a simple logit model must be first
        estimated before running <b>wtpcikr</b> with the <b>exponential</b> option.
<p>
    <b>exponential</b> specifies that functional form of the underlying model is
        exponential. If this option is not specified, a linear functional
        form is assumed.
<p>
    <b>meanlist</b> requests that the vector containing the sample means of the
        explanatory variables used in the computation be displayed. Of
        course, this option cannot be used for constant-only models and when
        the <b>mymean</b> option is specified.
<p>
    <b>dots</b> causes replication dots to be displayed. By default, replication
        dots are suppressed.
<p>
    <b>saving(</b><i>filename</i> [<b>,</b> <i>saving_options</i>]<b>)</b> specifies that results be saved to a
        Stata data file, <i>filename</i>.  <i>saving_options</i> are the options of the
        Stata <b>saving</b> command. The data file will contain the variables
        <b>meanwtp</b> and/or <b>medianwtp</b>, depending on whether the <b>exponential</b> option
        was specified. The emprical distribution stored in <i>filename</i> can be
        useful in applying the <b>complete combinatorial</b> method, for example, to
        test whether differences in WTP measures are statistically
        significant (See Poe et al., 2005).  Although not necessary (since a
        p-value is calculated), users can also use the stored dataset to
        calculate standard errors for WTP measures.
<p>
    If your <i>filename</i> (including its path) contains embedded spaces, remember
    to enclose it in double quotes.
<p>
<p>
<a name="results"></a>        +---------------+
    ----+ Saved results +----------------------------------------------------
<p>
    <b>wtpcikr</b> returns most of the calculated results in local macros. After
        running <b>wtpcikr</b>, type in return list, to see the saved results.
<p>
<p>
<a name="examples"></a>        +----------+
    ----+ Examples +---------------------------------------------------------
<p>
Linear Probit and bivariate probit with covariates
    <b>. probit y1 bid1 income age sex household knowledge env_org</b>
    <b>. wtpcikr bid1 income age sex household knowledge env_org, reps(10000)</b>
        <b>meanl dots</b>
<p>
    <b>. biprobit (y1 = bid1 income age sex household knowledge env_org) (y2 =</b>
        <b>bid2 income age sex household knowledge env_org)</b>
    <b>. wtpcikr bid1 income age sex household knowledge env_org, reps(20000)</b>
        <b>equation(y1)</b>
<p>
    <b>. biprobit (y1=bid1 income) (y2=bid2 income)</b>
    <b>. matrix med_inc=(54)</b> // Suppose this is median income (in $1000) from
        Census data for study area
    <b>. wtpcikr bid1 income, reps(50000) eq(y1) mym(med_inc) dots</b>
    <b>. wtpcikr bid2 income, reps(50000) eq(y2) mym(med_inc) dots</b>
<p>
<p>
Exponential probit model
    <b>. gen lbid=ln(bid)</b>
    <b>. probit ypay lbid income educ age sex dummy1 dummy2</b>
    <b>. wtpcikr lbid income educ age sex dummy1 dummy2, reps(30000) expo</b>
<p>
    To use median income (in $1000) and average years of schooling from
        Census data combined with sample mean of the rest of the variables
        from survey data
    <b>. matrix matcens=[53, 12, 52, .61, .49, .72]</b> // Here a value is not
        supplied for the bid variable and the constant term
    <b>. wtpcikr lbid income educ age sex dummy1 dummy2, reps(30000)</b>
        <b>mym(matcens) expo</b>
<p>
<p>
Linear constant-only model
    <b>. probit y1 bid</b>
    <b>. wtpcikr bid, reps(40000) dots</b>
<p>
<p>
Exponential constant-only model
    <b>. gen lbid=ln(bid)</b>
    <b>. probit y1 lbid</b>
    <b>. wtpcikr lbid, reps(40000) expo dots</b>
<p>
<p>
To save in a Stata data file (myfile) mean and median WTP calculated in each re
&gt; plication 
    <b>. logit y1 lbid</b>
    <b>. wtpcikr lbid, reps(20000) expo dots saving(C:\foldername\myfile)</b>
<p>
<p>
<a name="author"></a><b><u>Author</u></b>
<p>
<b>P. Wilner Jeanty</b>, Post-Doctoral Researcher, Dept. of Agricultural, Environmenta
&gt; l, and Development Economics, The Ohio State University (OSU).
Send comments and suggestions to jeanty.1@osu.edu
<p>
<p>
<a name="citation"></a><b><u>Citation</u></b>
<p>
Users should please cite the program in any published work as: 
<p>
<b>Jeanty, P. Wilner</b>. 2007. "<b>wtpcikr</b>: Constructing Krinsky and Robb Confidence Int
&gt; erval for Mean and Median Willingness to Pay (WTP) Using Stata."
<i>North American Stata Users' Group Meetings 2007</i>, 8. 
<p>
<p>
<a name="refs"></a><b><u>References</u></b>
<p>
<b>Haab, T.C. and K.E. McConnell</b>. 2002. <i>Valuing Environmental Natural Resources:</i> <i>T</i>
<i>&gt; he Econometrics of Non-Market Valuation</i>. 
Northampton, MA: Edward Elgar Publishing.
<p>
<b>Krinsky, I. and A.L. Robb</b>. 1986. "On Approximating the Statistical Properties o
&gt; f Elasticities." <i>Review of Economic and Statistics</i> 68: 715-719.
<p>
<b>Loomis, J. and E. Ekstrand</b>. 1998. "Alternative Approach for Incorporating Uncer
&gt; tainty When Estimating Willingness to Pay: The Case of the Mexican Spotted Ow
&gt; l." 
<i>Ecological Economics</i> 27: 29-41
<p>
<b>Park, T, J.B. Loomis, and M. Creel</b>. 1991. "Confidence Interval for Evaluating B
&gt; enefit Estimates from Dichotomous Choice Contingent Valuation Studies." 
<i>Land Economics</i> 67: 64-73.
<p>
<b>Poe, G.L., K.L. Giraud, and J.B. Loomis</b>. 2005. "Computational Methods for Measu
&gt; ring the Difference of Empirical Distributions." 
<i>American Journal of Agricultural Economics</i> 87:353-365.
<p>
<p>
<a name="acknow"></a><b><u>Acknowledgments</u></b>
<p>
The author thanks Arne Risa Hole for sharing a preprint version of his <b>wtp</b> comm
&gt; and. A grant from the US Dept. of Energy and support 
from the Office of Energy Efficiency, Ohio Dept. of Development and from the AE
&gt; D Economics Dept. are gratefully acknowledged. 
<p>
<p>
<b><u>See also</u></b>
<p>
    Manual:  <b>[R] nlcom</b>
<p>
    Online:  nlcom
<p>
<p>
</pre>
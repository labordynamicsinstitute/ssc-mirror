<pre>
-------------------------------------------------------------------------------
help for <b>winsor</b>
-------------------------------------------------------------------------------
<p>
<b><u>Winsorizing a variable</u></b>
<p>
        <b>winsor</b> <i>varname</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] , <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b>
                 { <b>p(</b><i>#</i><b>)</b> | <b>h(</b><i>#</i><b>)</b> } [ { <b><u>high</u></b><b>only</b> | <b><u>low</u></b><b>only</b> } ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>winsor</b> takes the non-missing values of a variable <i>x</i> ordered such that
<p>
        <i>x_1</i> &lt;= ... &lt;= <i>x_n</i>
<p>
    and generates a new variable <i>y</i> identical to <i>x</i> except that the <i>h</i> highest
    and <i>h</i> lowest values are replaced by the next value counting inwards from
    the extremes:
<p>
        <i>y_1</i>, ... , <i>y_h</i> = <i>y_(h + 1)</i>
<p>
        <i>y_n</i>, ... , <i>y_(n - h + 1)</i> = <i>y_(n - h)</i>
<p>
    <i>h</i> can be specified directly or indirectly by specifying a fraction <i>p</i> of
    the number of observations <i>n</i>:
<p>
        <i>h</i> = [ <i>p n</i> ]
<p>
    where [ ] denotes integer part. This transformation is named after the
    biostatistician Charles P. Winsor (1895-1951): see, for example, Tukey
    (1962).  For more discussion and references, see Barnett and Lewis
    (1994).
<p>
    Charles (Charlie) Winsor was educated at Harvard as an engineer and then
    worked for the New England Telephone and Telegraph Company, but his
    interests shifted to biological research and biostatistics. After further
    study at Johns Hopkins and Harvard, he held posts at Iowa State College
    and Johns Hopkins; in between, in the Second World War, he did government
    work at Princeton.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>generate(</b><i>newvar</i><b>)</b> specifies the name of the new variable.  It is a
        required option.
<p>
    <b>p(</b><i>#</i><b>)</b> specifies the fraction of the observations to be modified in each
        tail. <i>p</i> should be greater than 0 and less than 0.5 and imply a value
        of <i>h</i> as just below.
<p>
    <b>h(</b><i>#</i><b>)</b> specifies the number of the observations to be modified in each
        tail. <i>h</i> should be at least 1 and less than half the number of
        non-missing observations.
<p>
    Just one of <b>p()</b> and <b>h()</b> should be specified.
<p>
    <b>highonly</b> and <b>lowonly</b> specify that Winsorizing should be one-sided,
        referring only to the tail with the highest values or only to the
        tail with the lowest values, respectively. These options should not
        be specified together.
<p>
<p>
<b><u>Examples</u></b>
<p>
    . winsor mpg, gen(Wmpg) h(3)
<p>
    . winsor mpg, gen(Wmpg2) p(0.1)
<p>
<p>
<b><u>References</u></b>
<p>
    Anonymous. 1951. In memoriam: Charles P. Winsor.  <i>Biometrics</i> 7: 221.
<p>
    Barnett, V. and Lewis, T. 1994. <i>Outliers in statistical data.</i>
        Chichester: John Wiley. [Previous editions 1978, 1984.]
<p>
    Tukey, J.W. 1962. The future of data analysis.  <i>Annals of Mathematical</i>
        <i>Statistics</i> 33: 1-67.
<p>
<p>
<b><u>Author</u></b>
<p>
    Nicholas J. Cox, Durham University, U.K.
    n.j.cox@durham.ac.uk
<p>
<p>
</pre>
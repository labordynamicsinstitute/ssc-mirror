<pre>
<p>
-------------------------------------------------------------------------------
<b>help for wdireshape</b> 
-------------------------------------------------------------------------------
<p>
<b><u>Title</u></b>
<p>
    <b>wdireshape --- Reshapes the World Development Indicators (WDI) database</b>
        <b>for panel data, seemingly unrelated regression, or cross-sectional</b>
        <b>analysis</b>
<p>
<a name="contents"></a>        +--------------------+
    ----+  Table of Contents +-----------------------------------------------
<p>
  Syntax
  General description of <b>wdireshape</b>
  Description of the options
  Examples
  References
  Acknowledgments
  Author information
-------------------------------------------------------------------------------
<p>
<a name="syntax"></a><b><u>Syntax</u></b>
<p>
Check the number of indicators and their order of appearance in a WDI dataset
<p>
    <b>wdireshape,</b> <b>sername(</b><i>varname</i><b>)</b>
<p>
<p>
Reshape the dataset
<p>
    <b>wdireshape</b> newvarlist<b>,</b> <b><u>prep</u></b><b>end(</b><i>letter(s)</i><b>)</b> <b><u>ctyn</u></b><b>ame(</b><i>varname</i><b>)</b> <b><u>sern</u></b><b>ame(</b>
        <i>varname</i><b>)</b> <b><u>ctyc</u></b><b>ode(</b><i>varname</i><b>)</b> <b><u>serc</u></b><b>ode(</b><i>varname</i><b>)</b> [<i>other options</i>]
<p>
<p>
<p>
    <i>options</i>               Description
    -------------------------------------------------------------------------
    Options
        
      <b><u>prep</u></b><b>end(</b><i>letter(s)</i><b>)</b>  indicate the prepending letter(s)
      <b><u>ctyn</u></b><b>ame(</b><i>varname</i><b>)</b>    indicate the variable holding the country names
      <b><u>sern</u></b><b>ame(</b><i>varname</i><b>)</b>    indicate the variable holding the series names
      <b><u>ctyc</u></b><b>ode(</b><i>varname</i><b>)</b>    indicate the variable containing the country code
                            elements
      <b><u>serc</u></b><b>ode(</b><i>varname</i><b>)</b>    indicate the variable holding the series code
                            elements
      <b><u>byp</u></b><b>er(</b><i>#</i><b>)</b>            reshape the data using sub-periods
      <b><u>start</u></b><b>yr(</b><i>#</i><b>)</b>          indicate the first year of the time period
      <b><u>end</u></b><b>yr(</b><i>#</i><b>)</b>            indicate the last year of the time period
      <b><u>byv</u></b><b>ar</b>               reshape the data variable by variable
      <b>sur</b>                 reshape in wide form for seemingly unrelated
                            regression analysis
      <b>cros</b>                reshape in wide form for cross-sectional analysis
      <b><u>ns</u></b><b>tring(</b><i>#</i><b>)</b>          remove the WDI missing value symbols, the double
                            dots (..)
    -------------------------------------------------------------------------
<p>
<a name="description"></a>        +-------------+
    ----+ Description +------------------------------------------------------
<p>
    <b>wdireshape</b> reshapes a Stata dataset obtained by insheeting a text (.csv)
    file downloaded from the World Development Indicators (WDI) website or
    extracted from the WDI CD-ROM. The new dataset has a structure suitable
    for panel-data analysis, seemingly unrelated regression (SUR), or
    cross-sectional modeling. The panel-data structure is known as long form
    and the SUR and cross-sectional structures are known as wide form.
    <b>wdireshape</b>, a wrapper for the Stata's official <b>reshape</b> command (see 
    reshape), enables users to rename the indicators with names of their
    devising. However, the number of variable names supplied and their order
    must match those of the indicators in the spreadsheet. After insheeting
    the raw dataset to be reshaped, users can use the first syntax of
    <b>wdireshape</b> to determine the number of indicators as well as their order
    of appearance in the dataset. While reshaping the data, <b>wdireshape</b> places
    the WDI series descriptors into labels and attaches them to the
    user-supplied variable names. Note that, for long series descriptors,
    labels will be truncated to 80 characters.
 
<p>
<a name="remarks"></a>        +-------------------+
    ----+ Important Remarks +------------------------------------------------
<p>
    Before extracting a .csv file from the WDI web site or a recent CD
    release, users must choose a data orientation with series or countries in
    rows and time in columns. A WDI dataset downloaded using this orientation
    is ready to be insheeted since the years are prepended with two letters
    "yr". Thus, no data preparation is needed. However, the WDI missing value
    symbols, the double dots (..), must be removed. Otherwise, Stata will
    treat as string data in any columns containing those double dots. At the
    users' request, <b>wdireshape</b> will remove the double dots.
<p>
    Older CD releases, such as the WDI-2005 CD-ROM, produce .csv files that
    must be managed prior to insheeting. In particular, the years must be
    prepended with a letter, which can be done in a spreadsheet or by using
    the procedure suggested in Baum and Cox (2007).  The raw or prepared
    dataset saved as a .csv file can be imported into Stata using the <b>insheet</b>
    command as follows:
<p>
<p>
                <b>. insheet using</b> <i>filename.csv</i>, <b>names clear</b>
<p>
<p>
    Data may also be imported into Stata by copying from Excel and pasting
        directly into the Stata data editor.
<p>
<a name="options"></a>        +------------------+
    ----+ Required options +-------------------------------------------------
<p>
    <b>prepend(</b><i>letter(s)</i><b>)</b> specifies the prepending letter(s). For example,
    specify <b>prepend(</b><i>yr</i><b>)</b> if <b>yr</b> are the prepending letters.
<p>
    <b>sername(</b><i>varname</i><b>)</b> specifies the variable holding the series names.
<p>
    <b>ctyname(</b><i>varname</i><b>)</b> specifies the variable containing country names.
<p>
    <b>ctycode(</b><i>varname</i><b>)</b> specifies the variable containing the country code
    elements.
<p>
    <b>sercode(</b><i>varname</i><b>)</b> specifies the variable containing the series code
    elements.
<p>
<p>
        With these required options specified, <b>wdireshape</b> will attempt to
        reshape the entire dataset at once, which is the default.
<p>
<a name="options"></a>        +------------------+
    ----+ Optional options +-------------------------------------------------
<p>
    <b>byper(</b><i>#</i><b>)</b> requires <b>wdireshape</b> to reshape the dataset 1 year, 5 years, or
        10 years at a time, as long as the time span contains no gaps. One of
        these three values should be used with the <b><u>byp</u></b><b>er(</b><i>#</i><b>)</b> option. If either
        5 or 10 is specified, <b>wdireshape</b> will account for the fact that the
        last subperiod may not be of 5 or 10 years. Also, Stata will check
        whether the current memory size is enough to reshape the data 5 or 10
        years at a time.
<p>
    <b>startyr(</b><i>#</i><b>)</b> specifies the first year of the time period.
<p>
    <b>endyr(</b><i>#</i><b>)</b> specifies the last year of the time period.
<p>
        <b>Note 1:</b> The <b>byper(</b><i>#</i><b>)</b>, <b>startyr(</b><i>#</i><b>)</b>, and <b>endyr(</b><i>#</i><b>)</b> options must be
        combined.
<p>
    <b>byvar</b> specifies that the dataset to be reshaped one variable at a time,
        as proposed by Kossinets (2006). The <b>byvar</b> option may not be combined
        with <b>byper(</b><i>#</i><b>)</b>, <b>startyr(</b><i>#</i><b>)</b>, and <b>endyr(</b><i>#</i><b>)</b>.
<p>
        Due to memory issues, reshaping large datasets at once may not be
        successful. In such a case, Stata will prompt the user to specify the
        <b>byvar</b> or <b>byper(#)</b> option, or to increase the amount of memory
        allocated to Stata. Note that you can reset the size of memory only
        if you are using Stata/MP, Stata/SE, or Stata/IC.
<p>
    <b>sur</b> requests a wide form suitable for SUR analysis (see SUREG).  By
        default, the dataset is reshaped in long form for panel data analysis
        (see XTREG). When the <b>sur</b> option is specified, in the reshaped
        dataset, the country names are postfixed to the user-supplied
        variable names and are represented by c1, c2, and so. <b>Describe</b> the
        reshaped dataset if you want to know what countries c1, c2,...,cn
        represent. In Stata 10 or higher, you can just look at the variable
        labels in the variable window.  The SUR-reshaped structure displays
        the years in rows and the variables, for each country, in columns.
<p>
    <b>cros</b> requests a wide form amenable to cross-sectional analysis. The
        CROS-reshaped structure displays the country names in rows and the
        variables, for each year, in columns. Obviously, <b>cros</b> may not be
        combined with <b>sur</b>.
<p>
        <b>Note 2:</b> When the <b>sur</b> or <b>cros</b> option is specified, Stata will complain
        if the resulting number of variables exceeds its limits, which are 99
        for small Stata, 2047 for intercooled, and 32,767 for Stata/MP and
        Stata/SE.
<p>
    <b>nstring(</b><i>#</i><b>)</b> indicates that the dataset contains the WDI missing value
        symbols, the double dots (..), and that they should be removed. #
        represents the number of identifier variables in the dataset. For
        example, <b>nstring(</b><i>4</i><b>)</b> must be specified when the dataset includes names
        and code elements for both countries and series as identifier
        variables.  When the <b>nstring(</b><i>#</i><b>)</b> option is specified, if an error
        occurs for any reasons, the dataset to be reshaped needs to be
        reloaded before running <b>wdireshape</b> again. Otherwise, Stata will abort
        with a type-mismatch error.
<p>
        <b>Note 3:</b> Depending on your computer system performance, in case of
        large datasets, reshaping 10 years at a time - as long as the time
        period is at least 10 years - may be faster than reshaping variable
        by variable. However, when the time period contains gaps, the
        <b>byper(</b><i>#</i><b>)</b> option will not work.
<p>
<a name="examples"></a>        +----------+
    ----+ Examples +---------------------------------------------------------
<p>
Check the number of indicators and their order of appearance in a WDI dataset
    <b>. wdireshape, sername(seriesname)</b>
<p>
<p>
Reshape the entire dataset at once
    <b>. wdireshape v1-v10, prepend(yr) ctyname(countryname) sername(seriesname)</b>
        <b>ctycode(countrycode) sercode(seriescode)</b>
<p>
    <b>. wdireshape gdpcap trade invest cropland tractor popdensity arable,</b>
        <b>prepend(yr) ctyname(countryname) ///</b>
<b>      sername(seriesname) ctycode(countrycode) sercode(seriescode)</b>
<p>
<p>
Reshape variable by variable
    <b>. wdireshape export import gdpcur gdpcnst foodindx irrig, prepend(yr)</b>
        <b>ctyname(countryname) ///</b>
<b>      sername(seriesname) ctycode(countrycode) sercode(seriescode) byvar</b>
<p>
<p>
Reshape 5 years at a time
    <b>. wdireshape myvar1-myvar16, prepend(yr) ctyname(countryname)</b>
        <b>sername(seriesname) ctycode(countrycode) ///</b>
<b>      sercode(seriescode) byp(5) start(1960) end(2004)</b>
<p>
<p>
Reshape 10 years at a time, but for SUR analysis
    <b>. wdireshape myvar1-myvar16, prepend(yr) ctyname(countryname)</b>
        <b>sername(seriesname) ctycode(countrycode) ///</b>
<b>      sercode(seriescode) byp(10) start(1960) end(2004) sur</b>
<p>
<p>
<b>Note 4:</b> To obtain series of averages, first run <b>wdireshape</b> without specifying t
&gt; he <b>sur</b> or <b>cros</b> option, and then run <b>paverage</b> (see paverage if installed)
<p>
<p>
<a name="refs"></a><b><u>References</u></b>
<p>
Baum, C.B. and N.J. Cox. 2007. Getting those Data into Shape. <i>Stata Journal</i> 7: 
&gt; 268-271
<p>
Kossinets, G. 2006. http://www.columbia.edu/acis/eds/data_tools/tips/reshape_ma
&gt; nyvar.do
<p>
The World Bank Group. 2009. <i>World Development Indicators (WDI) Online</i>.
   http://publications.worldbank.org/WDI/
<p>
<p>
<a name="acknow"></a><b><u>Acknowledgments</u></b>
<p>
Thanks to Kit Baum for useful comments. Thanks to Simon Feeny for pointing out 
&gt; the need to allow for quotes in the WDI series descriptors.
<p>
<p>
<a name="author"></a><b><u>Author</u></b>
<p>
    <b>P. Wilner Jeanty</b>, Dept. of Agricultural, Environmental, and Development
    Economics,
    The Ohio State University
<p>
    Email to jeanty.1@osu.edu for any comments or suggestions.
<p>
 
<b><u>Also see</u></b>
<p>
    Manual: <b>[D] reshape</b>
<p>
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>datacheck</b>
-------------------------------------------------------------------------------
<p>
<b><u>Assert with report</u></b>
<p>
        <b>datacheck</b> <i>true_or_false_condition</i> [<b>if</b> <i>condition</i>] [<b>in</b> <i>range</i>] [ <b>,</b>
                 <b>by(</b><i>byvarlist</i><b>)</b> <b><u>m</u></b><b>essage(</b><i>string</i><b>)</b> <b><u>v</u></b><b>arshow(</b><i>varlist</i><b>)</b> <b><u>p</u></b><b>revious</b> <b><u>n</u></b><b>ext</b>
                 <b><u>f</u></b><b>lag</b> <b><u>nol</u></b><b>ist</b> <i>list_options</i> ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>datacheck</b> is a utility that checks for each observation that a specified
    condition is true and reports on any observations for which it is false.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>by(</b><i>byvarlist</i><b>)</b> makes the assertion <b>by</b> <i>byvarlist</i><b>:</b>. This allows, for
        example, conditions referring to _n and _N defined within distinct
        groups of <i>byvarlist</i>.  The dataset must be previously sorted by
        <i>byvarlist</i>. If this option is specified, <b>list</b> output is by default
        separated by <i>byvarlist</i>.
<p>
    <b>message(</b><i>string</i><b>)</b> displays the given message string if any contradictions
        are found.
<p>
    <b>varshow(</b><i>varlist</i><b>)</b> restricts <b>list</b> output to the variables in <i>varlist</i>. If
        this option is not specified, all variables in the dataset are
        listed.
<p>
    <b>previous</b> and <b>next</b> list the previous and/or following observation as well
        as any observation contradicting the assertion. This can be
        especially useful when data are in time order.
<p>
    <b>flag</b> leaves behind a binary flag variable in the dataset named <b>_contra</b>
        taking the value 1 for observations failing the check and 0
        otherwise.  This flag variable will automatically be dropped the next
        time <b>datacheck</b> is run, and a new variable will be generated the next
        time <b>datacheck</b> is run with this option.
<p>
    <b>nolist</b> suppresses output of list. Output is restricted to a brief report
        on contradictions.
<p>
    <i>list_options</i> are options of list.
<p>
<p>
<b><u>Remarks</u></b>
<p>
    Unlike <b>assert</b>, a contradiction of the condition will not produce an
    error, but only output which must be displayed for the contradiction to
    be detected.  Thus always use this command <b>noisily</b> if using <b>run</b> to run do
    files.
<p>
<p>
<b><u>Examples</u></b>
<p>
    <b>. datacheck age &lt; ., varshow(id age) message(Missing age)</b>
<p>
    <b>. datacheck drug == 3 if arm == 1, varshow(id drug arm) message(Wrong</b>
        <b>drugs)</b>
<p>
    <b>. datacheck time &gt; time[_n-1], varshow(id time) message(Dates do not</b>
        <b>follow) prev</b>
<p>
    <b>. datacheck time==0 if _n == 1, by(id) varshow(id time) message(Patient's</b>
        <b>first record is not at time 0)</b>
<p>
<p>
<b><u>Author</u></b>
<p>
    Krishnan Bhaskaran
    London School of Hygiene and Tropical Medicine
    Keppel Street
    London
    WC1E 7HT
    krishnan.bhaskaran@lshtm.ac.uk
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[D] assert</b>
<p>
</pre>
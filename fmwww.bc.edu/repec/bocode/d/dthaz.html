<pre>
<b>help dthaz</b>
-------------------------------------------------------------------------------
<p>
<p>
<b><u>Title</u></b>
<p>
    <b>dthaz</b> -- Discrete-time hazard and survival probability estimates
<p>
<p>
<b><u>Syntax</u></b>
<p>
        <b>dthaz</b> [<i>varlist</i>] [<b>if</b>] [<i>weight</i>] [<b>, </b><b><u>sp</u></b><b>ecify(</b><i>numlist</i><b>)</b> <b><u>tp</u></b><b>ar(</b><i>#</i><b>)</b> <b><u>t</u></b><b>runcate(</b><i>#</i><b>)</b>
                  <b>pretrunc(</b><i>#</i><b>)</b> <b><u>cl</u></b><b>oglog</b> <b><u>clus</u></b><b>ter(</b><i>varname</i><b>)</b> <b><u>d</u></b><b>isplay(</b><i>#</i><b>)</b> <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b>
                  <b><u>m</u></b><b>odel</b> <b>suppress</b> <b><u>gr</u></b><b>aph(</b><i>#</i><b>)</b> <i>graph_twoway_options</i> <b>copyleft</b>]
<p>
    <i>options</i>                       Description
    -------------------------------------------------------------------------
    Model
      <b><u>sp</u></b><b>ecify(</b><i>numlist</i><b>)</b>            specify values for predicted population
                                    values
      <b><u>tp</u></b><b>ar(</b><i>#</i><b>)</b>                     select alternative parameterizations of
                                    time
      <b><u>tr</u></b><b>uncate(</b><i>#</i><b>)</b>                 truncate the maximum time of length to
                                    event
      <b>pretrunc(</b><i>#</i><b>)</b>                 ignore some initial time periods in the
                                    model
      <b><u>cl</u></b><b>oglog</b>                     use a complimentary log-log link (see 
                                    cloglog)
<p>
    SE/Robust
      <b><u>clus</u></b><b>ter(</b><i>varname</i><b>)</b>            adjust standard errors for intragroup
                                    correlation
<p>
    Reporting
      <b><u>d</u></b><b>isplay(</b><i>#</i><b>)</b>                  limit the maximum displayed period
      <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b>                    set confidence level; default is <b>level(95)</b>
      <b><u>m</u></b><b>odel</b>                       output model estimate
      <b>suppress</b>                    switch off <b>dthaz</b> output
<p>
    Graph options
      <b><u>gr</u></b><b>aph(</b><i>#</i><b>)</b>                    conditional hazard, survival, or cumulative
                                    incidence curves
      <i>twoway_options</i>              graph twoway options
<p>
    Miscellaneous
      <b>copyleft</b>                    display license information
    -------------------------------------------------------------------------
    <b>fweights</b>, <b>iweights</b>, and <b>pweights</b> are allowed; see weight.
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>dthaz</b> estimates the hazard and survival probabilities of the population,
    given the specified model by means of a logit link (default) or by a
    complementary log-log link. This program requires data in person-period
    format, and person-period variables may be created using <b>prsnperd</b>.
<p>
    Typed with no <i>varlist</i> and with no <b>tpar()</b> option, <b>dthaz</b> estimates baseline
    conditional hazard (h) and survival probabilities (S) for the sample.
    These estimates correspond exactly with actuarial estimates of sample
    hazard and sample survival functions.  Specifying numeric predictors in
    <i>varlist</i> and the required set of associated values with the <b>specify()</b>
    option adds them to the model following as follows (for logit hazard):
<p>
        h_i = 1/(1+e^-(a_i*d_i + BX_i))
<p>
    Where:
<p>
        a_i is the effect of the ith time period, d_i,
        B is a vector of effects for a vector of predictors X_i during the ith
        time period, and
<p>
        S_i = (1-h_1)*(1-h_2) * ¥ ¥ ¥ * (1-h_i).
<p>
<p>
    The reported conditional hazard and survival probabilities are
    accompanied by standard errors approximated using a first order
    application of the delta method (Dinno and Kim, 2011). The normally
    approximated confidence intervals drawn using the <b>graph()</b> option are
    obtained by application of these standard errors with the alpha specified
    by <b>level()</b>.
<p>
<b><u>Options</u></b>
<p>
        +-------+
    ----+ Model +------------------------------------------------------------
<p>
    <b><u>sp</u></b><b>ecify(</b><i>numlist</i><b>)</b> The user must specify which category of population
        members the hazard and survival estimates are to be calculated.
        Currently, if specifications are made with this option, they must be
        made for each of the variables specified in <i>varlist</i>. Specifications
        may be separated by spaces, commas or both.
<p>
    <b><u>tp</u></b><b>ar(</b><i>#</i><b>)</b> The user may select alternative parameterizations of time. Such
        time parameterizations allow a parsimonious smoothing of the effects
        of time, and are as follows:
<p>
     -1 Fully discrete time parameterization. This setting is the default, and
        reflects unique effects of time for each period.
<p>
      0 Constant time parameterization. This model constrains the effect of
        time to be constant across all periods. The model includes a
        prespecified constant term, is used in the following models, and
        permits model nesting.
<p>
      N Polynomial time parameterization. This model constrains the effect of
        time as a polynomial function of order N. If the representation of time
        is over-specified (i.e. has more predictors than the number of periods
        in the dataset, or than the number the analysis has been truncated to)
        then the user will be warned and the parameterization will be reset to
        its maximum. Lower order models nest within higher order ones. N &gt; 0.
<p>
     -2 Root time parameterization. This model constrains the effect of time as
        a square-root function of period (plus constant plus linear terms)
<p>
    <b><u>t</u></b><b>runcate(</b><i>#</i><b>)</b> The user may truncate the maximum time of length to event to
        this number. The estimate will censor data for time periods beyond
        this point. Negative values and values greater than the maximum
        period value are ignored.
<p>
        Note: Specifying this option for the baseline model will produce
        exactly the same estimates as for the untruncated model for the given
        periods, since baseline estimates are always equal to the sample hazard
        and sample survival functions.
<p>
    <b>pretrunc(</b><i>#</i><b>)</b> The user may discard early time periods from the new dataset.
        For example, when pre-truncating with a value of 2, the period that
        would be indicated by _d3 becomes _d1 instead, and the value of
        _period would be decreased by 2. The dataset is preserved when using
        this option
<p>
    Note: Specifying values of <b>truncate</b> greater than the one minus the maximum
    value of <i>length-to-event</i> (or specifying negative values) produces the same
    dataset as one with no value of <b>truncate</b> specified. Also, <b>truncate</b> and
    <b>pretrunc</b> cannot be combined when their values would result in fewer than
    two periods. Discrete time survival analyses conducted upon pre-truncated
    datasets are, in effect analyses conducted upon separate populations from
    the not pre-truncated datasets <i>if the conditional hazard</i> <i>during the</i>
    <i>pre-truncated periods is greater than zero</i>. The author suggests that an
    analyst may desire to perform a pre-truncated analysis either because there
    are no events during initial periods, or because she is interested in
    analyzing a surviving sub-population at a later starting period. However,
    in cases where events occurred during the pre-truncated periods, a survival
    analysis cannot be said to generalize to the population of the not
    pre-truncated dataset. In cases where events occur in initial periods, but
    at rates that are too few to provide reliable estimates for these periods,
    the analyst should both employ a sensitivity analysis to describe
    differences between models on pre-truncated and not pre-truncated datasets,
    but also examine the characteristics of anomalous individuals--qualitative
    data may particularly help illuminate how these persons differ from the
    majority of individuals who remain in the pre-truncated dataset.
<p>
    <b><u>cl</u></b><b>oglog</b> This option switches the estimate of the hazard function to a
        complementary log-log link. This produces estimates under an
        assumption of proportional hazards, rather than an assumption of
        proportional odds. The general discrete time complimentary log log
        hazard model is:
<p>
            h = 1-exp(-exp(a_i*d_i + B*X_i))
<p>
        Where the parameters follow the same conventions described for the
logit hazard model above.
<p>
        +-----------+
    ----+ SE/Robust +--------------------------------------------------------
<p>
    <b><u>clus</u></b><b>ter(</b><i>varname</i><b>)</b> The user may adjust the standard errors of the estimates
        for person-level (between person) variance in repeated measures
        designs by specifying the <i>id</i> variable used to construct the
        person-period dataset.
<p>
        +-----------+
    ----+ Reporting +--------------------------------------------------------
<p>
    <b><u>d</u></b><b>isplay(</b><i>#</i><b>)</b> The user may limit the maximum period for hazard and survival
        probabilities to this number. This option only affects which values
        are displayed. The estimated and values returned in r(Hazard) remain
        as for the maximum period of the person-period dataset. Negative
        values and values greater than the maximum period value are ignored.
<p>
    <b>level(</b><i>#</i><b>)</b>; see <b>[R] estimation options</b>.
<p>
    <b><u>m</u></b><b>odel</b> This option includes the estimated model in the output.
<p>
    <b>suppress</b> Switches off <b>dthaz</b> output. Graphs still display if selected. The
        estimated model is displayed if the <b>model</b> option is turned on.
<p>
        +---------------+
    ----+ Graph options +----------------------------------------------------
<p>
    <b><u>gr</u></b><b>aph(</b><i>#</i><b>)</b> Users may opt to graph conditional hazard probabilities (1),
        survival probabilities (2), both (3) or (4) cumulative incidence
        probabilities (i.e. 1 - survival) against discrete time periods.
        Graphing options available to grtwoway are available. The default
        setting is no graph.
<p>
    Note: the <b><u>gr</u></b><b>aph()</b> option does not yet plot confidence intervals in Stata 7.
<p>
        +---------------+
    ----+ Miscellaneous +----------------------------------------------------
<p>
    <b>copyleft</b> <b>dthaz</b> is free software, licensed under the GPL. The <b>copyleft</b>
        option displays the copying permission statement for <b>dthaz</b>. The full
        license can be obtained by typing:
<p>
            . net describe dthaz, from (http://www.doyenne.com/stata)
<p>
    and clicking on the click here to get link for the ancillary file.
<p>
<p>
<b><u>Examples</u></b>
<p>
    . dthaz
<p>
    . dthaz sex region, specify(0 6) truncate(6)
<p>
    . dthaz sex educate class, sp(1, 12, 0) gr(3)
<p>
    . dthaz party age, sp(0 1) model cloglog
<p>
    . dthaz, tp(3)
<p>
<p>
<b><u>Author</u></b>
<p>
Alexis Dinno
Portland State University
alexis dot dinno at pdx dot edu
<p>
Please contact me with any questions, bug reports or suggestions for improvemen
&gt; t.
<p>
My thanks to Dr. Suzanne Graham.
<p>
<p>
<b><u>References</u></b>
<p>
Dinno A and Kim JS. 2011. "Approximating Confidence Intervals About
          Discrete-Time Survival/Cumulative Incidence Estimates Using the Delta
          Method." Unpublished (manuscript available on request)
<p>
Singer JD and Willett JB. 2003. <i>Applied Longitudinal Data Analysis: Modeling</i>
          <i>Change and Event Occurence</i>. Oxford, UK: Oxford University Press. 672
          pages.
<p>
Willet JB and Singer JD. 1991. "From Whether to When: New Methods for Studying
          Student Dropout and Teacher Attrition." <i>Review of Educational</i>
          <i>Research</i>. 61: 407-450
<p>
Singer JD and Willett JB. 1991. "Modeling the Days of Our Lives: Using Survival
          Analysis When Designing and Analyzing Longitudinal Studies of
          Duration and Timing of Events." <i>Psychological Bulletin.</i> 110: 268-290
<p>
<p>
<b><u>Saved results</u></b>
<p>
    In addition to the results returned by the estimation commands <b>logistic</b>
    or <b>cloglog</b>, <b>dthaz</b> saves the following in <b>e()</b>:
<p>
    Matrices       
      <b>e(Hazard)</b>           Conditional hazard vector for the specified group
      <b>e(HazardSE)</b>         Standard error vector for the conditional hazards
      <b>e(Survival)</b>         Survival probability vector for the specified group
      <b>e(SurvivalSE)</b>       Standard error vector for the survival
                            probabilities
<p>
<p>
<b><u>Also See</u></b>
<p>
</pre>
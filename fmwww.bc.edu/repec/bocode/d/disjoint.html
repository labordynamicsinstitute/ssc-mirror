<pre>
-------------------------------------------------------------------------------
help for <b>disjoint</b>
-------------------------------------------------------------------------------
<p>
<b><u>Generate end variable demarcating disjoint spells</u></b>
<p>
        <b>disjoint</b> <i>start end</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] <b>,</b> <b><u>g</u></b><b>enerate(</b><i>newvar</i><b>)</b> [ <b>id(</b><i>idvar</i><b>)</b>
                 ]
<p>
<p>
<b><u>Description</u></b>
<p>
    <b>disjoint</b> calculates an end variable demarcating disjoint spells based on
    information in <i>start</i> and <i>end</i> variables containing integer dates (and
    optionally an identifier variable <i>idvar</i>).
<p>
<p>
<b><u>Remarks</u></b>
<p>
    Consider the following dataset:
<p>
        +------------------+
        | id   start   end |
        |------------------|
     1. |  1       3     6 |
     2. |  1      12    17 |
     3. |  1      13    14 |
     4. |  1      13    22 |
     5. |  1      14    20 |
     6. |  2       2     8 |
     7. |  2       3    12 |
     8. |  2      13    15 |
     9. |  2      13    16 |
    10. |  2      18    28 |
        +------------------+
    
    For each identifier <b>id</b> the variables <b>start</b> and <b>end</b> define spells, but
    some spells overlap (and some are indeed wholly included in others).  For
    some purposes we need to demarcate disjoint spells and we can do this by
    defining a new end variable, such that each end is always less than the
    next start. This is what <b>disjoint</b> does.
<p>
    . disjoint start end, id(id) gen(end2)
    . l
<p>
        +-------------------------+
        | id   start   end   end2 |
        |-------------------------|
     1. |  1       3     6      6 |
     2. |  1      12    17     12 |
     3. |  1      13    14      . |
     4. |  1      13    22     22 |
     5. |  1      14    20      . |
     6. |  2       2     8      2 |
     7. |  2       3    12     11 |
     8. |  2      12    15     12 |
     9. |  2      13    16     16 |
    10. |  2      18    28     28 |
        +-------------------------+
<p>
    This is easier to understand if we focus on observations with non-missing
    generated values.
<p>
    . l id start end2 if end2 &lt; .
<p>
        +-------------------------+
        | id   start   end   end2 |
        |-------------------------|
     1. |  1       3     6      6 |
     2. |  1      12    17     12 |
     4. |  1      13    22     22 |
     6. |  2       2     8      2 |
     7. |  2       3    12     12 |
     9. |  2      13    16     16 |
    10. |  2      18    28     28 |
        +-------------------------+
<p>
    That is, the "spells" for <b>id</b> 1 are (3,6), (12,12) and (13,22).
    Observations for <b>id</b> 1 with (<b>start</b>,<b>end</b>) of (13,14) and (14,20) are ignored
    for this purpose as they indicate spells included in other spells.  The
    generated variable marks a true end whenever it is equal to the original
    end variable. Note that the length of each "spell" would usually be
    defined as 1 + generated variable - <i>start</i>. With this approach no
    observations are inserted or deleted.
<p>
    See also packages on SSC <b>spellutil</b> (Edwin Leuven) and <b>spell</b> (Nicholas J.
    Cox).
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>generate()</b> specifies the name of the new variable and is not optional.
<p>
    <b>id()</b> specifies an identifier variable. Spells are determined separately
        for each identifier.
<p>
<p>
<b><u>Author</u></b>
<p>
    Nicholas J. Cox, University of Durham, U.K.
    n.j.cox@durham.ac.uk
<p>
<p>
<b><u>Also see</u></b>
<p>
    On-line:  help for spell (if installed), <b>spellutil</b> (spellsplit, 
             spellmerge, spell2panel) (if installed)
<p>
</pre>
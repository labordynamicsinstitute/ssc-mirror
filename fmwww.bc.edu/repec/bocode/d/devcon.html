<pre>
-------------------------------------------------------------------------------
help for <b>devcon</b>
-------------------------------------------------------------------------------
<p>
<b><u>Deviation contrast transformation for estimation results</u></b>
<p>
        <b>devcon</b> [ <b>,</b> <b><u>g</u></b><b>roups(</b><i>glist</i><b>)</b> <b><u>eq</u></b><b>uations(</b><i>numlist</i><b>)</b> <b>check</b>[<b>(</b><i>#</i><b>)</b>] <b><u>non</u></b><b>oise</b>
              <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> ]
<p>
    where <i>glist</i> is
<p>
        <i>varlist1</i> [<b>(</b><i>varname1</i><b>)</b>] [<b>,</b> <i>varlist2</i> [<b>(</b><i>varname2</i><b>)</b>] [<b>,</b> <i>...</i>] ]
<p>
<p>
<b><u>Description</u></b>
<p>
    A categorical regressor is usually included in a regression model using a
    set of 0/1 dummies differentiating the effects of the separate categories
    of the variable. A coefficient associated with such a dummy variable
    reflects the expected outcome difference between the represented category
    and some reference category. Since one of the categories serves as the
    reference category, only <i>k</i>-1 dummy variables are used for a <i>k</i>-category
    variable.
<p>
    <b>devcon</b> may be used to transform the coefficients of such 0/1 dummy
    variables so that they reflect deviations from the "grand mean" (in other
    words, the modified coefficients will sum up to zero over all categories)
    rather than deviations from the reference category. The transformed
    coefficients are equivalent to those obtained by using the so called
    "effects coding" for the dummy variables (see the <b>e</b> prefix in <b>xi3</b> or the
    <b>dev()</b> contrast in <b>desmat</b>; both packages are available from the SSC
    Archive). However, <b>devcon</b> reports coefficients for <i>all</i> categories
    (including the category that was used as the reference category in the
    original model) and modifies the model's constant accordingly (with the
    effects coding, the coefficient of one of the categories is "hidden" in
    the constant). Furthermore, the coding of the underlying dummy variables
    is still 0/1 with <b>devcon</b>.
<p>
    The deviation contrast transformation is applied to the last (i.e.
    currently active) estimates. Use the <b>groups()</b> option to define the
    group(s) of dummy variables. <b>devcon</b> specified without the <b>groups()</b> option
    may be used to redisplay estimates that have already been transformed by
    <b>devcon</b>. The <b>devcon</b> routine will work after most estimation commands (see
    help estcom). Multiple equation models are supported. Use the <b>equations()</b>
    option to specify the equation(s) to be transformed. Note that <b>devcon</b>
    also transforms the variance-covariance matrix of the estimates and that
    the usual post estimation commands such as predict or test may be used
    with the transformed estimates.
<p>
    The <b>devcon</b> command has two main benefits. First, it may be very
    convenient to use <b>devcon</b> to quickly display the deviation contrasts
    without having to change the coding of the variables and without having
    to take further action to make the reference category's coefficient
    visible. Second, the transformed estimates may be valuable for use with
    some post-estimation procedures. In fact, <b>devcon</b> was originally developed
    for use with with the Oaxaca-Blinder decomposition (see help oaxaca if
    installed; the package is available from the SSC Archive, type 
    ssc describe oaxaca).  In this decomposition, the results for categorical
    variables depend on the choice of the reference category (see, e.g.,
    Oaxaca and Ransom 1999). Applying the deviation contrast transformation
    to the estimates before conducting the decomposition is one solution to
    this problem (see Yun 2003).
<p>
<i>Technical note</i>
<p>
    The deviation contrast transform can also be applied to the variables
    used to model an interaction between a categorical and a continuous
    variable. The relevant continuous variable must be provided in
    parentheses within the <b>groups()</b> option in such a case.
<p>
<p>
<b><u>Options</u></b>
<p>
    <b>groups(</b><i>glist</i><b>)</b> defines the dummy-variable groups.  If more than one group
        is specified, use commas to separate the groups.  Note that in each
        of the groups a variable reflecting the reference category must be
        specified (i.e. the variable must exist in the data). If the
        variables in a group represent interactions with a continuous
        variable, specify the continuous variable in parentheses at the end
        of the group. The usual shorthand conventions apply to the <i>varlist</i>s
        specified in <i>glist</i> (see help varlist).
<p>
    <b>equations(</b><i>numlist</i><b>)</b> is relevant only for multiple-equation models. It
        specifies the equation(s) to be transformed.  Use numbers to refer to
        the equations' positions in the model (<b>1</b> for the first equation, <b>2</b>
        for the second, and so on). The usual shorthand conventions apply to
        <i>numlist</i> (see help numlist). The default is <b>equations(1)</b>.
<p>
    <b>check</b>[<b>(</b><i>#</i><b>)</b>] checks the integrity of the normalized estimates by verifying
        that the linear predictions from the original estimates and the
        normalized estimates are equal for all observations in the estimation
        sample. If the results do not pass the check, an error message is
        issued and no results are returned. By default, the check is
        performed using the models's first equation. To use another equation,
        specify its number in parentheses. A failed check indicates that the
        dummy variables used are not well defined (i.e. that the indicated
        groups overlap or that at least one group has been omitted). In rare
        cases, however, the results might fail the check even though the
        dummy variables have been correctly defined (<b>devcon</b> uses the
        information in <b>e(sample)</b> and, if available, <b>e(subpop)</b> to determine
        the sample of relevant cases; situations may arise in which the
        sample would have to be narrowed further).
<p>
    <b>nonoise</b> suppresses the display of the transformed estimates.
<p>
    <b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent terms, for the
        confidence intervals of the coefficients; see help level.
<p>
<p>
<b><u>Example</u></b>
<p>
    Standard application with one categorical variable ...
<p>
        . sysuse auto
        . generate rep1 = rep78 &lt;= 3 if rep78 &lt; .
        . generate rep2 = rep78 == 4 if rep78 &lt; .
        . generate rep3 = rep78 == 5 if rep78 &lt; .
        . logit foreign mpg rep2 rep3, nolog
        . devcon, groups(rep1 rep2 rep3)
<p>
    ... and interactions with a continuous variable:
<p>
        . generate mpgrep1 = mpg * rep1
        . generate mpgrep2 = mpg * rep2
        . generate mpgrep3 = mpg * rep3
        . logit foreign mpg rep2 rep3 mpgrep2 mpgrep3, nolog
        . devcon, groups(rep1 rep2 rep3, mpgr* (mpg))
<p>
    Transforming OLS estimates for use with the Blinder-Oaxaca decomposition
    (<b>oaxaca</b> is available from the SSC Archive):
<p>
        . reg lnwage educ expr expr2 single divorced if female==0
        . devcon , groups(married single divorced)
        . estimates store male
        . reg lnwage educ expr expr2 single divorced if female==1
        . devcon , groups(married single divorced)
        . estimates store female
        . oaxaca male female, detail
        
<p>
<b><u>Methods and Formulas</u></b>
<p>
    Consider the model
<p>
        y = a + b_1*D_1 + b_2*D_2 + e
<p>
    where "a" is the constant and "e" is the error. D_1 and D_2 are two 0/1
    dummy variables representing a polytomous variable with three categories.
    Alternatively, the above equation can be formulated as
<p>
        y = a + b_1*D_1 + b_2*D_2 + b_3*D_3 + e
<p>
    with b_3 constrained to zero and D_3 being the indicator for the
    (omitted) reference category. Now define c as
<p>
        c = (b_1 + b_2)/3
<p>
    and let
<p>
        a'   = a + c
        b_1' = b_1 - c
        b_2' = b_2 - c
        b_3' = b_3 - c = -c
<p>
    <b>devcon</b> then reports the equation
<p>
        y = a' + b_1'*D_1 + b_2'*D_2 + b_3'*D_3 + e
<p>
    More generally,
<p>
        c = (b_1 + b_2 + ... + b_{k-1}) / k
<p>
    for a k-category variable.
<p>
    The transformation can also be applied to interaction terms. Consider the
    model
<p>
        y = a + b_1*DX_1 + b_2*DX_2 + d*X + e
<p>
    where X is a continuous variable and DX_1 and DX_2 are the interaction
    terms, i.e. DX_1 = D_1*X and DX_2 = D_2*X. The deviation contrast
    transformation is then
<p>
        y = a + b_1'*DX_1 + b_2'*DX_2 + b_3'*DX_3 + d'*X + e
<p>
    where
<p>
        b_1' = b_1 - c
        b_2' = b_2 - c
        b_3' = b_3 - c = -c
        d'   = d + c
<p>
    <b>devcon</b> also transforms the variance-covariance matrix of the
    coefficients, applying the general formula for the variances and
    covariances of weighted sums of random variables (see Mood et al.
    1974:179).
<p>
<p>
<b><u>References</u></b>
<p>
    Mood, A.M., F.A. Graybill, D.C. Boes (1974). Introduction to the Theory
        of Statistics, 3. edn. New York: McGraw-Hill.
    Oaxaca, R.L., Ransom, M.R.  (1999). Identification in Detailed Wage
        Decompositions.  The Review of Economics and Statistics 81: 154-157.
    Yun, M.-S. (2003). A Simple Solution to the Identification Problem in
        Detailed Wage Decompositions. IZA Discussion Paper No. 836.
<p>
<p>
<b><u>Author</u></b>
<p>
    Ben Jann, ETH Zurich, jann@soz.gess.ethz.ch
<p>
<p>
<b><u>Also see</u></b>
<p>
</pre>
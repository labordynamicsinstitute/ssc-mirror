<pre>
-------------------------------------------------------------------------------
help for <b>distrate</b> 
-------------------------------------------------------------------------------
<p>
<b><u>Directly standardized rates with improved confidence interval</u></b>
<p>
    <b>distrate</b> <i>casevar</i> <i>popvar</i> <b>using</b> <i>filename</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] ,
          <b><u>stand</u></b><b>strata(</b><i>stratavars</i><b>)</b> [<b>by(</b><i>varlist</i><b>)</b> <b>popstand(</b><i>varname</i><b>)</b>
          <b><u>li</u></b><b>st(</b><i>varlist</i><b>)</b> <b>sepby(</b><i>varlist</i><b>)</b> <b><u>f</u></b><b>ormat(%</b><i>fmt</i><b>)</b> <b>formatn(</b><i>#</i><b>)</b> <b>mult(</b><i>#</i><b>)</b>
          <b><u>l</u></b><b>evel(</b><i>#</i><b>)</b> <b>dobson</b> <b><u>sa</u></b><b>ving(</b><i>filename</i>[<b>,replace</b>]<b>)</b> <b><u>pre</u></b><b>fix(</b><i>string</i><b>)</b>
          <b><u>post</u></b><b>fix(</b><i>string</i><b>)</b> ]
<p>
<p>
<p>
<b><u>Description</u></b>
<p>
<b>distrate</b> estimates directly standardized rates and confidence intervals based
on the gamma distribution as proposed by Fay and Feuer (1997). Tiwari, Clegg
and Zou (2006) modified the formula of the upper confidence limit showing by
simulations that this modified gamma confidence interval performs better than
the gamma interval of Fay and Feuer and the other intervals.  This method
produces valid confidence intervals even when the number of cases is very
small.
<p>
<p>
Data must be in aggregate form, i.e. each record must contain the total number
of deaths (or events) and population for each stratum as follows
<p>
                        <b>Age strata     death        pop</b>
                   ----------------------------------------
                         <b>   0-44        164       47346</b>
                        <b>   45-54        143       83173</b>
                        <b>   55-64        202      186108</b>
                        <b>   65-74        208      322065</b>
                        <b>     75+        283      362051</b>
                   ----------------------------------------
<p>
<p>
<p>
<b>using</b> <i>filename</i> specifies a file containing standard population weigths,
typically stratified by age and optionally by other variables. This file must
be sorted by the variable specified in <b>standstrata()</b>
<p>
<p>
<p>
<p>
<b><u>Options</u></b>
<p>
<b><u>stand</u></b><b>strata(</b><i>stratavars</i><b>)</b> specifies the variables defining strata across which to
    average stratum-specific rates. These variables must be present in the
    study population and in the standard population file. This is most often a
    unique variable containing age categories.
<p>
<p>
<b>by(</b><i>varlist</i><b>)</b> produces directly standard rates for each group identified by equal
    values of the <b>by()</b> variables taking on integer or string values.
<p>
<p>
<b>popstand(</b><i>varname</i><b>)</b> specifies the variable in the using file that contains the
    standard population weights. If not specified <b>distrate</b> assumes that it is
    named as <i>popvar</i> in the study population.
<p>
<p>
<b>list(</b><i>varlist</i><b>)</b> specifies the variables to be listed.
<p>
<p>
<b>sepby(</b><i>varlist</i><b>)</b> draws a separator line whenever <i>varlist</i> values change.
<p>
<p>
<b><u>f</u></b><b>ormat(%</b><i>fmt</i><b>)</b> specifies the format for variables containing the estimates.
<p>
<p>
<b>formatn(</b><i>#</i><b>)</b> specifies the <i>#</i> of digits for the format of the N <i>(population)</i>
    variable.
<p>
<p>
<b>mult(</b><i>#</i><b>)</b> specifies the units to be used in reported results. For example, if the
    mortality rate is 0.00526, specifying mult(1000) it will be reported as
    5.26.
<p>
<p>
<b>dobson</b> displays Dobson, Kuulasmaa, Eberle and Scherer confidence limits.
<p>
<p>
<b>level(</b><i>#</i><b>)</b> specifies the confidence level, in percent, for the confidence
    interval of the adjusted rate; see help level.
<p>
<p>
<b><u>sa</u></b><b>ving(</b><i>filename</i>[<i>,replace</i>]<b>)</b> allows to save the estimates in a file.
<p>
<p>
<b><u>pre</u></b><b>fix(</b><i>string</i><b>)</b> <i>or</i> <b><u>post</u></b><b>fix(</b><i>string</i><b>)</b> adds a prefix or a suffix to the variable
    names when the estimates are saved.
<p>
<p>
<p>
<b><u>Example</u></b>
<p>
            use "C:\Data\SuffolkCounty.dta", clear
            collapse (sum) deaths pop,by(cindpov agegr)
<p>
            distrate deaths pop using year2000st, stand(agegr) by(cindpov)
                    mult(100000)
<p>
<p>
Further options
<p>
            distrate deaths pop using year2000st, stand(agegr) by(cindpov)
                    saving(DirectSuffolk,replace) format(%8.2f) mult(100000)
                    level(90) list(rateadj lb_gam ub_gam se_gam)
<p>
<p>
<p>
Downloading ancillary files in one of your <b>`"`c(adopath)'"'</b> directory you can
run this example.
<p>
          <i>(</i><i>click to run</i><i>)</i>
<p>
<p>
<p>
<b><u>Saved results</u></b>
<p>
    <b>distrate</b> saves the following in <b>r()</b>:
<p>
    Scalars        
      <b>r(k)</b>                number of groups identified by distinct values of
                            the by() variables
<p>
    Matrices       
      <b>r(Nobs)</b>             1 x k vector of study population
      <b>r(NDeath)</b>           1 x k vector of number of events
      <b>r(crude)</b>            1 x k vector of crude rates
      <b>r(adj)</b>              1 x k vector of adjusted rates
      <b>r(lb_G)</b>             1 x k vector of lower bound of Tiwari adjusted
                            rates
      <b>r(ub_G)</b>             1 x k vector of upper bound of Tiwari adjusted
                            rates
      <b>r(se_gam)</b>           1 x k vector of standard error of adjusted rates
      <b>r(lb_D)</b>             1 x k vector of lower bound of Dobson adjusted
                            rates
      <b>r(ub_D)</b>             1 x k vector of upper bound of Dobson adjusted
                            rates
<p>
<p>
<p>
<b><u>Authors</u></b>
<p>
Enzo Coviello (enzo.coviello@tin.it)
<p>
<p>
<b><u>References</u></b>
<p>
Fay MP, Feuer EJ. Confidence intervals for directly standardized rates: a
method based on the gamma distribution.<i>  Statistics in Medicine</i> 1997;
16:791-801.
<p>
Tiwari RC, Clegg LX, Zou Z. Efficient interval estimation for age-adjusted
cancer rates.<i>  Statistical Methods in Medical Research</i> 2006; 15: 547-569.
<p>
Public Health Disparities Geocoding Project Monograph.  CASE EXAMPLE: Analysis
of all cause mortality rates in Suffolk County, Massachusetts, 1989-1991, by CT
poverty strata
<p>
<p>
<b><u>Also see</u></b>
<p>
</pre>
<pre>
-------------------------------------------------------------------------------
help for <b>dfl</b>                                                 Joao Pedro Azevedo
-------------------------------------------------------------------------------
<p>
<p>
<b><u>DiNardo, Fortin and Lemieux Counterfacual Kernel Density</u></b>
<p>
<p>
        <b>dfl</b> <i>depvar</i> <i>indepvars</i> [<b>if</b><i> exp</i>] [<b>in</b><i> range</i>] <b>,</b> <b>outcome(</b><i>varname</i><b>)</b>
            [<b>group(</b><i>varname</i><b>)</b> <b>min(</b><i>integer</i><b>)</b> <b>max(</b><i>integer</i><b>)</b> <b>nbins(</b><i>integer</i><b>)</b>
            <b>w(</b><i>bandwidth</i><b>)</b> <b>step(</b><i>varlist</i><b>)</b> <b>adaptive</b> <b>gauss</b> <b>epan</b> <b>oaxaca</b> <b>quietly</b>
            <b>probit</b> <b>nxvar(</b><i>string</i><b>)</b> <b>ncfactual(</b><i>string</i><b>)</b> <b>nufactual(</b><i>string</i><b>)</b>
            <b>nfactual(</b><i>string</i><b>)</b> <i>graph_combine</i> <i>axis_selection_options</i> 
            <i>axis_scale_options</i> <i>title_options</i> <b>nogroupt</b> <b>name3(</b><i>string</i><b>)</b>]
<p>
<b><u>Description</u></b>
<p>
<p>
    <b>dfl</b> estimates DiNardo, Fortin and Lemieux Counterfacual Kernel Densities.
    Treatment status is identified by depvar==1 for the treated and depvar==0
    for the untreated observations.
<p>
    The propensity score - the conditional treatment probability - is
    estimated by the program on the indepvars.
<p>
    <b>outcome</b> variable has to be specified.
<p>
    <b>dfl</b> also support graph options such as <i>graph_combine</i>, <i>title_options</i> and 
    <i>axis_selection_options</i>.
<p>
    Several different weight can be used on this procedure. In this ado we
    use the following weight.  Weight=1-Prob(Depvar=1)/Prob(Depvar=0).
<p>
<b><u>Options</u></b>
<p>
    <b>group</b> the group variable.
<p>
    <b>graph</b> cfactual (compares the (Depvar=0) distribution to the (Depvar=0)
    distribution that would have prevailed if they had been paid like
    (Depvar=1)) , ufactual (compares the (Depvar=1) distribution to the
    counterfactual.  These will be different to the extent that the X's of
    the two groups differ) and diff (difference between the how (Depvar=0)
    distribution that would have prevailed if they had been paid like
    (Depvar=1) and (Depvar=1) distribution).
<p>
    <b>min</b> sets the minimum value. When omited <b>dfl</b> uses the minimum value of the
    specified outcome.
<p>
    <b>max</b> sets the maximum value. When omited <b>dfl</b> uses the maximum value of the
    specified outcome.
<p>
    <b>nbins</b> number of equaly spaced intervals.Default value 200.
<p>
    <b>adaptive</b> produces density estimates using adaptive kernel estimation
    methods.  Please note that the method is slower than than the default
    one.
<p>
    <b>step</b> Sequential decomposition. This option runs N+1 models (N being the
    number of variables in the varlist). The first model will consider all
    variables. Each subsequent model will remove one variable at the time.
    The final output is a single graph with overlaying kernel density
    differences for the N+1 models. My impression is that if N&gt;2 the figure
    gets very clutered.
<p>
    <b>gauss</b> specify the kernel (gaussian).
<p>
    <b>epan</b> specify the kernel (epanechnikov).
<p>
    <b>oaxaca</b> compute mean using the estimated density to and compare to the
    actual mean of log wages or oaxaca wages (the predicted values).
<p>
    <b>quietly</b> do not print output of propensity score estimation.
<p>
    <b>probit</b> use probit instead of the default logit to estimate the propensity
    score.
<p>
    <b>nxvar</b> assign a label to the x-axis.
<p>
    <b>ncfactual</b> assign a label to cfactual.
<p>
    <b>nfactual</b> assign a label to factual.
<p>
    <b>nufactual</b> assing a label to ufactual.
<p>
    <b>nogroupt</b> drops the group names from the figure.
<p>
<b><u>Examples</u></b>
<p>
    . webuse nlsw88, clear
    . g ttl_exp2 = ttl_exp^2
    . g lwage = log(wage)
    . dfl union ttl_exp ttl_exp2 married grade , outcome(lwage)
    . dfl union ttl_exp ttl_exp2 married grade , outcome(lwage) w(.05)
    . dfl union ttl_exp ttl_exp2 married grade , outcome(lwage) adaptive
    . dfl union ttl_exp ttl_exp2 married grade , outcome(lwage) step(tenure
        collgrad)
<p>
<b><u>References</u></b>
<p>
<p>
    DiNardo, J., N.M. Fortin, and T.Lemieux (1996) "Labour Market Insitutions
        and the Distribution of Wages, 1973-1992: A Semiparametric Approach,"
        <i>Econometrica</i>, 64(5): 1001-1044.
<p>
    Van Kerm, P. (2003) "Adaptive kernel density estimation."<i>The Stata</i>
        <i>Journal</i> , 3(2): 148-156.
<p>
<p>
<b><u>Author</u></b>
<p>
    Joao Pedro Azevedo, World Bank, jazevedo@worldbank.org
<p>
<b><u>Aknowledgements</u></b>
<p>
    This ado uses part of the code written by John DiNardo.
    I would like to thank some Stata users who have made comments to an
    earlier release of this ado, in particular Jean Ries.
    The usual disclaimer applies.
<p>
<p>
<b><u>Also see</u></b>
<p>
    Manual:  <b>[R] kdensity</b>
    Online:  help for kdensity and help for akdensity and decompose and jmp
                   if installed.
</pre>
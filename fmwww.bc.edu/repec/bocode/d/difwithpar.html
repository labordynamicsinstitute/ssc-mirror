<pre>
-------------------------------------------------------------------------------
help for <b>difwithpar</b>                                             (Sept 26, 2012)
-------------------------------------------------------------------------------
<p>
<b><u>Description</u></b>
<p>
<b>Detection of and adjustment for differential item functioning (DIF):</b>
    Identifies differential item functioning, creates dummy/virtual items to
    be used to adjust ability or trait estimates in PARSCALE, writes the code
    and data file needed to process the updated item list in PARSCALE, runs
    PARSCALE, and merges the ability estimates and standard errors into the
    original data set.
<p>
    <b>difwithpar</b><i> varlist</i> <b>,</b> <b>ID</b><i>(var)</i> <b>RUnname</b><i>(str)</i> <b>ABility</b><i>(var)</i> <b>GRoup</b><i>(var)</i> [<b>NUL</b><i>(#)</i>
            <b>NUW</b><i>(#)</i> <b>NUPValue</b><i>(#)</i> <b>UBeta</b><i>(#)</i> <b>UBCH</b><i>(#)</i> <b>UL</b><i>(#)</i> <b>ULPValue</b><i>(#)</i> <b>UW</b><i>(#)</i>
            <b>UWPValue</b><i>(#)</i> <b>MULtinomial</b><i>(var)</i> <b>minsize</b><i>(#)</i> <b>SCale</b><i>(#)</i> <b>CYcles</b><i>(#)</i>
            <b>NQpt</b><i>(#)</i> <b>cleanup</b><i>(#)</i>]
<p>
    where:
<p>
        <i>varlist</i> is the list of variables (items, blocks) to be tested for DIF
<p>
        <i>id</i> is the subject id variable.
<p>
        <i>runname</i> is the name of the Parscale run to be generated.
            code_<i>runname</i>.psl will be the Parscale input file, and
            data_<i>runname</i>.txt will be the Parscale data file.  The results
            will also go to DfP_<i>runname</i>.log
<p>
        <i>ability</i> is an ability or trait variable.
<p>
        <i>group</i> is a <i>binary</i> grouping variable.
<p>
<b><u>Options</u></b>
<p>
        <b>multinomial</b> is a multinomial grouping variable.
<p>
        <b>nul</b> indicates whether the log-likelihood test will be used as a
            criterion for non-uniform DIF.  Default is yes (1).  Nul(0) will
            omit this criterion.
<p>
        <b>nuw</b> indicates whether the Wald test for the interaction term will be
            used as a criterion for non-uniform DIF.  Default is no (0).
            Nuw(1) will include this criterion.
<p>
        <b>nupvalue</b> is the p-value for testing non-uniform DIF.  Default is
            0.05.
<p>
        <b>ubeta</b> indicates whether the change in the ability coefficient will be
            used as a criterion for uniform DIF.  Default is yes (1).
            UBeta(0) will omit this criterion.
<p>
        <b>ubch</b> is percent change in the ability coefficient for determining
            uniform DIF.  Default is .10. A positive change indicates an
            increase in the relationship between ability and the outcome with
            a higher value of the grouping variable.
<p>
        <b>ul</b> indicates whether the log-likelihood test will be used as a
            criterion for uniform DIF.  Default is no (0).  UL(1) will
            include this criterion.
<p>
        <b>ulpvalue</b> is the p-value for testing uniform DIF with the
            log-likelhood method.  Default is 0.05.
<p>
        <b>uw</b> indicates whether the Wald test for the group term will be used as
            a criterion for uniform DIF.  Default is no (0).  UW(1) will
            include this criterion.
<p>
        <b>uwpvalue</b> is the p-value for testing uniform DIF with the Wald test.
            Default is 0.05.
<p>
        <b>minsize</b> is the minimum number of observations/category (default is
            20)
<p>
        <b>scale</b> - changes the scale parameter from the default of 1.7.
<p>
        <b>nqpt</b> - changes the number of quadrature points from a default of 11.
<p>
        <b>cycles</b> - changes the maximun number of iterations in PARSCALE stage 2
            from the default of 1000.
<p>
        <b>cleanup(1)</b> deletes the PARSCALE files when the merge is completed.
<p>
<p>
<b><u>Remarks</u></b>
<p>
        Sends DIF results to DIFd<i>runname</i>.log.
<p>
        Generates an output data set, DIFdetect.dta, which includes
            individual model results, with Brant test p-values for ordinal
            items and Hosmer-Lemeshow p-values for binary items.  [The
            relevance of the fit statistics has not been established for
            DIF.]
<p>
        Creates dummy/virtual items to be used to adjust ability scores for
            DIF in PARSCALE.  These items will be of the form <i>item</i>group<i>x</i>,
            where <i>x</i> = 1 represents the lower value of <i>group</i>, and <i>x</i> = 2 the
            higher.  For example, if item <i>item1</i> had DIF by <i>ethnic</i>, the
            virtual items will be <i>item1ethnic1</i> and <i>item1ethnic2</i>.  You can
            merge these virtual items into your data set using <b>mergevirtual</b>.
<p>
        Displays warning messages when models do not converge, collinearity
            problems are observed, models are completely determined, standard
            errors are large, Brant tests are not possible, or items have &gt;
            15 levels (PARSCALE will reject).
<p>
        Collapses categories on variables for which the number of
            observations is below a specified threshold (default is
            minszie(20)).  If you do not want any categories combined,
            specify minsize(1).
<p>
        Drops any variable that does not have enough observations for at
            least 2 categories, and displays a warning message.
<p>
        Automatically makes letter codes for item values 10-15.
<p>
        Allows missing values.
<p>
        Allows character or numeric ID's up to 9 digits.
<p>
        Creates a numeric, 12-digit ID code for Parscale by adding
            1,000,000,000 to the ID, first converting string IDs to a unique
            number if needed.
<p>
        Please make sure that Stata's current working directory is the same
            as your data's directory (help cd).
<p>
        Default Parscale instructions are:
<p>
            &gt;CALIB GRADED, LOGISTIC, SCALE=1.7, NQPT=11, CYCLES=1000,
            CRIT=.001
<p>
            &gt;SCORE EAP
<p>
            If you want to change anything but the scale and cycles, you can
            edit the .PSL file or this program before running it.
<p>
        Maximum number of items is 230.
<p>
        If you will be adjusting for DIF on multiple categories (groups),
            subdividing can lead to dummy/virtual item names longer than the
            31 character limit.  Our tip is to generate a new grouping
            variable with a really short name.  For example, .gen g=gender
<p>
            Otherwise you may get an error message about a variable already
            being defined or being too long, and end up having to rename long
            variables within Stata.
<p>
        Written for Stata 8.2.
<p>
<p>
<b><u>Examples</u></b>
<p>
    difwithpar item1-item13, id(id) ru(gender0) ab(theta0) gr(g)
<p>
    difwithpar apple - item11, id(id) ru(ethnic0) ab(itemtot) gr(eth)
        nupv(0.01) ul(1) ulpv(.01) itemsub(1) minsize(35) cleanup(1)
<p>
<p>
<b><u>Authors</u></b>
<p>
    Paul Crane, Laura Gibbons, Lance Jolley, and Gerald van Belle.
    University of Washington, Copyright 2005.
    Email:  gibbonsl@u.washington.edu
<p>
    We appreciate the assistance of Tom Koepsell and Rich Jones.
<p>
<b><u>Also see</u></b>
<p>
    <b>difd</b>, <b>runparscale</b>, <b>prepar</b>, and <b>mergevirtual</b>.
<p>
The PARSCALE website is http://www.ssicentral.com 
<p>
</pre>
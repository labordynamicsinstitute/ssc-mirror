<pre>
-------------------------------------------------------------------------------
help for <b>dpplot7</b>
-------------------------------------------------------------------------------
<p>
<b><u>Density probability plots</u></b> 
<p>
        <b>dpplot7</b> <i>varname</i> [<b>if</b> <i>exp</i>] [<b>in</b> <i>range</i>] [ <b>,</b> <b>a(</b><i>#</i><b>)</b> <b>dist(</b><i>name</i><b>)</b> <b>param(</b><i>numlist</i><b>)</b>
                <i>graph_options</i> ]
<p>
<p>
<b><u>Description</u></b>
<p>
<b>dpplot7</b> plots density probability plots for <i>varname</i> given a reference
distribution, by default normal (Gaussian).
<p>
Note: <b>dpplot7</b> is the original version, written for Stata 7, of <b>dpplot</b>. Users of
Stata 8 or later should switch to <b>dpplot</b>.
<p>
<p>
<b><u>Remarks</u></b>
<p>
To establish notation, and to fix ideas with a concrete example: consider an
observed variable Y, whose distribution we wish to compare with a normally
distributed variable X. That variable has density function f(X), distribution
function P = F(X) and quantile function X = Q(P). (The distribution function
and the quantile function are inverses of each other.) Clearly, this notation
is fairly general and also covers other distributions, at least for continuous
variables.
<p>
The particular density function f(X | parameters) most pertinent to comparison
with data for Y can be computed given values for its parameters, either
estimates from data on Y, or parameter values chosen for some other good
reason. In the case of a normal distribution, these parameters would usually be
the mean and the standard deviation. Such density functions are often
superimposed on histograms or other graphical displays.  In Stata, <b>graph,</b>
<b>histogram</b> has a <b>normal</b> option which adds the normal density curve corresponding
to the mean and standard deviation of the data shown.
<p>
The density function can also be computed indirectly via the quantile function
as f(Q(P)). For example, if P were 0.5, then f(Q(0.5)) would be the density at
the median. In practice P is calculated as so-called plotting positions p_i
attached to values y_(i) of a sample of Y of size n which have rank i: that is,
the y_(i) are the order statistics y_(1) &lt;= ... &lt;= y_(n). One simple rule uses
p_i = (i - 0.5) / n.  Most other rules follow one of a family (i - a) / (n - 2a
+ 1) indexed by a.
<p>
Plotting both f(X | parameters) and f(Q(P = p_i)), calculated using plotting
positions, versus observed Y gives two curves. In our example, the first is
normal by construction and the second would be a good estimate of a normal
density if Y were truly normal with the same parameters. In terms of Stata
functions, the two curves are based on <b>normden(</b>(X - mean) / SD)<b>)</b> and
<b>normden(invnorm(</b>p_i<b>))</b>. The match or mismatch between the curves allows
graphical assessment of goodness or badness of fit. What is more, we can use
experience from comparing frequency distributions, as shown on histograms, dot
plots or other similar displays, in comparing or identifying location and scale
differences, skewness, tail weight, tied values, gaps, outliers and so forth.
<p>
Such <i>density probability plots</i> were suggested by Jones and Daly (1995).  They
are best seen as special-purpose plots, like normal quantile plots and their
kin, rather than general-purpose plots, like histograms or dot plots.
<p>
Extending the discussion in Jones and Daly (1995), the advantages (+) and
limitations (-) of these plots include
<p>
    +1. No choices of binning or origin (cf. histograms, dot plots, etc.) or of
    kernel or of degree of smoothing (cf. density estimation) are required.
<p>
    +2. Some people find them easier to interpret than quantile-quantile plots.
<p>
    +3. They work well for a wide range of sample sizes. At the same time, as
    with any other method, a sample of at least moderate size is preferable
    (one rule of thumb is &gt;= 25).
<p>
    +4. If X has bounded support in one or both directions, then this should be
    clear on the plot.
<p>
    -1. Results may be difficult to decipher if observed and reference
    distributions differ in modality. For example, if the reference
    distribution is unimodal but the observed data hint at bimodality,
    nevertheless f(Q(P)) must be unimodal even though f(Y) may not be.
    Similarly, when the reference distribution is exponential, then f(Q(P))
    must be monotone decreasing whatever the shape of f(Y).
<p>
    -2. It may be difficult to discern subtle differences in one or both tails
    of the observed and reference distributions.
<p>
    -3. Comparison is of a curve with a curve: some people argue that graphical
    references should where possible be linear (and ideally horizontal). (A
    linear reference is a clear advantage of quantile plots.)
<p>
    -4. There is no simple extension to comparison of two samples with each
    other.
<p>
Programmers may wish to inspect the code and add code for other distributions.
If parameters are not estimated, then naturally their values must be supplied:
the order of parameters should seem natural or at least conventional.
<p>
<p>
<b><u>Options</u></b>
<p>
<i>graph_options</i> are options of <b>graph, twoway</b>.  The defaults include <b>gap(4)</b>
    <b>symbol(oi) connect(.s) l1title("Probability density") xla yla</b>.
<p>
<b>a()</b> specifies a family of plotting positions, as explained above. The default
    is 0.5. Choice of <b>a</b> is rarely material unless the sample size is very
    small, and then the exercise is moot whatever is done.
<p>
<b>dist()</b> specifies a distribution to act as a reference. In this preliminary
    version, the distributions allowed are <b>exponential</b> and <b>normal</b>, the latter
    being the default. <b>Gaussian</b> is a synonym for <b>normal</b>. Abbreviations down to
    at least three letters (e.g. <b>exp</b>, <b>nor</b>) are allowed.
<p>
<b>param()</b> specifies parameter values which give reference distributions;
    specifications override parameters estimated from the data.
<p>
    With <b>dist(normal)</b> up to two parameters may be specified. The first is the
    mean and the second is the standard deviation.
<p>
    With <b>dist(exponential)</b> one parameter may be specified, namely the mean.
<p>
 
<b><u>Examples</u></b>
<p>
    . dpplot7 mpg
<p>
    . set obs 1000
    . gen rnd = invnorm(uniform())
    . dpplot7 rnd, param(0 1)
<p>
<p>
<b><u>Author</u></b>
<p>
    Nicholas J. Cox, University of Durham, U.K.  
    n.j.cox@durham.ac.uk
<p>
<p>
<b><u>References</u></b> 
<p>
Jones, M.C. and F. Daly. 1995. Density probability plots.  <i>Communications in</i>
<i>Statistics, Simulation and Computation</i> 24: 911-927.
<p>
<p>
<b><u>Also see</u></b>
<p>
On-line:  help for graph, diagplots
  
</pre>